var Ds=Object.defineProperty;var ts=e=>{throw TypeError(e)};var Is=(e,s,i)=>s in e?Ds(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i;var In=(e,s,i)=>Is(e,typeof s!="symbol"?s+"":s,i),vr=(e,s,i)=>s.has(e)||ts("Cannot "+i);var tt=(e,s,i)=>(vr(e,s,"read from private field"),i?i.call(e):s.get(e)),Yt=(e,s,i)=>s.has(e)?ts("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,i),Zt=(e,s,i,a)=>(vr(e,s,"write to private field"),a?a.call(e,i):s.set(e,i),i),Wt=(e,s,i)=>(vr(e,s,"access private method"),i);var Jn=(e,s,i,a)=>({set _(o){Zt(e,s,o,i)},get _(){return tt(e,s,a)}});(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=i(o);fetch(o.href,c)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var s=e.default;if(typeof s=="function"){var i=function a(){return this instanceof a?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};i.prototype=s.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var o=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:function(){return e[a]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(e){return e===null||typeof e!="object"?null:(e=z$1&&e[z$1]||e["@@iterator"],typeof e=="function"?e:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(e,s){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")};E$1.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(e,s,i){this.props=e,this.context=s,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(e,s,i){var a,o={},c=null,d=null;if(s!=null)for(a in s.ref!==void 0&&(d=s.ref),s.key!==void 0&&(c=""+s.key),s)J.call(s,a)&&!L$1.hasOwnProperty(a)&&(o[a]=s[a]);var j=arguments.length-2;if(j===1)o.children=i;else if(1<j){for(var h=Array(j),g=0;g<j;g++)h[g]=arguments[g+2];o.children=h}if(e&&e.defaultProps)for(a in j=e.defaultProps,j)o[a]===void 0&&(o[a]=j[a]);return{$$typeof:l$1,type:e,key:c,ref:d,props:o,_owner:K$1.current}}function N$1(e,s){return{$$typeof:l$1,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}function O$1(e){return typeof e=="object"&&e!==null&&e.$$typeof===l$1}function escape$1(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return s[i]})}var P$1=/\/+/g;function Q$1(e,s){return typeof e=="object"&&e!==null&&e.key!=null?escape$1(""+e.key):s.toString(36)}function R$1(e,s,i,a,o){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=e,o=o(d),e=a===""?"."+Q$1(d,0):a,I$1(o)?(i="",e!=null&&(i=e.replace(P$1,"$&/")+"/"),R$1(o,s,i,"",function(g){return g})):o!=null&&(O$1(o)&&(o=N$1(o,i+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(P$1,"$&/")+"/")+e)),s.push(o)),1;if(d=0,a=a===""?".":a+":",I$1(e))for(var j=0;j<e.length;j++){c=e[j];var h=a+Q$1(c,j);d+=R$1(c,s,i,h,o)}else if(h=A$1(e),typeof h=="function")for(e=h.call(e),j=0;!(c=e.next()).done;)c=c.value,h=a+Q$1(c,j++),d+=R$1(c,s,i,h,o);else if(c==="object")throw s=String(e),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(e,s,i){if(e==null)return e;var a=[],o=0;return R$1(e,a,"","",function(c){return s.call(i,c,o++)}),a}function T$1(e){if(e._status===-1){var s=e._result;s=s(),s.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=s)}if(e._status===1)return e._result.default;throw e._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(e,s,i){S$1(e,function(){s.apply(this,arguments)},i)},count:function(e){var s=0;return S$1(e,function(){s++}),s},toArray:function(e){return S$1(e,function(s){return s})||[]},only:function(e){if(!O$1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(e,s,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=C$1({},e.props),o=e.key,c=e.ref,d=e._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,d=K$1.current),s.key!==void 0&&(o=""+s.key),e.type&&e.type.defaultProps)var j=e.type.defaultProps;for(h in s)J.call(s,h)&&!L$1.hasOwnProperty(h)&&(a[h]=s[h]===void 0&&j!==void 0?j[h]:s[h])}var h=arguments.length-2;if(h===1)a.children=i;else if(1<h){j=Array(h);for(var g=0;g<h;g++)j[g]=arguments[g+2];a.children=j}return{$$typeof:l$1,type:e.type,key:o,ref:c,props:a,_owner:d}};react_production_min.createContext=function(e){return e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:t,_context:e},e.Consumer=e};react_production_min.createElement=M$1;react_production_min.createFactory=function(e){var s=M$1.bind(null,e);return s.type=e,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(e){return{$$typeof:v$1,render:e}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:T$1}};react_production_min.memo=function(e,s){return{$$typeof:x,type:e,compare:s===void 0?null:s}};react_production_min.startTransition=function(e){var s=V$1.transition;V$1.transition={};try{e()}finally{V$1.transition=s}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(e,s){return U$1.current.useCallback(e,s)};react_production_min.useContext=function(e){return U$1.current.useContext(e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(e){return U$1.current.useDeferredValue(e)};react_production_min.useEffect=function(e,s){return U$1.current.useEffect(e,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(e,s,i){return U$1.current.useImperativeHandle(e,s,i)};react_production_min.useInsertionEffect=function(e,s){return U$1.current.useInsertionEffect(e,s)};react_production_min.useLayoutEffect=function(e,s){return U$1.current.useLayoutEffect(e,s)};react_production_min.useMemo=function(e,s){return U$1.current.useMemo(e,s)};react_production_min.useReducer=function(e,s,i){return U$1.current.useReducer(e,s,i)};react_production_min.useRef=function(e){return U$1.current.useRef(e)};react_production_min.useState=function(e){return U$1.current.useState(e)};react_production_min.useSyncExternalStore=function(e,s,i){return U$1.current.useSyncExternalStore(e,s,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(e,s,i){var a,o={},c=null,d=null;i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(d=s.ref);for(a in s)m$1.call(s,a)&&!p$1.hasOwnProperty(a)&&(o[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps,s)o[a]===void 0&&(o[a]=s[a]);return{$$typeof:k,type:e,key:c,ref:d,props:o,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function s(_t,vt){var At=_t.length;_t.push(vt);e:for(;0<At;){var Nt=At-1>>>1,wt=_t[Nt];if(0<o(wt,vt))_t[Nt]=vt,_t[At]=wt,At=Nt;else break e}}function i(_t){return _t.length===0?null:_t[0]}function a(_t){if(_t.length===0)return null;var vt=_t[0],At=_t.pop();if(At!==vt){_t[0]=At;e:for(var Nt=0,wt=_t.length,pt=wt>>>1;Nt<pt;){var mt=2*(Nt+1)-1,Et=_t[mt],kt=mt+1,jt=_t[kt];if(0>o(Et,At))kt<wt&&0>o(jt,Et)?(_t[Nt]=jt,_t[kt]=At,Nt=kt):(_t[Nt]=Et,_t[mt]=At,Nt=mt);else if(kt<wt&&0>o(jt,At))_t[Nt]=jt,_t[kt]=At,Nt=kt;else break e}}return vt}function o(_t,vt){var At=_t.sortIndex-vt.sortIndex;return At!==0?At:_t.id-vt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,j=d.now();e.unstable_now=function(){return d.now()-j}}var h=[],g=[],$=1,ct=null,ut=3,lt=!1,dt=!1,ft=!1,at=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function it(_t){for(var vt=i(g);vt!==null;){if(vt.callback===null)a(g);else if(vt.startTime<=_t)a(g),vt.sortIndex=vt.expirationTime,s(h,vt);else break;vt=i(g)}}function nt(_t){if(ft=!1,it(_t),!dt)if(i(h)!==null)dt=!0,Ut(st);else{var vt=i(g);vt!==null&&Ft(nt,vt.startTime-_t)}}function st(_t,vt){dt=!1,ft&&(ft=!1,b(_e),_e=-1),lt=!0;var At=ut;try{for(it(vt),ct=i(h);ct!==null&&(!(ct.expirationTime>vt)||_t&&!et());){var Nt=ct.callback;if(typeof Nt=="function"){ct.callback=null,ut=ct.priorityLevel;var wt=Nt(ct.expirationTime<=vt);vt=e.unstable_now(),typeof wt=="function"?ct.callback=wt:ct===i(h)&&a(h),it(vt)}else a(h);ct=i(h)}if(ct!==null)var pt=!0;else{var mt=i(g);mt!==null&&Ft(nt,mt.startTime-vt),pt=!1}return pt}finally{ct=null,ut=At,lt=!1}}var ht=!1,rt=null,_e=-1,ot=5,xt=-1;function et(){return!(e.unstable_now()-xt<ot)}function yt(){if(rt!==null){var _t=e.unstable_now();xt=_t;var vt=!0;try{vt=rt(!0,_t)}finally{vt?St():(ht=!1,rt=null)}}else ht=!1}var St;if(typeof _=="function")St=function(){_(yt)};else if(typeof MessageChannel<"u"){var It=new MessageChannel,Lt=It.port2;It.port1.onmessage=yt,St=function(){Lt.postMessage(null)}}else St=function(){at(yt,0)};function Ut(_t){rt=_t,ht||(ht=!0,St())}function Ft(_t,vt){_e=at(function(){_t(e.unstable_now())},vt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_t){_t.callback=null},e.unstable_continueExecution=function(){dt||lt||(dt=!0,Ut(st))},e.unstable_forceFrameRate=function(_t){0>_t||125<_t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<_t?Math.floor(1e3/_t):5},e.unstable_getCurrentPriorityLevel=function(){return ut},e.unstable_getFirstCallbackNode=function(){return i(h)},e.unstable_next=function(_t){switch(ut){case 1:case 2:case 3:var vt=3;break;default:vt=ut}var At=ut;ut=vt;try{return _t()}finally{ut=At}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_t,vt){switch(_t){case 1:case 2:case 3:case 4:case 5:break;default:_t=3}var At=ut;ut=_t;try{return vt()}finally{ut=At}},e.unstable_scheduleCallback=function(_t,vt,At){var Nt=e.unstable_now();switch(typeof At=="object"&&At!==null?(At=At.delay,At=typeof At=="number"&&0<At?Nt+At:Nt):At=Nt,_t){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=At+wt,_t={id:$++,callback:vt,priorityLevel:_t,startTime:At,expirationTime:wt,sortIndex:-1},At>Nt?(_t.sortIndex=At,s(g,_t),i(h)===null&&_t===i(g)&&(ft?(b(_e),_e=-1):ft=!0,Ft(nt,At-Nt))):(_t.sortIndex=wt,s(h,_t),dt||lt||(dt=!0,Ut(st))),_t},e.unstable_shouldYield=et,e.unstable_wrapCallback=function(_t){var vt=ut;return function(){var At=ut;ut=vt;try{return _t.apply(this,arguments)}finally{ut=At}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(e,s){ha(e,s),ha(e+"Capture",s)}function ha(e,s){for(ea[e]=s,e=0;e<s.length;e++)da.add(s[e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(e){return ja.call(ma,e)?!0:ja.call(la,e)?!1:ka.test(e)?ma[e]=!0:(la[e]=!0,!1)}function pa(e,s,i,a){if(i!==null&&i.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qa(e,s,i,a){if(s===null||typeof s>"u"||pa(e,s,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v(e,s,i,a,o,c,d){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=s,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){z[e]=new v(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];z[s]=new v(s,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){z[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){z[e]=new v(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){z[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){z[e]=new v(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){z[e]=new v(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){z[e]=new v(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){z[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(ra,sa);z[s]=new v(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){z[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)});function ta(e,s,i,a){var o=z.hasOwnProperty(s)?z[s]:null;(o!==null?o.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa(s,i,o,a)&&(i=null),a||o===null?oa(s)&&(i===null?e.removeAttribute(s):e.setAttribute(s,""+i)):o.mustUseProperty?e[o.propertyName]=i===null?o.type===3?!1:"":i:(s=o.attributeName,a=o.attributeNamespace,i===null?e.removeAttribute(s):(o=o.type,i=o===3||o===4&&i===!0?"":""+i,a?e.setAttributeNS(a,s,i):e.setAttribute(s,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var A=Object.assign,La;function Ma(e){if(La===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);La=s&&s[1]||""}return`
`+La+e}var Na=!1;function Oa(e,s){if(!e||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(g){var a=g}Reflect.construct(e,[],s)}else{try{s.call()}catch(g){a=g}e.call(s.prototype)}else{try{throw Error()}catch(g){a=g}e()}}catch(g){if(g&&a&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),c=a.stack.split(`
`),d=o.length-1,j=c.length-1;1<=d&&0<=j&&o[d]!==c[j];)j--;for(;1<=d&&0<=j;d--,j--)if(o[d]!==c[j]){if(d!==1||j!==1)do if(d--,j--,0>j||o[d]!==c[j]){var h=`
`+o[d].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}while(1<=d&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Ma(e):""}function Pa(e){switch(e.tag){case 5:return Ma(e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function Qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ca:return(e.displayName||"Context")+".Consumer";case Ba:return(e._context.displayName||"Context")+".Provider";case Da:var s=e.render;return e=e.displayName,e||(e=s.displayName||s.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return s=e.displayName||null,s!==null?s:Qa(e.type)||"Memo";case Ha:s=e._payload,e=e._init;try{return Qa(e(s))}catch{}}return null}function Ra(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=s.render,e=e.displayName||e.name||"",s.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(s);case 8:return s===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ta(e){var s=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(e){var s=Ta(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),a=""+e[s];if(!e.hasOwnProperty(s)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,c=i.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return o.call(this)},set:function(d){a=""+d,c.call(this,d)}}),Object.defineProperty(e,s,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}function Va(e){e._valueTracker||(e._valueTracker=Ua(e))}function Wa(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var i=s.getValue(),a="";return e&&(a=Ta(e)?e.checked?"true":"false":e.value),e=a,e!==i?(s.setValue(e),!0):!1}function Xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ya(e,s){var i=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Za(e,s){var i=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;i=Sa(s.value!=null?s.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab(e,s){s=s.checked,s!=null&&ta(e,"checked",s,!1)}function bb(e,s){ab(e,s);var i=Sa(s.value),a=s.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}s.hasOwnProperty("value")?cb(e,s.type,i):s.hasOwnProperty("defaultValue")&&cb(e,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(e.defaultChecked=!!s.defaultChecked)}function db(e,s,i){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+e._wrapperState.initialValue,i||s===e.value||(e.value=s),e.defaultValue=s}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function cb(e,s,i){(s!=="number"||Xa(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var eb=Array.isArray;function fb(e,s,i,a){if(e=e.options,s){s={};for(var o=0;o<i.length;o++)s["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=s.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&a&&(e[i].defaultSelected=!0)}else{for(i=""+Sa(i),s=null,o=0;o<e.length;o++){if(e[o].value===i){e[o].selected=!0,a&&(e[o].defaultSelected=!0);return}s!==null||e[o].disabled||(s=e[o])}s!==null&&(s.selected=!0)}}function gb(e,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hb(e,s){var i=s.value;if(i==null){if(i=s.children,s=s.defaultValue,i!=null){if(s!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}s=i}s==null&&(s=""),i=s}e._wrapperState={initialValue:Sa(i)}}function ib(e,s){var i=Sa(s.value),a=Sa(s.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),s.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function jb(e){var s=e.textContent;s===e._wrapperState.initialValue&&s!==""&&s!==null&&(e.value=s)}function kb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(e,s){return e==null||e==="http://www.w3.org/1999/xhtml"?kb(s):e==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mb,nb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,i,a,o){MSApp.execUnsafeLocalFunction(function(){return e(s,i,a,o)})}:e}(function(e,s){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=s;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}});function ob(e,s){if(s){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=s;return}}e.textContent=s}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(e){qb.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),pb[s]=pb[e]})});function rb(e,s,i){return s==null||typeof s=="boolean"||s===""?"":i||typeof s!="number"||s===0||pb.hasOwnProperty(e)&&pb[e]?(""+s).trim():s+"px"}function sb(e,s){e=e.style;for(var i in s)if(s.hasOwnProperty(i)){var a=i.indexOf("--")===0,o=rb(i,s[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,o):e[i]=o}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(e,s){if(s){if(tb[e]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,e));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function vb(e,s){if(e.indexOf("-")===-1)return typeof s.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yb=null,zb=null,Ab=null;function Bb(e){if(e=Cb(e)){if(typeof yb!="function")throw Error(p(280));var s=e.stateNode;s&&(s=Db(s),yb(e.stateNode,e.type,s))}}function Eb(e){zb?Ab?Ab.push(e):Ab=[e]:zb=e}function Fb(){if(zb){var e=zb,s=Ab;if(Ab=zb=null,Bb(e),s)for(e=0;e<s.length;e++)Bb(s[e])}}function Gb(e,s){return e(s)}function Hb(){}var Ib=!1;function Jb(e,s,i){if(Ib)return e(s,i);Ib=!0;try{return Gb(e,s,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(e,s){var i=e.stateNode;if(i===null)return null;var a=Db(i);if(a===null)return null;i=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(p(231,s,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(e,s,i,a,o,c,d,j,h){var g=Array.prototype.slice.call(arguments,3);try{s.apply(i,g)}catch($){this.onError($)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(e){Ob=!0,Pb=e}};function Tb(e,s,i,a,o,c,d,j,h){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(e,s,i,a,o,c,d,j,h){if(Tb.apply(this,arguments),Ob){if(Ob){var g=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=g)}}function Vb(e){var s=e,i=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do s=e,s.flags&4098&&(i=s.return),e=s.return;while(e)}return s.tag===3?i:null}function Wb(e){if(e.tag===13){var s=e.memoizedState;if(s===null&&(e=e.alternate,e!==null&&(s=e.memoizedState)),s!==null)return s.dehydrated}return null}function Xb(e){if(Vb(e)!==e)throw Error(p(188))}function Yb(e){var s=e.alternate;if(!s){if(s=Vb(e),s===null)throw Error(p(188));return s!==e?null:e}for(var i=e,a=s;;){var o=i.return;if(o===null)break;var c=o.alternate;if(c===null){if(a=o.return,a!==null){i=a;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===i)return Xb(o),e;if(c===a)return Xb(o),s;c=c.sibling}throw Error(p(188))}if(i.return!==a.return)i=o,a=c;else{for(var d=!1,j=o.child;j;){if(j===i){d=!0,i=o,a=c;break}if(j===a){d=!0,a=o,i=c;break}j=j.sibling}if(!d){for(j=c.child;j;){if(j===i){d=!0,i=c,a=o;break}if(j===a){d=!0,a=c,i=o;break}j=j.sibling}if(!d)throw Error(p(189))}}if(i.alternate!==a)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?e:s}function Zb(e){return e=Yb(e),e!==null?$b(e):null}function $b(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var s=$b(e);if(s!==null)return s;e=e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,e,void 0,(e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(e){return e>>>=0,e===0?32:31-(pc(e)/qc|0)|0}var rc=64,sc=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function uc(e,s){var i=e.pendingLanes;if(i===0)return 0;var a=0,o=e.suspendedLanes,c=e.pingedLanes,d=i&268435455;if(d!==0){var j=d&~o;j!==0?a=tc(j):(c&=d,c!==0&&(a=tc(c)))}else d=i&~o,d!==0?a=tc(d):c!==0&&(a=tc(c));if(a===0)return 0;if(s!==0&&s!==a&&!(s&o)&&(o=a&-a,c=s&-s,o>=c||o===16&&(c&4194240)!==0))return s;if(a&4&&(a|=i&16),s=e.entangledLanes,s!==0)for(e=e.entanglements,s&=a;0<s;)i=31-oc(s),o=1<<i,a|=e[i],s&=~o;return a}function vc(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(e,s){for(var i=e.suspendedLanes,a=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-oc(c),j=1<<d,h=o[d];h===-1?(!(j&i)||j&a)&&(o[d]=vc(j,s)):h<=s&&(e.expiredLanes|=j),c&=~j}}function xc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yc(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function zc(e){for(var s=[],i=0;31>i;i++)s.push(e);return s}function Ac(e,s,i){e.pendingLanes|=s,s!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,s=31-oc(s),e[s]=i}function Bc(e,s){var i=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var o=31-oc(i),c=1<<o;s[o]=0,a[o]=-1,e[o]=-1,i&=~c}}function Cc(e,s){var i=e.entangledLanes|=s;for(e=e.entanglements;i;){var a=31-oc(i),o=1<<a;o&s|e[a]&s&&(e[a]|=s),i&=~o}}var C=0;function Dc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(e,s){switch(e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(s.pointerId)}}function Tc(e,s,i,a,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:s,domEventName:i,eventSystemFlags:a,nativeEvent:c,targetContainers:[o]},s!==null&&(s=Cb(s),s!==null&&Fc(s)),e):(e.eventSystemFlags|=a,s=e.targetContainers,o!==null&&s.indexOf(o)===-1&&s.push(o),e)}function Uc(e,s,i,a,o){switch(s){case"focusin":return Lc=Tc(Lc,e,s,i,a,o),!0;case"dragenter":return Mc=Tc(Mc,e,s,i,a,o),!0;case"mouseover":return Nc=Tc(Nc,e,s,i,a,o),!0;case"pointerover":var c=o.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,e,s,i,a,o)),!0;case"gotpointercapture":return c=o.pointerId,Pc.set(c,Tc(Pc.get(c)||null,e,s,i,a,o)),!0}return!1}function Vc(e){var s=Wc(e.target);if(s!==null){var i=Vb(s);if(i!==null){if(s=i.tag,s===13){if(s=Wb(i),s!==null){e.blockedOn=s,Ic(e.priority,function(){Gc(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xc(e){if(e.blockedOn!==null)return!1;for(var s=e.targetContainers;0<s.length;){var i=Yc(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);wb=a,i.target.dispatchEvent(a),wb=null}else return s=Cb(i),s!==null&&Fc(s),e.blockedOn=i,!1;s.shift()}return!0}function Zc(e,s,i){Xc(e)&&i.delete(s)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(e,s){e.blockedOn===s&&(e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(e){function s(o){return ad(o,e)}if(0<Kc.length){ad(Kc[0],e);for(var i=1;i<Kc.length;i++){var a=Kc[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Lc!==null&&ad(Lc,e),Mc!==null&&ad(Mc,e),Nc!==null&&ad(Nc,e),Oc.forEach(s),Pc.forEach(s),i=0;i<Qc.length;i++)a=Qc[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(e,s,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=1,fd(e,s,i,a)}finally{C=o,cd.transition=c}}function gd(e,s,i,a){var o=C,c=cd.transition;cd.transition=null;try{C=4,fd(e,s,i,a)}finally{C=o,cd.transition=c}}function fd(e,s,i,a){if(dd){var o=Yc(e,s,i,a);if(o===null)hd(e,s,a,id,i),Sc(e,a);else if(Uc(o,e,s,i,a))a.stopPropagation();else if(Sc(e,a),s&4&&-1<Rc.indexOf(e)){for(;o!==null;){var c=Cb(o);if(c!==null&&Ec(c),c=Yc(e,s,i,a),c===null&&hd(e,s,a,id,i),c===o)break;o=c}o!==null&&a.stopPropagation()}else hd(e,s,a,null,i)}}var id=null;function Yc(e,s,i,a){if(id=null,e=xb(a),e=Wc(e),e!==null)if(s=Vb(e),s===null)e=null;else if(i=s.tag,i===13){if(e=Wb(s),e!==null)return e;e=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return id=e,null}function jd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var e,s=ld,i=s.length,a,o="value"in kd?kd.value:kd.textContent,c=o.length;for(e=0;e<i&&s[e]===o[e];e++);var d=i-e;for(a=1;a<=d&&s[i-a]===o[c-a];a++);return md=o.slice(e,1<a?1-a:void 0)}function od(e){var s=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&s===13&&(e=13)):e=s,e===10&&(e=13),32<=e||e===13?e:0}function pd(){return!0}function qd(){return!1}function rd(e){function s(i,a,o,c,d){this._reactName=i,this._targetInst=o,this.type=a,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(i=e[j],this[j]=i?i(c):c[j]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yd&&(yd&&e.type==="mousemove"?(wd=e.screenX-yd.screenX,xd=e.screenY-yd.screenY):xd=wd=0,yd=e),wd)},movementY:function(e){return"movementY"in e?e.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):(e=Od[e])?!!s[e]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(e){if(e.key){var s=Md[e.key]||e.key;if(s!=="Unidentified")return s}return e.type==="keypress"?(e=od(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Nd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?od(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?od(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(e,s){switch(e){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ie=!1;function je(e,s){switch(e){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return e=s.data,e===ee&&fe?null:e;default:return null}}function ke(e,s){if(ie)return e==="compositionend"||!ae&&ge(e,s)?(e=nd(),md=ld=kd=null,ie=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s==="input"?!!le[e.type]:s==="textarea"}function ne(e,s,i,a){Eb(a),s=oe(s,"onChange"),0<s.length&&(i=new td("onChange","change",null,i,a),e.push({event:i,listeners:s}))}var pe=null,qe=null;function re(e){se(e,0)}function te(e){var s=ue(e);if(Wa(s))return e}function ve(e,s){if(e==="change")return s}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(e){if(e.propertyName==="value"&&te(qe)){var s=[];ne(s,qe,e,xb(e)),Jb(re,s)}}function Ce(e,s,i){e==="focusin"?(Ae(),pe=s,qe=i,pe.attachEvent("onpropertychange",Be)):e==="focusout"&&Ae()}function De(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return te(qe)}function Ee(e,s){if(e==="click")return te(s)}function Fe(e,s){if(e==="input"||e==="change")return te(s)}function Ge(e,s){return e===s&&(e!==0||1/e===1/s)||e!==e&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(e,s){if(He(e,s))return!0;if(typeof e!="object"||e===null||typeof s!="object"||s===null)return!1;var i=Object.keys(e),a=Object.keys(s);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var o=i[a];if(!ja.call(s,o)||!He(e[o],s[o]))return!1}return!0}function Je(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ke(e,s){var i=Je(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=s&&a>=s)return{node:i,offset:s-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(e,s){return e&&s?e===s?!0:e&&e.nodeType===3?!1:s&&s.nodeType===3?Le(e,s.parentNode):"contains"in e?e.contains(s):e.compareDocumentPosition?!!(e.compareDocumentPosition(s)&16):!1:!1}function Me(){for(var e=window,s=Xa();s instanceof e.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)e=s.contentWindow;else break;s=Xa(e.document)}return s}function Ne(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&(s==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||s==="textarea"||e.contentEditable==="true")}function Oe(e){var s=Me(),i=e.focusedElem,a=e.selectionRange;if(s!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(a!==null&&Ne(i)){if(s=a.start,e=a.end,e===void 0&&(e=s),"selectionStart"in i)i.selectionStart=s,i.selectionEnd=Math.min(e,i.value.length);else if(e=(s=i.ownerDocument||document)&&s.defaultView||window,e.getSelection){e=e.getSelection();var o=i.textContent.length,c=Math.min(a.start,o);a=a.end===void 0?c:Math.min(a.end,o),!e.extend&&c>a&&(o=a,a=c,c=o),o=Ke(i,c);var d=Ke(i,a);o&&d&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(s=s.createRange(),s.setStart(o.node,o.offset),e.removeAllRanges(),c>a?(e.addRange(s),e.extend(d.node,d.offset)):(s.setEnd(d.node,d.offset),e.addRange(s)))}}for(s=[],e=i;e=e.parentNode;)e.nodeType===1&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<s.length;i++)e=s[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(e,s,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se&&Ie(Se,a)||(Se=a,a=oe(Re,"onSelect"),0<a.length&&(s=new td("onSelect","select",null,s,i),e.push({event:s,listeners:a}),s.target=Qe)))}function Ve(e,s){var i={};return i[e.toLowerCase()]=s.toLowerCase(),i["Webkit"+e]="webkit"+s,i["Moz"+e]="moz"+s,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(e){if(Xe[e])return Xe[e];if(!We[e])return e;var s=We[e],i;for(i in s)if(s.hasOwnProperty(i)&&i in Ye)return Xe[e]=s[i];return e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(e,s){df.set(e,s),fa(s,[e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(e,s,i){var a=e.type||"unknown-event";e.currentTarget=i,Ub(a,s,void 0,e),e.currentTarget=null}function se(e,s){s=(s&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],o=a.event;a=a.listeners;e:{var c=void 0;if(s)for(var d=a.length-1;0<=d;d--){var j=a[d],h=j.instance,g=j.currentTarget;if(j=j.listener,h!==c&&o.isPropagationStopped())break e;nf(o,j,g),c=h}else for(d=0;d<a.length;d++){if(j=a[d],h=j.instance,g=j.currentTarget,j=j.listener,h!==c&&o.isPropagationStopped())break e;nf(o,j,g),c=h}}}if(Qb)throw e=Rb,Qb=!1,Rb=null,e}function D(e,s){var i=s[of];i===void 0&&(i=s[of]=new Set);var a=e+"__bubble";i.has(a)||(pf(s,e,2,!1),i.add(a))}function qf(e,s,i){var a=0;s&&(a|=4),pf(i,e,a,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[rf]){e[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,e),qf(i,!0,e))});var s=e.nodeType===9?e:e.ownerDocument;s===null||s[rf]||(s[rf]=!0,qf("selectionchange",!1,s))}}function pf(e,s,i,a){switch(jd(s)){case 1:var o=ed;break;case 4:o=gd;break;default:o=fd}i=o.bind(null,s,i,e),o=void 0,!Lb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(o=!0),a?o!==void 0?e.addEventListener(s,i,{capture:!0,passive:o}):e.addEventListener(s,i,!0):o!==void 0?e.addEventListener(s,i,{passive:o}):e.addEventListener(s,i,!1)}function hd(e,s,i,a,o){var c=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var d=a.tag;if(d===3||d===4){var j=a.stateNode.containerInfo;if(j===o||j.nodeType===8&&j.parentNode===o)break;if(d===4)for(d=a.return;d!==null;){var h=d.tag;if((h===3||h===4)&&(h=d.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;d=d.return}for(;j!==null;){if(d=Wc(j),d===null)return;if(h=d.tag,h===5||h===6){a=c=d;continue e}j=j.parentNode}}a=a.return}Jb(function(){var g=c,$=xb(i),ct=[];e:{var ut=df.get(e);if(ut!==void 0){var lt=td,dt=e;switch(e){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":lt=Rd;break;case"focusin":dt="focus",lt=Fd;break;case"focusout":dt="blur",lt=Fd;break;case"beforeblur":case"afterblur":lt=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":lt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":lt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":lt=Vd;break;case $e:case af:case bf:lt=Hd;break;case cf:lt=Xd;break;case"scroll":lt=vd;break;case"wheel":lt=Zd;break;case"copy":case"cut":case"paste":lt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":lt=Td}var ft=(s&4)!==0,at=!ft&&e==="scroll",b=ft?ut!==null?ut+"Capture":null:ut;ft=[];for(var _=g,it;_!==null;){it=_;var nt=it.stateNode;if(it.tag===5&&nt!==null&&(it=nt,b!==null&&(nt=Kb(_,b),nt!=null&&ft.push(tf(_,nt,it)))),at)break;_=_.return}0<ft.length&&(ut=new lt(ut,dt,null,i,$),ct.push({event:ut,listeners:ft}))}}if(!(s&7)){e:{if(ut=e==="mouseover"||e==="pointerover",lt=e==="mouseout"||e==="pointerout",ut&&i!==wb&&(dt=i.relatedTarget||i.fromElement)&&(Wc(dt)||dt[uf]))break e;if((lt||ut)&&(ut=$.window===$?$:(ut=$.ownerDocument)?ut.defaultView||ut.parentWindow:window,lt?(dt=i.relatedTarget||i.toElement,lt=g,dt=dt?Wc(dt):null,dt!==null&&(at=Vb(dt),dt!==at||dt.tag!==5&&dt.tag!==6)&&(dt=null)):(lt=null,dt=g),lt!==dt)){if(ft=Bd,nt="onMouseLeave",b="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(ft=Td,nt="onPointerLeave",b="onPointerEnter",_="pointer"),at=lt==null?ut:ue(lt),it=dt==null?ut:ue(dt),ut=new ft(nt,_+"leave",lt,i,$),ut.target=at,ut.relatedTarget=it,nt=null,Wc($)===g&&(ft=new ft(b,_+"enter",dt,i,$),ft.target=it,ft.relatedTarget=at,nt=ft),at=nt,lt&&dt)t:{for(ft=lt,b=dt,_=0,it=ft;it;it=vf(it))_++;for(it=0,nt=b;nt;nt=vf(nt))it++;for(;0<_-it;)ft=vf(ft),_--;for(;0<it-_;)b=vf(b),it--;for(;_--;){if(ft===b||b!==null&&ft===b.alternate)break t;ft=vf(ft),b=vf(b)}ft=null}else ft=null;lt!==null&&wf(ct,ut,lt,ft,!1),dt!==null&&at!==null&&wf(ct,at,dt,ft,!0)}}e:{if(ut=g?ue(g):window,lt=ut.nodeName&&ut.nodeName.toLowerCase(),lt==="select"||lt==="input"&&ut.type==="file")var st=ve;else if(me(ut))if(we)st=Fe;else{st=De;var ht=Ce}else(lt=ut.nodeName)&&lt.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(st=Ee);if(st&&(st=st(e,g))){ne(ct,st,i,$);break e}ht&&ht(e,ut,g),e==="focusout"&&(ht=ut._wrapperState)&&ht.controlled&&ut.type==="number"&&cb(ut,"number",ut.value)}switch(ht=g?ue(g):window,e){case"focusin":(me(ht)||ht.contentEditable==="true")&&(Qe=ht,Re=g,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ct,i,$);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ct,i,$)}var rt;if(ae)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else ie?ge(e,i)&&(_e="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(_e="onCompositionStart");_e&&(de&&i.locale!=="ko"&&(ie||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&ie&&(rt=nd()):(kd=$,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ht=oe(g,_e),0<ht.length&&(_e=new Ld(_e,e,null,i,$),ct.push({event:_e,listeners:ht}),rt?_e.data=rt:(rt=he(i),rt!==null&&(_e.data=rt)))),(rt=ce?je(e,i):ke(e,i))&&(g=oe(g,"onBeforeInput"),0<g.length&&($=new Ld("onBeforeInput","beforeinput",null,i,$),ct.push({event:$,listeners:g}),$.data=rt))}se(ct,s)})}function tf(e,s,i){return{instance:e,listener:s,currentTarget:i}}function oe(e,s){for(var i=s+"Capture",a=[];e!==null;){var o=e,c=o.stateNode;o.tag===5&&c!==null&&(o=c,c=Kb(e,i),c!=null&&a.unshift(tf(e,c,o)),c=Kb(e,s),c!=null&&a.push(tf(e,c,o))),e=e.return}return a}function vf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wf(e,s,i,a,o){for(var c=s._reactName,d=[];i!==null&&i!==a;){var j=i,h=j.alternate,g=j.stateNode;if(h!==null&&h===a)break;j.tag===5&&g!==null&&(j=g,o?(h=Kb(i,c),h!=null&&d.unshift(tf(i,h,j))):o||(h=Kb(i,c),h!=null&&d.push(tf(i,h,j)))),i=i.return}d.length!==0&&e.push({event:s,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(e){return(typeof e=="string"?e:""+e).replace(xf,`
`).replace(yf,"")}function Af(e,s,i){if(s=zf(s),zf(e)!==s&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(e,s){return e==="textarea"||e==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(e){return Hf.resolve(null).then(e).catch(If)}:Ff;function If(e){setTimeout(function(){throw e})}function Kf(e,s){var i=s,a=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(a===0){e.removeChild(o),bd(s);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=o}while(i);bd(s)}function Lf(e){for(;e!=null;e=e.nextSibling){var s=e.nodeType;if(s===1||s===3)break;if(s===8){if(s=e.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return e}function Mf(e){e=e.previousSibling;for(var s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(s===0)return e;s--}else i==="/$"&&s++}e=e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(e){var s=e[Of];if(s)return s;for(var i=e.parentNode;i;){if(s=i[uf]||i[Of]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(e=Mf(e);e!==null;){if(i=e[Of])return i;e=Mf(e)}return s}e=i,i=e.parentNode}return null}function Cb(e){return e=e[Of]||e[uf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ue(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(p(33))}function Db(e){return e[Pf]||null}var Sf=[],Tf=-1;function Uf(e){return{current:e}}function E(e){0>Tf||(e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(e,s){Tf++,Sf[Tf]=e.current,e.current=s}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(e,s){var i=e.type.contextTypes;if(!i)return Vf;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var o={},c;for(c in i)o[c]=s[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),o}function Zf(e){return e=e.childContextTypes,e!=null}function $f(){E(Wf),E(H)}function ag(e,s,i){if(H.current!==Vf)throw Error(p(168));G(H,s),G(Wf,i)}function bg(e,s,i){var a=e.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var o in a)if(!(o in s))throw Error(p(108,Ra(e)||"Unknown",o));return A({},i,a)}function cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,e),G(Wf,Wf.current),!0}function dg(e,s,i){var a=e.stateNode;if(!a)throw Error(p(169));i?(e=bg(e,s,Xf),a.__reactInternalMemoizedMergedChildContext=e,E(Wf),E(H),G(H,e)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(e){eg===null?eg=[e]:eg.push(e)}function ig(e){fg=!0,hg(e)}function jg(){if(!gg&&eg!==null){gg=!0;var e=0,s=C;try{var i=eg;for(C=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(o){throw eg!==null&&(eg=eg.slice(e+1)),ac(fc,jg),o}finally{C=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(e,s){kg[lg++]=ng,kg[lg++]=mg,mg=e,ng=s}function ug(e,s,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=e;var a=rg;e=sg;var o=32-oc(a)-1;a&=~(1<<o),i+=1;var c=32-oc(s)+o;if(30<c){var d=o-o%5;c=(a&(1<<d)-1).toString(32),a>>=d,o-=d,rg=1<<32-oc(s)+o|i<<o|a,sg=c+e}else rg=1<<c|i<<o|a,sg=e}function vg(e){e.return!==null&&(tg(e,1),ug(e,1,0))}function wg(e){for(;e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(e,s){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=s,i.return=e,s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)}function Cg(e,s){switch(e.tag){case 5:var i=e.type;return s=s.nodeType!==1||i.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(e.stateNode=s,xg=e,yg=Lf(s.firstChild),!0):!1;case 6:return s=e.pendingProps===""||s.nodeType!==3?null:s,s!==null?(e.stateNode=s,xg=e,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(i=qg!==null?{id:rg,overflow:sg}:null,e.memoizedState={dehydrated:s,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=s,i.return=e,e.child=i,xg=e,yg=null,!0):!1;default:return!1}}function Dg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eg(e){if(I){var s=yg;if(s){var i=s;if(!Cg(e,s)){if(Dg(e))throw Error(p(418));s=Lf(i.nextSibling);var a=xg;s&&Cg(e,s)?Ag(a,i):(e.flags=e.flags&-4097|2,I=!1,xg=e)}}else{if(Dg(e))throw Error(p(418));e.flags=e.flags&-4097|2,I=!1,xg=e}}}function Fg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xg=e}function Gg(e){if(e!==xg)return!1;if(!I)return Fg(e),I=!0,!1;var s;if((s=e.tag!==3)&&!(s=e.tag!==5)&&(s=e.type,s=s!=="head"&&s!=="body"&&!Ef(e.type,e.memoizedProps)),s&&(s=yg)){if(Dg(e))throw Hg(),Error(p(418));for(;s;)Ag(e,s),s=Lf(s.nextSibling)}if(Fg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(p(317));e:{for(e=e.nextSibling,s=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(s===0){yg=Lf(e.nextSibling);break e}s--}else i!=="$"&&i!=="$!"&&i!=="$?"||s++}e=e.nextSibling}yg=null}}else yg=xg?Lf(e.stateNode.nextSibling):null;return!0}function Hg(){for(var e=yg;e;)e=Lf(e.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(e){zg===null?zg=[e]:zg.push(e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(e,s,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var a=i.stateNode}if(!a)throw Error(p(147,e));var o=a,c=""+e;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(d){var j=o.refs;d===null?delete j[c]:j[c]=d},s._stringRef=c,s)}if(typeof e!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,e))}return e}function Mg(e,s){throw e=Object.prototype.toString.call(s),Error(p(31,e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function Ng(e){var s=e._init;return s(e._payload)}function Og(e){function s(b,_){if(e){var it=b.deletions;it===null?(b.deletions=[_],b.flags|=16):it.push(_)}}function i(b,_){if(!e)return null;for(;_!==null;)s(b,_),_=_.sibling;return null}function a(b,_){for(b=new Map;_!==null;)_.key!==null?b.set(_.key,_):b.set(_.index,_),_=_.sibling;return b}function o(b,_){return b=Pg(b,_),b.index=0,b.sibling=null,b}function c(b,_,it){return b.index=it,e?(it=b.alternate,it!==null?(it=it.index,it<_?(b.flags|=2,_):it):(b.flags|=2,_)):(b.flags|=1048576,_)}function d(b){return e&&b.alternate===null&&(b.flags|=2),b}function j(b,_,it,nt){return _===null||_.tag!==6?(_=Qg(it,b.mode,nt),_.return=b,_):(_=o(_,it),_.return=b,_)}function h(b,_,it,nt){var st=it.type;return st===ya?$(b,_,it.props.children,nt,it.key):_!==null&&(_.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ha&&Ng(st)===_.type)?(nt=o(_,it.props),nt.ref=Lg(b,_,it),nt.return=b,nt):(nt=Rg(it.type,it.key,it.props,null,b.mode,nt),nt.ref=Lg(b,_,it),nt.return=b,nt)}function g(b,_,it,nt){return _===null||_.tag!==4||_.stateNode.containerInfo!==it.containerInfo||_.stateNode.implementation!==it.implementation?(_=Sg(it,b.mode,nt),_.return=b,_):(_=o(_,it.children||[]),_.return=b,_)}function $(b,_,it,nt,st){return _===null||_.tag!==7?(_=Tg(it,b.mode,nt,st),_.return=b,_):(_=o(_,it),_.return=b,_)}function ct(b,_,it){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Qg(""+_,b.mode,it),_.return=b,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case va:return it=Rg(_.type,_.key,_.props,null,b.mode,it),it.ref=Lg(b,null,_),it.return=b,it;case wa:return _=Sg(_,b.mode,it),_.return=b,_;case Ha:var nt=_._init;return ct(b,nt(_._payload),it)}if(eb(_)||Ka(_))return _=Tg(_,b.mode,it,null),_.return=b,_;Mg(b,_)}return null}function ut(b,_,it,nt){var st=_!==null?_.key:null;if(typeof it=="string"&&it!==""||typeof it=="number")return st!==null?null:j(b,_,""+it,nt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case va:return it.key===st?h(b,_,it,nt):null;case wa:return it.key===st?g(b,_,it,nt):null;case Ha:return st=it._init,ut(b,_,st(it._payload),nt)}if(eb(it)||Ka(it))return st!==null?null:$(b,_,it,nt,null);Mg(b,it)}return null}function lt(b,_,it,nt,st){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return b=b.get(it)||null,j(_,b,""+nt,st);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case va:return b=b.get(nt.key===null?it:nt.key)||null,h(_,b,nt,st);case wa:return b=b.get(nt.key===null?it:nt.key)||null,g(_,b,nt,st);case Ha:var ht=nt._init;return lt(b,_,it,ht(nt._payload),st)}if(eb(nt)||Ka(nt))return b=b.get(it)||null,$(_,b,nt,st,null);Mg(_,nt)}return null}function dt(b,_,it,nt){for(var st=null,ht=null,rt=_,_e=_=0,ot=null;rt!==null&&_e<it.length;_e++){rt.index>_e?(ot=rt,rt=null):ot=rt.sibling;var xt=ut(b,rt,it[_e],nt);if(xt===null){rt===null&&(rt=ot);break}e&&rt&&xt.alternate===null&&s(b,rt),_=c(xt,_,_e),ht===null?st=xt:ht.sibling=xt,ht=xt,rt=ot}if(_e===it.length)return i(b,rt),I&&tg(b,_e),st;if(rt===null){for(;_e<it.length;_e++)rt=ct(b,it[_e],nt),rt!==null&&(_=c(rt,_,_e),ht===null?st=rt:ht.sibling=rt,ht=rt);return I&&tg(b,_e),st}for(rt=a(b,rt);_e<it.length;_e++)ot=lt(rt,b,_e,it[_e],nt),ot!==null&&(e&&ot.alternate!==null&&rt.delete(ot.key===null?_e:ot.key),_=c(ot,_,_e),ht===null?st=ot:ht.sibling=ot,ht=ot);return e&&rt.forEach(function(et){return s(b,et)}),I&&tg(b,_e),st}function ft(b,_,it,nt){var st=Ka(it);if(typeof st!="function")throw Error(p(150));if(it=st.call(it),it==null)throw Error(p(151));for(var ht=st=null,rt=_,_e=_=0,ot=null,xt=it.next();rt!==null&&!xt.done;_e++,xt=it.next()){rt.index>_e?(ot=rt,rt=null):ot=rt.sibling;var et=ut(b,rt,xt.value,nt);if(et===null){rt===null&&(rt=ot);break}e&&rt&&et.alternate===null&&s(b,rt),_=c(et,_,_e),ht===null?st=et:ht.sibling=et,ht=et,rt=ot}if(xt.done)return i(b,rt),I&&tg(b,_e),st;if(rt===null){for(;!xt.done;_e++,xt=it.next())xt=ct(b,xt.value,nt),xt!==null&&(_=c(xt,_,_e),ht===null?st=xt:ht.sibling=xt,ht=xt);return I&&tg(b,_e),st}for(rt=a(b,rt);!xt.done;_e++,xt=it.next())xt=lt(rt,b,_e,xt.value,nt),xt!==null&&(e&&xt.alternate!==null&&rt.delete(xt.key===null?_e:xt.key),_=c(xt,_,_e),ht===null?st=xt:ht.sibling=xt,ht=xt);return e&&rt.forEach(function(yt){return s(b,yt)}),I&&tg(b,_e),st}function at(b,_,it,nt){if(typeof it=="object"&&it!==null&&it.type===ya&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case va:e:{for(var st=it.key,ht=_;ht!==null;){if(ht.key===st){if(st=it.type,st===ya){if(ht.tag===7){i(b,ht.sibling),_=o(ht,it.props.children),_.return=b,b=_;break e}}else if(ht.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===Ha&&Ng(st)===ht.type){i(b,ht.sibling),_=o(ht,it.props),_.ref=Lg(b,ht,it),_.return=b,b=_;break e}i(b,ht);break}else s(b,ht);ht=ht.sibling}it.type===ya?(_=Tg(it.props.children,b.mode,nt,it.key),_.return=b,b=_):(nt=Rg(it.type,it.key,it.props,null,b.mode,nt),nt.ref=Lg(b,_,it),nt.return=b,b=nt)}return d(b);case wa:e:{for(ht=it.key;_!==null;){if(_.key===ht)if(_.tag===4&&_.stateNode.containerInfo===it.containerInfo&&_.stateNode.implementation===it.implementation){i(b,_.sibling),_=o(_,it.children||[]),_.return=b,b=_;break e}else{i(b,_);break}else s(b,_);_=_.sibling}_=Sg(it,b.mode,nt),_.return=b,b=_}return d(b);case Ha:return ht=it._init,at(b,_,ht(it._payload),nt)}if(eb(it))return dt(b,_,it,nt);if(Ka(it))return ft(b,_,it,nt);Mg(b,it)}return typeof it=="string"&&it!==""||typeof it=="number"?(it=""+it,_!==null&&_.tag===6?(i(b,_.sibling),_=o(_,it),_.return=b,b=_):(i(b,_),_=Qg(it,b.mode,nt),_.return=b,b=_),d(b)):i(b,_)}return at}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(e){var s=Wg.current;E(Wg),e._currentValue=s}function bh(e,s,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),e===i)break;e=e.return}}function ch(e,s){Xg=e,Zg=Yg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&s&&(dh=!0),e.firstContext=null)}function eh(e){var s=e._currentValue;if(Zg!==e)if(e={context:e,memoizedValue:s,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=e,Xg.dependencies={lanes:0,firstContext:e}}else Yg=Yg.next=e;return s}var fh=null;function gh(e){fh===null?fh=[e]:fh.push(e)}function hh(e,s,i,a){var o=s.interleaved;return o===null?(i.next=i,gh(s)):(i.next=o.next,o.next=i),s.interleaved=i,ih(e,a)}function ih(e,s){e.lanes|=s;var i=e.alternate;for(i!==null&&(i.lanes|=s),i=e,e=e.return;e!==null;)e.childLanes|=s,i=e.alternate,i!==null&&(i.childLanes|=s),i=e,e=e.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mh(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function nh(e,s,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,K&2){var o=a.pending;return o===null?s.next=s:(s.next=o.next,o.next=s),a.pending=s,ih(e,i)}return o=a.interleaved,o===null?(s.next=s,gh(a)):(s.next=o.next,o.next=s),a.interleaved=s,ih(e,i)}function oh(e,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194240)!==0)){var a=s.lanes;a&=e.pendingLanes,i|=a,s.lanes=i,Cc(e,i)}}function ph(e,s){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var o=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?o=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?o=c=s:c=c.next=s}else o=c=s;i={baseState:a.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=s:e.next=s,i.lastBaseUpdate=s}function qh(e,s,i,a){var o=e.updateQueue;jh=!1;var c=o.firstBaseUpdate,d=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var h=j,g=h.next;h.next=null,d===null?c=g:d.next=g,d=h;var $=e.alternate;$!==null&&($=$.updateQueue,j=$.lastBaseUpdate,j!==d&&(j===null?$.firstBaseUpdate=g:j.next=g,$.lastBaseUpdate=h))}if(c!==null){var ct=o.baseState;d=0,$=g=h=null,j=c;do{var ut=j.lane,lt=j.eventTime;if((a&ut)===ut){$!==null&&($=$.next={eventTime:lt,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var dt=e,ft=j;switch(ut=s,lt=i,ft.tag){case 1:if(dt=ft.payload,typeof dt=="function"){ct=dt.call(lt,ct,ut);break e}ct=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=ft.payload,ut=typeof dt=="function"?dt.call(lt,ct,ut):dt,ut==null)break e;ct=A({},ct,ut);break e;case 2:jh=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,ut=o.effects,ut===null?o.effects=[j]:ut.push(j))}else lt={eventTime:lt,lane:ut,tag:j.tag,payload:j.payload,callback:j.callback,next:null},$===null?(g=$=lt,h=ct):$=$.next=lt,d|=ut;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;ut=j,j=ut.next,ut.next=null,o.lastBaseUpdate=ut,o.shared.pending=null}}while(!0);if($===null&&(h=ct),o.baseState=h,o.firstBaseUpdate=g,o.lastBaseUpdate=$,s=o.shared.interleaved,s!==null){o=s;do d|=o.lane,o=o.next;while(o!==s)}else c===null&&(o.shared.lanes=0);rh|=d,e.lanes=d,e.memoizedState=ct}}function sh(e,s,i){if(e=s.effects,s.effects=null,e!==null)for(s=0;s<e.length;s++){var a=e[s],o=a.callback;if(o!==null){if(a.callback=null,a=i,typeof o!="function")throw Error(p(191,o));o.call(a)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(e){if(e===th)throw Error(p(174));return e}function yh(e,s){switch(G(wh,s),G(vh,e),G(uh,th),e=s.nodeType,e){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb(null,"");break;default:e=e===8?s.parentNode:s,s=e.namespaceURI||null,e=e.tagName,s=lb(s,e)}E(uh),G(uh,s)}function zh(){E(uh),E(vh),E(wh)}function Ah(e){xh(wh.current);var s=xh(uh.current),i=lb(s,e.type);s!==i&&(G(vh,e),G(uh,i))}function Bh(e){vh.current===e&&(E(uh),E(vh))}var L=Uf(0);function Ch(e){for(var s=e;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var e=0;e<Dh.length;e++)Dh[e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(e,s){if(s===null)return!1;for(var i=0;i<s.length&&i<e.length;i++)if(!He(e[i],s[i]))return!1;return!0}function Nh(e,s,i,a,o,c){if(Hh=c,M=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=e===null||e.memoizedState===null?Oh:Ph,e=i(a,o),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,s.updateQueue=null,Fh.current=Qh,e=i(a,o)}while(Jh)}if(Fh.current=Rh,s=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,s)throw Error(p(300));return e}function Sh(){var e=Kh!==0;return Kh=0,e}function Th(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=e:O=O.next=e,O}function Uh(){if(N===null){var e=M.alternate;e=e!==null?e.memoizedState:null}else e=N.next;var s=O===null?M.memoizedState:O.next;if(s!==null)O=s,N=e;else{if(e===null)throw Error(p(310));N=e,e={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=e:O=O.next=e}return O}function Vh(e,s){return typeof s=="function"?s(e):s}function Wh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var a=N,o=a.baseQueue,c=i.pending;if(c!==null){if(o!==null){var d=o.next;o.next=c.next,c.next=d}a.baseQueue=o=c,i.pending=null}if(o!==null){c=o.next,a=a.baseState;var j=d=null,h=null,g=c;do{var $=g.lane;if((Hh&$)===$)h!==null&&(h=h.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),a=g.hasEagerState?g.eagerState:e(a,g.action);else{var ct={lane:$,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};h===null?(j=h=ct,d=a):h=h.next=ct,M.lanes|=$,rh|=$}g=g.next}while(g!==null&&g!==c);h===null?d=a:h.next=j,He(a,s.memoizedState)||(dh=!0),s.memoizedState=a,s.baseState=d,s.baseQueue=h,i.lastRenderedState=a}if(e=i.interleaved,e!==null){o=e;do c=o.lane,M.lanes|=c,rh|=c,o=o.next;while(o!==e)}else o===null&&(i.lanes=0);return[s.memoizedState,i.dispatch]}function Xh(e){var s=Uh(),i=s.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=e;var a=i.dispatch,o=i.pending,c=s.memoizedState;if(o!==null){i.pending=null;var d=o=o.next;do c=e(c,d.action),d=d.next;while(d!==o);He(c,s.memoizedState)||(dh=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),i.lastRenderedState=c}return[c,a]}function Yh(){}function Zh(e,s){var i=M,a=Uh(),o=s(),c=!He(a.memoizedState,o);if(c&&(a.memoizedState=o,dh=!0),a=a.queue,$h(ai.bind(null,i,a,e),[e]),a.getSnapshot!==s||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,a,o,s),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,s,o)}return o}function di(e,s,i){e.flags|=16384,e={getSnapshot:s,value:i},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.stores=[e]):(i=s.stores,i===null?s.stores=[e]:i.push(e))}function ci(e,s,i,a){s.value=i,s.getSnapshot=a,ei(s)&&fi(e)}function ai(e,s,i){return i(function(){ei(s)&&fi(e)})}function ei(e){var s=e.getSnapshot;e=e.value;try{var i=s();return!He(e,i)}catch{return!0}}function fi(e){var s=ih(e,1);s!==null&&gi(s,e,1,-1)}function hi(e){var s=Th();return typeof e=="function"&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:e},s.queue=e,e=e.dispatch=ii.bind(null,M,e),[s.memoizedState,e]}function bi(e,s,i,a){return e={tag:e,create:s,destroy:i,deps:a,next:null},s=M.updateQueue,s===null?(s={lastEffect:null,stores:null},M.updateQueue=s,s.lastEffect=e.next=e):(i=s.lastEffect,i===null?s.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,s.lastEffect=e)),e}function ji(){return Uh().memoizedState}function ki(e,s,i,a){var o=Th();M.flags|=e,o.memoizedState=bi(1|s,i,void 0,a===void 0?null:a)}function li(e,s,i,a){var o=Uh();a=a===void 0?null:a;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,a!==null&&Mh(a,d.deps)){o.memoizedState=bi(s,i,c,a);return}}M.flags|=e,o.memoizedState=bi(1|s,i,c,a)}function mi(e,s){return ki(8390656,8,e,s)}function $h(e,s){return li(2048,8,e,s)}function ni(e,s){return li(4,2,e,s)}function oi(e,s){return li(4,4,e,s)}function pi(e,s){if(typeof s=="function")return e=e(),s(e),function(){s(null)};if(s!=null)return e=e(),s.current=e,function(){s.current=null}}function qi(e,s,i){return i=i!=null?i.concat([e]):null,li(4,4,pi.bind(null,s,e),i)}function ri(){}function si(e,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(i.memoizedState=[e,s],e)}function ti(e,s){var i=Uh();s=s===void 0?null:s;var a=i.memoizedState;return a!==null&&s!==null&&Mh(s,a[1])?a[0]:(e=e(),i.memoizedState=[e,s],e)}function ui(e,s,i){return Hh&21?(He(i,s)||(i=yc(),M.lanes|=i,rh|=i,e.baseState=!0),s):(e.baseState&&(e.baseState=!1,dh=!0),e.memoizedState=i)}function vi(e,s){var i=C;C=i!==0&&4>i?i:4,e(!0);var a=Gh.transition;Gh.transition={};try{e(!1),s()}finally{C=i,Gh.transition=a}}function wi(){return Uh().memoizedState}function xi(e,s,i){var a=yi(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},zi(e))Ai(s,i);else if(i=hh(e,s,i,a),i!==null){var o=R();gi(i,e,a,o),Bi(i,s,a)}}function ii(e,s,i){var a=yi(e),o={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ai(s,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var d=s.lastRenderedState,j=c(d,i);if(o.hasEagerState=!0,o.eagerState=j,He(j,d)){var h=s.interleaved;h===null?(o.next=o,gh(s)):(o.next=h.next,h.next=o),s.interleaved=o;return}}catch{}finally{}i=hh(e,s,o,a),i!==null&&(o=R(),gi(i,e,a,o),Bi(i,s,a))}}function zi(e){var s=e.alternate;return e===M||s!==null&&s===M}function Ai(e,s){Jh=Ih=!0;var i=e.pending;i===null?s.next=s:(s.next=i.next,i.next=s),e.pending=s}function Bi(e,s,i){if(i&4194240){var a=s.lanes;a&=e.pendingLanes,i|=a,s.lanes=i,Cc(e,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(e,s){return Th().memoizedState=[e,s===void 0?null:s],e},useContext:eh,useEffect:mi,useImperativeHandle:function(e,s,i){return i=i!=null?i.concat([e]):null,ki(4194308,4,pi.bind(null,s,e),i)},useLayoutEffect:function(e,s){return ki(4194308,4,e,s)},useInsertionEffect:function(e,s){return ki(4,2,e,s)},useMemo:function(e,s){var i=Th();return s=s===void 0?null:s,e=e(),i.memoizedState=[e,s],e},useReducer:function(e,s,i){var a=Th();return s=i!==void 0?i(s):s,a.memoizedState=a.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=xi.bind(null,M,e),[a.memoizedState,e]},useRef:function(e){var s=Th();return e={current:e},s.memoizedState=e},useState:hi,useDebugValue:ri,useDeferredValue:function(e){return Th().memoizedState=e},useTransition:function(){var e=hi(!1),s=e[0];return e=vi.bind(null,e[1]),Th().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,i){var a=M,o=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=s(),Q===null)throw Error(p(349));Hh&30||di(a,s,i)}o.memoizedState=i;var c={value:i,getSnapshot:s};return o.queue=c,mi(ai.bind(null,a,c,e),[e]),a.flags|=2048,bi(9,ci.bind(null,a,c,i,s),void 0,null),i},useId:function(){var e=Th(),s=Q.identifierPrefix;if(I){var i=sg,a=rg;i=(a&~(1<<32-oc(a)-1)).toString(32)+i,s=":"+s+"R"+i,i=Kh++,0<i&&(s+="H"+i.toString(32)),s+=":"}else i=Lh++,s=":"+s+"r"+i.toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return ui(s,N.memoizedState,e)},useTransition:function(){var e=Wh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(e){var s=Uh();return N===null?s.memoizedState=e:ui(s,N.memoizedState,e)},useTransition:function(){var e=Xh(Vh)[0],s=Uh().memoizedState;return[e,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(e,s){if(e&&e.defaultProps){s=A({},s),e=e.defaultProps;for(var i in e)s[i]===void 0&&(s[i]=e[i]);return s}return s}function Di(e,s,i,a){s=e.memoizedState,i=i(a,s),i=i==null?s:A({},s,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ei={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,s,i){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,o),s!==null&&(gi(s,e,o,a),oh(s,e,o))},enqueueReplaceState:function(e,s,i){e=e._reactInternals;var a=R(),o=yi(e),c=mh(a,o);c.tag=1,c.payload=s,i!=null&&(c.callback=i),s=nh(e,c,o),s!==null&&(gi(s,e,o,a),oh(s,e,o))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var i=R(),a=yi(e),o=mh(i,a);o.tag=2,s!=null&&(o.callback=s),s=nh(e,o,a),s!==null&&(gi(s,e,a,i),oh(s,e,a))}};function Fi(e,s,i,a,o,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,d):s.prototype&&s.prototype.isPureReactComponent?!Ie(i,a)||!Ie(o,c):!0}function Gi(e,s,i){var a=!1,o=Vf,c=s.contextType;return typeof c=="object"&&c!==null?c=eh(c):(o=Zf(s)?Xf:H.current,a=s.contextTypes,c=(a=a!=null)?Yf(e,o):Vf),s=new s(i,c),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ei,e.stateNode=s,s._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=c),s}function Hi(e,s,i,a){e=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,a),s.state!==e&&Ei.enqueueReplaceState(s,s.state,null)}function Ii(e,s,i,a){var o=e.stateNode;o.props=i,o.state=e.memoizedState,o.refs={},kh(e);var c=s.contextType;typeof c=="object"&&c!==null?o.context=eh(c):(c=Zf(s)?Xf:H.current,o.context=Yf(e,c)),o.state=e.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Di(e,s,c,i),o.state=e.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(s=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),s!==o.state&&Ei.enqueueReplaceState(o,o.state,null),qh(e,i,o,a),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Ji(e,s){try{var i="",a=s;do i+=Pa(a),a=a.return;while(a);var o=i}catch(c){o=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:s,stack:o,digest:null}}function Ki(e,s,i){return{value:e,source:null,stack:i??null,digest:s??null}}function Li(e,s){try{console.error(s.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(e,s,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var a=s.value;return i.callback=function(){Oi||(Oi=!0,Pi=a),Li(e,s)},i}function Qi(e,s,i){i=mh(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var o=s.value;i.payload=function(){return a(o)},i.callback=function(){Li(e,s)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(e,s),typeof a!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=s.stack;this.componentDidCatch(s.value,{componentStack:d!==null?d:""})}),i}function Si(e,s,i){var a=e.pingCache;if(a===null){a=e.pingCache=new Mi;var o=new Set;a.set(s,o)}else o=a.get(s),o===void 0&&(o=new Set,a.set(s,o));o.has(i)||(o.add(i),e=Ti.bind(null,e,s,i),s.then(e,e))}function Ui(e){do{var s;if((s=e.tag===13)&&(s=e.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return e;e=e.return}while(e!==null);return null}function Vi(e,s,i,a,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===s?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(s=mh(-1,1),s.tag=2,nh(i,s,1))),i.lanes|=1),e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(e,s,i,a){s.child=e===null?Vg(s,null,i,a):Ug(s,e.child,i,a)}function Yi(e,s,i,a,o){i=i.render;var c=s.ref;return ch(s,o),a=Nh(e,s,i,a,c,o),i=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~o,Zi(e,s,o)):(I&&i&&vg(s),s.flags|=1,Xi(e,s,a,o),s.child)}function $i(e,s,i,a,o){if(e===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(s.tag=15,s.type=c,bj(e,s,c,a,o)):(e=Rg(i.type,null,a,s,s.mode,o),e.ref=s.ref,e.return=s,s.child=e)}if(c=e.child,!(e.lanes&o)){var d=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(d,a)&&e.ref===s.ref)return Zi(e,s,o)}return s.flags|=1,e=Pg(c,a),e.ref=s.ref,e.return=s,s.child=e}function bj(e,s,i,a,o){if(e!==null){var c=e.memoizedProps;if(Ie(c,a)&&e.ref===s.ref)if(dh=!1,s.pendingProps=a=c,(e.lanes&o)!==0)e.flags&131072&&(dh=!0);else return s.lanes=e.lanes,Zi(e,s,o)}return cj(e,s,i,a,o)}function dj(e,s,i){var a=s.pendingProps,o=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return e=c!==null?c.baseLanes|i:i,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,G(ej,fj),fj|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:i,G(ej,fj),fj|=a}else c!==null?(a=c.baseLanes|i,s.memoizedState=null):a=i,G(ej,fj),fj|=a;return Xi(e,s,o,i),s.child}function gj(e,s){var i=s.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(s.flags|=512,s.flags|=2097152)}function cj(e,s,i,a,o){var c=Zf(i)?Xf:H.current;return c=Yf(s,c),ch(s,o),i=Nh(e,s,i,a,c,o),a=Sh(),e!==null&&!dh?(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~o,Zi(e,s,o)):(I&&a&&vg(s),s.flags|=1,Xi(e,s,i,o),s.child)}function hj(e,s,i,a,o){if(Zf(i)){var c=!0;cg(s)}else c=!1;if(ch(s,o),s.stateNode===null)ij(e,s),Gi(s,i,a),Ii(s,i,a,o),a=!0;else if(e===null){var d=s.stateNode,j=s.memoizedProps;d.props=j;var h=d.context,g=i.contextType;typeof g=="object"&&g!==null?g=eh(g):(g=Zf(i)?Xf:H.current,g=Yf(s,g));var $=i.getDerivedStateFromProps,ct=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function";ct||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==a||h!==g)&&Hi(s,d,a,g),jh=!1;var ut=s.memoizedState;d.state=ut,qh(s,a,d,o),h=s.memoizedState,j!==a||ut!==h||Wf.current||jh?(typeof $=="function"&&(Di(s,i,$,a),h=s.memoizedState),(j=jh||Fi(s,i,j,a,ut,h,g))?(ct||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(s.flags|=4194308)):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=h),d.props=a,d.state=h,d.context=g,a=j):(typeof d.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{d=s.stateNode,lh(e,s),j=s.memoizedProps,g=s.type===s.elementType?j:Ci(s.type,j),d.props=g,ct=s.pendingProps,ut=d.context,h=i.contextType,typeof h=="object"&&h!==null?h=eh(h):(h=Zf(i)?Xf:H.current,h=Yf(s,h));var lt=i.getDerivedStateFromProps;($=typeof lt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==ct||ut!==h)&&Hi(s,d,a,h),jh=!1,ut=s.memoizedState,d.state=ut,qh(s,a,d,o);var dt=s.memoizedState;j!==ct||ut!==dt||Wf.current||jh?(typeof lt=="function"&&(Di(s,i,lt,a),dt=s.memoizedState),(g=jh||Fi(s,i,g,a,ut,dt,h)||!1)?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(a,dt,h),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(a,dt,h)),typeof d.componentDidUpdate=="function"&&(s.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof d.componentDidUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=dt),d.props=a,d.state=dt,d.context=h,a=g):(typeof d.componentDidUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&ut===e.memoizedState||(s.flags|=1024),a=!1)}return jj(e,s,i,a,c,o)}function jj(e,s,i,a,o,c){gj(e,s);var d=(s.flags&128)!==0;if(!a&&!d)return o&&dg(s,i,!1),Zi(e,s,c);a=s.stateNode,Wi.current=s;var j=d&&typeof i.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,e!==null&&d?(s.child=Ug(s,e.child,null,c),s.child=Ug(s,null,j,c)):Xi(e,s,j,c),s.memoizedState=a.state,o&&dg(s,i,!0),s.child}function kj(e){var s=e.stateNode;s.pendingContext?ag(e,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(e,s.context,!1),yh(e,s.containerInfo)}function lj(e,s,i,a,o){return Ig(),Jg(o),s.flags|=256,Xi(e,s,i,a),s.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(e){return{baseLanes:e,cachePool:null,transitions:null}}function oj(e,s,i){var a=s.pendingProps,o=L.current,c=!1,d=(s.flags&128)!==0,j;if((j=d)||(j=e!==null&&e.memoizedState===null?!1:(o&2)!==0),j?(c=!0,s.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),G(L,o&1),e===null)return Eg(s),e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(s.mode&1?e.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(d=a.children,e=a.fallback,c?(a=s.mode,c=s.child,d={mode:"hidden",children:d},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,a,0,null),e=Tg(e,a,i,null),c.return=s,e.return=s,c.sibling=e,s.child=c,s.child.memoizedState=nj(i),s.memoizedState=mj,e):qj(s,d));if(o=e.memoizedState,o!==null&&(j=o.dehydrated,j!==null))return rj(e,s,d,a,j,o,i);if(c){c=a.fallback,d=s.mode,o=e.child,j=o.sibling;var h={mode:"hidden",children:a.children};return!(d&1)&&s.child!==o?(a=s.child,a.childLanes=0,a.pendingProps=h,s.deletions=null):(a=Pg(o,h),a.subtreeFlags=o.subtreeFlags&14680064),j!==null?c=Pg(j,c):(c=Tg(c,d,i,null),c.flags|=2),c.return=s,a.return=s,a.sibling=c,s.child=a,a=c,c=s.child,d=e.child.memoizedState,d=d===null?nj(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~i,s.memoizedState=mj,a}return c=e.child,e=c.sibling,a=Pg(c,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=i),a.return=s,a.sibling=null,e!==null&&(i=s.deletions,i===null?(s.deletions=[e],s.flags|=16):i.push(e)),s.child=a,s.memoizedState=null,a}function qj(e,s){return s=pj({mode:"visible",children:s},e.mode,0,null),s.return=e,e.child=s}function sj(e,s,i,a){return a!==null&&Jg(a),Ug(s,e.child,null,i),e=qj(s,s.pendingProps.children),e.flags|=2,s.memoizedState=null,e}function rj(e,s,i,a,o,c,d){if(i)return s.flags&256?(s.flags&=-257,a=Ki(Error(p(422))),sj(e,s,d,a)):s.memoizedState!==null?(s.child=e.child,s.flags|=128,null):(c=a.fallback,o=s.mode,a=pj({mode:"visible",children:a.children},o,0,null),c=Tg(c,o,d,null),c.flags|=2,a.return=s,c.return=s,a.sibling=c,s.child=a,s.mode&1&&Ug(s,e.child,null,d),s.child.memoizedState=nj(d),s.memoizedState=mj,c);if(!(s.mode&1))return sj(e,s,d,null);if(o.data==="$!"){if(a=o.nextSibling&&o.nextSibling.dataset,a)var j=a.dgst;return a=j,c=Error(p(419)),a=Ki(c,a,void 0),sj(e,s,d,a)}if(j=(d&e.childLanes)!==0,dh||j){if(a=Q,a!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(a.suspendedLanes|d)?0:o,o!==0&&o!==c.retryLane&&(c.retryLane=o,ih(e,o),gi(a,e,o,-1))}return tj(),a=Ki(Error(p(421))),sj(e,s,d,a)}return o.data==="$?"?(s.flags|=128,s.child=e.child,s=uj.bind(null,e),o._reactRetry=s,null):(e=c.treeContext,yg=Lf(o.nextSibling),xg=s,I=!0,zg=null,e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=e.id,sg=e.overflow,qg=s),s=qj(s,a.children),s.flags|=4096,s)}function vj(e,s,i){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s),bh(e.return,s,i)}function wj(e,s,i,a,o){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:o}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=i,c.tailMode=o)}function xj(e,s,i){var a=s.pendingProps,o=a.revealOrder,c=a.tail;if(Xi(e,s,a.children,i),a=L.current,a&2)a=a&1|2,s.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=s.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vj(e,i,s);else if(e.tag===19)vj(e,i,s);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;e.sibling===null;){if(e.return===null||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(G(L,a),!(s.mode&1))s.memoizedState=null;else switch(o){case"forwards":for(i=s.child,o=null;i!==null;)e=i.alternate,e!==null&&Ch(e)===null&&(o=i),i=i.sibling;i=o,i===null?(o=s.child,s.child=null):(o=i.sibling,i.sibling=null),wj(s,!1,o,i,c);break;case"backwards":for(i=null,o=s.child,s.child=null;o!==null;){if(e=o.alternate,e!==null&&Ch(e)===null){s.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}wj(s,!0,i,null,c);break;case"together":wj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ij(e,s){!(s.mode&1)&&e!==null&&(e.alternate=null,s.alternate=null,s.flags|=2)}function Zi(e,s,i){if(e!==null&&(s.dependencies=e.dependencies),rh|=s.lanes,!(i&s.childLanes))return null;if(e!==null&&s.child!==e.child)throw Error(p(153));if(s.child!==null){for(e=s.child,i=Pg(e,e.pendingProps),s.child=i,i.return=s;e.sibling!==null;)e=e.sibling,i=i.sibling=Pg(e,e.pendingProps),i.return=s;i.sibling=null}return s.child}function yj(e,s,i){switch(s.tag){case 3:kj(s),Ig();break;case 5:Ah(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,o=s.memoizedProps.value;G(Wg,a._currentValue),a._currentValue=o;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(G(L,L.current&1),s.flags|=128,null):i&s.child.childLanes?oj(e,s,i):(G(L,L.current&1),e=Zi(e,s,i),e!==null?e.sibling:null);G(L,L.current&1);break;case 19:if(a=(i&s.childLanes)!==0,e.flags&128){if(a)return xj(e,s,i);s.flags|=128}if(o=s.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(L,L.current),a)break;return null;case 22:case 23:return s.lanes=0,dj(e,s,i)}return Zi(e,s,i)}var zj,Aj,Bj,Cj;zj=function(e,s){for(var i=s.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(e,s,i,a){var o=e.memoizedProps;if(o!==a){e=s.stateNode,xh(uh.current);var c=null;switch(i){case"input":o=Ya(e,o),a=Ya(e,a),c=[];break;case"select":o=A({},o,{value:void 0}),a=A({},a,{value:void 0}),c=[];break;case"textarea":o=gb(e,o),a=gb(e,a),c=[];break;default:typeof o.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Bf)}ub(i,a);var d;i=null;for(g in o)if(!a.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var j=o[g];for(d in j)j.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea.hasOwnProperty(g)?c||(c=[]):(c=c||[]).push(g,null));for(g in a){var h=a[g];if(j=o!=null?o[g]:void 0,a.hasOwnProperty(g)&&h!==j&&(h!=null||j!=null))if(g==="style")if(j){for(d in j)!j.hasOwnProperty(d)||h&&h.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in h)h.hasOwnProperty(d)&&j[d]!==h[d]&&(i||(i={}),i[d]=h[d])}else i||(c||(c=[]),c.push(g,i)),i=h;else g==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,j=j?j.__html:void 0,h!=null&&j!==h&&(c=c||[]).push(g,h)):g==="children"?typeof h!="string"&&typeof h!="number"||(c=c||[]).push(g,""+h):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(ea.hasOwnProperty(g)?(h!=null&&g==="onScroll"&&D("scroll",e),c||j===h||(c=[])):(c=c||[]).push(g,h))}i&&(c=c||[]).push("style",i);var g=c;(s.updateQueue=g)&&(s.flags|=4)}};Cj=function(e,s,i,a){i!==a&&(s.flags|=4)};function Dj(e,s){if(!I)switch(e.tailMode){case"hidden":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?s||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function S(e){var s=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(s)for(var o=e.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags&14680064,a|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)i|=o.lanes|o.childLanes,a|=o.subtreeFlags,a|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=a,e.childLanes=i,s}function Ej(e,s,i){var a=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(s),null;case 1:return Zf(s.type)&&$f(),S(s),null;case 3:return a=s.stateNode,zh(),E(Wf),E(H),Eh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gg(s)?s.flags|=4:e===null||e.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(e,s),S(s),null;case 5:Bh(s);var o=xh(wh.current);if(i=s.type,e!==null&&s.stateNode!=null)Bj(e,s,i,a,o),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(p(166));return S(s),null}if(e=xh(uh.current),Gg(s)){a=s.stateNode,i=s.type;var c=s.memoizedProps;switch(a[Of]=s,a[Pf]=c,e=(s.mode&1)!==0,i){case"dialog":D("cancel",a),D("close",a);break;case"iframe":case"object":case"embed":D("load",a);break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],a);break;case"source":D("error",a);break;case"img":case"image":case"link":D("error",a),D("load",a);break;case"details":D("toggle",a);break;case"input":Za(a,c),D("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},D("invalid",a);break;case"textarea":hb(a,c),D("invalid",a)}ub(i,c),o=null;for(var d in c)if(c.hasOwnProperty(d)){var j=c[d];d==="children"?typeof j=="string"?a.textContent!==j&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,j,e),o=["children",j]):typeof j=="number"&&a.textContent!==""+j&&(c.suppressHydrationWarning!==!0&&Af(a.textContent,j,e),o=["children",""+j]):ea.hasOwnProperty(d)&&j!=null&&d==="onScroll"&&D("scroll",a)}switch(i){case"input":Va(a),db(a,c,!0);break;case"textarea":Va(a),jb(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Bf)}a=o,s.updateQueue=a,a!==null&&(s.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=kb(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=d.createElement(i,{is:a.is}):(e=d.createElement(i),i==="select"&&(d=e,a.multiple?d.multiple=!0:a.size&&(d.size=a.size))):e=d.createElementNS(e,i),e[Of]=s,e[Pf]=a,zj(e,s,!1,!1),s.stateNode=e;e:{switch(d=vb(i,a),i){case"dialog":D("cancel",e),D("close",e),o=a;break;case"iframe":case"object":case"embed":D("load",e),o=a;break;case"video":case"audio":for(o=0;o<lf.length;o++)D(lf[o],e);o=a;break;case"source":D("error",e),o=a;break;case"img":case"image":case"link":D("error",e),D("load",e),o=a;break;case"details":D("toggle",e),o=a;break;case"input":Za(e,a),o=Ya(e,a),D("invalid",e);break;case"option":o=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},o=A({},a,{value:void 0}),D("invalid",e);break;case"textarea":hb(e,a),o=gb(e,a),D("invalid",e);break;default:o=a}ub(i,o),j=o;for(c in j)if(j.hasOwnProperty(c)){var h=j[c];c==="style"?sb(e,h):c==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&nb(e,h)):c==="children"?typeof h=="string"?(i!=="textarea"||h!=="")&&ob(e,h):typeof h=="number"&&ob(e,""+h):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?h!=null&&c==="onScroll"&&D("scroll",e):h!=null&&ta(e,c,h,d))}switch(i){case"input":Va(e),db(e,a,!1);break;case"textarea":Va(e),jb(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Sa(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?fb(e,!!a.multiple,c,!1):a.defaultValue!=null&&fb(e,!!a.multiple,a.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S(s),null;case 6:if(e&&s.stateNode!=null)Cj(e,s,e.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(s)){if(a=s.stateNode,i=s.memoizedProps,a[Of]=s,(c=a.nodeValue!==i)&&(e=xg,e!==null))switch(e.tag){case 3:Af(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,i,(e.mode&1)!==0)}c&&(s.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Of]=s,s.stateNode=a}return S(s),null;case 13:if(E(L),a=s.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(I&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,c=!1;else if(c=Gg(s),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S(s),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=i,s):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(e===null||L.current&1?T===0&&(T=3):tj())),s.updateQueue!==null&&(s.flags|=4),S(s),null);case 4:return zh(),Aj(e,s),e===null&&sf(s.stateNode.containerInfo),S(s),null;case 10:return ah(s.type._context),S(s),null;case 17:return Zf(s.type)&&$f(),S(s),null;case 19:if(E(L),c=s.memoizedState,c===null)return S(s),null;if(a=(s.flags&128)!==0,d=c.rendering,d===null)if(a)Dj(c,!1);else{if(T!==0||e!==null&&e.flags&128)for(e=s.child;e!==null;){if(d=Ch(e),d!==null){for(s.flags|=128,Dj(c,!1),a=d.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=i,i=s.child;i!==null;)c=i,e=a,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return G(L,L.current&1|2),s.child}e=e.sibling}c.tail!==null&&B()>Gj&&(s.flags|=128,a=!0,Dj(c,!1),s.lanes=4194304)}else{if(!a)if(e=Ch(d),e!==null){if(s.flags|=128,a=!0,i=e.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(s),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(s.flags|=128,a=!0,Dj(c,!1),s.lanes=4194304);c.isBackwards?(d.sibling=s.child,s.child=d):(i=c.last,i!==null?i.sibling=d:s.child=d,c.last=d)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=B(),s.sibling=null,i=L.current,G(L,a?i&1|2:i&1),s):(S(s),null);case 22:case 23:return Hj(),a=s.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?fj&1073741824&&(S(s),s.subtreeFlags&6&&(s.flags|=8192)):S(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}function Ij(e,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 3:return zh(),E(Wf),E(H),Eh(),e=s.flags,e&65536&&!(e&128)?(s.flags=e&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(E(L),e=s.memoizedState,e!==null&&e.dehydrated!==null){if(s.alternate===null)throw Error(p(340));Ig()}return e=s.flags,e&65536?(s.flags=e&-65537|128,s):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(s.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(e,s){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){W(e,s,a)}else i.current=null}function Mj(e,s,i){try{i()}catch(a){W(e,s,a)}}var Nj=!1;function Oj(e,s){if(Cf=dd,e=Me(),Ne(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var o=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var d=0,j=-1,h=-1,g=0,$=0,ct=e,ut=null;t:for(;;){for(var lt;ct!==i||o!==0&&ct.nodeType!==3||(j=d+o),ct!==c||a!==0&&ct.nodeType!==3||(h=d+a),ct.nodeType===3&&(d+=ct.nodeValue.length),(lt=ct.firstChild)!==null;)ut=ct,ct=lt;for(;;){if(ct===e)break t;if(ut===i&&++g===o&&(j=d),ut===c&&++$===a&&(h=d),(lt=ct.nextSibling)!==null)break;ct=ut,ut=ct.parentNode}ct=lt}i=j===-1||h===-1?null:{start:j,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:e,selectionRange:i},dd=!1,V=s;V!==null;)if(s=V,e=s.child,(s.subtreeFlags&1028)!==0&&e!==null)e.return=s,V=e;else for(;V!==null;){s=V;try{var dt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(dt!==null){var ft=dt.memoizedProps,at=dt.memoizedState,b=s.stateNode,_=b.getSnapshotBeforeUpdate(s.elementType===s.type?ft:Ci(s.type,ft),at);b.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var it=s.stateNode.containerInfo;it.nodeType===1?it.textContent="":it.nodeType===9&&it.documentElement&&it.removeChild(it.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(nt){W(s,s.return,nt)}if(e=s.sibling,e!==null){e.return=s.return,V=e;break}V=s.return}return dt=Nj,Nj=!1,dt}function Pj(e,s,i){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var o=a=a.next;do{if((o.tag&e)===e){var c=o.destroy;o.destroy=void 0,c!==void 0&&Mj(s,i,c)}o=o.next}while(o!==a)}}function Qj(e,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==s)}}function Rj(e){var s=e.ref;if(s!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof s=="function"?s(e):s.current=e}}function Sj(e){var s=e.alternate;s!==null&&(e.alternate=null,Sj(s)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(s=e.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tj(e){return e.tag===5||e.tag===3||e.tag===4}function Uj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vj(e,s,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?i.nodeType===8?i.parentNode.insertBefore(e,s):i.insertBefore(e,s):(i.nodeType===8?(s=i.parentNode,s.insertBefore(e,i)):(s=i,s.appendChild(e)),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=Bf));else if(a!==4&&(e=e.child,e!==null))for(Vj(e,s,i),e=e.sibling;e!==null;)Vj(e,s,i),e=e.sibling}function Wj(e,s,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,s?i.insertBefore(e,s):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Wj(e,s,i),e=e.sibling;e!==null;)Wj(e,s,i),e=e.sibling}var X=null,Xj=!1;function Yj(e,s,i){for(i=i.child;i!==null;)Zj(e,s,i),i=i.sibling}function Zj(e,s,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,s);case 6:var a=X,o=Xj;X=null,Yj(e,s,i),X=a,Xj=o,X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):X.removeChild(i.stateNode));break;case 18:X!==null&&(Xj?(e=X,i=i.stateNode,e.nodeType===8?Kf(e.parentNode,i):e.nodeType===1&&Kf(e,i),bd(e)):Kf(X,i.stateNode));break;case 4:a=X,o=Xj,X=i.stateNode.containerInfo,Xj=!0,Yj(e,s,i),X=a,Xj=o;break;case 0:case 11:case 14:case 15:if(!U&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){o=a=a.next;do{var c=o,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(i,s,d),o=o.next}while(o!==a)}Yj(e,s,i);break;case 1:if(!U&&(Lj(i,s),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(j){W(i,s,j)}Yj(e,s,i);break;case 21:Yj(e,s,i);break;case 22:i.mode&1?(U=(a=U)||i.memoizedState!==null,Yj(e,s,i),U=a):Yj(e,s,i);break;default:Yj(e,s,i)}}function ak(e){var s=e.updateQueue;if(s!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new Kj),s.forEach(function(a){var o=bk.bind(null,e,a);i.has(a)||(i.add(a),a.then(o,o))})}}function ck(e,s){var i=s.deletions;if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];try{var c=e,d=s,j=d;e:for(;j!==null;){switch(j.tag){case 5:X=j.stateNode,Xj=!1;break e;case 3:X=j.stateNode.containerInfo,Xj=!0;break e;case 4:X=j.stateNode.containerInfo,Xj=!0;break e}j=j.return}if(X===null)throw Error(p(160));Zj(c,d,o),X=null,Xj=!1;var h=o.alternate;h!==null&&(h.return=null),o.return=null}catch(g){W(o,s,g)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dk(s,e),s=s.sibling}function dk(e,s){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ck(s,e),ek(e),a&4){try{Pj(3,e,e.return),Qj(3,e)}catch(ft){W(e,e.return,ft)}try{Pj(5,e,e.return)}catch(ft){W(e,e.return,ft)}}break;case 1:ck(s,e),ek(e),a&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(s,e),ek(e),a&512&&i!==null&&Lj(i,i.return),e.flags&32){var o=e.stateNode;try{ob(o,"")}catch(ft){W(e,e.return,ft)}}if(a&4&&(o=e.stateNode,o!=null)){var c=e.memoizedProps,d=i!==null?i.memoizedProps:c,j=e.type,h=e.updateQueue;if(e.updateQueue=null,h!==null)try{j==="input"&&c.type==="radio"&&c.name!=null&&ab(o,c),vb(j,d);var g=vb(j,c);for(d=0;d<h.length;d+=2){var $=h[d],ct=h[d+1];$==="style"?sb(o,ct):$==="dangerouslySetInnerHTML"?nb(o,ct):$==="children"?ob(o,ct):ta(o,$,ct,g)}switch(j){case"input":bb(o,c);break;case"textarea":ib(o,c);break;case"select":var ut=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!c.multiple;var lt=c.value;lt!=null?fb(o,!!c.multiple,lt,!1):ut!==!!c.multiple&&(c.defaultValue!=null?fb(o,!!c.multiple,c.defaultValue,!0):fb(o,!!c.multiple,c.multiple?[]:"",!1))}o[Pf]=c}catch(ft){W(e,e.return,ft)}}break;case 6:if(ck(s,e),ek(e),a&4){if(e.stateNode===null)throw Error(p(162));o=e.stateNode,c=e.memoizedProps;try{o.nodeValue=c}catch(ft){W(e,e.return,ft)}}break;case 3:if(ck(s,e),ek(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(s.containerInfo)}catch(ft){W(e,e.return,ft)}break;case 4:ck(s,e),ek(e);break;case 13:ck(s,e),ek(e),o=e.child,o.flags&8192&&(c=o.memoizedState!==null,o.stateNode.isHidden=c,!c||o.alternate!==null&&o.alternate.memoizedState!==null||(fk=B())),a&4&&ak(e);break;case 22:if($=i!==null&&i.memoizedState!==null,e.mode&1?(U=(g=U)||$,ck(s,e),U=g):ck(s,e),ek(e),a&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!$&&e.mode&1)for(V=e,$=e.child;$!==null;){for(ct=V=$;V!==null;){switch(ut=V,lt=ut.child,ut.tag){case 0:case 11:case 14:case 15:Pj(4,ut,ut.return);break;case 1:Lj(ut,ut.return);var dt=ut.stateNode;if(typeof dt.componentWillUnmount=="function"){a=ut,i=ut.return;try{s=a,dt.props=s.memoizedProps,dt.state=s.memoizedState,dt.componentWillUnmount()}catch(ft){W(a,i,ft)}}break;case 5:Lj(ut,ut.return);break;case 22:if(ut.memoizedState!==null){gk(ct);continue}}lt!==null?(lt.return=ut,V=lt):gk(ct)}$=$.sibling}e:for($=null,ct=e;;){if(ct.tag===5){if($===null){$=ct;try{o=ct.stateNode,g?(c=o.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(j=ct.stateNode,h=ct.memoizedProps.style,d=h!=null&&h.hasOwnProperty("display")?h.display:null,j.style.display=rb("display",d))}catch(ft){W(e,e.return,ft)}}}else if(ct.tag===6){if($===null)try{ct.stateNode.nodeValue=g?"":ct.memoizedProps}catch(ft){W(e,e.return,ft)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===e)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===e)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===e)break e;$===ct&&($=null),ct=ct.return}$===ct&&($=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:ck(s,e),ek(e),a&4&&ak(e);break;case 21:break;default:ck(s,e),ek(e)}}function ek(e){var s=e.flags;if(s&2){try{e:{for(var i=e.return;i!==null;){if(Tj(i)){var a=i;break e}i=i.return}throw Error(p(160))}switch(a.tag){case 5:var o=a.stateNode;a.flags&32&&(ob(o,""),a.flags&=-33);var c=Uj(e);Wj(e,c,o);break;case 3:case 4:var d=a.stateNode.containerInfo,j=Uj(e);Vj(e,j,d);break;default:throw Error(p(161))}}catch(h){W(e,e.return,h)}e.flags&=-3}s&4096&&(e.flags&=-4097)}function hk(e,s,i){V=e,ik(e)}function ik(e,s,i){for(var a=(e.mode&1)!==0;V!==null;){var o=V,c=o.child;if(o.tag===22&&a){var d=o.memoizedState!==null||Jj;if(!d){var j=o.alternate,h=j!==null&&j.memoizedState!==null||U;j=Jj;var g=U;if(Jj=d,(U=h)&&!g)for(V=o;V!==null;)d=V,h=d.child,d.tag===22&&d.memoizedState!==null?jk(o):h!==null?(h.return=d,V=h):jk(o);for(;c!==null;)V=c,ik(c),c=c.sibling;V=o,Jj=j,U=g}kk(e)}else o.subtreeFlags&8772&&c!==null?(c.return=o,V=c):kk(e)}}function kk(e){for(;V!==null;){var s=V;if(s.flags&8772){var i=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U||Qj(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!U)if(i===null)a.componentDidMount();else{var o=s.elementType===s.type?i.memoizedProps:Ci(s.type,i.memoizedProps);a.componentDidUpdate(o,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&sh(s,c,a);break;case 3:var d=s.updateQueue;if(d!==null){if(i=null,s.child!==null)switch(s.child.tag){case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}sh(s,d,i)}break;case 5:var j=s.stateNode;if(i===null&&s.flags&4){i=j;var h=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&i.focus();break;case"img":h.src&&(i.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var g=s.alternate;if(g!==null){var $=g.memoizedState;if($!==null){var ct=$.dehydrated;ct!==null&&bd(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||s.flags&512&&Rj(s)}catch(ut){W(s,s.return,ut)}}if(s===e){V=null;break}if(i=s.sibling,i!==null){i.return=s.return,V=i;break}V=s.return}}function gk(e){for(;V!==null;){var s=V;if(s===e){V=null;break}var i=s.sibling;if(i!==null){i.return=s.return,V=i;break}V=s.return}}function jk(e){for(;V!==null;){var s=V;try{switch(s.tag){case 0:case 11:case 15:var i=s.return;try{Qj(4,s)}catch(h){W(s,i,h)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var o=s.return;try{a.componentDidMount()}catch(h){W(s,o,h)}}var c=s.return;try{Rj(s)}catch(h){W(s,c,h)}break;case 5:var d=s.return;try{Rj(s)}catch(h){W(s,d,h)}}}catch(h){W(s,s.return,h)}if(s===e){V=null;break}var j=s.sibling;if(j!==null){j.return=s.return,V=j;break}V=s.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(e){return e.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(e=C,e!==0||(e=window.event,e=e===void 0?16:jd(e.type)),e):1}function gi(e,s,i,a){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(e,i,a),(!(K&2)||e!==Q)&&(e===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(e,Z)),Dk(e,a),i===1&&K===0&&!(s.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(e,s){var i=e.callbackNode;wc(e,s);var a=uc(e,e===Q?Z:0);if(a===0)i!==null&&bc(i),e.callbackNode=null,e.callbackPriority=0;else if(s=a&-a,e.callbackPriority!==s){if(i!=null&&bc(i),s===1)e.tag===0?ig(Ek.bind(null,e)):hg(Ek.bind(null,e)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(a)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,e))}e.callbackPriority=s,e.callbackNode=i}}function Gk(e,s){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=e.callbackNode;if(Hk()&&e.callbackNode!==i)return null;var a=uc(e,e===Q?Z:0);if(a===0)return null;if(a&30||a&e.expiredLanes||s)s=Ik(e,a);else{s=a;var o=K;K|=2;var c=Jk();(Q!==e||Z!==s)&&(uk=null,Gj=B()+500,Kk(e,s));do try{Lk();break}catch(j){Mk(e,j)}while(!0);$g(),mk.current=c,K=o,Y!==null?s=0:(Q=null,Z=0,s=T)}if(s!==0){if(s===2&&(o=xc(e),o!==0&&(a=o,s=Nk(e,o))),s===1)throw i=pk,Kk(e,0),Ck(e,a),Dk(e,B()),i;if(s===6)Ck(e,a);else{if(o=e.current.alternate,!(a&30)&&!Ok(o)&&(s=Ik(e,a),s===2&&(c=xc(e),c!==0&&(a=c,s=Nk(e,c))),s===1))throw i=pk,Kk(e,0),Ck(e,a),Dk(e,B()),i;switch(e.finishedWork=o,e.finishedLanes=a,s){case 0:case 1:throw Error(p(345));case 2:Pk(e,tk,uk);break;case 3:if(Ck(e,a),(a&130023424)===a&&(s=fk+500-B(),10<s)){if(uc(e,0)!==0)break;if(o=e.suspendedLanes,(o&a)!==a){R(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),s);break}Pk(e,tk,uk);break;case 4:if(Ck(e,a),(a&4194240)===a)break;for(s=e.eventTimes,o=-1;0<a;){var d=31-oc(a);c=1<<d,d=s[d],d>o&&(o=d),a&=~c}if(a=o,a=B()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*lk(a/1960))-a,10<a){e.timeoutHandle=Ff(Pk.bind(null,e,tk,uk),a);break}Pk(e,tk,uk);break;case 5:Pk(e,tk,uk);break;default:throw Error(p(329))}}}return Dk(e,B()),e.callbackNode===i?Gk.bind(null,e):null}function Nk(e,s){var i=sk;return e.current.memoizedState.isDehydrated&&(Kk(e,s).flags|=256),e=Ik(e,s),e!==2&&(s=tk,tk=i,s!==null&&Fj(s)),e}function Fj(e){tk===null?tk=e:tk.push.apply(tk,e)}function Ok(e){for(var s=e;;){if(s.flags&16384){var i=s.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var o=i[a],c=o.getSnapshot;o=o.value;try{if(!He(c(),o))return!1}catch{return!1}}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ck(e,s){for(s&=~rk,s&=~qk,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var i=31-oc(s),a=1<<i;e[i]=-1,s&=~a}}function Ek(e){if(K&6)throw Error(p(327));Hk();var s=uc(e,0);if(!(s&1))return Dk(e,B()),null;var i=Ik(e,s);if(e.tag!==0&&i===2){var a=xc(e);a!==0&&(s=a,i=Nk(e,a))}if(i===1)throw i=pk,Kk(e,0),Ck(e,s),Dk(e,B()),i;if(i===6)throw Error(p(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,Pk(e,tk,uk),Dk(e,B()),null}function Qk(e,s){var i=K;K|=1;try{return e(s)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(e){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var s=K;K|=1;var i=ok.transition,a=C;try{if(ok.transition=null,C=1,e)return e()}finally{C=a,ok.transition=i,K=s,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(e,s){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var a=i;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(a);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(a.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=e,Y=e=Pg(e.current,null),Z=fj=s,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(s=0;s<fh.length;s++)if(i=fh[s],a=i.interleaved,a!==null){i.interleaved=null;var o=a.next,c=i.pending;if(c!==null){var d=c.next;c.next=o,a.next=d}i.pending=a}fh=null}return e}function Mk(e,s){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var a=M.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=s,Y=null;break}e:{var c=e,d=i.return,j=i,h=s;if(s=Z,j.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var g=h,$=j,ct=$.tag;if(!($.mode&1)&&(ct===0||ct===11||ct===15)){var ut=$.alternate;ut?($.updateQueue=ut.updateQueue,$.memoizedState=ut.memoizedState,$.lanes=ut.lanes):($.updateQueue=null,$.memoizedState=null)}var lt=Ui(d);if(lt!==null){lt.flags&=-257,Vi(lt,d,j,c,s),lt.mode&1&&Si(c,g,s),s=lt,h=g;var dt=s.updateQueue;if(dt===null){var ft=new Set;ft.add(h),s.updateQueue=ft}else dt.add(h);break e}else{if(!(s&1)){Si(c,g,s),tj();break e}h=Error(p(426))}}else if(I&&j.mode&1){var at=Ui(d);if(at!==null){!(at.flags&65536)&&(at.flags|=256),Vi(at,d,j,c,s),Jg(Ji(h,j));break e}}c=h=Ji(h,j),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var b=Ni(c,h,s);ph(c,b);break e;case 1:j=h;var _=c.type,it=c.stateNode;if(!(c.flags&128)&&(typeof _.getDerivedStateFromError=="function"||it!==null&&typeof it.componentDidCatch=="function"&&(Ri===null||!Ri.has(it)))){c.flags|=65536,s&=-s,c.lanes|=s;var nt=Qi(c,j,s);ph(c,nt);break e}}c=c.return}while(c!==null)}Sk(i)}catch(st){s=st,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var e=mk.current;return mk.current=Rh,e===null?Rh:e}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(e,s){var i=K;K|=2;var a=Jk();(Q!==e||Z!==s)&&(uk=null,Kk(e,s));do try{Tk();break}catch(o){Mk(e,o)}while(!0);if($g(),K=i,mk.current=a,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(e){var s=Vk(e.alternate,e,fj);e.memoizedProps=e.pendingProps,s===null?Sk(e):Y=s,nk.current=null}function Sk(e){var s=e;do{var i=s.alternate;if(e=s.return,s.flags&32768){if(i=Ij(i,s),i!==null){i.flags&=32767,Y=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,s,fj),i!==null){Y=i;return}if(s=s.sibling,s!==null){Y=s;return}Y=s=e}while(s!==null);T===0&&(T=5)}function Pk(e,s,i){var a=C,o=ok.transition;try{ok.transition=null,C=1,Wk(e,s,i,a)}finally{ok.transition=o,C=a}return null}function Wk(e,s,i,a){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=e.finishedWork;var o=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(p(177));e.callbackNode=null,e.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(e,c),e===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var j=K;K|=4,nk.current=null,Oj(e,i),dk(i,e),Oe(Df),dd=!!Cf,Df=Cf=null,e.current=i,hk(i),dc(),K=j,C=d,ok.transition=c}else e.current=i;if(vk&&(vk=!1,wk=e,xk=o),c=e.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(e,B()),s!==null)for(a=e.onRecoverableError,i=0;i<s.length;i++)o=s[i],a(o.value,{componentStack:o.stack,digest:o.digest});if(Oi)throw Oi=!1,e=Pi,Pi=null,e;return xk&1&&e.tag!==0&&Hk(),c=e.pendingLanes,c&1?e===zk?yk++:(yk=0,zk=e):yk=0,jg(),null}function Hk(){if(wk!==null){var e=Dc(xk),s=ok.transition,i=C;try{if(ok.transition=null,C=16>e?16:e,wk===null)var a=!1;else{if(e=wk,wk=null,xk=0,K&6)throw Error(p(331));var o=K;for(K|=4,V=e.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var j=c.deletions;if(j!==null){for(var h=0;h<j.length;h++){var g=j[h];for(V=g;V!==null;){var $=V;switch($.tag){case 0:case 11:case 15:Pj(8,$,c)}var ct=$.child;if(ct!==null)ct.return=$,V=ct;else for(;V!==null;){$=V;var ut=$.sibling,lt=$.return;if(Sj($),$===g){V=null;break}if(ut!==null){ut.return=lt,V=ut;break}V=lt}}}var dt=c.alternate;if(dt!==null){var ft=dt.child;if(ft!==null){dt.child=null;do{var at=ft.sibling;ft.sibling=null,ft=at}while(ft!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var b=c.sibling;if(b!==null){b.return=c.return,V=b;break e}V=c.return}}var _=e.current;for(V=_;V!==null;){d=V;var it=d.child;if(d.subtreeFlags&2064&&it!==null)it.return=d,V=it;else e:for(d=_;V!==null;){if(j=V,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Qj(9,j)}}catch(st){W(j,j.return,st)}if(j===d){V=null;break e}var nt=j.sibling;if(nt!==null){nt.return=j.return,V=nt;break e}V=j.return}}if(K=o,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,e)}catch{}a=!0}return a}finally{C=i,ok.transition=s}}return!1}function Xk(e,s,i){s=Ji(i,s),s=Ni(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s))}function W(e,s,i){if(e.tag===3)Xk(e,e,i);else for(;s!==null;){if(s.tag===3){Xk(s,e,i);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ri===null||!Ri.has(a))){e=Ji(i,e),e=Qi(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e));break}}s=s.return}}function Ti(e,s,i){var a=e.pingCache;a!==null&&a.delete(s),s=R(),e.pingedLanes|=e.suspendedLanes&i,Q===e&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(e,0):rk|=i),Dk(e,s)}function Yk(e,s){s===0&&(e.mode&1?(s=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):s=1);var i=R();e=ih(e,s),e!==null&&(Ac(e,s,i),Dk(e,i))}function uj(e){var s=e.memoizedState,i=0;s!==null&&(i=s.retryLane),Yk(e,i)}function bk(e,s){var i=0;switch(e.tag){case 13:var a=e.stateNode,o=e.memoizedState;o!==null&&(i=o.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(p(314))}a!==null&&a.delete(s),Yk(e,i)}var Vk;Vk=function(e,s,i){if(e!==null)if(e.memoizedProps!==s.pendingProps||Wf.current)dh=!0;else{if(!(e.lanes&i)&&!(s.flags&128))return dh=!1,yj(e,s,i);dh=!!(e.flags&131072)}else dh=!1,I&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;ij(e,s),e=s.pendingProps;var o=Yf(s,H.current);ch(s,i),o=Nh(null,s,a,e,o,i);var c=Sh();return s.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(a)?(c=!0,cg(s)):c=!1,s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,kh(s),o.updater=Ei,s.stateNode=o,o._reactInternals=s,Ii(s,a,e,i),s=jj(null,s,a,!0,c,i)):(s.tag=0,I&&c&&vg(s),Xi(null,s,o,i),s=s.child),s;case 16:a=s.elementType;e:{switch(ij(e,s),e=s.pendingProps,o=a._init,a=o(a._payload),s.type=a,o=s.tag=Zk(a),e=Ci(a,e),o){case 0:s=cj(null,s,a,e,i);break e;case 1:s=hj(null,s,a,e,i);break e;case 11:s=Yi(null,s,a,e,i);break e;case 14:s=$i(null,s,a,Ci(a.type,e),i);break e}throw Error(p(306,a,""))}return s;case 0:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),cj(e,s,a,o,i);case 1:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),hj(e,s,a,o,i);case 3:e:{if(kj(s),e===null)throw Error(p(387));a=s.pendingProps,c=s.memoizedState,o=c.element,lh(e,s),qh(s,a,null,i);var d=s.memoizedState;if(a=d.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){o=Ji(Error(p(423)),s),s=lj(e,s,a,i,o);break e}else if(a!==o){o=Ji(Error(p(424)),s),s=lj(e,s,a,i,o);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I=!0,zg=null,i=Vg(s,null,a,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),a===o){s=Zi(e,s,i);break e}Xi(e,s,a,i)}s=s.child}return s;case 5:return Ah(s),e===null&&Eg(s),a=s.type,o=s.pendingProps,c=e!==null?e.memoizedProps:null,d=o.children,Ef(a,o)?d=null:c!==null&&Ef(a,c)&&(s.flags|=32),gj(e,s),Xi(e,s,d,i),s.child;case 6:return e===null&&Eg(s),null;case 13:return oj(e,s,i);case 4:return yh(s,s.stateNode.containerInfo),a=s.pendingProps,e===null?s.child=Ug(s,null,a,i):Xi(e,s,a,i),s.child;case 11:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),Yi(e,s,a,o,i);case 7:return Xi(e,s,s.pendingProps,i),s.child;case 8:return Xi(e,s,s.pendingProps.children,i),s.child;case 12:return Xi(e,s,s.pendingProps.children,i),s.child;case 10:e:{if(a=s.type._context,o=s.pendingProps,c=s.memoizedProps,d=o.value,G(Wg,a._currentValue),a._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===o.children&&!Wf.current){s=Zi(e,s,i);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var j=c.dependencies;if(j!==null){d=c.child;for(var h=j.firstContext;h!==null;){if(h.context===a){if(c.tag===1){h=mh(-1,i&-i),h.tag=2;var g=c.updateQueue;if(g!==null){g=g.shared;var $=g.pending;$===null?h.next=h:(h.next=$.next,$.next=h),g.pending=h}}c.lanes|=i,h=c.alternate,h!==null&&(h.lanes|=i),bh(c.return,i,s),j.lanes|=i;break}h=h.next}}else if(c.tag===10)d=c.type===s.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=i,j=d.alternate,j!==null&&(j.lanes|=i),bh(d,i,s),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===s){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(e,s,o.children,i),s=s.child}return s;case 9:return o=s.type,a=s.pendingProps.children,ch(s,i),o=eh(o),a=a(o),s.flags|=1,Xi(e,s,a,i),s.child;case 14:return a=s.type,o=Ci(a,s.pendingProps),o=Ci(a.type,o),$i(e,s,a,o,i);case 15:return bj(e,s,s.type,s.pendingProps,i);case 17:return a=s.type,o=s.pendingProps,o=s.elementType===a?o:Ci(a,o),ij(e,s),s.tag=1,Zf(a)?(e=!0,cg(s)):e=!1,ch(s,i),Gi(s,a,o),Ii(s,a,o,i),jj(null,s,a,!0,e,i);case 19:return xj(e,s,i);case 22:return dj(e,s,i)}throw Error(p(156,s.tag))};function Fk(e,s){return ac(e,s)}function $k(e,s,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(e,s,i,a){return new $k(e,s,i,a)}function aj(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zk(e){if(typeof e=="function")return aj(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Da)return 11;if(e===Ga)return 14}return 2}function Pg(e,s){var i=e.alternate;return i===null?(i=Bg(e.tag,s,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=s,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,s=e.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Rg(e,s,i,a,o,c){var d=2;if(a=e,typeof e=="function")aj(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case ya:return Tg(i.children,o,c,s);case za:d=8,o|=8;break;case Aa:return e=Bg(12,i,s,o|2),e.elementType=Aa,e.lanes=c,e;case Ea:return e=Bg(13,i,s,o),e.elementType=Ea,e.lanes=c,e;case Fa:return e=Bg(19,i,s,o),e.elementType=Fa,e.lanes=c,e;case Ia:return pj(i,o,c,s);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,a=null;break e}throw Error(p(130,e==null?e:typeof e,""))}return s=Bg(d,i,s,o),s.elementType=e,s.type=a,s.lanes=c,s}function Tg(e,s,i,a){return e=Bg(7,e,a,s),e.lanes=i,e}function pj(e,s,i,a){return e=Bg(22,e,a,s),e.elementType=Ia,e.lanes=i,e.stateNode={isHidden:!1},e}function Qg(e,s,i){return e=Bg(6,e,null,s),e.lanes=i,e}function Sg(e,s,i){return s=Bg(4,e.children!==null?e.children:[],e.key,s),s.lanes=i,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function al(e,s,i,a,o){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=a,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function bl(e,s,i,a,o,c,d,j,h){return e=new al(e,s,i,j,h),s===1?(s=1,c===!0&&(s|=8)):s=0,c=Bg(3,null,null,s),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),e}function cl(e,s,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:a==null?null:""+a,children:e,containerInfo:s,implementation:i}}function dl(e){if(!e)return Vf;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(p(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(e.tag===1){var i=e.type;if(Zf(i))return bg(e,i,s)}return s}function el(e,s,i,a,o,c,d,j,h){return e=bl(i,a,!0,e,o,c,d,j,h),e.context=dl(null),i=e.current,a=R(),o=yi(i),c=mh(a,o),c.callback=s??null,nh(i,c,o),e.current.lanes=o,Ac(e,o,a),Dk(e,a),e}function fl(e,s,i,a){var o=s.current,c=R(),d=yi(o);return i=dl(i),s.context===null?s.context=i:s.pendingContext=i,s=mh(c,d),s.payload={element:e},a=a===void 0?null:a,a!==null&&(s.callback=a),e=nh(o,s,d),e!==null&&(gi(e,o,d,c),oh(e,o,d)),d}function gl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hl(e,s){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<s?i:s}}function il(e,s){hl(e,s),(e=e.alternate)&&hl(e,s)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(e){console.error(e)};function ll(e){this._internalRoot=e}ml.prototype.render=ll.prototype.render=function(e){var s=this._internalRoot;if(s===null)throw Error(p(409));fl(e,s,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var s=e.containerInfo;Rk(function(){fl(null,e,null,null)}),s[uf]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var s=Hc();e={blockedOn:null,target:e,priority:s};for(var i=0;i<Qc.length&&s!==0&&s<Qc[i].priority;i++);Qc.splice(i,0,e),i===0&&Vc(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(e,s,i,a,o){if(o){if(typeof a=="function"){var c=a;a=function(){var g=gl(d);c.call(g)}}var d=el(s,a,e,0,null,!1,!1,"",pl);return e._reactRootContainer=d,e[uf]=d.current,sf(e.nodeType===8?e.parentNode:e),Rk(),d}for(;o=e.lastChild;)e.removeChild(o);if(typeof a=="function"){var j=a;a=function(){var g=gl(h);j.call(g)}}var h=bl(e,0,!1,null,null,!1,!1,"",pl);return e._reactRootContainer=h,e[uf]=h.current,sf(e.nodeType===8?e.parentNode:e),Rk(function(){fl(s,h,i,a)}),h}function rl(e,s,i,a,o){var c=i._reactRootContainer;if(c){var d=c;if(typeof o=="function"){var j=o;o=function(){var h=gl(d);j.call(h)}}fl(s,d,e,o)}else d=ql(i,s,e,o,a);return gl(d)}Ec=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var i=tc(s.pendingLanes);i!==0&&(Cc(s,i|1),Dk(s,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var a=ih(e,1);if(a!==null){var o=R();gi(a,e,1,o)}}),il(e,1)}};Fc=function(e){if(e.tag===13){var s=ih(e,134217728);if(s!==null){var i=R();gi(s,e,134217728,i)}il(e,134217728)}};Gc=function(e){if(e.tag===13){var s=yi(e),i=ih(e,s);if(i!==null){var a=R();gi(i,e,s,a)}il(e,s)}};Hc=function(){return C};Ic=function(e,s){var i=C;try{return C=e,s()}finally{C=i}};yb=function(e,s,i){switch(s){case"input":if(bb(e,i),s=i.name,i.type==="radio"&&s!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<i.length;s++){var a=i[s];if(a!==e&&a.form===e.form){var o=Db(a);if(!o)throw Error(p(90));Wa(a),bb(a,o)}}}break;case"textarea":ib(e,i);break;case"select":s=i.value,s!=null&&fb(e,!!i.multiple,s,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zb(e),e===null?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(e,s){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(s))throw Error(p(200));return cl(e,s,null,i)};reactDom_production_min.createRoot=function(e,s){if(!nl(e))throw Error(p(299));var i=!1,a="",o=kl;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),s=bl(e,1,!1,null,null,i,!1,a,o),e[uf]=s.current,sf(e.nodeType===8?e.parentNode:e),new ll(s)};reactDom_production_min.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var s=e._reactInternals;if(s===void 0)throw typeof e.render=="function"?Error(p(188)):(e=Object.keys(e).join(","),Error(p(268,e)));return e=Zb(s),e=e===null?null:e.stateNode,e};reactDom_production_min.flushSync=function(e){return Rk(e)};reactDom_production_min.hydrate=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!0,i)};reactDom_production_min.hydrateRoot=function(e,s,i){if(!nl(e))throw Error(p(405));var a=i!=null&&i.hydratedSources||null,o=!1,c="",d=kl;if(i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),s=el(s,null,e,1,i??null,o,!1,c,d),e[uf]=s.current,sf(e),a)for(e=0;e<a.length;e++)i=a[e],o=i._getVersion,o=o(i._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[i,o]:s.mutableSourceEagerHydrationData.push(i,o);return new ml(s)};reactDom_production_min.render=function(e,s,i){if(!ol(s))throw Error(p(200));return rl(null,e,s,!1,i)};reactDom_production_min.unmountComponentAtNode=function(e){if(!ol(e))throw Error(p(40));return e._reactRootContainer?(Rk(function(){rl(null,null,e,!1,function(){e._reactRootContainer=null,e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(e,s,i,a){if(!ol(i))throw Error(p(200));if(e==null||e._reactInternals===void 0)throw Error(p(38));return rl(e,s,i,!1,a)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(e){console.error(e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(e={}){function s(a,o){let{pathname:c,search:d,hash:j}=a.location;return createLocation("",{pathname:c,search:d,hash:j},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function i(a,o){return typeof o=="string"?o:createPath(o)}return getUrlBasedHistory(s,i,null,e)}function invariant$1(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function warning$2(e,s){if(!e){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,s){return{usr:e.state,key:e.key,idx:s}}function createLocation(e,s,i=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof s=="string"?parsePath(s):s,state:i,key:s&&s.key||a||createKey()}}function createPath({pathname:e="/",search:s="",hash:i=""}){return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function parsePath(e){let s={};if(e){let i=e.indexOf("#");i>=0&&(s.hash=e.substring(i),e=e.substring(0,i));let a=e.indexOf("?");a>=0&&(s.search=e.substring(a),e=e.substring(0,a)),e&&(s.pathname=e)}return s}function getUrlBasedHistory(e,s,i,a={}){let{window:o=document.defaultView,v5Compat:c=!1}=a,d=o.history,j="POP",h=null,g=$();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function $(){return(d.state||{idx:null}).idx}function ct(){j="POP";let at=$(),b=at==null?null:at-g;g=at,h&&h({action:j,location:ft.location,delta:b})}function ut(at,b){j="PUSH";let _=createLocation(ft.location,at,b);g=$()+1;let it=getHistoryState(_,g),nt=ft.createHref(_);try{d.pushState(it,"",nt)}catch(st){if(st instanceof DOMException&&st.name==="DataCloneError")throw st;o.location.assign(nt)}c&&h&&h({action:j,location:ft.location,delta:1})}function lt(at,b){j="REPLACE";let _=createLocation(ft.location,at,b);g=$();let it=getHistoryState(_,g),nt=ft.createHref(_);d.replaceState(it,"",nt),c&&h&&h({action:j,location:ft.location,delta:0})}function dt(at){return createBrowserURLImpl(at)}let ft={get action(){return j},get location(){return e(o,d)},listen(at){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(PopStateEventType,ct),h=at,()=>{o.removeEventListener(PopStateEventType,ct),h=null}},createHref(at){return s(o,at)},createURL:dt,encodeLocation(at){let b=dt(at);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:ut,replace:lt,go(at){return d.go(at)}};return ft}function createBrowserURLImpl(e,s=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(i,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:createPath(e);return a=a.replace(/ $/,"%20"),!s&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function matchRoutes(e,s,i="/"){return matchRoutesImpl(e,s,i,!1)}function matchRoutesImpl(e,s,i,a){let o=typeof s=="string"?parsePath(s):s,c=stripBasename(o.pathname||"/",i);if(c==null)return null;let d=flattenRoutes(e);rankRouteBranches(d);let j=null;for(let h=0;j==null&&h<d.length;++h){let g=decodePath(c);j=matchRouteBranch(d[h],g,a)}return j}function flattenRoutes(e,s=[],i=[],a="",o=!1){let c=(d,j,h=o,g)=>{let $={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:j,route:d};if($.relativePath.startsWith("/")){if(!$.relativePath.startsWith(a)&&h)return;invariant$1($.relativePath.startsWith(a),`Absolute route path "${$.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),$.relativePath=$.relativePath.slice(a.length)}let ct=joinPaths([a,$.relativePath]),ut=i.concat($);d.children&&d.children.length>0&&(invariant$1(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${ct}".`),flattenRoutes(d.children,s,ut,ct,h)),!(d.path==null&&!d.index)&&s.push({path:ct,score:computeScore(ct,d.index),routesMeta:ut})};return e.forEach((d,j)=>{var h;if(d.path===""||!((h=d.path)!=null&&h.includes("?")))c(d,j);else for(let g of explodeOptionalSegments(d.path))c(d,j,!0,g)}),s}function explodeOptionalSegments(e){let s=e.split("/");if(s.length===0)return[];let[i,...a]=s,o=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return o?[c,""]:[c];let d=explodeOptionalSegments(a.join("/")),j=[];return j.push(...d.map(h=>h===""?c:[c,h].join("/"))),o&&j.push(...d),j.map(h=>e.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(e){e.sort((s,i)=>s.score!==i.score?i.score-s.score:compareIndexes(s.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,s){let i=e.split("/"),a=i.length;return i.some(isSplat)&&(a+=splatPenalty),s&&(a+=indexRouteValue),i.filter(o=>!isSplat(o)).reduce((o,c)=>o+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,s){return e.length===s.length&&e.slice(0,-1).every((a,o)=>a===s[o])?e[e.length-1]-s[s.length-1]:0}function matchRouteBranch(e,s,i=!1){let{routesMeta:a}=e,o={},c="/",d=[];for(let j=0;j<a.length;++j){let h=a[j],g=j===a.length-1,$=c==="/"?s:s.slice(c.length)||"/",ct=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:g},$),ut=h.route;if(!ct&&g&&i&&!a[a.length-1].route.index&&(ct=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},$)),!ct)return null;Object.assign(o,ct.params),d.push({params:o,pathname:joinPaths([c,ct.pathname]),pathnameBase:normalizePathname(joinPaths([c,ct.pathnameBase])),route:ut}),ct.pathnameBase!=="/"&&(c=joinPaths([c,ct.pathnameBase]))}return d}function matchPath(e,s){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=compilePath(e.path,e.caseSensitive,e.end),o=s.match(i);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),j=o.slice(1);return{params:a.reduce((g,{paramName:$,isOptional:ct},ut)=>{if($==="*"){let dt=j[ut]||"";d=c.slice(0,c.length-dt.length).replace(/(.)\/+$/,"$1")}const lt=j[ut];return ct&&!lt?g[$]=void 0:g[$]=(lt||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:d,pattern:e}}function compilePath(e,s=!1,i=!0){warning$2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,j,h)=>(a.push({paramName:j,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,s?void 0:"i"),a]}function decodePath(e){try{return e.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return warning$2(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${s}).`),e}}function stripBasename(e,s){if(s==="/")return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let i=s.endsWith("/")?s.length-1:s.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}function resolvePath(e,s="/"){let{pathname:i,search:a="",hash:o=""}=typeof e=="string"?parsePath(e):e;return{pathname:i?i.startsWith("/")?i:resolvePathname(i,s):s,search:normalizeSearch(a),hash:normalizeHash(o)}}function resolvePathname(e,s){let i=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?i.length>1&&i.pop():o!=="."&&i.push(o)}),i.length>1?i.join("/"):"/"}function getInvalidPathError(e,s,i,a){return`Cannot include a '${e}' character in a manually specified \`to.${s}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((s,i)=>i===0||s.route.path&&s.route.path.length>0)}function getResolveToMatches(e){let s=getPathContributingMatches(e);return s.map((i,a)=>a===s.length-1?i.pathname:i.pathnameBase)}function resolveTo(e,s,i,a=!1){let o;typeof e=="string"?o=parsePath(e):(o={...e},invariant$1(!o.pathname||!o.pathname.includes("?"),getInvalidPathError("?","pathname","search",o)),invariant$1(!o.pathname||!o.pathname.includes("#"),getInvalidPathError("#","pathname","hash",o)),invariant$1(!o.search||!o.search.includes("#"),getInvalidPathError("#","search","hash",o)));let c=e===""||o.pathname==="",d=c?"/":o.pathname,j;if(d==null)j=i;else{let ct=s.length-1;if(!a&&d.startsWith("..")){let ut=d.split("/");for(;ut[0]==="..";)ut.shift(),ct-=1;o.pathname=ut.join("/")}j=ct>=0?s[ct]:"/"}let h=resolvePath(o,j),g=d&&d!=="/"&&d.endsWith("/"),$=(c||d===".")&&i.endsWith("/");return!h.pathname.endsWith("/")&&(g||$)&&(h.pathname+="/"),h}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(e,{relative:s}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=reactExports.useContext(NavigationContext),{hash:o,pathname:c,search:d}=useResolvedPath(e,{relative:s}),j=c;return i!=="/"&&(j=c==="/"?i:joinPaths([i,c])),a.createHref({pathname:j,search:d,hash:o})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:s,navigator:i}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),c=JSON.stringify(getResolveToMatches(a)),d=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{d.current=!0}),reactExports.useCallback((h,g={})=>{if(warning$2(d.current,navigateEffectWarning),!d.current)return;if(typeof h=="number"){i.go(h);return}let $=resolveTo(h,JSON.parse(c),o,g.relative==="path");e==null&&s!=="/"&&($.pathname=$.pathname==="/"?s:joinPaths([s,$.pathname])),(g.replace?i.replace:i.push)($,g.state,g)},[s,i,c,o,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:s}={}){let{matches:i}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),o=JSON.stringify(getResolveToMatches(i));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(o),a,s==="path"),[e,o,a,s])}function useRoutes(e,s){return useRoutesImpl(e,s)}function useRoutesImpl(e,s,i,a){var b;invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),d=c[c.length-1],j=d?d.params:{},h=d?d.pathname:"/",g=d?d.pathnameBase:"/",$=d&&d.route;{let _=$&&$.path||"";warningOnce(h,!$||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let ct=useLocation(),ut;if(s){let _=typeof s=="string"?parsePath(s):s;invariant$1(g==="/"||((b=_.pathname)==null?void 0:b.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${_.pathname}" was given in the \`location\` prop.`),ut=_}else ut=ct;let lt=ut.pathname||"/",dt=lt;if(g!=="/"){let _=g.replace(/^\//,"").split("/");dt="/"+lt.replace(/^\//,"").split("/").slice(_.length).join("/")}let ft=matchRoutes(e,{pathname:dt});warning$2($||ft!=null,`No routes matched location "${ut.pathname}${ut.search}${ut.hash}" `),warning$2(ft==null||ft[ft.length-1].route.element!==void 0||ft[ft.length-1].route.Component!==void 0||ft[ft.length-1].route.lazy!==void 0,`Matched leaf route at location "${ut.pathname}${ut.search}${ut.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let at=_renderMatches(ft&&ft.map(_=>Object.assign({},_,{params:Object.assign({},j,_.params),pathname:joinPaths([g,o.encodeLocation?o.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?g:joinPaths([g,o.encodeLocation?o.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),c,i,a);return s&&at?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ut},navigationType:"POP"}},at):at}function DefaultErrorComponent(){let e=useRouteError(),s=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:c},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:c},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),i?reactExports.createElement("pre",{style:o},i):null,d)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:e,match:s,children:i}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},i)}function _renderMatches(e,s=[],i=null,a=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(s.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let o=e,c=i==null?void 0:i.errors;if(c!=null){let h=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);invariant$1(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,h+1))}let d=!1,j=-1;if(i)for(let h=0;h<o.length;h++){let g=o[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(j=h),g.route.id){let{loaderData:$,errors:ct}=i,ut=g.route.loader&&!$.hasOwnProperty(g.route.id)&&(!ct||ct[g.route.id]===void 0);if(g.route.lazy||ut){d=!0,j>=0?o=o.slice(0,j+1):o=[o[0]];break}}}return o.reduceRight((h,g,$)=>{let ct,ut=!1,lt=null,dt=null;i&&(ct=c&&g.route.id?c[g.route.id]:void 0,lt=g.route.errorElement||defaultErrorElement,d&&(j<0&&$===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ut=!0,dt=null):j===$&&(ut=!0,dt=g.route.hydrateFallbackElement||null)));let ft=s.concat(o.slice(0,$+1)),at=()=>{let b;return ct?b=lt:ut?b=dt:g.route.Component?b=reactExports.createElement(g.route.Component,null):g.route.element?b=g.route.element:b=h,reactExports.createElement(RenderedRoute,{match:g,routeContext:{outlet:h,matches:ft,isDataRoute:i!=null},children:b})};return i&&(g.route.ErrorBoundary||g.route.errorElement||$===0)?reactExports.createElement(RenderErrorBoundary,{location:i.location,revalidation:i.revalidation,component:lt,error:ct,children:at(),routeContext:{outlet:null,matches:ft,isDataRoute:!0}}):at()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let s=reactExports.useContext(DataRouterContext);return invariant$1(s,getDataRouterConsoleError(e)),s}function useDataRouterState(e){let s=reactExports.useContext(DataRouterStateContext);return invariant$1(s,getDataRouterConsoleError(e)),s}function useRouteContext(e){let s=reactExports.useContext(RouteContext);return invariant$1(s,getDataRouterConsoleError(e)),s}function useCurrentRouteId(e){let s=useRouteContext(e),i=s.matches[s.matches.length-1];return invariant$1(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var a;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState("useRouteError"),i=useCurrentRouteId("useRouteError");return e!==void 0?e:(a=s.errors)==null?void 0:a[i]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),s=useCurrentRouteId("useNavigate"),i=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{i.current=!0}),reactExports.useCallback(async(o,c={})=>{warning$2(i.current,navigateEffectWarning),i.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:s,...c}))},[e,s])}var alreadyWarned={};function warningOnce(e,s,i){!s&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning$2(!1,i))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:s,state:i}){return useRoutesImpl(e,void 0,i,s)}function Navigate({to:e,replace:s,state:i,relative:a}){invariant$1(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=reactExports.useContext(NavigationContext);warning$2(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=reactExports.useContext(RouteContext),{pathname:d}=useLocation(),j=useNavigate(),h=resolveTo(e,getResolveToMatches(c),d,a==="path"),g=JSON.stringify(h);return reactExports.useEffect(()=>{j(JSON.parse(g),{replace:s,state:i,relative:a})},[j,g,a,s,i]),null}function Route(e){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:s=null,location:i,navigationType:a="POP",navigator:o,static:c=!1}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),j=reactExports.useMemo(()=>({basename:d,navigator:o,static:c,future:{}}),[d,o,c]);typeof i=="string"&&(i=parsePath(i));let{pathname:h="/",search:g="",hash:$="",state:ct=null,key:ut="default"}=i,lt=reactExports.useMemo(()=>{let dt=stripBasename(h,d);return dt==null?null:{location:{pathname:dt,search:g,hash:$,state:ct,key:ut},navigationType:a}},[d,h,g,$,ct,ut,a]);return warning$2(lt!=null,`<Router basename="${d}"> is not able to match the URL "${h}${g}${$}" because it does not start with the basename, so the <Router> won't render anything.`),lt==null?null:reactExports.createElement(NavigationContext.Provider,{value:j},reactExports.createElement(LocationContext.Provider,{children:s,value:lt}))}function Routes({children:e,location:s}){return useRoutes(createRoutesFromChildren(e),s)}function createRoutesFromChildren(e,s=[]){let i=[];return reactExports.Children.forEach(e,(a,o)=>{if(!reactExports.isValidElement(a))return;let c=[...s,o];if(a.type===reactExports.Fragment){i.push.apply(i,createRoutesFromChildren(a.props.children,c));return}invariant$1(a.type===Route,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=createRoutesFromChildren(a.props.children,c)),i.push(d)}),i}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return e!=null&&typeof e.tagName=="string"}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,s){return e.button===0&&(!s||s==="_self")&&!isModifiedEvent(e)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning$2(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,s){let i,a,o,c,d;if(isFormElement(e)){let j=e.getAttribute("action");a=j?stripBasename(j,s):null,i=e.getAttribute("method")||defaultMethod,o=getFormEncType(e.getAttribute("enctype"))||defaultEncType,c=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let j=e.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||j.getAttribute("action");if(a=h?stripBasename(h,s):null,i=e.getAttribute("formmethod")||j.getAttribute("method")||defaultMethod,o=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(j.getAttribute("enctype"))||defaultEncType,c=new FormData(j,e),!isFormDataSubmitterSupported()){let{name:g,type:$,value:ct}=e;if($==="image"){let ut=g?`${g}.`:"";c.append(`${ut}x`,"0"),c.append(`${ut}y`,"0")}else g&&c.append(g,ct)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=defaultMethod,a=null,o=defaultEncType,d=e}return c&&o==="text/plain"&&(d=c,c=void 0),{action:a,method:i.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,s){if(e===!1||e===null||typeof e>"u")throw new Error(s)}function singleFetchUrl(e,s,i){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${i}`:s&&stripBasename(a.pathname,s)==="/"?a.pathname=`${s.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function loadRouteModule(e,s){if(e.id in s)return s[e.id];try{let i=await import(e.module);return s[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,s,i){let a=await Promise.all(e.map(async o=>{let c=s.routes[o.route.id];if(c){let d=await loadRouteModule(c,i);return d.links?d.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function getNewMatchesForLinks(e,s,i,a,o,c){let d=(h,g)=>i[g]?h.route.id!==i[g].route.id:!0,j=(h,g)=>{var $;return i[g].pathname!==h.pathname||(($=i[g].route.path)==null?void 0:$.endsWith("*"))&&i[g].params["*"]!==h.params["*"]};return c==="assets"?s.filter((h,g)=>d(h,g)||j(h,g)):c==="data"?s.filter((h,g)=>{var ct;let $=a.routes[h.route.id];if(!$||!$.hasLoader)return!1;if(d(h,g)||j(h,g))return!0;if(h.route.shouldRevalidate){let ut=h.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((ct=i[0])==null?void 0:ct.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof ut=="boolean")return ut}return!0}):[]}function getModuleLinkHrefs(e,s,{includeHydrateFallback:i}={}){return dedupeHrefs(e.map(a=>{let o=s.routes[a.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),i&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let s={},i=Object.keys(e).sort();for(let a of i)s[a]=e[a];return s}function dedupeLinkDescriptors(e,s){let i=new Set;return new Set(s),e.reduce((a,o)=>{let c=JSON.stringify(sortKeys(o));return i.has(c)||(i.add(c),a.push({key:c,link:o})),a},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,s){let i=reactExports.useContext(FrameworkContext),[a,o]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),{onFocus:j,onBlur:h,onMouseEnter:g,onMouseLeave:$,onTouchStart:ct}=s,ut=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let ft=b=>{b.forEach(_=>{d(_.isIntersecting)})},at=new IntersectionObserver(ft,{threshold:.5});return ut.current&&at.observe(ut.current),()=>{at.disconnect()}}},[e]),reactExports.useEffect(()=>{if(a){let ft=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(ft)}}},[a]);let lt=()=>{o(!0)},dt=()=>{o(!1),d(!1)};return i?e!=="intent"?[c,ut,{}]:[c,ut,{onFocus:composeEventHandlers(j,lt),onBlur:composeEventHandlers(h,dt),onMouseEnter:composeEventHandlers(g,lt),onMouseLeave:composeEventHandlers($,dt),onTouchStart:composeEventHandlers(ct,lt)}]:[!1,ut,{}]}function composeEventHandlers(e,s){return i=>{e&&e(i),i.defaultPrevented||s(i)}}function PrefetchPageLinks({page:e,...s}){let{router:i}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(i.routes,e,i.basename),[i.routes,e,i.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:a,...s}):null}function useKeyedPrefetchLinks(e){let{manifest:s,routeModules:i}=useFrameworkContext(),[a,o]=reactExports.useState([]);return reactExports.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(e,s,i).then(d=>{c||o(d)}),()=>{c=!0}},[e,s,i]),a}function PrefetchPageLinksImpl({page:e,matches:s,...i}){let a=useLocation(),{manifest:o,routeModules:c}=useFrameworkContext(),{basename:d}=useDataRouterContext2(),{loaderData:j,matches:h}=useDataRouterStateContext(),g=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,h,o,a,"data"),[e,s,h,o,a]),$=reactExports.useMemo(()=>getNewMatchesForLinks(e,s,h,o,a,"assets"),[e,s,h,o,a]),ct=reactExports.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let dt=new Set,ft=!1;if(s.forEach(b=>{var it;let _=o.routes[b.route.id];!_||!_.hasLoader||(!g.some(nt=>nt.route.id===b.route.id)&&b.route.id in j&&((it=c[b.route.id])!=null&&it.shouldRevalidate)||_.hasClientLoader?ft=!0:dt.add(b.route.id))}),dt.size===0)return[];let at=singleFetchUrl(e,d,"data");return ft&&dt.size>0&&at.searchParams.set("_routes",s.filter(b=>dt.has(b.route.id)).map(b=>b.route.id).join(",")),[at.pathname+at.search]},[d,j,a,o,g,s,e,c]),ut=reactExports.useMemo(()=>getModuleLinkHrefs($,o),[$,o]),lt=useKeyedPrefetchLinks($);return reactExports.createElement(reactExports.Fragment,null,ct.map(dt=>reactExports.createElement("link",{key:dt,rel:"prefetch",as:"fetch",href:dt,...i})),ut.map(dt=>reactExports.createElement("link",{key:dt,rel:"modulepreload",href:dt,...i})),lt.map(({key:dt,link:ft})=>reactExports.createElement("link",{key:dt,nonce:i.nonce,...ft})))}function mergeRefs$1(...e){return s=>{e.forEach(i=>{typeof i=="function"?i(s):i!=null&&(i.current=s)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.8.1")}catch{}function BrowserRouter({basename:e,children:s,window:i}){let a=reactExports.useRef();a.current==null&&(a.current=createBrowserHistory({window:i,v5Compat:!0}));let o=a.current,[c,d]=reactExports.useState({action:o.action,location:o.location}),j=reactExports.useCallback(h=>{reactExports.startTransition(()=>d(h))},[d]);return reactExports.useLayoutEffect(()=>o.listen(j),[o,j]),reactExports.createElement(Router,{basename:e,children:s,location:c.location,navigationType:c.action,navigator:o})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:s,discover:i="render",prefetch:a="none",relative:o,reloadDocument:c,replace:d,state:j,target:h,to:g,preventScrollReset:$,viewTransition:ct,...ut},lt){let{basename:dt}=reactExports.useContext(NavigationContext),ft=typeof g=="string"&&ABSOLUTE_URL_REGEX2.test(g),at,b=!1;if(typeof g=="string"&&ft&&(at=g,isBrowser$1))try{let ot=new URL(window.location.href),xt=g.startsWith("//")?new URL(ot.protocol+g):new URL(g),et=stripBasename(xt.pathname,dt);xt.origin===ot.origin&&et!=null?g=et+xt.search+xt.hash:b=!0}catch{warning$2(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=useHref(g,{relative:o}),[it,nt,st]=usePrefetchBehavior(a,ut),ht=useLinkClickHandler(g,{replace:d,state:j,target:h,preventScrollReset:$,relative:o,viewTransition:ct});function rt(ot){s&&s(ot),ot.defaultPrevented||ht(ot)}let _e=reactExports.createElement("a",{...ut,...st,href:at||_,onClick:b||c?s:rt,ref:mergeRefs$1(lt,nt),target:h,"data-discover":!ft&&i==="render"?"true":void 0});return it&&!ft?reactExports.createElement(reactExports.Fragment,null,_e,reactExports.createElement(PrefetchPageLinks,{page:_})):_e});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":s="page",caseSensitive:i=!1,className:a="",end:o=!1,style:c,to:d,viewTransition:j,children:h,...g},$){let ct=useResolvedPath(d,{relative:g.relative}),ut=useLocation(),lt=reactExports.useContext(DataRouterStateContext),{navigator:dt,basename:ft}=reactExports.useContext(NavigationContext),at=lt!=null&&useViewTransitionState(ct)&&j===!0,b=dt.encodeLocation?dt.encodeLocation(ct).pathname:ct.pathname,_=ut.pathname,it=lt&&lt.navigation&&lt.navigation.location?lt.navigation.location.pathname:null;i||(_=_.toLowerCase(),it=it?it.toLowerCase():null,b=b.toLowerCase()),it&&ft&&(it=stripBasename(it,ft)||it);const nt=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let st=_===b||!o&&_.startsWith(b)&&_.charAt(nt)==="/",ht=it!=null&&(it===b||!o&&it.startsWith(b)&&it.charAt(b.length)==="/"),rt={isActive:st,isPending:ht,isTransitioning:at},_e=st?s:void 0,ot;typeof a=="function"?ot=a(rt):ot=[a,st?"active":null,ht?"pending":null,at?"transitioning":null].filter(Boolean).join(" ");let xt=typeof c=="function"?c(rt):c;return reactExports.createElement(Link,{...g,"aria-current":_e,className:ot,ref:$,style:xt,to:d,viewTransition:j},typeof h=="function"?h(rt):h)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:s,navigate:i,reloadDocument:a,replace:o,state:c,method:d=defaultMethod,action:j,onSubmit:h,relative:g,preventScrollReset:$,viewTransition:ct,...ut},lt)=>{let dt=useSubmit(),ft=useFormAction(j,{relative:g}),at=d.toLowerCase()==="get"?"get":"post",b=typeof j=="string"&&ABSOLUTE_URL_REGEX2.test(j),_=it=>{if(h&&h(it),it.defaultPrevented)return;it.preventDefault();let nt=it.nativeEvent.submitter,st=(nt==null?void 0:nt.getAttribute("formmethod"))||d;dt(nt||it.currentTarget,{fetcherKey:s,method:st,navigate:i,replace:o,state:c,relative:g,preventScrollReset:$,viewTransition:ct})};return reactExports.createElement("form",{ref:lt,method:at,action:ft,onSubmit:a?h:_,...ut,"data-discover":!b&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let s=reactExports.useContext(DataRouterContext);return invariant$1(s,getDataRouterConsoleError2(e)),s}function useLinkClickHandler(e,{target:s,replace:i,state:a,preventScrollReset:o,relative:c,viewTransition:d}={}){let j=useNavigate(),h=useLocation(),g=useResolvedPath(e,{relative:c});return reactExports.useCallback($=>{if(shouldProcessLinkClick($,s)){$.preventDefault();let ct=i!==void 0?i:createPath(h)===createPath(g);j(e,{replace:ct,state:a,preventScrollReset:o,relative:c,viewTransition:d})}},[h,j,g,i,a,s,e,o,c,d])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:s}=reactExports.useContext(NavigationContext),i=useRouteId();return reactExports.useCallback(async(a,o={})=>{let{action:c,method:d,encType:j,formData:h,body:g}=getFormSubmissionInfo(a,s);if(o.navigate===!1){let $=o.fetcherKey||getUniqueFetcherId();await e.fetch($,i,o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||d,formEncType:o.encType||j,flushSync:o.flushSync})}else await e.navigate(o.action||c,{preventScrollReset:o.preventScrollReset,formData:h,body:g,formMethod:o.method||d,formEncType:o.encType||j,replace:o.replace,state:o.state,fromRouteId:i,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,s,i])}function useFormAction(e,{relative:s}={}){let{basename:i}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant$1(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),c={...useResolvedPath(e||".",{relative:s})},d=useLocation();if(e==null){c.search=d.search;let j=new URLSearchParams(c.search),h=j.getAll("index");if(h.some($=>$==="")){j.delete("index"),h.filter(ct=>ct).forEach(ct=>j.append("index",ct));let $=j.toString();c.search=$?`?${$}`:""}}return(!e||e===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:joinPaths([i,c.pathname])),createPath(c)}function useViewTransitionState(e,{relative:s}={}){let i=reactExports.useContext(ViewTransitionContext);invariant$1(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),o=useResolvedPath(e,{relative:s});if(!i.isTransitioning)return!1;let c=stripBasename(i.currentLocation.pathname,a)||i.currentLocation.pathname,d=stripBasename(i.nextLocation.pathname,a)||i.nextLocation.pathname;return matchPath(o.pathname,d)!=null||matchPath(o.pathname,c)!=null}const OWNER_KEY$2="LAWOWNER2025";function isOwner(){return localStorage.getItem("ownerKey")===OWNER_KEY$2}const RAW_BASE="https://law-network-backend.onrender.com".trim(),API_BASE=RAW_BASE.replace(/\/+$/,""),join=(e,s)=>(e?`${e}${s.startsWith("/")?"":"/"}${s}`:s).replace(/([^:]\/)\/+/g,"$1");function authHeaders(){const e=localStorage.getItem("ownerKey");return e?{Authorization:`Bearer ${e}`,"X-Owner-Key":e}:{}}function apiUrl(e){return/^https?:\/\//i.test(e)?e:join(API_BASE,e)}async function requestJSON(e,s={}){const{method:i="GET",headers:a={},body:o}=s,c=await fetch(apiUrl(e),{method:i,credentials:"include",headers:{...o instanceof FormData?{}:{"Content-Type":"application/json"},...authHeaders(),...a},body:o instanceof FormData?o:o!=null?JSON.stringify(o):void 0});if(!c.ok){const j=await c.text().catch(()=>"");throw new Error(`${c.status} ${c.statusText} ${j}`)}return(c.headers.get("content-type")||"").includes("application/json")?c.json():c.text()}const getJSON=(e,s)=>requestJSON(e,{...s,method:"GET"}),postJSON=(e,s,i)=>requestJSON(e,{...i,method:"POST",body:s}),delJSON=(e,s)=>requestJSON(e,{...s,method:"DELETE"}),fetchJSON=getJSON;async function upload(e,s,i={}){return requestJSON(e,{...i,method:"POST",body:s})}const absUrl=e=>/^https?:\/\//i.test(e)?e:apiUrl(e);function Navbar(){const[e,s]=reactExports.useState(0),[i,a]=reactExports.useState(!1);return reactExports.useEffect(()=>{getJSON("/api/articles").then(o=>s((o.articles||o.data||[]).length)).catch(()=>{})},[]),jsxRuntimeExports.jsxs("nav",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur border-b",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[jsxRuntimeExports.jsx("a",{href:"/",className:"font-black text-xl",children:"Law Network"}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex gap-6 items-center",children:[jsxRuntimeExports.jsxs("a",{href:"/articles",className:"hover:text-blue-600",children:["Articles (",e,")"]}),jsxRuntimeExports.jsx("a",{href:"/podcasts",className:"hover:text-blue-600",children:"Podcasts"}),jsxRuntimeExports.jsx("a",{href:"/videos",className:"hover:text-blue-600",children:"Video Gallery"}),jsxRuntimeExports.jsx("a",{href:"/notebook",className:"hover:text-blue-600",children:"PDF Notebook"}),jsxRuntimeExports.jsx("a",{href:"/plagiarism",className:"hover:text-blue-600",children:"Plagiarism"}),jsxRuntimeExports.jsx("a",{href:"/scholar",className:"hover:text-blue-600",children:"Scholar Space"}),isOwner()&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"|"}),jsxRuntimeExports.jsx("a",{href:"/admin/dashboard",className:"text-blue-600 underline",children:"Admin"}),jsxRuntimeExports.jsx("button",{className:"ml-2 text-xs border px-2 py-1 rounded",onClick:()=>{localStorage.removeItem("ownerKey"),location.reload()},children:"Logout"})]})]}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>a(o=>!o),"aria-label":"Menu",children:"☰"})})]}),i&&jsxRuntimeExports.jsxs("div",{className:"md:hidden px-4 pb-3 flex flex-col gap-2",children:[jsxRuntimeExports.jsx("a",{href:"/articles",children:"Articles"}),jsxRuntimeExports.jsx("a",{href:"/podcasts",children:"Podcasts"}),jsxRuntimeExports.jsx("a",{href:"/videos",children:"Video Gallery"}),jsxRuntimeExports.jsx("a",{href:"/notebook",children:"PDF Notebook"}),jsxRuntimeExports.jsx("a",{href:"/plagiarism",children:"Plagiarism"}),jsxRuntimeExports.jsx("a",{href:"/scholar",children:"Scholar Space"}),isOwner()&&jsxRuntimeExports.jsx("a",{href:"/admin/dashboard",className:"underline",children:"Admin"})]}),isOwner()&&jsxRuntimeExports.jsx("div",{className:"text-center text-xs py-1 bg-amber-50 border-t",children:"Admin Mode Enabled"})]})}function AdminRoute({children:e}){return isOwner()?e:jsxRuntimeExports.jsx(Navigate,{to:"/admin/login",replace:!0})}function BannerSlider(){const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(0);if(reactExports.useEffect(()=>{getJSON("/api/banners").then(c=>s(Array.isArray(c)?c:c.banners||c.items||c.data||[]))},[]),reactExports.useEffect(()=>{if(!e.length)return;const c=setInterval(()=>a(d=>(d+1)%e.length),4e3);return()=>clearInterval(c)},[e.length]),!e.length)return jsxRuntimeExports.jsx("div",{className:"w-full h-64 flex items-center justify-center bg-gray-100 rounded",children:"No banners yet"});const o=e[i];return jsxRuntimeExports.jsxs("div",{className:"w-full h-64 relative overflow-hidden rounded",children:[o.type==="video"?jsxRuntimeExports.jsx("video",{src:absUrl(o.url),className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0}):jsxRuntimeExports.jsx("img",{src:absUrl(o.url),alt:o.title||"",className:"w-full h-full object-cover"}),o.title&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white px-3 py-1 rounded",children:o.title})]})}function IfOwnerOnly({children:e,className:s=""}){return isOwner()?jsxRuntimeExports.jsx("div",{className:s,children:e}):null}const ACCESS_KEY="access",makeKey=(e,s,i)=>`${e}:${s}:${(i||"").toLowerCase().trim()}`,readStore=()=>{try{return JSON.parse(localStorage.getItem(ACCESS_KEY)||"{}")}catch{return{}}},writeStore=e=>{try{localStorage.setItem(ACCESS_KEY,JSON.stringify(e))}catch{}};function saveAccess(e,s,i,a,o){const c=makeKey(e,s,i),d=typeof a=="number"?a:new Date(a).getTime(),j=readStore();j[c]={expiry:d,...o?{message:o}:{}},writeStore(j);const h={feature:e,featureId:s,email:i,expiry:d,message:o};return window.dispatchEvent(new CustomEvent("accessUpdated",{detail:h})),window.dispatchEvent(new CustomEvent("accessGranted",{detail:h})),window.dispatchEvent(new CustomEvent("accessUpdated",{detail:{...h,storageSync:!0}})),j[c]}async function loadAccess(e,s,i){const a=makeKey(e,s,i),o=readStore(),c=Date.now(),d=o[a];if(d!=null&&d.expiry&&d.expiry>c)return d;d&&(!d.expiry||d.expiry<=c)&&(delete o[a],writeStore(o));try{const j=new URLSearchParams({email:i,feature:e,featureId:s}).toString(),h=await fetch(`${API_BASE}/api/access/status?${j}`,{credentials:"include"});if(h.ok){const g=await h.json();if(g!=null&&g.access&&g.expiry){const ct={expiry:typeof g.expiry=="number"?g.expiry:new Date(g.expiry).getTime(),...g.message?{message:g.message}:{}};return o[a]=ct,writeStore(o),ct}}}catch{}return null}function useSubmissionStream(e){reactExports.useEffect(()=>{if(!e)return;const s=`/api/submissions/stream?email=${encodeURIComponent(e)}`,i=new EventSource(s,{withCredentials:!0}),a=j=>{try{const h=`${j.feature}:${j.featureId}:${j.email}`,g=JSON.parse(localStorage.getItem("access")||"{}");g[h]={expiry:j.expiry},localStorage.setItem("access",JSON.stringify(g)),window.dispatchEvent(new CustomEvent("accessUpdated",{detail:{...j,storageSync:!0}}))}catch{}},o=j=>{try{const h=`${j.feature}:${j.featureId}:${j.email}`,g=JSON.parse(localStorage.getItem("access")||"{}");g[h]&&(delete g[h],localStorage.setItem("access",JSON.stringify(g)),window.dispatchEvent(new CustomEvent("accessUpdated",{detail:{...j,storageSync:!0}})))}catch{}},c=j=>{let h={};try{h=JSON.parse(j||"{}")}catch{}window.dispatchEvent(new CustomEvent("accessUpdated",{detail:h})),window.dispatchEvent(new CustomEvent("accessGranted",{detail:h})),h.expiry&&h.expiry>Date.now()&&a(h)},d=j=>{let h={};try{h=JSON.parse(j||"{}")}catch{}window.dispatchEvent(new CustomEvent("accessUpdated",{detail:h})),window.dispatchEvent(new CustomEvent("accessRevoked",{detail:h})),o(h)};return i.addEventListener("grant",j=>c(j.data)),i.addEventListener("revoke",j=>d(j.data)),i.addEventListener("ping",()=>{}),i.onerror=()=>{},()=>i.close()},[e])}function stripHtml(e=""){return String(e).replace(/<[^>]*>/g," ").replace(/\s+/g," ").trim()}function readingTimeFromHtml(e=""){const s=stripHtml(e).split(/\s+/).filter(Boolean).length;return Math.max(1,Math.ceil(s/180))}function toMs(e){if(!e)return 0;if(typeof e=="number")return e;const s=Date.parse(e);return Number.isNaN(s)?0:s}function ArticleCard({a:e,email:s}){const[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState(null),[d,j]=reactExports.useState(!1),h=reactExports.useRef(null);reactExports.useEffect(()=>{let ft=!1;return(async()=>{const at=await loadAccess("article",e.id||e._id,s);ft||c(at||null)})(),()=>{ft=!0}},[e.id,e._id,s]);const g=reactExports.useMemo(()=>stripHtml(e.content||""),[e.content]),$=reactExports.useMemo(()=>g.split(/\s+/).slice(0,120).join(" "),[g]),ct=reactExports.useMemo(()=>readingTimeFromHtml(e.content||""),[e.content]);reactExports.useEffect(()=>{async function ft(_){const it=_.detail||{};if(it.feature==="article"&&it.featureId===(e.id||e._id)&&it.email===s){const nt=await loadAccess("article",e.id||e._id,s);c(nt||null);const st=toMs(nt==null?void 0:nt.expiry);st&&st>Date.now()&&j(!0)}}async function at(_){const it=_.detail||{};if(it.feature==="article"&&it.featureId===(e.id||e._id)&&it.email===s){j(!0);const nt=await loadAccess("article",e.id||e._id,s);c(nt||null),a(!1)}}function b(){(async()=>{const _=await loadAccess("article",e.id||e._id,s);c(_||null);const it=toMs(_==null?void 0:_.expiry);it&&it>Date.now()&&j(!0)})()}return window.addEventListener("accessUpdated",ft),window.addEventListener("accessGranted",at),window.addEventListener("softRefresh",b),()=>{window.removeEventListener("accessUpdated",ft),window.removeEventListener("accessGranted",at),window.removeEventListener("softRefresh",b)}},[e.id,e._id,s]);async function ut(){j(!0),a(!1)}const lt=!!((e==null?void 0:e.isFree)??(e==null?void 0:e.free)),dt=lt||d;return reactExports.useEffect(()=>{i&&dt&&a(!1)},[i,dt]),jsxRuntimeExports.jsxs("article",{className:"relative overflow-hidden rounded-2xl border bg-white/95 shadow-sm",ref:h,children:[(e.image||e.imageUrl)&&jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-50 rounded-t-2xl",children:jsxRuntimeExports.jsx("img",{src:absUrl(e.image||e.imageUrl),alt:"",className:"w-full max-h-64 object-contain mx-auto",loading:"lazy"})}),jsxRuntimeExports.jsx("div",{className:"px-4 pt-4",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-extrabold text-xl tracking-tight",children:e.title}),jsxRuntimeExports.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-50 text-blue-700",children:[ct," min read"]}),lt?jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700",children:"Free"}):dt?jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700",children:"Reading unlocked"}):null]})}),jsxRuntimeExports.jsx("div",{className:"p-4",children:dt?e.allowHtml?jsxRuntimeExports.jsxs("div",{className:"not-prose html-embed",children:[jsxRuntimeExports.jsx("style",{children:`
                .html-embed img, .html-embed video, .html-embed iframe { max-width: 100%; height: auto; }
                .html-embed .container { max-width: 100%; }
              `}),jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:e.content}})]}):jsxRuntimeExports.jsx("div",{className:"prose max-w-none prose-p:leading-7 prose-p:my-3 prose-img:rounded-lg prose-img:max-h-96 prose-img:object-contain",children:jsxRuntimeExports.jsx("p",{className:"leading-7",children:e.content})}):jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("p",{className:"leading-7 text-[17px] text-gray-700",children:[$,"…"]}),jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-x-0 -bottom-2 h-10 bg-gradient-to-t from-white to-transparent"}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{className:"inline-flex items-center gap-2 rounded-lg bg-black px-3 py-1.5 text-sm font-medium text-white hover:opacity-90",onClick:ut,children:"Read more"}),jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-red-100 text-red-700",children:"Locked"})]})]})})]})}function Article({limit:e,embed:s=!1}){const[i,a]=reactExports.useState([]),[o,c]=reactExports.useState({title:"",content:"",allowHtml:!1,isFree:!1,image:null}),[d]=reactExports.useState(()=>localStorage.getItem("userEmail")||"");useSubmissionStream(d);async function j(){const ct=await getJSON("/api/articles");a(ct.articles||ct.data||[])}reactExports.useEffect(()=>{j()},[]),reactExports.useEffect(()=>{const ct=()=>{};return window.addEventListener("softRefresh",ct),()=>window.removeEventListener("softRefresh",ct)},[]);async function h(ct){if(ct.preventDefault(),!!o.title.trim())try{const ut=new FormData;ut.append("title",o.title.trim()),ut.append("content",o.content||""),ut.append("allowHtml",String(o.allowHtml)),ut.append("isFree",String(o.isFree)),o.image&&ut.append("image",o.image),await upload("/api/articles",ut),c({title:"",content:"",allowHtml:!1,isFree:!1,image:null}),await j(),alert("✅ Article published")}catch(ut){console.error("Publish failed:",ut),alert("❌ Failed to publish: "+((ut==null?void 0:ut.message)||"Unknown error"))}}async function g(ct){try{await delJSON(`/api/articles/${ct}`),await j()}catch(ut){console.error("Delete failed:",ut),alert("❌ Failed to delete")}}const $=e?i.slice(0,e):i;return s?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[$.map(ct=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(ArticleCard,{a:ct,email:d}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3",children:jsxRuntimeExports.jsx("button",{className:"text-xs bg-white/90 px-2 py-1 rounded border",onClick:()=>g(ct.id||ct._id),children:"Delete"})})})]},ct.id||ct._id)),$.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-400",children:"No articles yet"})]}):jsxRuntimeExports.jsxs("section",{id:"articles",className:"w-[90%] mx-auto py-8 grid gap-6 md:[grid-template-columns:minmax(0,1fr)_max-content]",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[$.map(ct=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(ArticleCard,{a:ct,email:d}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3",children:jsxRuntimeExports.jsx("button",{className:"text-xs bg-white/90 px-2 py-1 rounded border",onClick:()=>g(ct.id||ct._id),children:"Delete"})})})]},ct.id||ct._id)),$.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-400",children:"No articles yet"})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("form",{onSubmit:h,className:"border rounded-2xl p-3 grid gap-2 bg-white text-sm md:sticky md:top-24 min-w-[240px] max-w-[260px]",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-base",children:"Post new Article"}),jsxRuntimeExports.jsx("input",{className:"border rounded px-2 py-1.5",placeholder:"Title",value:o.title,onChange:ct=>c({...o,title:ct.target.value})}),jsxRuntimeExports.jsx("textarea",{className:"border rounded px-2 py-1.5 min-h-[120px]",placeholder:"Content (HTML allowed if checked)",value:o.content,onChange:ct=>c({...o,content:ct.target.value})}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:o.allowHtml,onChange:ct=>c({...o,allowHtml:ct.target.checked})}),"Render as HTML (viewer sees formatted content)"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:o.isFree,onChange:ct=>c({...o,isFree:ct.target.checked})}),"Make this article Free (no unlock)"]}),jsxRuntimeExports.jsxs("label",{className:"border rounded px-2 py-1.5 cursor-pointer w-fit",children:["Upload Image",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ct=>{var ut;return c({...o,image:((ut=ct.target.files)==null?void 0:ut[0])||null})}})]}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-3 py-1.5 rounded w-fit",children:"Publish"})]})})]})}function safeAuthHeaders$1(){const e=(typeof authHeaders=="function"?authHeaders():{})||{},s={};return e.Authorization&&(s.Authorization=e.Authorization),e.authorization&&(s.authorization=e.authorization),e["X-Owner-Key"]&&(s["X-Owner-Key"]=e["X-Owner-Key"]),e["x-owner-key"]&&(s["x-owner-key"]=e["x-owner-key"]),s}async function uploadSlide$1({title:e,intro:s,file:i}){const a=new FormData;a.append("title",e||"Untitled"),s!=null&&a.append("intro",s),i&&a.append("image",i);const o=await fetch(`${API_BASE}/api/consultancy`,{method:"POST",headers:safeAuthHeaders$1(),body:a});if(!o.ok)throw new Error(`POST /api/consultancy ${o.status}`);return o.json()}async function patchSlide$1(e,{title:s,intro:i,file:a}){const o=new FormData;s!=null&&o.append("title",s),i!=null&&o.append("intro",i),a&&o.append("image",a);const c=await fetch(`${API_BASE}/api/consultancy/${e}`,{method:"PATCH",headers:safeAuthHeaders$1(),body:o});if(!c.ok)throw new Error(`PATCH /api/consultancy/${e} ${c.status}`);return c.json()}async function delSlide(e){const s=await fetch(`${API_BASE}/api/consultancy/${e}`,{method:"DELETE",headers:safeAuthHeaders$1()});if(!s.ok)throw new Error(`DELETE /api/consultancy/${e} ${s.status}`)}function ConsultancySection({autoScroll:e=!0}){const[s,i]=reactExports.useState([]),[a,o]=reactExports.useState(!1),c=reactExports.useRef(null),d=reactExports.useRef(!1),j=reactExports.useRef(!0);async function h(){try{const nt=await fetch(`${API_BASE}/api/consultancy`).then(st=>st.json());i((nt==null?void 0:nt.items)||(nt==null?void 0:nt.slides)||[])}catch(nt){console.error("Consultancy load failed:",nt)}}reactExports.useEffect(()=>{h()},[]),reactExports.useEffect(()=>{if(!e)return;const nt=c.current;if(!nt)return;let st=0,ht=performance.now();const rt=108,_e=650,ot={cur:1};let xt=0;const et=new IntersectionObserver(([Ft])=>{j.current=(Ft==null?void 0:Ft.isIntersecting)??!0},{threshold:.05});et.observe(nt);const yt=Ft=>{const _t=Ft-ht;if(ht=Ft,j.current&&!d.current&&nt.scrollHeight>nt.clientHeight&&Ft>=xt){const vt=nt.scrollHeight-nt.clientHeight,At=rt*_t/1e3*ot.cur;let Nt=nt.scrollTop+At;Nt<=0?(Nt=0,ot.cur=1,xt=Ft+_e):Nt>=vt&&(Nt=vt,ot.cur=-1,xt=Ft+_e),nt.scrollTop=Nt}st=requestAnimationFrame(yt)};st=requestAnimationFrame(yt);const St=()=>d.current=!0,It=()=>d.current=!1;nt.addEventListener("mouseenter",St),nt.addEventListener("mouseleave",It),nt.addEventListener("touchstart",St,{passive:!0}),nt.addEventListener("touchend",It);let Lt=0;const Ut=()=>{St(),clearTimeout(Lt),Lt=window.setTimeout(It,900)};return nt.addEventListener("wheel",Ut,{passive:!0}),()=>{cancelAnimationFrame(st),et.disconnect(),nt.removeEventListener("mouseenter",St),nt.removeEventListener("mouseleave",It),nt.removeEventListener("touchstart",St),nt.removeEventListener("touchend",It),nt.removeEventListener("wheel",Ut),clearTimeout(Lt)}},[e,s.length]);const[g,$]=reactExports.useState(!1),[ct,ut]=reactExports.useState(""),[lt,dt]=reactExports.useState(""),[ft,at]=reactExports.useState(null);async function b(nt){var st;if((st=nt==null?void 0:nt.preventDefault)==null||st.call(nt),!ct.trim())return alert("Please enter a title.");if(!ft)return alert("Choose an image first.");o(!0);try{const ht=await uploadSlide$1({title:ct.trim(),intro:lt.trim(),file:ft}),rt=(ht==null?void 0:ht.item)||(ht==null?void 0:ht.slide)||(ht==null?void 0:ht.data)||ht;i(_e=>[rt,..._e]),ut(""),dt(""),at(null),$(!1)}catch(ht){console.error(ht),alert("Failed to create slide")}finally{o(!1)}}async function _(nt,st){if(st){o(!0);try{await patchSlide$1(nt.id||nt._id,{file:st}),await h()}catch(ht){console.error(ht),alert("Failed to replace image")}finally{o(!1)}}}async function it(nt){if(confirm("Delete this slide?")){o(!0);try{await delSlide(nt.id||nt._id),i(st=>st.filter(ht=>(ht.id||ht._id)!==(nt.id||nt._id)))}catch(st){console.error(st),alert("Failed to delete")}finally{o(!1)}}}return jsxRuntimeExports.jsxs("section",{className:"mt-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold",children:"Consultancy"}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 rounded border bg-white hover:bg-gray-50",onClick:()=>$(nt=>!nt),children:g?"Close":"Add card"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-2 py-1 rounded border",onClick:()=>h(),disabled:a,children:"Refresh"})]})})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:g&&jsxRuntimeExports.jsxs("form",{onSubmit:b,className:"mb-2 grid gap-2 border rounded-xl p-3 bg-white text-sm max-w-md",children:[jsxRuntimeExports.jsx("input",{className:"border rounded px-2 py-1.5",placeholder:"Title (required)",value:ct,onChange:nt=>ut(nt.target.value)}),jsxRuntimeExports.jsx("textarea",{className:"border rounded p-2 min-h-[70px]",placeholder:"Short intro (optional)",value:lt,onChange:nt=>dt(nt.target.value)}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:nt=>{var st;return at(((st=nt.target.files)==null?void 0:st[0])||null)}}),jsxRuntimeExports.jsx("button",{className:"px-3 py-1 rounded bg-black text-white disabled:opacity-50",disabled:a||!ft||!ct.trim(),children:a?"Saving…":"Create"})]})]})}),jsxRuntimeExports.jsx("div",{className:"relative overflow-hidden rounded-2xl border bg-white",children:jsxRuntimeExports.jsxs("div",{ref:c,className:"flex flex-col gap-3 overflow-y-auto overflow-x-hidden scroll-smooth p-3",style:{maxHeight:520},children:[s.map(nt=>jsxRuntimeExports.jsx(Card,{item:nt,onReplace:st=>_(nt,st),onDelete:()=>it(nt)},nt._id||nt.id)),s.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-500 p-6",children:"No consultancy cards yet"})]})})]})}function Card({item:e,onReplace:s,onDelete:i}){var o,c;const a=(c=(o=e.image)==null?void 0:o.startsWith)!=null&&c.call(o,"/uploads")?`${API_BASE}${e.image}`:e.imageUrl||`${API_BASE}${e.image||""}`;return jsxRuntimeExports.jsxs("div",{className:"w-full rounded-2xl border bg-white shadow-sm ring-1 ring-black/5",children:[jsxRuntimeExports.jsxs("div",{className:"relative p-2",children:[jsxRuntimeExports.jsx("div",{className:`h-[260px] md:h-[280px] rounded-xl bg-gradient-to-br from-gray-50 to-gray-100\r
                     flex items-center justify-center overflow-hidden ring-1 ring-gray-200`,children:a?jsxRuntimeExports.jsx("img",{src:a,alt:e.title||"Consultancy",className:"max-h-[96%] max-w-[96%] object-contain transition-transform duration-500",loading:"lazy"}):jsxRuntimeExports.jsx("div",{className:"text-gray-400 text-sm",children:"No image"})}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:[jsxRuntimeExports.jsxs("label",{className:"text-[11px] px-2 py-0.5 rounded bg-white/95 border cursor-pointer hover:bg-white",children:["Replace",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:d=>{var j;return s(((j=d.target.files)==null?void 0:j[0])||null)}})]}),jsxRuntimeExports.jsx("button",{className:"text-[11px] px-2 py-0.5 rounded bg-white/95 border text-red-600 hover:bg-white",onClick:d=>{d.preventDefault(),i()},children:"Delete"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"px-3 pb-3",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-gray-900 text-sm truncate",children:e.title||"—"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 line-clamp-2",children:e.intro||""})]})]})}const __vite_import_meta_env__={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://law-network-backend.onrender.com",VITE_OWNER_KEY:"LAWOWNER2025"},BASE=typeof API_BASE=="string"&&API_BASE||__vite_import_meta_env__&&"https://law-network-backend.onrender.com"||"http://localhost:5000";async function json(e,s){const i=await fetch(e,s);if(!i.ok){const a=await i.text().catch(()=>"");throw new Error(`${i.status} ${i.statusText} – ${a||e}`)}return i.json()}function NewsTicker(){const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState({title:"",link:"",image:null}),[o,c]=reactExports.useState(!1);async function d(){try{const g=await json(`${BASE}/api/news`,{credentials:"include"});s(g.news||g.items||[])}catch(g){console.error("Load news failed:",g),s([])}}reactExports.useEffect(()=>{d()},[]);async function j(g){if(g.preventDefault(),!i.title.trim())return alert("Title is required");c(!0);try{const $=new FormData;$.append("title",i.title.trim()),$.append("link",i.link.trim()),i.image&&$.append("image",i.image),await json(`${BASE}/api/news`,{method:"POST",headers:authHeaders(),body:$,credentials:"include"}),a({title:"",link:"",image:null}),await d()}catch($){alert(`POST /api/news failed
${$.message}`)}finally{c(!1)}}async function h(g){try{await json(`${BASE}/api/news/${g}`,{method:"DELETE",headers:authHeaders(),credentials:"include"}),await d()}catch($){alert(`DELETE /api/news/${g} failed
${$.message}`)}}return jsxRuntimeExports.jsx("section",{className:"border-y bg-white",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-6 overflow-x-auto items-center",children:[e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-400",children:"No news yet"}),e.map(g=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[g.image?jsxRuntimeExports.jsx("img",{src:`${BASE}${g.image}`,alt:"",className:"w-12 h-12 object-cover rounded-lg",loading:"lazy"}):null,g.link?jsxRuntimeExports.jsx("a",{className:"text-blue-600 hover:underline",href:g.link,target:"_blank",rel:"noreferrer",children:g.title}):jsxRuntimeExports.jsx("span",{className:"text-gray-800",children:g.title}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsx("button",{className:"text-xs text-red-600",onClick:()=>h(g.id),children:"Delete"})})]},g.id))]}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("form",{onSubmit:j,className:"flex flex-wrap gap-2 items-center mt-3",children:[jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"Title",value:i.title,onChange:g=>a({...i,title:g.target.value})}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2 min-w-[260px]",placeholder:"Link https:// (optional)",value:i.link,onChange:g=>a({...i,link:g.target.value})}),jsxRuntimeExports.jsxs("label",{className:"border rounded p-2 cursor-pointer",children:["Image",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:g=>{var $;return a({...i,image:(($=g.target.files)==null?void 0:$[0])||null})}})]}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-4 py-2 rounded disabled:opacity-50",disabled:o,children:o?"Saving…":"Add"})]})})]})})}function HomePage(){return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#f8fafc]",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[jsxRuntimeExports.jsx(BannerSlider,{}),jsxRuntimeExports.jsx(NewsTicker,{}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mt-6 text-center",children:"Welcome to Law Network"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 text-center mt-2",children:"Select a section from the navigation above."}),jsxRuntimeExports.jsxs("section",{className:"mt-10 grid grid-cols-1 md:grid-cols-[7fr_3fr] gap-0 items-start",children:[jsxRuntimeExports.jsxs("div",{className:`\r
              [&_section#articles]:max-w-none\r
              [&_section#articles]:px-0\r
              [&_section#articles]:py-0\r
              [&_section#articles>div:nth-child(2)]:hidden\r
            `,children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Latest Articles"}),jsxRuntimeExports.jsx(Article,{limit:3})]}),jsxRuntimeExports.jsx("aside",{className:"[&_section]:mt-0",children:jsxRuntimeExports.jsx(ConsultancySection,{})})]})]})})}function ArticlesPage(){return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#f8fafc]",children:jsxRuntimeExports.jsxs("section",{className:"max-w-6xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-10 gap-0",children:[jsxRuntimeExports.jsx("div",{className:`col-span-10 md:col-span-7 \r
                        [&_section#articles]:max-w-none \r
                        [&_section#articles]:px-0 \r
                        [&_section#articles]:py-0 \r
                        md:pr-0`,children:jsxRuntimeExports.jsx(Article,{})}),jsxRuntimeExports.jsx("aside",{className:"col-span-10 md:col-span-3 md:pl-0 [&_section]:mt-0",children:jsxRuntimeExports.jsx(ConsultancySection,{})})]})})}function NewsPage(){return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Latest News"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700",children:"This is the News page. Later we’ll connect it to database."})]})}function usePreviewLock({type:e,id:s,previewSeconds:i=10}){const[a,o]=reactExports.useState(!1),[c,d]=reactExports.useState(i),j=reactExports.useRef(null),h=isOwner()?!0:localStorage.getItem(`unlock:${e}:${s}`)==="true";return reactExports.useEffect(()=>{if(!h)return d(i),j.current=setInterval(()=>{d(g=>g<=1?(clearInterval(j.current),o(!0),0):g-1)},1e3),()=>clearInterval(j.current)},[s,i,h]),{unlocked:h,showOverlay:a,setShowOverlay:o,countLeft:c,grantTemp:(g=2e4)=>{const $=`unlock:${e}:${s}`;localStorage.setItem($,"true"),setTimeout(()=>localStorage.removeItem($),g)}}}function getPendingKey(e,s,i){return`pending-${e}-${s}-${i}`}function savePending(e,s,i,a){!e||!s||!i||localStorage.setItem(getPendingKey(e,s,i),JSON.stringify(a))}function loadPending(e,s,i){try{const a=localStorage.getItem(getPendingKey(e,s,i));return a?JSON.parse(a):null}catch{return null}}function clearPending(e,s,i){const a=`pending-${e}-${s}-${i}`;localStorage.removeItem(a)}function useApprovalWatcher(e,{feature:s,featureId:i,email:a}){const[o,c]=reactExports.useState("idle"),[d,j]=reactExports.useState(null),[h,g]=reactExports.useState(null),[$,ct]=reactExports.useState(null);return reactExports.useEffect(()=>{if(!e||!a)return;let ut=!1;async function lt(){try{const ft=`${API_BASE}/api/submissions/my?email=${encodeURIComponent(a)}&type=${encodeURIComponent(s)}&id=${encodeURIComponent(i)}`,at=await fetch(ft).then(_=>_.json());if(!(at!=null&&at.success)||ut)return;if(!at.found){c("notfound"),j(!1);return}const b=at.item;b.approved?(c("approved"),j(!0),g(b.expiry||null),ct(b.message||null)):(c("pending"),j(!1),ct(null))}catch(ft){console.error("Approval watcher failed:",ft)}}lt();const dt=setInterval(lt,1e4);return()=>{ut=!0,clearInterval(dt)}},[e,s,i,a]),{status:o,approved:d,expiry:h,message:$}}function PendingBadge({shortId:e,deadline:s}){return jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border animate-pulse",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-2",children:"⏳ Waiting for approval…"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700",children:["Hi, we received your subscription request with screenshot.",jsxRuntimeExports.jsx("br",{}),"Ref ID: ",jsxRuntimeExports.jsx("b",{children:e}),jsxRuntimeExports.jsx("br",{}),"Latest by: ",jsxRuntimeExports.jsx("b",{children:s})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center gap-2 text-gray-500 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"animate-spin",children:"🔄"})," Verifying payment…"]})]})}function UnlockWait({onDone:e}){const[s,i]=reactExports.useState(20);return reactExports.useEffect(()=>{if(s<=0){e==null||e();return}const a=setTimeout(()=>i(o=>o-1),1e3);return()=>clearTimeout(a)},[s]),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-yellow-50 border rounded-xl text-center",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-lg text-yellow-700",children:"🔓 Unlocking…"}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Access will unlock in ",s,"s"]})]})}function AccessTimer({timeLeftMs:e,feature:s,featureId:i,email:a}){const[o,c]=reactExports.useState(e);if(reactExports.useEffect(()=>{if(!o)return;const g=setInterval(()=>{c($=>$<=1e3?(clearInterval(g),s&&i&&a&&clearPending(s,i,a),0):$-1e3)},1e3);return()=>clearInterval(g)},[o,s,i,a]),o<=0)return jsxRuntimeExports.jsx("div",{className:"text-sm text-red-500",children:"❌ Subscription expired – Please subscribe again."});const d=Math.floor(o/(1e3*60*60)),j=Math.floor(o%(1e3*60*60)/(1e3*60)),h=Math.floor(o%(1e3*60)/1e3);return jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700",children:["⏳ Access valid for ",d,"h ",j,"m ",h,"s"]})}function QROverlay({open:e,onClose:s,title:i,feature:a,featureId:o}){var rt,_e;const[c,d]=reactExports.useState({url:"",currency:"₹",plans:{}}),[j,h]=reactExports.useState(null),[g,$]=reactExports.useState({name:"",phone:"",email:"",file:null}),[ct,ut]=reactExports.useState(null),[lt,dt]=reactExports.useState(!1),[ft,at]=reactExports.useState(!1);async function b(){try{const ot=await fetch(`${API_BASE}/api/qr/current?ts=${Date.now()}`).then(xt=>xt.json());ot!=null&&ot.success&&d(ot)}catch(ot){console.error("Failed to fetch QR config:",ot)}}reactExports.useEffect(()=>{e&&b()},[e]),reactExports.useEffect(()=>{if(g.email){const ot=loadPending(a,o,g.email);ot&&ut(ot)}},[g.email,a,o]);const{status:_,approved:it,expiry:nt,message:st}=useApprovalWatcher(ct,{feature:a,featureId:o,email:g.email});reactExports.useEffect(()=>{const ot=()=>s==null?void 0:s();return window.addEventListener("accessGranted",ot),()=>window.removeEventListener("accessGranted",ot)},[s]),reactExports.useEffect(()=>{if(_==="approved"&&it){dt(!0);const ot=setTimeout(()=>{saveAccess(a,o,g.email,nt,st),dt(!1),typeof s=="function"&&s(),window.dispatchEvent(new Event("focus")),window.dispatchEvent(new CustomEvent("softRefresh",{detail:{feature:a,featureId:o}})),setTimeout(()=>window.location.reload(),150)},15e3);return()=>clearTimeout(ot)}},[_,it,nt,st,a,o,g.email,s]);async function ht(ot){var xt,et;if(ot.preventDefault(),!j)return alert("Select a plan");if(!g.file)return alert("Upload screenshot");if(!g.email)return alert("Enter your email");at(!0);try{const yt=new FormData;yt.append("name",g.name),yt.append("phone",g.phone),yt.append("email",g.email),yt.append("planKey",j),yt.append("planLabel",(xt=c.plans[j])==null?void 0:xt.label),yt.append("planPrice",(et=c.plans[j])==null?void 0:et.price),yt.append("screenshot",g.file),yt.append("type",a),yt.append("id",o);const St=await fetch(`${API_BASE}/api/submissions`,{method:"POST",body:yt}).then(It=>It.json());if(St!=null&&St.success){const It={id:St.id,shortId:St.id.slice(-6),expiry:St.expiry,planKey:j,name:g.name,email:g.email};ut(It),savePending(a,o,g.email,It),localStorage.setItem("userEmail",g.email)}else alert("Failed to submit request")}catch(yt){alert("Error: "+yt.message)}finally{at(!1)}}return e?jsxRuntimeExports.jsx("div",{className:"fixed inset-y-0 right-0 bg-white shadow-2xl w-full max-w-md z-50 overflow-y-auto",children:jsxRuntimeExports.jsxs("div",{className:"p-5 relative",children:[jsxRuntimeExports.jsx("button",{onClick:s,className:"absolute right-3 top-3 text-red-600 font-bold text-lg",children:"✕"}),jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-lg mb-3 animate-pulse text-pink-500",children:[a," – ",i]}),c.url?jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("img",{src:`${API_BASE}${c.url}?t=${Date.now()}`,alt:"QR code",className:"w-full h-56 object-contain border rounded-xl bg-gray-50"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-center text-gray-600 mt-1",children:"Scan this QR to pay"})]}):jsxRuntimeExports.jsx("div",{className:"w-full h-56 flex items-center justify-center border rounded-xl text-gray-400",children:"No QR uploaded yet"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-4",children:["weekly","monthly","yearly"].map(ot=>{var xt,et;return jsxRuntimeExports.jsxs("button",{onClick:()=>h(ot),className:`px-3 py-1 rounded-full border text-sm ${j===ot?"bg-yellow-300 animate-pulse":"bg-gray-100 hover:bg-gray-200"}`,children:[(xt=c.plans[ot])==null?void 0:xt.label," – ",c.currency,(et=c.plans[ot])==null?void 0:et.price]},ot)})}),ct?lt?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(UnlockWait,{onDone:()=>dt(!1)}),jsxRuntimeExports.jsx("div",{className:"mt-3 text-center text-green-600 font-extrabold text-base",children:"🎉 Congratulations! Access granted. Finalizing in 15 seconds…"})]}):_==="approved"&&it?jsxRuntimeExports.jsxs("div",{className:"p-4 bg-green-50 rounded-xl border animate-pulse",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold mb-2 text-green-700",children:"Access Granted ✅"}),st?jsxRuntimeExports.jsx("p",{className:"text-sm mb-2 whitespace-pre-line",children:st}):jsxRuntimeExports.jsxs("p",{className:"text-sm mb-2",children:["Hi ",ct.name,", your subscription has been approved."]}),nt&&jsxRuntimeExports.jsx("div",{className:"animate-blink",children:jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:nt-Date.now()})})]}):jsxRuntimeExports.jsx(PendingBadge,{shortId:ct.shortId,deadline:ct.expiry?new Date(ct.expiry).toLocaleString():"Waiting for approval"}):jsxRuntimeExports.jsxs("form",{onSubmit:ht,className:"grid gap-3",children:[jsxRuntimeExports.jsx("input",{placeholder:"Your Name",className:"border rounded p-2",value:g.name,onChange:ot=>$(xt=>({...xt,name:ot.target.value}))}),jsxRuntimeExports.jsx("input",{placeholder:"Phone",className:"border rounded p-2",value:g.phone,onChange:ot=>$(xt=>({...xt,phone:ot.target.value}))}),jsxRuntimeExports.jsx("input",{placeholder:"Gmail",className:"border rounded p-2",value:g.email,onChange:ot=>$(xt=>({...xt,email:ot.target.value}))}),jsxRuntimeExports.jsxs("div",{className:"border rounded-xl p-3 text-sm bg-pink-50 relative",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center justify-between text-pink-600 font-semibold mb-2",children:[jsxRuntimeExports.jsx("span",{children:"Upload Payment Screenshot"}),jsxRuntimeExports.jsxs("span",{className:`flex items-center gap-3 text-green-600 animate-bounce select-none\r
                             drop-shadow-[0_0_8px_rgba(34,197,94,0.45)]`,"aria-label":"Tap here to upload screenshot",children:[jsxRuntimeExports.jsxs("svg",{className:"w-8 h-8 md:w-9 md:h-9",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("path",{d:"M12 4v12"}),jsxRuntimeExports.jsx("path",{d:"M8 12l4 4 4-4"})]}),jsxRuntimeExports.jsx("span",{className:"text-green-700 font-extrabold text-base md:text-lg uppercase tracking-wide",children:"Browse HERE TO UPLOAD PAYMENT SCREENSHOT"})]})]}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:ot=>$(xt=>{var et;return{...xt,file:((et=ot.target.files)==null?void 0:et[0])||null}})})]}),j&&jsxRuntimeExports.jsxs("div",{className:"text-sm p-2 border rounded bg-yellow-50",children:["Selected Plan:"," ",jsxRuntimeExports.jsxs("b",{children:[(rt=c.plans[j])==null?void 0:rt.label," – ",c.currency,(_e=c.plans[j])==null?void 0:_e.price]})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:ft,className:"bg-blue-600 text-white px-4 py-2 rounded",children:ft?"Submitting…":"Submit"})]})]})}):null}function useAccessSync(e){reactExports.useEffect(()=>{function s(i){i.detail?e==null||e(i.detail):i.key==="access"&&(e==null||e({storageSync:!0}))}return window.addEventListener("accessUpdated",s),window.addEventListener("accessGranted",s),window.addEventListener("accessRevoked",s),window.addEventListener("storage",s),()=>{window.removeEventListener("accessUpdated",s),window.removeEventListener("accessGranted",s),window.removeEventListener("accessRevoked",s),window.removeEventListener("storage",s)}},[e])}function VideoGallery(){const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(null),[d,j]=reactExports.useState({}),[h,g]=reactExports.useState(!1),[$,ct]=reactExports.useState(null),ut=reactExports.useRef(null),lt=reactExports.useRef(null),[dt,ft]=reactExports.useState(null),[at]=reactExports.useState(()=>localStorage.getItem("userEmail")||"");useSubmissionStream(at);const b=reactExports.useRef([]),_=_t=>{if(!_t)return null;const vt=String(_t).trim().toLowerCase(),At=e.find(pt=>String(pt.id).toLowerCase()===vt);if(At)return At.id;const Nt=e.find(pt=>String(pt.name||pt.title||"").toLowerCase()===vt);if(Nt)return Nt.id;const wt=e.find(pt=>String(pt.slug||"").toLowerCase()===vt);return wt?wt.id:null},it=(_t,vt)=>{try{const At=`playlist:${_t}:${at}`,Nt=JSON.parse(localStorage.getItem("access")||"{}");Nt[At]={expiry:vt},localStorage.setItem("access",JSON.stringify(Nt))}catch{}},nt=_t=>{try{const vt=`playlist:${_t}:${at}`,At=JSON.parse(localStorage.getItem("access")||"{}");At[vt]&&(delete At[vt],localStorage.setItem("access",JSON.stringify(At)))}catch{}},st=async _t=>{const vt=[];vt.push(await loadAccess("playlist",_t.id,at)),_t.name&&vt.push(await loadAccess("playlist",_t.name,at)),_t.slug&&vt.push(await loadAccess("playlist",_t.slug,at));const At=vt.filter(Nt=>(Nt==null?void 0:Nt.expiry)&&Nt.expiry>Date.now());return At.length===0?null:At.reduce((Nt,wt)=>Nt.expiry>wt.expiry?Nt:wt)},ht=async({featureId:_t,expiry:vt,message:At})=>{var kt,jt;const Nt=_(_t);if(!Nt){b.current.push({type:"grant",featureId:_t,expiry:vt,message:At});return}it(Nt,vt),j(Ct=>({...Ct,[Nt]:{expiry:vt,source:"event"}})),ft(null);const wt=localStorage.getItem("userName"),pt=at?at.split("@")[0]:"User";if(ct(At||`🎉 Congratulations ${wt||pt||"User"}! Your access has been unlocked.`),setTimeout(()=>ct(null),4500),i&&String(i)===String(Nt))try{await((jt=(kt=lt.current)==null?void 0:kt.play)==null?void 0:jt.call(kt))}catch{}const Et=await loadAccess("playlist",Nt,at);j(Ct=>({...Ct,[Nt]:Et}))},rt=({featureId:_t})=>{const vt=_(_t);if(!vt){b.current.push({type:"revoke",featureId:_t});return}nt(vt),j(Nt=>({...Nt,[vt]:null}));const At=e.find(Nt=>String(Nt.id)===String(vt));At&&ft(At)},_e=async()=>{g(!0);const vt=(await fetchJSON(`${API_BASE}/api/videos`)).playlists||[];s(vt),!i&&vt[0]&&a(vt[0].id);const At={};for(const Nt of vt)At[Nt.id]=await st(Nt);j(At),g(!1)};reactExports.useEffect(()=>{_e()},[]),reactExports.useEffect(()=>{if(!e.length||b.current.length===0)return;const _t=b.current.splice(0,b.current.length);for(const vt of _t)vt.type==="grant"&&ht(vt),vt.type==="revoke"&&rt(vt)},[e.length]),reactExports.useEffect(()=>{var vt;if(!i)return;const _t=e.find(At=>At.id===i);_t&&((vt=_t.items)!=null&&vt[0])&&c(_t.items[0])},[i,e]);const ot=async()=>{if(e.length===0)return;g(!0);const _t={};for(const vt of e)_t[vt.id]=await st(vt);j(_t),g(!1)};useAccessSync(async _t=>{if(!_t||_t.email!==at||_t.feature!=="playlist")return;if(_t.expiry&&_t.expiry>Date.now())return ht({featureId:_t.featureId,expiry:_t.expiry,message:_t.message});if(_t.revoked===!0)return rt({featureId:_t.featureId});const vt=_(_t.featureId)||_t.featureId,At=await loadAccess("playlist",vt,at);if(j(Nt=>({...Nt,[vt]:At})),At)ft(null);else{const Nt=e.find(wt=>String(wt.id)===String(vt));Nt&&ft(Nt)}}),reactExports.useEffect(()=>{const _t=()=>{ot()};return window.addEventListener("focus",_t),()=>window.removeEventListener("focus",_t)},[e,at]),reactExports.useEffect(()=>{const _t=()=>ot();return window.addEventListener("softRefresh",_t),()=>window.removeEventListener("softRefresh",_t)},[]),reactExports.useEffect(()=>{const _t=Date.now();let vt=1/0;for(const wt of Object.values(d))wt!=null&&wt.expiry&&wt.expiry>_t&&(vt=Math.min(vt,wt.expiry));if(!isFinite(vt))return;const At=Math.max(0,vt-_t+500),Nt=setTimeout(()=>{ot()},At);return()=>clearTimeout(Nt)},[d]);const xt=usePreviewLock({type:"video",id:(o==null?void 0:o.id)||"none",previewSeconds:10});reactExports.useEffect(()=>{const _t=lt.current;if(!_t)return;_t.currentTime=0,_t.pause();let vt=!1;const At=()=>{const wt=d[i];if(!(wt!=null&&wt.expiry&&wt.expiry>Date.now())&&!xt.unlocked&&_t.currentTime>=10&&!vt){_t.pause();const pt=e.find(mt=>mt.id===i);ft(pt||null),vt=!0}},Nt=()=>{vt=!1};return _t.addEventListener("timeupdate",At),_t.addEventListener("play",Nt),()=>{_t.removeEventListener("timeupdate",At),_t.removeEventListener("play",Nt)}},[o==null?void 0:o.id,xt.unlocked,i,d,e]);const et=e.find(_t=>_t.id===i),[yt,St]=reactExports.useState(""),It=async _t=>{_t.preventDefault(),await fetch(`${API_BASE}/api/videos/playlists`,{method:"POST",headers:{...authHeaders(),"Content-Type":"application/json"},body:JSON.stringify({name:yt||"New Playlist"})}),St(""),await _e()},[Lt,Ut]=reactExports.useState({title:"",author:"",file:null,locked:!0}),Ft=async _t=>{if(_t.preventDefault(),!i||!Lt.file)return;const vt=new FormData;vt.append("title",Lt.title||"Untitled"),vt.append("author",Lt.author||""),vt.append("locked",String(Lt.locked)),vt.append("video",Lt.file),await fetch(`${API_BASE}/api/videos/playlists/${i}/items`,{method:"POST",headers:authHeaders(),body:vt}),Ut({title:"",author:"",file:null,locked:!0}),await _e()};return jsxRuntimeExports.jsxs("section",{id:"video",className:"max-w-6xl mx-auto px-4 py-10 grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("aside",{className:"md:col-span-1 border rounded-2xl bg-white",children:[jsxRuntimeExports.jsx("div",{className:"p-3 border-b font-semibold",children:"Video Gallery"}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-3 max-h-[60vh] overflow-auto",children:[e.map(_t=>{const vt=d[_t.id];return jsxRuntimeExports.jsxs("div",{className:`border rounded-xl ${i===_t.id?"ring-2 ring-blue-500":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center px-3 py-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a(_t.id),className:"text-left font-medium flex-1",children:_t.name}),vt!=null&&vt.expiry&&vt.expiry>Date.now()?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full animate-pulse",children:[jsxRuntimeExports.jsx("span",{children:"✅ Unlocked"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:vt.expiry-Date.now()}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full"})]}):jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-1 text-xs bg-red-500 text-white px-2 py-1 rounded",onClick:()=>ft(_t),children:[jsxRuntimeExports.jsx("span",{children:"Unlock"}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-white/80 border-t-transparent rounded-full"})]})]}),i===_t.id&&jsxRuntimeExports.jsxs("div",{className:"px-2 pb-2 space-y-1",children:[(_t.items||[]).map(At=>{const Nt=vt!=null&&vt.expiry&&vt.expiry>Date.now()?vt:null;return jsxRuntimeExports.jsxs("div",{onClick:()=>c(At),className:`px-2 py-2 rounded cursor-pointer hover:bg-gray-50 flex items-center justify-between ${(o==null?void 0:o.id)===At.id?"bg-gray-50":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"truncate",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium truncate",children:At.title}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 truncate",children:At.author})]}),Nt?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full animate-pulse",children:[jsxRuntimeExports.jsx("span",{children:"✅ Unlocked"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:Nt.expiry-Date.now()}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:[jsxRuntimeExports.jsx("span",{children:"Locked"}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-red-700 border-t-transparent rounded-full"})]})]},At.id)}),(_t.items||[]).length===0&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 px-2 pb-2",children:"No videos"})]})]},_t.id)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-sm",children:"No playlists yet"})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{className:"p-3 border-t",children:jsxRuntimeExports.jsxs("form",{onSubmit:It,className:"grid grid-cols-[1fr_auto] gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"New playlist name",value:yt,onChange:_t=>St(_t.target.value)}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-3 rounded",children:"Add"})]})})]}),jsxRuntimeExports.jsxs("div",{ref:ut,className:`md:col-span-2 border rounded-2xl bg-white p-5 relative ${dt?"blur-sm opacity-80 pointer-events-none":""}`,children:[$&&jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3 z-20 bg-green-600 text-white text-sm px-3 py-2 rounded-lg shadow",children:$}),o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold",children:o.title}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:o.author})]}),(()=>{const _t=d[i];return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded-full ${_t!=null&&_t.expiry&&_t.expiry>Date.now()?"bg-green-100 text-green-700 animate-pulse":"bg-red-100 text-red-700"}`,children:[_t!=null&&_t.expiry&&_t.expiry>Date.now()?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["✅ Unlocked"," ",jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:_t.expiry-Date.now()})]}):`Locked (${xt.countLeft}s preview)`,h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full"})]})})()]}),jsxRuntimeExports.jsx("div",{className:"rounded-xl border p-3 bg-black",children:jsxRuntimeExports.jsx("video",{ref:lt,src:`${API_BASE}${o.url}`,controls:!0,preload:"metadata",className:"w-full rounded-lg",controlsList:"nodownload noplaybackrate noremoteplayback",disablePictureInPicture:!0,onContextMenu:_t=>_t.preventDefault()})})]}):jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Select a video"}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("form",{onSubmit:Ft,className:"mt-6 border-t pt-4 grid gap-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Upload video to playlist"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"Title",value:Lt.title,onChange:_t=>Ut({...Lt,title:_t.target.value})}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"Author",value:Lt.author,onChange:_t=>Ut({...Lt,author:_t.target.value})}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Lt.locked,onChange:_t=>Ut({...Lt,locked:_t.target.checked})}),"Locked by default"]})]}),jsxRuntimeExports.jsx("input",{type:"file",accept:"video/mp4,video/webm,video/ogg",onChange:_t=>{var vt;return Ut({...Lt,file:((vt=_t.target.files)==null?void 0:vt[0])||null})}}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Playlist: ",(et==null?void 0:et.name)||"—"]}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-4 py-2 rounded w-fit",disabled:!i||!Lt.file,children:"Upload"})]})})]}),dt&&jsxRuntimeExports.jsx(QROverlay,{open:!!dt,onClose:()=>ft(null),title:dt.name,subjectLabel:"Playlist",inline:!0,focusRef:ut,feature:"playlist",featureId:dt.id})]})}function VideosPage(){return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#f8fafc]",children:jsxRuntimeExports.jsx(VideoGallery,{})})}function Podcast(){var Ht,Vt;const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(null),[d,j]=reactExports.useState({}),[h,g]=reactExports.useState(!1),[$,ct]=reactExports.useState(null),ut=reactExports.useRef(null),lt=reactExports.useRef(null),[dt,ft]=reactExports.useState(null),[at]=reactExports.useState(()=>localStorage.getItem("userEmail")||"");useSubmissionStream(at);const b=reactExports.useRef([]),_=gt=>{if(!gt)return null;const bt=String(gt).trim().toLowerCase(),Dt=e.find(sn=>String(sn.id).toLowerCase()===bt);if(Dt)return Dt.id;const Ot=e.find(sn=>String(sn.name||sn.title||"").toLowerCase()===bt);if(Ot)return Ot.id;const Qt=e.find(sn=>String(sn.slug||"").toLowerCase()===bt);return Qt?Qt.id:null},it=(gt,bt)=>{try{const Dt=`podcast:${gt}:${at}`,Ot=JSON.parse(localStorage.getItem("access")||"{}");Ot[Dt]={expiry:bt},localStorage.setItem("access",JSON.stringify(Ot))}catch{}},nt=gt=>{try{const bt=`podcast:${gt}:${at}`,Dt=JSON.parse(localStorage.getItem("access")||"{}");Dt[bt]&&(delete Dt[bt],localStorage.setItem("access",JSON.stringify(Dt)))}catch{}},st=async gt=>{const bt=[];bt.push(await loadAccess("podcast",gt.id,at)),gt.name&&bt.push(await loadAccess("podcast",gt.name,at)),gt.slug&&bt.push(await loadAccess("podcast",gt.slug,at));const Dt=bt.filter(Ot=>(Ot==null?void 0:Ot.expiry)&&Ot.expiry>Date.now());return Dt.length===0?null:Dt.reduce((Ot,Qt)=>Ot.expiry>Qt.expiry?Ot:Qt)},ht=async({featureId:gt,expiry:bt,message:Dt})=>{var hn,dn;const Ot=_(gt);if(!Ot){b.current.push({type:"grant",featureId:gt,expiry:bt,message:Dt});return}it(Ot,bt),j(Rn=>({...Rn,[Ot]:{expiry:bt,source:"event"}})),ft(null);const Qt=localStorage.getItem("userName"),sn=at?at.split("@")[0]:"User";if(ct(Dt||`🎉 Congratulations ${Qt||sn||"User"}! Your access has been unlocked.`),setTimeout(()=>ct(null),4500),i&&String(i)===String(Ot))try{await((dn=(hn=lt.current)==null?void 0:hn.play)==null?void 0:dn.call(hn))}catch{}const Gt=await loadAccess("podcast",Ot,at);j(Rn=>({...Rn,[Ot]:Gt}))},rt=({featureId:gt})=>{const bt=_(gt);if(!bt){b.current.push({type:"revoke",featureId:gt});return}nt(bt),j(Ot=>({...Ot,[bt]:null}));const Dt=e.find(Ot=>String(Ot.id)===String(bt));Dt&&ft(Dt)},_e=async()=>{g(!0);const bt=(await fetchJSON(`${API_BASE}/api/podcasts`)).playlists||[];s(bt),!i&&bt[0]&&a(bt[0].id);const Dt={};for(const Ot of bt)Dt[Ot.id]=await st(Ot);j(Dt),g(!1)};reactExports.useEffect(()=>{_e()},[]),reactExports.useEffect(()=>{if(!e.length||b.current.length===0)return;const gt=b.current.splice(0,b.current.length);for(const bt of gt)bt.type==="grant"&&ht(bt),bt.type==="revoke"&&rt(bt)},[e.length]),reactExports.useEffect(()=>{var bt;if(!i)return;const gt=e.find(Dt=>Dt.id===i);gt&&((bt=gt.items)!=null&&bt[0])&&c(gt.items[0])},[i,e]);const ot=async()=>{if(e.length===0)return;g(!0);const gt={};for(const bt of e)gt[bt.id]=await st(bt);j(gt),g(!1)};useAccessSync(async gt=>{if(!gt||gt.email!==at||gt.feature!=="podcast")return;if(gt.expiry&&gt.expiry>Date.now())return ht({featureId:gt.featureId,expiry:gt.expiry,message:gt.message});if(gt.revoked===!0)return rt({featureId:gt.featureId});const bt=_(gt.featureId)||gt.featureId,Dt=await loadAccess("podcast",bt,at);if(j(Ot=>({...Ot,[bt]:Dt})),Dt)ft(null);else{const Ot=e.find(Qt=>String(Qt.id)===String(bt));Ot&&ft(Ot)}}),reactExports.useEffect(()=>{const gt=()=>ot();return window.addEventListener("focus",gt),()=>window.removeEventListener("focus",gt)},[e,at]),reactExports.useEffect(()=>{const gt=()=>ot();return window.addEventListener("softRefresh",gt),()=>window.removeEventListener("softRefresh",gt)},[]),reactExports.useEffect(()=>{const gt=Date.now();let bt=1/0;for(const Qt of Object.values(d))Qt!=null&&Qt.expiry&&Qt.expiry>gt&&(bt=Math.min(bt,Qt.expiry));if(!isFinite(bt))return;const Dt=Math.max(0,bt-gt+500),Ot=setTimeout(()=>ot(),Dt);return()=>clearTimeout(Ot)},[d]);const xt=usePreviewLock({type:"podcast",id:(o==null?void 0:o.id)||"none",previewSeconds:10});reactExports.useEffect(()=>{const gt=lt.current;if(!gt)return;gt.currentTime=0,gt.pause();let bt=!1;const Dt=()=>{const Qt=d[i];if(!(Qt!=null&&Qt.expiry&&Qt.expiry>Date.now())&&!xt.unlocked&&gt.currentTime>=10&&!bt){gt.pause();const sn=e.find(on=>on.id===i);ft(sn||null),bt=!0}},Ot=()=>{bt=!1};return gt.addEventListener("timeupdate",Dt),gt.addEventListener("play",Ot),()=>{gt.removeEventListener("timeupdate",Dt),gt.removeEventListener("play",Ot)}},[o==null?void 0:o.id,xt.unlocked,i,d,e]),e.find(gt=>gt.id===i);const[et,yt]=reactExports.useState(""),[St,It]=reactExports.useState({title:"",artist:"",audio:null,locked:!0}),Lt=async gt=>{gt.preventDefault(),await fetch(`${API_BASE}/api/podcasts/playlists`,{method:"POST",headers:{...authHeaders(),"Content-Type":"application/json"},body:JSON.stringify({name:et||"New Playlist"})}),yt(""),await _e()},Ut=async gt=>{await fetch(`${API_BASE}/api/podcasts/playlists/${i}/items/${gt}`,{method:"DELETE",headers:authHeaders()}),await _e()},Ft=async(gt,bt)=>{await fetch(`${API_BASE}/api/podcasts/playlists/${i}/items/${gt}/lock`,{method:"PATCH",headers:{...authHeaders(),"Content-Type":"application/json"},body:JSON.stringify({locked:bt})}),await _e()},[_t,vt]=reactExports.useState(!1),[At,Nt]=reactExports.useState(0),[wt,pt]=reactExports.useState(0),[mt,Et]=reactExports.useState(1),[kt,jt]=reactExports.useState(!1),Ct=reactExports.useRef(null);reactExports.useEffect(()=>{const gt=lt.current;if(!gt)return;const bt=()=>pt(gt.duration||0),Dt=()=>!kt&&Nt(gt.currentTime||0),Ot=()=>vt(!0),Qt=()=>vt(!1),sn=()=>Et(gt.volume);return gt.addEventListener("loadedmetadata",bt),gt.addEventListener("timeupdate",Dt),gt.addEventListener("play",Ot),gt.addEventListener("pause",Qt),gt.addEventListener("volumechange",sn),gt.addEventListener("ended",Qt),gt.readyState>=1&&(pt(gt.duration||0),Et(gt.volume)),()=>{gt.removeEventListener("loadedmetadata",bt),gt.removeEventListener("timeupdate",Dt),gt.removeEventListener("play",Ot),gt.removeEventListener("pause",Qt),gt.removeEventListener("volumechange",sn),gt.removeEventListener("ended",Qt)}},[o==null?void 0:o.id,kt]);const zt=gt=>{if(!isFinite(gt))return"0:00";const bt=Math.floor(gt/60),Dt=Math.floor(gt%60);return`${bt}:${Dt.toString().padStart(2,"0")}`},Xt=async()=>{const gt=lt.current;if(gt)if(_t)gt.pause();else try{await gt.play()}catch{}},Tt=gt=>{const bt=lt.current;if(!bt||!isFinite(wt))return;const Dt=Math.max(0,Math.min(1,gt))*wt;bt.currentTime=Dt,Nt(Dt)},$t=gt=>{const bt=Ct.current.getBoundingClientRect(),Dt=(gt.clientX-bt.left)/bt.width;Tt(Dt)},Kt=gt=>{gt.preventDefault(),jt(!0);const bt=Ot=>{const Qt=Ot.touches?Ot.touches[0].clientX:Ot.clientX,sn=Ct.current.getBoundingClientRect(),on=(Qt-sn.left)/sn.width;Nt(Math.max(0,Math.min(1,on))*(wt||0))},Dt=Ot=>{const Qt=Ot.changedTouches?Ot.changedTouches[0].clientX:Ot.clientX,sn=Ct.current.getBoundingClientRect(),on=(Qt-sn.left)/sn.width;Tt(on),jt(!1),window.removeEventListener("mousemove",bt),window.removeEventListener("mouseup",Dt),window.removeEventListener("touchmove",bt),window.removeEventListener("touchend",Dt)};window.addEventListener("mousemove",bt),window.addEventListener("mouseup",Dt),window.addEventListener("touchmove",bt),window.addEventListener("touchend",Dt)},qt=gt=>{const bt=lt.current;bt&&(bt.currentTime=Math.max(0,Math.min((bt.currentTime||0)+gt,wt||bt.duration||0)))},rn=gt=>{const bt=lt.current;bt&&(bt.volume=Math.max(0,Math.min(1,gt)),Et(bt.volume))};return jsxRuntimeExports.jsxs("section",{id:"podcast",className:"max-w-6xl mx-auto px-4 py-10 grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("aside",{className:"md:col-span-1 border rounded-2xl bg-white",children:[jsxRuntimeExports.jsx("div",{className:"p-3 border-b font-semibold",children:"Podcasts"}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-3 max-h-[60vh] overflow-auto",children:[e.map(gt=>{const bt=d[gt.id];return jsxRuntimeExports.jsxs("div",{className:`border rounded-xl ${i===gt.id?"ring-2 ring-blue-500":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a(gt.id),className:"text-left font-medium flex-1",children:gt.name}),bt!=null&&bt.expiry&&bt.expiry>Date.now()?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full animate-pulse",children:[jsxRuntimeExports.jsx("span",{children:"✅ Unlocked"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:bt.expiry-Date.now()}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full"})]}):jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-1 text-xs bg-red-500 text-white px-2 py-1 rounded",onClick:()=>ft(gt),children:[jsxRuntimeExports.jsx("span",{children:"Unlock"}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-white/80 border-t-transparent rounded-full"})]})]}),i===gt.id&&jsxRuntimeExports.jsxs("div",{className:"px-2 pb-2 space-y-1",children:[(gt.items||[]).map(Dt=>{const Ot=bt!=null&&bt.expiry&&bt.expiry>Date.now()?bt:null;return jsxRuntimeExports.jsxs("div",{className:`px-2 py-2 rounded cursor-pointer hover:bg-gray-50 flex items-center justify-between ${(o==null?void 0:o.id)===Dt.id?"bg-gray-50":""}`,onClick:()=>c(Dt),children:[jsxRuntimeExports.jsxs("div",{className:"truncate",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium truncate",children:Dt.title}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 truncate",children:Dt.artist})]}),Ot?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full animate-pulse",children:[jsxRuntimeExports.jsx("span",{children:"✅ Unlocked"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:Ot.expiry-Date.now()}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:[jsxRuntimeExports.jsx("span",{children:"Locked"}),h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-red-700 border-t-transparent rounded-full"})]})]},Dt.id)}),(gt.items||[]).length===0&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 px-2 pb-2",children:"No items"})]})]},gt.id)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-sm",children:"No playlists yet"})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{className:"p-3 border-t",children:jsxRuntimeExports.jsxs("form",{onSubmit:Lt,className:"grid grid-cols-[1fr_auto] gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"New playlist name",value:et,onChange:gt=>yt(gt.target.value)}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-3 rounded",children:"Add"})]})})]}),jsxRuntimeExports.jsxs("div",{ref:ut,className:`md:col-span-2 border rounded-2xl bg-white p-5 relative ${dt?"blur-sm opacity-80 pointer-events-none":""}`,children:[$&&jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3 z-20 bg-green-600 text-white text-sm px-3 py-2 rounded-lg shadow",children:$}),o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold truncate",children:o.title}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 truncate",children:o.artist})]}),(()=>{const gt=d[i];return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1 text-xs px-2 py-1 rounded-full ${gt!=null&&gt.expiry&&gt.expiry>Date.now()?"bg-green-100 text-green-700 animate-pulse":"bg-red-100 text-red-700"}`,children:[gt!=null&&gt.expiry&&gt.expiry>Date.now()?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["✅ Unlocked"," ",jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:gt.expiry-Date.now()})]}):`Locked (${xt.countLeft}s preview)`,h&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full"})]})})()]}),jsxRuntimeExports.jsxs("div",{className:"rounded-2xl p-4 bg-[#121212] text-white shadow-lg",children:[jsxRuntimeExports.jsx("audio",{ref:lt,src:`${API_BASE}${o.url}`,preload:"metadata",controls:!1,controlsList:"nodownload noplaybackrate",className:"sr-only",onContextMenu:gt=>gt.preventDefault()}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-md bg-gradient-to-br from-gray-600 to-gray-800 flex items-center justify-center shrink-0 overflow-hidden",children:jsxRuntimeExports.jsx("span",{className:"text-xs uppercase tracking-wider opacity-80",children:((Ht=o==null?void 0:o.title)==null?void 0:Ht.slice(0,3))||"Pod"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20",onClick:()=>qt(-15),"aria-label":"Back 15 seconds",children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[jsxRuntimeExports.jsx("path",{d:"M12 5v2a5 5 0 1 0 5 5h2A7 7 0 1 1 12 5Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M11 8v8l-5-4 5-4Z",fill:"currentColor"})]})}),jsxRuntimeExports.jsx("button",{className:`p-3 rounded-full ${_t?"bg-white/90 text-black":"bg-[#1DB954] text-black"} hover:brightness-95 shadow`,onClick:Xt,"aria-label":_t?"Pause":"Play",children:_t?jsxRuntimeExports.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:[jsxRuntimeExports.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),jsxRuntimeExports.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}):jsxRuntimeExports.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M8 5v14l11-7L8 5Z"})})}),jsxRuntimeExports.jsx("button",{className:"p-2 rounded-full bg-white/10 hover:bg-white/20",onClick:()=>qt(15),"aria-label":"Forward 15 seconds",children:jsxRuntimeExports.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[jsxRuntimeExports.jsx("path",{d:"M12 5v2a5 5 0 1 1-5 5H5a7 7 0 1 0 7-7Z",fill:"currentColor"}),jsxRuntimeExports.jsx("path",{d:"M13 8v8l5-4-5-4Z",fill:"currentColor"})]})}),jsxRuntimeExports.jsxs("div",{className:"ml-2 hidden sm:flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M5 10v4h3l4 3V7L8 10H5z"})}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:1,step:.01,value:mt,onChange:gt=>rn(parseFloat(gt.target.value)),className:"w-28 accent-[#1DB954]"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 select-none",children:[jsxRuntimeExports.jsx("span",{className:"text-xs tabular-nums text-white/70 w-10 text-right",children:zt(At)}),jsxRuntimeExports.jsxs("div",{ref:Ct,className:"relative h-2 rounded-full bg-white/15 flex-1 cursor-pointer",onClick:$t,children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 rounded-full bg-[#1DB954]",style:{width:`${(wt?At/wt:0)*100}%`}}),jsxRuntimeExports.jsx("div",{className:"absolute -top-1.5 h-5 w-5 rounded-full bg-white shadow -translate-x-1/2",style:{left:`${(wt?At/wt:0)*100}%`},onMouseDown:Kt,onTouchStart:Kt,role:"slider","aria-valuemin":0,"aria-valuemax":wt||0,"aria-valuenow":At||0,tabIndex:0})]}),jsxRuntimeExports.jsx("span",{className:"text-xs tabular-nums text-white/70 w-10",children:zt(wt)})]}),!((Vt=d[i])!=null&&Vt.expiry)&&jsxRuntimeExports.jsx("div",{className:"text-[11px] text-white/60 mt-2",children:"Preview will auto-stop at 10s. Subscribe to continue."})]})]})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("div",{className:"mt-3 flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"text-xs px-3 py-1 rounded border",onClick:()=>Ft(o.id,!o.locked),children:o.locked?"Unlock":"Lock"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-3 py-1 rounded border text-red-600",onClick:()=>Ut(o.id),children:"Delete"})]})})]}):jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Select a playlist item"})]}),dt&&jsxRuntimeExports.jsx(QROverlay,{open:!!dt,onClose:()=>ft(null),title:dt.name,subjectLabel:"Podcast",inline:!0,focusRef:ut,feature:"podcast",featureId:dt.id})]})}function PodcastsPage(){return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#f8fafc]",children:jsxRuntimeExports.jsx(Podcast,{})})}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(s,i){module.exports=s.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,s)=>{var Mn;Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=vt,s.bytesToString=Tt,s.createValidAbsoluteUrl=Nt,s.getModificationDate=dn,s.getUuid=wn,s.getVerbosityLevel=Lt,s.info=Ut,s.isArrayBuffer=Gt,s.isArrayEqual=hn,s.isNodeJS=void 0,s.normalizeUnicode=xn,s.objectFromMap=rn,s.objectSize=qt,s.setVerbosityLevel=It,s.shadow=wt,s.string32=Kt,s.stringToBytes=$t,s.stringToPDFString=Qt,s.stringToUTF8String=sn,s.unreachable=_t,s.utf8StringToString=on,s.warn=Ft;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=i;const a=[1,0,0,1,0,0];s.IDENTITY_MATRIX=a;const o=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=o;const c=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;s.LINE_FACTOR=d;const j=.35;s.LINE_DESCENT_FACTOR=j;const h=j/d;s.BASELINE_FACTOR=h;const g={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=g;const $={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=$;const ct="pdfjs_internal_editor_";s.AnnotationEditorPrefix=ct;const ut={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=ut;const lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=lt;const dt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=dt;const ft={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=ft;const at={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=at;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=b;const _={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=_;const it={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=it;const nt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=nt;const st={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=st;const ht={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=ht;const rt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=rt;const _e={O:"PageOpen",C:"PageClose"};s.PageActionEventType=_e;const ot={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=ot;const xt={NONE:0,BINARY:1};s.CMapCompressionType=xt;const et={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=et;const yt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=yt;let St=ot.WARNINGS;function It(cn){Number.isInteger(cn)&&(St=cn)}function Lt(){return St}function Ut(cn){St>=ot.INFOS&&console.log(`Info: ${cn}`)}function Ft(cn){St>=ot.WARNINGS&&console.log(`Warning: ${cn}`)}function _t(cn){throw new Error(cn)}function vt(cn,Jt){cn||_t(Jt)}function At(cn){switch(cn==null?void 0:cn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nt(cn,Jt=null,en=null){if(!cn)return null;try{if(en&&typeof cn=="string"){if(en.addDefaultProtocol&&cn.startsWith("www.")){const Ln=cn.match(/\./g);(Ln==null?void 0:Ln.length)>=2&&(cn=`http://${cn}`)}if(en.tryConvertEncoding)try{cn=sn(cn)}catch{}}const gn=Jt?new URL(cn,Jt):new URL(cn);if(At(gn))return gn}catch{}return null}function wt(cn,Jt,en,gn=!1){return Object.defineProperty(cn,Jt,{value:en,enumerable:!gn,configurable:!0,writable:!1}),en}const pt=function(){function Jt(en,gn){this.constructor===Jt&&_t("Cannot initialize BaseException."),this.message=en,this.name=gn}return Jt.prototype=new Error,Jt.constructor=Jt,Jt}();s.BaseException=pt;class mt extends pt{constructor(Jt,en){super(Jt,"PasswordException"),this.code=en}}s.PasswordException=mt;class Et extends pt{constructor(Jt,en){super(Jt,"UnknownErrorException"),this.details=en}}s.UnknownErrorException=Et;class kt extends pt{constructor(Jt){super(Jt,"InvalidPDFException")}}s.InvalidPDFException=kt;class jt extends pt{constructor(Jt){super(Jt,"MissingPDFException")}}s.MissingPDFException=jt;class Ct extends pt{constructor(Jt,en){super(Jt,"UnexpectedResponseException"),this.status=en}}s.UnexpectedResponseException=Ct;class zt extends pt{constructor(Jt){super(Jt,"FormatError")}}s.FormatError=zt;class Xt extends pt{constructor(Jt){super(Jt,"AbortException")}}s.AbortException=Xt;function Tt(cn){(typeof cn!="object"||(cn==null?void 0:cn.length)===void 0)&&_t("Invalid argument for bytesToString");const Jt=cn.length,en=8192;if(Jt<en)return String.fromCharCode.apply(null,cn);const gn=[];for(let Ln=0;Ln<Jt;Ln+=en){const Tn=Math.min(Ln+en,Jt),Mt=cn.subarray(Ln,Tn);gn.push(String.fromCharCode.apply(null,Mt))}return gn.join("")}function $t(cn){typeof cn!="string"&&_t("Invalid argument for stringToBytes");const Jt=cn.length,en=new Uint8Array(Jt);for(let gn=0;gn<Jt;++gn)en[gn]=cn.charCodeAt(gn)&255;return en}function Kt(cn){return String.fromCharCode(cn>>24&255,cn>>16&255,cn>>8&255,cn&255)}function qt(cn){return Object.keys(cn).length}function rn(cn){const Jt=Object.create(null);for(const[en,gn]of cn)Jt[en]=gn;return Jt}function Ht(){const cn=new Uint8Array(4);return cn[0]=1,new Uint32Array(cn.buffer,0,1)[0]===1}function Vt(){try{return new Function(""),!0}catch{return!1}}class gt{static get isLittleEndian(){return wt(this,"isLittleEndian",Ht())}static get isEvalSupported(){return wt(this,"isEvalSupported",Vt())}static get isOffscreenCanvasSupported(){return wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?wt(this,"platform",{isWin:!1,isMac:!1}):wt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Jt,en;return wt(this,"isCSSRoundSupported",(en=(Jt=globalThis.CSS)==null?void 0:Jt.supports)==null?void 0:en.call(Jt,"width: round(1.5px, 1px)"))}}s.FeatureTest=gt;const bt=[...Array(256).keys()].map(cn=>cn.toString(16).padStart(2,"0"));class Dt{static makeHexColor(Jt,en,gn){return`#${bt[Jt]}${bt[en]}${bt[gn]}`}static scaleMinMax(Jt,en){let gn;Jt[0]?(Jt[0]<0&&(gn=en[0],en[0]=en[1],en[1]=gn),en[0]*=Jt[0],en[1]*=Jt[0],Jt[3]<0&&(gn=en[2],en[2]=en[3],en[3]=gn),en[2]*=Jt[3],en[3]*=Jt[3]):(gn=en[0],en[0]=en[2],en[2]=gn,gn=en[1],en[1]=en[3],en[3]=gn,Jt[1]<0&&(gn=en[2],en[2]=en[3],en[3]=gn),en[2]*=Jt[1],en[3]*=Jt[1],Jt[2]<0&&(gn=en[0],en[0]=en[1],en[1]=gn),en[0]*=Jt[2],en[1]*=Jt[2]),en[0]+=Jt[4],en[1]+=Jt[4],en[2]+=Jt[5],en[3]+=Jt[5]}static transform(Jt,en){return[Jt[0]*en[0]+Jt[2]*en[1],Jt[1]*en[0]+Jt[3]*en[1],Jt[0]*en[2]+Jt[2]*en[3],Jt[1]*en[2]+Jt[3]*en[3],Jt[0]*en[4]+Jt[2]*en[5]+Jt[4],Jt[1]*en[4]+Jt[3]*en[5]+Jt[5]]}static applyTransform(Jt,en){const gn=Jt[0]*en[0]+Jt[1]*en[2]+en[4],Ln=Jt[0]*en[1]+Jt[1]*en[3]+en[5];return[gn,Ln]}static applyInverseTransform(Jt,en){const gn=en[0]*en[3]-en[1]*en[2],Ln=(Jt[0]*en[3]-Jt[1]*en[2]+en[2]*en[5]-en[4]*en[3])/gn,Tn=(-Jt[0]*en[1]+Jt[1]*en[0]+en[4]*en[1]-en[5]*en[0])/gn;return[Ln,Tn]}static getAxialAlignedBoundingBox(Jt,en){const gn=this.applyTransform(Jt,en),Ln=this.applyTransform(Jt.slice(2,4),en),Tn=this.applyTransform([Jt[0],Jt[3]],en),Mt=this.applyTransform([Jt[2],Jt[1]],en);return[Math.min(gn[0],Ln[0],Tn[0],Mt[0]),Math.min(gn[1],Ln[1],Tn[1],Mt[1]),Math.max(gn[0],Ln[0],Tn[0],Mt[0]),Math.max(gn[1],Ln[1],Tn[1],Mt[1])]}static inverseTransform(Jt){const en=Jt[0]*Jt[3]-Jt[1]*Jt[2];return[Jt[3]/en,-Jt[1]/en,-Jt[2]/en,Jt[0]/en,(Jt[2]*Jt[5]-Jt[4]*Jt[3])/en,(Jt[4]*Jt[1]-Jt[5]*Jt[0])/en]}static singularValueDecompose2dScale(Jt){const en=[Jt[0],Jt[2],Jt[1],Jt[3]],gn=Jt[0]*en[0]+Jt[1]*en[2],Ln=Jt[0]*en[1]+Jt[1]*en[3],Tn=Jt[2]*en[0]+Jt[3]*en[2],Mt=Jt[2]*en[1]+Jt[3]*en[3],an=(gn+Mt)/2,pn=Math.sqrt((gn+Mt)**2-4*(gn*Mt-Tn*Ln))/2,En=an+pn||1,_n=an-pn||1;return[Math.sqrt(En),Math.sqrt(_n)]}static normalizeRect(Jt){const en=Jt.slice(0);return Jt[0]>Jt[2]&&(en[0]=Jt[2],en[2]=Jt[0]),Jt[1]>Jt[3]&&(en[1]=Jt[3],en[3]=Jt[1]),en}static intersect(Jt,en){const gn=Math.max(Math.min(Jt[0],Jt[2]),Math.min(en[0],en[2])),Ln=Math.min(Math.max(Jt[0],Jt[2]),Math.max(en[0],en[2]));if(gn>Ln)return null;const Tn=Math.max(Math.min(Jt[1],Jt[3]),Math.min(en[1],en[3])),Mt=Math.min(Math.max(Jt[1],Jt[3]),Math.max(en[1],en[3]));return Tn>Mt?null:[gn,Tn,Ln,Mt]}static bezierBoundingBox(Jt,en,gn,Ln,Tn,Mt,an,pn){const En=[],_n=[[],[]];let mn,Pt,Rt,Bt,tn,nn,ln,un;for(let jn=0;jn<2;++jn){if(jn===0?(Pt=6*Jt-12*gn+6*Tn,mn=-3*Jt+9*gn-9*Tn+3*an,Rt=3*gn-3*Jt):(Pt=6*en-12*Ln+6*Mt,mn=-3*en+9*Ln-9*Mt+3*pn,Rt=3*Ln-3*en),Math.abs(mn)<1e-12){if(Math.abs(Pt)<1e-12)continue;Bt=-Rt/Pt,0<Bt&&Bt<1&&En.push(Bt);continue}ln=Pt*Pt-4*Rt*mn,un=Math.sqrt(ln),!(ln<0)&&(tn=(-Pt+un)/(2*mn),0<tn&&tn<1&&En.push(tn),nn=(-Pt-un)/(2*mn),0<nn&&nn<1&&En.push(nn))}let bn=En.length,yn;const fn=bn;for(;bn--;)Bt=En[bn],yn=1-Bt,_n[0][bn]=yn*yn*yn*Jt+3*yn*yn*Bt*gn+3*yn*Bt*Bt*Tn+Bt*Bt*Bt*an,_n[1][bn]=yn*yn*yn*en+3*yn*yn*Bt*Ln+3*yn*Bt*Bt*Mt+Bt*Bt*Bt*pn;return _n[0][fn]=Jt,_n[1][fn]=en,_n[0][fn+1]=an,_n[1][fn+1]=pn,_n[0].length=_n[1].length=fn+2,[Math.min(..._n[0]),Math.min(..._n[1]),Math.max(..._n[0]),Math.max(..._n[1])]}}s.Util=Dt;const Ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Qt(cn){if(cn[0]>="ï"){let en;if(cn[0]==="þ"&&cn[1]==="ÿ"?en="utf-16be":cn[0]==="ÿ"&&cn[1]==="þ"?en="utf-16le":cn[0]==="ï"&&cn[1]==="»"&&cn[2]==="¿"&&(en="utf-8"),en)try{const gn=new TextDecoder(en,{fatal:!0}),Ln=$t(cn);return gn.decode(Ln)}catch(gn){Ft(`stringToPDFString: "${gn}".`)}}const Jt=[];for(let en=0,gn=cn.length;en<gn;en++){const Ln=Ot[cn.charCodeAt(en)];Jt.push(Ln?String.fromCharCode(Ln):cn.charAt(en))}return Jt.join("")}function sn(cn){return decodeURIComponent(escape(cn))}function on(cn){return unescape(encodeURIComponent(cn))}function Gt(cn){return typeof cn=="object"&&(cn==null?void 0:cn.byteLength)!==void 0}function hn(cn,Jt){if(cn.length!==Jt.length)return!1;for(let en=0,gn=cn.length;en<gn;en++)if(cn[en]!==Jt[en])return!1;return!0}function dn(cn=new Date){return[cn.getUTCFullYear().toString(),(cn.getUTCMonth()+1).toString().padStart(2,"0"),cn.getUTCDate().toString().padStart(2,"0"),cn.getUTCHours().toString().padStart(2,"0"),cn.getUTCMinutes().toString().padStart(2,"0"),cn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Rn{constructor(){Yt(this,Mn,!1);this.promise=new Promise((Jt,en)=>{this.resolve=gn=>{Zt(this,Mn,!0),Jt(gn)},this.reject=gn=>{Zt(this,Mn,!0),en(gn)}})}get settled(){return tt(this,Mn)}}Mn=new WeakMap,s.PromiseCapability=Rn;let An=null,Nn=null;function xn(cn){return An||(An=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Nn=new Map([["ﬅ","ſt"]])),cn.replaceAll(An,(Jt,en,gn)=>en?en.normalize("NFKC"):Nn.get(gn))}function wn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const cn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(cn);else for(let Jt=0;Jt<32;Jt++)cn[Jt]=Math.floor(Math.random()*255);return Tt(cn)}const Cn="pdfjs_internal_id_";s.AnnotationPrefix=Cn},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,i,a,o,Gn,ir,j,h,g,$,ct,ut,lt,dt,ft,ar,b,_,Er,nt,st;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(rt){if(typeof rt=="string"||rt instanceof URL?rt={url:rt}:(0,_util.isArrayBuffer)(rt)&&(rt={data:rt}),typeof rt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!rt.url&&!rt.data&&!rt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const _e=new PDFDocumentLoadingTask,{docId:ot}=_e,xt=rt.url?getUrlProp(rt.url):null,et=rt.data?getDataProp(rt.data):null,yt=rt.httpHeaders||null,St=rt.withCredentials===!0,It=rt.password??null,Lt=rt.range instanceof PDFDataRangeTransport?rt.range:null,Ut=Number.isInteger(rt.rangeChunkSize)&&rt.rangeChunkSize>0?rt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ft=rt.worker instanceof PDFWorker?rt.worker:null;const _t=rt.verbosity,vt=typeof rt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(rt.docBaseUrl)?rt.docBaseUrl:null,At=typeof rt.cMapUrl=="string"?rt.cMapUrl:null,Nt=rt.cMapPacked!==!1,wt=rt.CMapReaderFactory||DefaultCMapReaderFactory,pt=typeof rt.standardFontDataUrl=="string"?rt.standardFontDataUrl:null,mt=rt.StandardFontDataFactory||DefaultStandardFontDataFactory,Et=rt.stopAtErrors!==!0,kt=Number.isInteger(rt.maxImageSize)&&rt.maxImageSize>-1?rt.maxImageSize:-1,jt=rt.isEvalSupported!==!1,Ct=typeof rt.isOffscreenCanvasSupported=="boolean"?rt.isOffscreenCanvasSupported:!_util.isNodeJS,zt=Number.isInteger(rt.canvasMaxAreaInBytes)?rt.canvasMaxAreaInBytes:-1,Xt=typeof rt.disableFontFace=="boolean"?rt.disableFontFace:_util.isNodeJS,Tt=rt.fontExtraProperties===!0,$t=rt.enableXfa===!0,Kt=rt.ownerDocument||globalThis.document,qt=rt.disableRange===!0,rn=rt.disableStream===!0,Ht=rt.disableAutoFetch===!0,Vt=rt.pdfBug===!0,gt=Lt?Lt.length:rt.length??NaN,bt=typeof rt.useSystemFonts=="boolean"?rt.useSystemFonts:!_util.isNodeJS&&!Xt,Dt=typeof rt.useWorkerFetch=="boolean"?rt.useWorkerFetch:wt===_display_utils.DOMCMapReaderFactory&&mt===_display_utils.DOMStandardFontDataFactory&&At&&pt&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(pt,document.baseURI),Ot=rt.canvasFactory||new DefaultCanvasFactory({ownerDocument:Kt}),Qt=rt.filterFactory||new DefaultFilterFactory({docId:ot,ownerDocument:Kt}),sn=null;(0,_util.setVerbosityLevel)(_t);const on={canvasFactory:Ot,filterFactory:Qt};if(Dt||(on.cMapReaderFactory=new wt({baseUrl:At,isCompressed:Nt}),on.standardFontDataFactory=new mt({baseUrl:pt})),!Ft){const dn={verbosity:_t,port:_worker_options.GlobalWorkerOptions.workerPort};Ft=dn.port?PDFWorker.fromPort(dn):new PDFWorker(dn),_e._worker=Ft}const Gt={docId:ot,apiVersion:"3.11.174",data:et,password:It,disableAutoFetch:Ht,rangeChunkSize:Ut,length:gt,docBaseUrl:vt,enableXfa:$t,evaluatorOptions:{maxImageSize:kt,disableFontFace:Xt,ignoreErrors:Et,isEvalSupported:jt,isOffscreenCanvasSupported:Ct,canvasMaxAreaInBytes:zt,fontExtraProperties:Tt,useSystemFonts:bt,cMapUrl:Dt?At:null,standardFontDataUrl:Dt?pt:null}},hn={ignoreErrors:Et,isEvalSupported:jt,disableFontFace:Xt,fontExtraProperties:Tt,enableXfa:$t,ownerDocument:Kt,disableAutoFetch:Ht,pdfBug:Vt,styleElement:sn};return Ft.promise.then(function(){if(_e.destroyed)throw new Error("Loading aborted");const dn=_fetchDocument(Ft,Gt),Rn=new Promise(function(An){let Nn;Lt?Nn=new _transport_stream.PDFDataTransportStream({length:gt,initialData:Lt.initialData,progressiveDone:Lt.progressiveDone,contentDispositionFilename:Lt.contentDispositionFilename,disableRange:qt,disableStream:rn},Lt):et||(Nn=(wn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(wn):(0,_display_utils.isValidFetchUrl)(wn.url)?new _displayFetch_stream.PDFFetchStream(wn):new _displayNetwork.PDFNetworkStream(wn))({url:xt,length:gt,httpHeaders:yt,withCredentials:St,rangeChunkSize:Ut,disableRange:qt,disableStream:rn})),An(Nn)});return Promise.all([dn,Rn]).then(function([An,Nn]){if(_e.destroyed)throw new Error("Loading aborted");const xn=new _message_handler.MessageHandler(ot,An,Ft.port),wn=new WorkerTransport(xn,_e,Nn,hn,on);_e._transport=wn,xn.send("Ready",null)})}).catch(_e._capability.reject),_e}async function _fetchDocument(rt,_e){if(rt.destroyed)throw new Error("Worker was destroyed");const ot=await rt.messageHandler.sendWithPromise("GetDocRequest",_e,_e.data?[_e.data.buffer]:null);if(rt.destroyed)throw new Error("Worker was destroyed");return ot}function getUrlProp(rt){if(rt instanceof URL)return rt.href;try{return new URL(rt,window.location).href}catch{if(_util.isNodeJS&&typeof rt=="string")return rt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(rt){if(_util.isNodeJS&&typeof Buffer<"u"&&rt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(rt instanceof Uint8Array&&rt.byteLength===rt.buffer.byteLength)return rt;if(typeof rt=="string")return(0,_util.stringToBytes)(rt);if(typeof rt=="object"&&!isNaN(rt==null?void 0:rt.length)||(0,_util.isArrayBuffer)(rt))return new Uint8Array(rt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const s=class s{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Jn(s,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var _e,ot,xt;this.destroyed=!0;try{(_e=this._worker)!=null&&_e.port&&(this._worker._pendingDestroy=!0),await((ot=this._transport)==null?void 0:ot.destroy())}catch(et){throw(xt=this._worker)!=null&&xt.port&&delete this._worker._pendingDestroy,et}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,Yt(s,e,0);let PDFDocumentLoadingTask=s;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(_e,ot,xt=!1,et=null){this.length=_e,this.initialData=ot,this.progressiveDone=xt,this.contentDispositionFilename=et,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(_e){this._rangeListeners.push(_e)}addProgressListener(_e){this._progressListeners.push(_e)}addProgressiveReadListener(_e){this._progressiveReadListeners.push(_e)}addProgressiveDoneListener(_e){this._progressiveDoneListeners.push(_e)}onDataRange(_e,ot){for(const xt of this._rangeListeners)xt(_e,ot)}onDataProgress(_e,ot){this._readyCapability.promise.then(()=>{for(const xt of this._progressListeners)xt(_e,ot)})}onDataProgressiveRead(_e){this._readyCapability.promise.then(()=>{for(const ot of this._progressiveReadListeners)ot(_e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const _e of this._progressiveDoneListeners)_e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(_e,ot){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(_e,ot){this._pdfInfo=_e,this._transport=ot,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(xt=>{if(!xt)return xt;const et=[];for(const yt in xt)et.push(...xt[yt]);return et}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(_e){return this._transport.getPage(_e)}getPageIndex(_e){return this._transport.getPageIndex(_e)}getDestinations(){return this._transport.getDestinations()}getDestination(_e){return this._transport.getDestination(_e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(_e=!1){return this._transport.startCleanup(_e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(_e,ot,xt,et=!1){Yt(this,o);Yt(this,i,null);Yt(this,a,!1);this._pageIndex=_e,this._pageInfo=ot,this._transport=xt,this._stats=et?new _display_utils.StatTimer:null,this._pdfBug=et,this.commonObjs=xt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:_e,rotation:ot=this.rotate,offsetX:xt=0,offsetY:et=0,dontFlip:yt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:_e,rotation:ot,offsetX:xt,offsetY:et,dontFlip:yt})}getAnnotations({intent:_e="display"}={}){const ot=this._transport.getRenderingIntent(_e);return this._transport.getAnnotations(this._pageIndex,ot.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var _e;return((_e=this._transport._htmlForXfa)==null?void 0:_e.children[this._pageIndex])||null}render({canvasContext:_e,viewport:ot,intent:xt="display",annotationMode:et=_util.AnnotationMode.ENABLE,transform:yt=null,background:St=null,optionalContentConfigPromise:It=null,annotationCanvasMap:Lt=null,pageColors:Ut=null,printAnnotationStorage:Ft=null}){var mt,Et;(mt=this._stats)==null||mt.time("Overall");const _t=this._transport.getRenderingIntent(xt,et,Ft);Zt(this,a,!1),Wt(this,o,ir).call(this),It||(It=this._transport.getOptionalContentConfig());let vt=this._intentStates.get(_t.cacheKey);vt||(vt=Object.create(null),this._intentStates.set(_t.cacheKey,vt)),vt.streamReaderCancelTimeout&&(clearTimeout(vt.streamReaderCancelTimeout),vt.streamReaderCancelTimeout=null);const At=!!(_t.renderingIntent&_util.RenderingIntentFlag.PRINT);vt.displayReadyCapability||(vt.displayReadyCapability=new _util.PromiseCapability,vt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Et=this._stats)==null||Et.time("Page Request"),this._pumpOperatorList(_t));const Nt=kt=>{var jt,Ct;vt.renderTasks.delete(wt),(this._maybeCleanupAfterRender||At)&&Zt(this,a,!0),Wt(this,o,Gn).call(this,!At),kt?(wt.capability.reject(kt),this._abortOperatorList({intentState:vt,reason:kt instanceof Error?kt:new Error(kt)})):wt.capability.resolve(),(jt=this._stats)==null||jt.timeEnd("Rendering"),(Ct=this._stats)==null||Ct.timeEnd("Overall")},wt=new InternalRenderTask({callback:Nt,params:{canvasContext:_e,viewport:ot,transform:yt,background:St},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Lt,operatorList:vt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!At,pdfBug:this._pdfBug,pageColors:Ut});(vt.renderTasks||(vt.renderTasks=new Set)).add(wt);const pt=wt.task;return Promise.all([vt.displayReadyCapability.promise,It]).then(([kt,jt])=>{var Ct;if(this.destroyed){Nt();return}(Ct=this._stats)==null||Ct.time("Rendering"),wt.initializeGraphics({transparency:kt,optionalContentConfig:jt}),wt.operatorListChanged()}).catch(Nt),pt}getOperatorList({intent:_e="display",annotationMode:ot=_util.AnnotationMode.ENABLE,printAnnotationStorage:xt=null}={}){var Lt;function et(){St.operatorList.lastChunk&&(St.opListReadCapability.resolve(St.operatorList),St.renderTasks.delete(It))}const yt=this._transport.getRenderingIntent(_e,ot,xt,!0);let St=this._intentStates.get(yt.cacheKey);St||(St=Object.create(null),this._intentStates.set(yt.cacheKey,St));let It;return St.opListReadCapability||(It=Object.create(null),It.operatorListChanged=et,St.opListReadCapability=new _util.PromiseCapability,(St.renderTasks||(St.renderTasks=new Set)).add(It),St.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Lt=this._stats)==null||Lt.time("Page Request"),this._pumpOperatorList(yt)),St.opListReadCapability.promise}streamTextContent({includeMarkedContent:_e=!1,disableNormalization:ot=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:_e===!0,disableNormalization:ot===!0},{highWaterMark:100,size(et){return et.items.length}})}getTextContent(_e={}){if(this._transport._htmlForXfa)return this.getXfa().then(xt=>_xfa_text.XfaText.textContent(xt));const ot=this.streamTextContent(_e);return new Promise(function(xt,et){function yt(){St.read().then(function({value:Lt,done:Ut}){if(Ut){xt(It);return}Object.assign(It.styles,Lt.styles),It.items.push(...Lt.items),yt()},et)}const St=ot.getReader(),It={items:[],styles:Object.create(null)};yt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const _e=[];for(const ot of this._intentStates.values())if(this._abortOperatorList({intentState:ot,reason:new Error("Page was destroyed."),force:!0}),!ot.opListReadCapability)for(const xt of ot.renderTasks)_e.push(xt.completed),xt.cancel();return this.objs.clear(),Zt(this,a,!1),Wt(this,o,ir).call(this),Promise.all(_e)}cleanup(_e=!1){Zt(this,a,!0);const ot=Wt(this,o,Gn).call(this,!1);return _e&&ot&&this._stats&&(this._stats=new _display_utils.StatTimer),ot}_startRenderPage(_e,ot){var et,yt;const xt=this._intentStates.get(ot);xt&&((et=this._stats)==null||et.timeEnd("Page Request"),(yt=xt.displayReadyCapability)==null||yt.resolve(_e))}_renderPageChunk(_e,ot){for(let xt=0,et=_e.length;xt<et;xt++)ot.operatorList.fnArray.push(_e.fnArray[xt]),ot.operatorList.argsArray.push(_e.argsArray[xt]);ot.operatorList.lastChunk=_e.lastChunk,ot.operatorList.separateAnnots=_e.separateAnnots;for(const xt of ot.renderTasks)xt.operatorListChanged();_e.lastChunk&&Wt(this,o,Gn).call(this,!0)}_pumpOperatorList({renderingIntent:_e,cacheKey:ot,annotationStorageSerializable:xt}){const{map:et,transfers:yt}=xt,It=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:_e,cacheKey:ot,annotationStorage:et},yt).getReader(),Lt=this._intentStates.get(ot);Lt.streamReader=It;const Ut=()=>{It.read().then(({value:Ft,done:_t})=>{if(_t){Lt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ft,Lt),Ut())},Ft=>{if(Lt.streamReader=null,!this._transport.destroyed){if(Lt.operatorList){Lt.operatorList.lastChunk=!0;for(const _t of Lt.renderTasks)_t.operatorListChanged();Wt(this,o,Gn).call(this,!0)}if(Lt.displayReadyCapability)Lt.displayReadyCapability.reject(Ft);else if(Lt.opListReadCapability)Lt.opListReadCapability.reject(Ft);else throw Ft}})};Ut()}_abortOperatorList({intentState:_e,reason:ot,force:xt=!1}){if(_e.streamReader){if(_e.streamReaderCancelTimeout&&(clearTimeout(_e.streamReaderCancelTimeout),_e.streamReaderCancelTimeout=null),!xt){if(_e.renderTasks.size>0)return;if(ot instanceof _display_utils.RenderingCancelledException){let et=RENDERING_CANCELLED_TIMEOUT;ot.extraDelay>0&&ot.extraDelay<1e3&&(et+=ot.extraDelay),_e.streamReaderCancelTimeout=setTimeout(()=>{_e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:_e,reason:ot,force:!0})},et);return}}if(_e.streamReader.cancel(new _util.AbortException(ot.message)).catch(()=>{}),_e.streamReader=null,!this._transport.destroyed){for(const[et,yt]of this._intentStates)if(yt===_e){this._intentStates.delete(et);break}this.cleanup()}}}get stats(){return this._stats}}i=new WeakMap,a=new WeakMap,o=new WeakSet,Gn=function(_e=!1){if(Wt(this,o,ir).call(this),!tt(this,a)||this.destroyed)return!1;if(_e)return Zt(this,i,setTimeout(()=>{Zt(this,i,null),Wt(this,o,Gn).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ot,operatorList:xt}of this._intentStates.values())if(ot.size>0||!xt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Zt(this,a,!1),!0},ir=function(){tt(this,i)&&(clearTimeout(tt(this,i)),Zt(this,i,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Yt(this,j,new Set);Yt(this,h,Promise.resolve())}postMessage(_e,ot){const xt={data:structuredClone(_e,ot?{transfer:ot}:null)};tt(this,h).then(()=>{for(const et of tt(this,j))et.call(this,xt)})}addEventListener(_e,ot){tt(this,j).add(ot)}removeEventListener(_e,ot){tt(this,j).delete(ot)}terminate(){tt(this,j).clear()}}j=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const rt=(g=document==null?void 0:document.currentScript)==null?void 0:g.src;rt&&(PDFWorkerUtil.fallbackWorkerSrc=rt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(rt,_e){let ot;try{if(ot=new URL(rt),!ot.origin||ot.origin==="null")return!1}catch{return!1}const xt=new URL(_e,ot);return ot.origin===xt.origin},PDFWorkerUtil.createCDNWrapper=function(rt){const _e=`importScripts("${rt}");`;return URL.createObjectURL(new Blob([_e]))}}const _PDFWorker=class _PDFWorker{constructor({name:rt=null,port:_e=null,verbosity:ot=(0,_util.getVerbosityLevel)()}={}){var xt;if(this.name=rt,this.destroyed=!1,this.verbosity=ot,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,_e){if((xt=tt(_PDFWorker,$))!=null&&xt.has(_e))throw new Error("Cannot use more than one PDFWorker per port.");(tt(_PDFWorker,$)||Zt(_PDFWorker,$,new WeakMap)).set(_e,this),this._initializeFromPort(_e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(rt){this._port=rt,this._messageHandler=new _message_handler.MessageHandler("main","worker",rt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:rt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,rt)||(rt=PDFWorkerUtil.createCDNWrapper(new URL(rt,window.location).href));const _e=new Worker(rt),ot=new _message_handler.MessageHandler("main","worker",_e),xt=()=>{_e.removeEventListener("error",et),ot.destroy(),_e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},et=()=>{this._webWorker||xt()};_e.addEventListener("error",et),ot.on("test",St=>{if(_e.removeEventListener("error",et),this.destroyed){xt();return}St?(this._messageHandler=ot,this._port=_e,this._webWorker=_e,this._readyCapability.resolve(),ot.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),ot.destroy(),_e.terminate())}),ot.on("ready",St=>{if(_e.removeEventListener("error",et),this.destroyed){xt();return}try{yt()}catch{this._setupFakeWorker()}});const yt=()=>{const St=new Uint8Array;ot.send("test",St,[St.buffer])};yt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(rt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const _e=new LoopbackPort;this._port=_e;const ot=`fake${PDFWorkerUtil.fakeWorkerId++}`,xt=new _message_handler.MessageHandler(ot+"_worker",ot,_e);rt.setup(xt,_e);const et=new _message_handler.MessageHandler(ot,ot+"_worker",_e);this._messageHandler=et,this._readyCapability.resolve(),et.send("configure",{verbosity:this.verbosity})}).catch(rt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${rt.message}".`))})}destroy(){var rt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(rt=tt(_PDFWorker,$))==null||rt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(rt){var ot;if(!(rt!=null&&rt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const _e=(ot=tt(this,$))==null?void 0:ot.get(rt.port);if(_e){if(_e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return _e}return new _PDFWorker(rt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var rt;try{return((rt=globalThis.pdfjsWorker)==null?void 0:rt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};$=new WeakMap,Yt(_PDFWorker,$);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(_e,ot,xt,et,yt){Yt(this,ft);Yt(this,ct,new Map);Yt(this,ut,new Map);Yt(this,lt,new Map);Yt(this,dt,null);this.messageHandler=_e,this.loadingTask=ot,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:et.ownerDocument,styleElement:et.styleElement}),this._params=et,this.canvasFactory=yt.canvasFactory,this.filterFactory=yt.filterFactory,this.cMapReaderFactory=yt.cMapReaderFactory,this.standardFontDataFactory=yt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=xt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(_e,ot=_util.AnnotationMode.ENABLE,xt=null,et=!1){let yt=_util.RenderingIntentFlag.DISPLAY,St=_annotation_storage.SerializableEmpty;switch(_e){case"any":yt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":yt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${_e}`)}switch(ot){case _util.AnnotationMode.DISABLE:yt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:yt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:yt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,St=(yt&_util.RenderingIntentFlag.PRINT&&xt instanceof _annotation_storage.PrintAnnotationStorage?xt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${ot}`)}return et&&(yt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:yt,cacheKey:`${yt}_${St.hash}`,annotationStorageSerializable:St}}destroy(){var xt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(xt=tt(this,dt))==null||xt.reject(new Error("Worker was destroyed during onPassword callback"));const _e=[];for(const et of tt(this,ut).values())_e.push(et._destroy());tt(this,ut).clear(),tt(this,lt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ot=this.messageHandler.sendWithPromise("Terminate",null);return _e.push(ot),Promise.all(_e).then(()=>{var et;this.commonObjs.clear(),this.fontLoader.clear(),tt(this,ct).clear(),this.filterFactory.destroy(),(et=this._networkStream)==null||et.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:_e,loadingTask:ot}=this;_e.on("GetReader",(xt,et)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=yt=>{this._lastProgress={loaded:yt.loaded,total:yt.total}},et.onPull=()=>{this._fullReader.read().then(function({value:yt,done:St}){if(St){et.close();return}(0,_util.assert)(yt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),et.enqueue(new Uint8Array(yt),1,[yt])}).catch(yt=>{et.error(yt)})},et.onCancel=yt=>{this._fullReader.cancel(yt),et.ready.catch(St=>{if(!this.destroyed)throw St})}}),_e.on("ReaderHeadersReady",xt=>{const et=new _util.PromiseCapability,yt=this._fullReader;return yt.headersReady.then(()=>{var St;(!yt.isStreamingSupported||!yt.isRangeSupported)&&(this._lastProgress&&((St=ot.onProgress)==null||St.call(ot,this._lastProgress)),yt.onProgress=It=>{var Lt;(Lt=ot.onProgress)==null||Lt.call(ot,{loaded:It.loaded,total:It.total})}),et.resolve({isStreamingSupported:yt.isStreamingSupported,isRangeSupported:yt.isRangeSupported,contentLength:yt.contentLength})},et.reject),et.promise}),_e.on("GetRangeReader",(xt,et)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const yt=this._networkStream.getRangeReader(xt.begin,xt.end);if(!yt){et.close();return}et.onPull=()=>{yt.read().then(function({value:St,done:It}){if(It){et.close();return}(0,_util.assert)(St instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),et.enqueue(new Uint8Array(St),1,[St])}).catch(St=>{et.error(St)})},et.onCancel=St=>{yt.cancel(St),et.ready.catch(It=>{if(!this.destroyed)throw It})}}),_e.on("GetDoc",({pdfInfo:xt})=>{this._numPages=xt.numPages,this._htmlForXfa=xt.htmlForXfa,delete xt.htmlForXfa,ot._capability.resolve(new PDFDocumentProxy(xt,this))}),_e.on("DocException",function(xt){let et;switch(xt.name){case"PasswordException":et=new _util.PasswordException(xt.message,xt.code);break;case"InvalidPDFException":et=new _util.InvalidPDFException(xt.message);break;case"MissingPDFException":et=new _util.MissingPDFException(xt.message);break;case"UnexpectedResponseException":et=new _util.UnexpectedResponseException(xt.message,xt.status);break;case"UnknownErrorException":et=new _util.UnknownErrorException(xt.message,xt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}ot._capability.reject(et)}),_e.on("PasswordRequest",xt=>{if(Zt(this,dt,new _util.PromiseCapability),ot.onPassword){const et=yt=>{yt instanceof Error?tt(this,dt).reject(yt):tt(this,dt).resolve({password:yt})};try{ot.onPassword(et,xt.code)}catch(yt){tt(this,dt).reject(yt)}}else tt(this,dt).reject(new _util.PasswordException(xt.message,xt.code));return tt(this,dt).promise}),_e.on("DataLoaded",xt=>{var et;(et=ot.onProgress)==null||et.call(ot,{loaded:xt.length,total:xt.length}),this.downloadInfoCapability.resolve(xt)}),_e.on("StartRenderPage",xt=>{if(this.destroyed)return;tt(this,ut).get(xt.pageIndex)._startRenderPage(xt.transparency,xt.cacheKey)}),_e.on("commonobj",([xt,et,yt])=>{var St;if(!this.destroyed&&!this.commonObjs.has(xt))switch(et){case"Font":const It=this._params;if("error"in yt){const Ft=yt.error;(0,_util.warn)(`Error during font loading: ${Ft}`),this.commonObjs.resolve(xt,Ft);break}const Lt=It.pdfBug&&((St=globalThis.FontInspector)!=null&&St.enabled)?(Ft,_t)=>globalThis.FontInspector.fontAdded(Ft,_t):null,Ut=new _font_loader.FontFaceObject(yt,{isEvalSupported:It.isEvalSupported,disableFontFace:It.disableFontFace,ignoreErrors:It.ignoreErrors,inspectFont:Lt});this.fontLoader.bind(Ut).catch(Ft=>_e.sendWithPromise("FontFallback",{id:xt})).finally(()=>{!It.fontExtraProperties&&Ut.data&&(Ut.data=null),this.commonObjs.resolve(xt,Ut)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(xt,yt);break;default:throw new Error(`Got unknown common object type ${et}`)}}),_e.on("obj",([xt,et,yt,St])=>{var Lt;if(this.destroyed)return;const It=tt(this,ut).get(et);if(!It.objs.has(xt))switch(yt){case"Image":if(It.objs.resolve(xt,St),St){let Ut;if(St.bitmap){const{width:Ft,height:_t}=St;Ut=Ft*_t*4}else Ut=((Lt=St.data)==null?void 0:Lt.length)||0;Ut>_util.MAX_IMAGE_SIZE_TO_CACHE&&(It._maybeCleanupAfterRender=!0)}break;case"Pattern":It.objs.resolve(xt,St);break;default:throw new Error(`Got unknown object type ${yt}`)}}),_e.on("DocProgress",xt=>{var et;this.destroyed||(et=ot.onProgress)==null||et.call(ot,{loaded:xt.loaded,total:xt.total})}),_e.on("FetchBuiltInCMap",xt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(xt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),_e.on("FetchStandardFontData",xt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(xt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var xt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:_e,transfers:ot}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:_e,filename:((xt=this._fullReader)==null?void 0:xt.filename)??null},ot).finally(()=>{this.annotationStorage.resetModified()})}getPage(_e){if(!Number.isInteger(_e)||_e<=0||_e>this._numPages)return Promise.reject(new Error("Invalid page request."));const ot=_e-1,xt=tt(this,lt).get(ot);if(xt)return xt;const et=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ot}).then(yt=>{if(this.destroyed)throw new Error("Transport destroyed");const St=new PDFPageProxy(ot,yt,this,this._params.pdfBug);return tt(this,ut).set(ot,St),St});return tt(this,lt).set(ot,et),et}getPageIndex(_e){return typeof _e!="object"||_e===null||!Number.isInteger(_e.num)||_e.num<0||!Number.isInteger(_e.gen)||_e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:_e.num,gen:_e.gen})}getAnnotations(_e,ot){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:_e,intent:ot})}getFieldObjects(){return Wt(this,ft,ar).call(this,"GetFieldObjects")}hasJSActions(){return Wt(this,ft,ar).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(_e){return typeof _e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:_e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Wt(this,ft,ar).call(this,"GetDocJSActions")}getPageJSActions(_e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:_e})}getStructTree(_e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:_e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(_e=>new _optional_content_config.OptionalContentConfig(_e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const _e="GetMetadata",ot=tt(this,ct).get(_e);if(ot)return ot;const xt=this.messageHandler.sendWithPromise(_e,null).then(et=>{var yt,St;return{info:et[0],metadata:et[1]?new _metadata.Metadata(et[1]):null,contentDispositionFilename:((yt=this._fullReader)==null?void 0:yt.filename)??null,contentLength:((St=this._fullReader)==null?void 0:St.contentLength)??null}});return tt(this,ct).set(_e,xt),xt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(_e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ot of tt(this,ut).values())if(!ot.cleanup())throw new Error(`startCleanup: Page ${ot.pageNumber} is currently rendering.`);this.commonObjs.clear(),_e||this.fontLoader.clear(),tt(this,ct).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:_e,enableXfa:ot}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:_e,enableXfa:ot})}}ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap,ft=new WeakSet,ar=function(_e,ot=null){const xt=tt(this,ct).get(_e);if(xt)return xt;const et=this.messageHandler.sendWithPromise(_e,ot);return tt(this,ct).set(_e,et),et};class PDFObjects{constructor(){Yt(this,_);Yt(this,b,Object.create(null))}get(_e,ot=null){if(ot){const et=Wt(this,_,Er).call(this,_e);return et.capability.promise.then(()=>ot(et.data)),null}const xt=tt(this,b)[_e];if(!(xt!=null&&xt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${_e}.`);return xt.data}has(_e){const ot=tt(this,b)[_e];return(ot==null?void 0:ot.capability.settled)||!1}resolve(_e,ot=null){const xt=Wt(this,_,Er).call(this,_e);xt.data=ot,xt.capability.resolve()}clear(){var _e;for(const ot in tt(this,b)){const{data:xt}=tt(this,b)[ot];(_e=xt==null?void 0:xt.bitmap)==null||_e.close()}Zt(this,b,Object.create(null))}}b=new WeakMap,_=new WeakSet,Er=function(_e){var ot;return(ot=tt(this,b))[_e]||(ot[_e]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(_e){Yt(this,nt,null);Zt(this,nt,_e),this.onContinue=null}get promise(){return tt(this,nt).capability.promise}cancel(_e=0){tt(this,nt).cancel(null,_e)}get separateAnnots(){const{separateAnnots:_e}=tt(this,nt).operatorList;if(!_e)return!1;const{annotationCanvasMap:ot}=tt(this,nt);return _e.form||_e.canvas&&(ot==null?void 0:ot.size)>0}}nt=new WeakMap,exports.RenderTask=RenderTask;const ht=class ht{constructor({callback:_e,params:ot,objs:xt,commonObjs:et,annotationCanvasMap:yt,operatorList:St,pageIndex:It,canvasFactory:Lt,filterFactory:Ut,useRequestAnimationFrame:Ft=!1,pdfBug:_t=!1,pageColors:vt=null}){this.callback=_e,this.params=ot,this.objs=xt,this.commonObjs=et,this.annotationCanvasMap=yt,this.operatorListIdx=null,this.operatorList=St,this._pageIndex=It,this.canvasFactory=Lt,this.filterFactory=Ut,this._pdfBug=_t,this.pageColors=vt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ft===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ot.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:_e=!1,optionalContentConfig:ot}){var It,Lt;if(this.cancelled)return;if(this._canvas){if(tt(ht,st).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");tt(ht,st).add(this._canvas)}this._pdfBug&&((It=globalThis.StepperManager)!=null&&It.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:xt,viewport:et,transform:yt,background:St}=this.params;this.gfx=new _canvas.CanvasGraphics(xt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ot},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:yt,viewport:et,transparency:_e,background:St}),this.operatorListIdx=0,this.graphicsReady=!0,(Lt=this.graphicsReadyCallback)==null||Lt.call(this)}cancel(_e=null,ot=0){var xt;this.running=!1,this.cancelled=!0,(xt=this.gfx)==null||xt.endDrawing(),tt(ht,st).delete(this._canvas),this.callback(_e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ot))}operatorListChanged(){var _e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(_e=this.stepper)==null||_e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),tt(ht,st).delete(this._canvas),this.callback())))}};st=new WeakMap,Yt(ht,st,new WeakSet);let InternalRenderTask=ht;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,s,i)=>{var g,$,ct,ns,lt;Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var a=i(1),o=i(4),c=i(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=d;class j{constructor(){Yt(this,ct);Yt(this,g,!1);Yt(this,$,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ft,at){const b=tt(this,$).get(ft);return b===void 0?at:Object.assign(at,b)}getRawValue(ft){return tt(this,$).get(ft)}remove(ft){if(tt(this,$).delete(ft),tt(this,$).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const at of tt(this,$).values())if(at instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ft,at){const b=tt(this,$).get(ft);let _=!1;if(b!==void 0)for(const[it,nt]of Object.entries(at))b[it]!==nt&&(_=!0,b[it]=nt);else _=!0,tt(this,$).set(ft,at);_&&Wt(this,ct,ns).call(this),at instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(at.constructor._type)}has(ft){return tt(this,$).has(ft)}getAll(){return tt(this,$).size>0?(0,a.objectFromMap)(tt(this,$)):null}setAll(ft){for(const[at,b]of Object.entries(ft))this.setValue(at,b)}get size(){return tt(this,$).size}resetModified(){tt(this,g)&&(Zt(this,g,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(tt(this,$).size===0)return d;const ft=new Map,at=new c.MurmurHash3_64,b=[],_=Object.create(null);let it=!1;for(const[nt,st]of tt(this,$)){const ht=st instanceof o.AnnotationEditor?st.serialize(!1,_):st;ht&&(ft.set(nt,ht),at.update(`${nt}:${JSON.stringify(ht)}`),it||(it=!!ht.bitmap))}if(it)for(const nt of ft.values())nt.bitmap&&b.push(nt.bitmap);return ft.size>0?{map:ft,hash:at.hexdigest(),transfers:b}:d}}g=new WeakMap,$=new WeakMap,ct=new WeakSet,ns=function(){tt(this,g)||(Zt(this,g,!0),typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=j;class h extends j{constructor(at){super();Yt(this,lt);const{map:b,hash:_,transfers:it}=at.serializable,nt=structuredClone(b,it?{transfer:it}:null);Zt(this,lt,{map:nt,hash:_,transfers:it})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return tt(this,lt)}}lt=new WeakMap,s.PrintAnnotationStorage=h},(e,s,i)=>{var h,g,$,ct,ut,lt,dt,ft,at,b,_,it,nt,st,ht,br,wr,ot,Sr,_r,rs,ss,is,Ar,as;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var a=i(5),o=i(1),c=i(6);const Ft=class Ft{constructor(vt){Yt(this,ht);Yt(this,h,"");Yt(this,g,!1);Yt(this,$,null);Yt(this,ct,null);Yt(this,ut,null);Yt(this,lt,!1);Yt(this,dt,null);Yt(this,ft,this.focusin.bind(this));Yt(this,at,this.focusout.bind(this));Yt(this,b,!1);Yt(this,_,!1);Yt(this,it,!1);In(this,"_initialOptions",Object.create(null));In(this,"_uiManager",null);In(this,"_focusEventsAllowed",!0);In(this,"_l10nPromise",null);Yt(this,nt,!1);Yt(this,st,Ft._zIndex++);this.constructor===Ft&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=vt.parent,this.id=vt.id,this.width=this.height=null,this.pageIndex=vt.parent.pageIndex,this.name=vt.name,this.div=null,this._uiManager=vt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=vt.isCentered,this._structTreeParentId=null;const{rotation:At,rawDims:{pageWidth:Nt,pageHeight:wt,pageX:pt,pageY:mt}}=this.parent.viewport;this.rotation=At,this.pageRotation=(360+At-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Nt,wt],this.pageTranslation=[pt,mt];const[Et,kt]=this.parentDimensions;this.x=vt.x/Et,this.y=vt.y/kt,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(vt){const At=new j({id:vt.parent.getNextId(),parent:vt.parent,uiManager:vt._uiManager});At.annotationElementId=vt.annotationElementId,At.deleted=!0,At._uiManager.addToAnnotationStorage(At)}static initialize(vt,At=null){if(Ft._l10nPromise||(Ft._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(wt=>[wt,vt.get(wt)]))),At!=null&&At.strings)for(const wt of At.strings)Ft._l10nPromise.set(wt,vt.get(wt));if(Ft._borderLineWidth!==-1)return;const Nt=getComputedStyle(document.documentElement);Ft._borderLineWidth=parseFloat(Nt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(vt,At){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(vt){return!1}static paste(vt,At){(0,o.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return tt(this,nt)}set _isDraggable(vt){var At;Zt(this,nt,vt),(At=this.div)==null||At.classList.toggle("draggable",vt)}center(){const[vt,At]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*At/(vt*2),this.y+=this.width*vt/(At*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*At/(vt*2),this.y-=this.width*vt/(At*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(vt){this._uiManager.addCommands(vt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=tt(this,st)}setParent(vt){vt!==null&&(this.pageIndex=vt.pageIndex,this.pageDimensions=vt.pageDimensions),this.parent=vt}focusin(vt){this._focusEventsAllowed&&(tt(this,b)?Zt(this,b,!1):this.parent.setSelected(this))}focusout(vt){var Nt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const At=vt.relatedTarget;At!=null&&At.closest(`#${this.id}`)||(vt.preventDefault(),(Nt=this.parent)!=null&&Nt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(vt,At,Nt,wt){const[pt,mt]=this.parentDimensions;[Nt,wt]=this.screenToPageTranslation(Nt,wt),this.x=(vt+Nt)/pt,this.y=(At+wt)/mt,this.fixAndSetPosition()}translate(vt,At){Wt(this,ht,br).call(this,this.parentDimensions,vt,At)}translateInPage(vt,At){Wt(this,ht,br).call(this,this.pageDimensions,vt,At),this.div.scrollIntoView({block:"nearest"})}drag(vt,At){const[Nt,wt]=this.parentDimensions;if(this.x+=vt/Nt,this.y+=At/wt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:jt,y:Ct}=this.div.getBoundingClientRect();this.parent.findNewParent(this,jt,Ct)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:pt,y:mt}=this;const[Et,kt]=Wt(this,ht,wr).call(this);pt+=Et,mt+=kt,this.div.style.left=`${(100*pt).toFixed(2)}%`,this.div.style.top=`${(100*mt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[vt,At]=this.pageDimensions;let{x:Nt,y:wt,width:pt,height:mt}=this;switch(pt*=vt,mt*=At,Nt*=vt,wt*=At,this.rotation){case 0:Nt=Math.max(0,Math.min(vt-pt,Nt)),wt=Math.max(0,Math.min(At-mt,wt));break;case 90:Nt=Math.max(0,Math.min(vt-mt,Nt)),wt=Math.min(At,Math.max(pt,wt));break;case 180:Nt=Math.min(vt,Math.max(pt,Nt)),wt=Math.min(At,Math.max(mt,wt));break;case 270:Nt=Math.min(vt,Math.max(mt,Nt)),wt=Math.max(0,Math.min(At-pt,wt));break}this.x=Nt/=vt,this.y=wt/=At;const[Et,kt]=Wt(this,ht,wr).call(this);Nt+=Et,wt+=kt;const{style:jt}=this.div;jt.left=`${(100*Nt).toFixed(2)}%`,jt.top=`${(100*wt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(vt,At){var Nt;return Wt(Nt=Ft,ot,Sr).call(Nt,vt,At,this.parentRotation)}pageTranslationToScreen(vt,At){var Nt;return Wt(Nt=Ft,ot,Sr).call(Nt,vt,At,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:vt,pageDimensions:[At,Nt]}=this,wt=At*vt,pt=Nt*vt;return o.FeatureTest.isCSSRoundSupported?[Math.round(wt),Math.round(pt)]:[wt,pt]}setDims(vt,At){var pt;const[Nt,wt]=this.parentDimensions;this.div.style.width=`${(100*vt/Nt).toFixed(2)}%`,tt(this,lt)||(this.div.style.height=`${(100*At/wt).toFixed(2)}%`),(pt=tt(this,$))==null||pt.classList.toggle("small",vt<Ft.SMALL_EDITOR_SIZE||At<Ft.SMALL_EDITOR_SIZE)}fixDims(){const{style:vt}=this.div,{height:At,width:Nt}=vt,wt=Nt.endsWith("%"),pt=!tt(this,lt)&&At.endsWith("%");if(wt&&pt)return;const[mt,Et]=this.parentDimensions;wt||(vt.width=`${(100*parseFloat(Nt)/mt).toFixed(2)}%`),!tt(this,lt)&&!pt&&(vt.height=`${(100*parseFloat(At)/Et).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(tt(this,$))return;const vt=Zt(this,$,document.createElement("button"));vt.className="altText";const At=await Ft._l10nPromise.get("editor_alt_text_button_label");vt.textContent=At,vt.setAttribute("aria-label",At),vt.tabIndex="0",vt.addEventListener("contextmenu",c.noContextMenu),vt.addEventListener("pointerdown",Nt=>Nt.stopPropagation()),vt.addEventListener("click",Nt=>{Nt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),vt.addEventListener("keydown",Nt=>{Nt.target===vt&&Nt.key==="Enter"&&(Nt.preventDefault(),this._uiManager.editAltText(this))}),Wt(this,ht,Ar).call(this),this.div.append(vt),Ft.SMALL_EDITOR_SIZE||(Ft.SMALL_EDITOR_SIZE=Math.min(128,Math.round(vt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:tt(this,h),decorative:tt(this,g)}}set altTextData({altText:vt,decorative:At}){tt(this,h)===vt&&tt(this,g)===At||(Zt(this,h,vt),Zt(this,g,At),Wt(this,ht,Ar).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",tt(this,ft)),this.div.addEventListener("focusout",tt(this,at));const[vt,At]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*At/vt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*vt/At).toFixed(2)}%`);const[Nt,wt]=this.getInitialTranslation();return this.translate(Nt,wt),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(vt){const{isMac:At}=o.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&At){vt.preventDefault();return}Zt(this,b,!0),Wt(this,ht,as).call(this,vt)}moveInDOM(){var vt;(vt=this.parent)==null||vt.moveEditorInDOM(this)}_setParentAndPosition(vt,At,Nt){vt.changeParent(this),this.x=At,this.y=Nt,this.fixAndSetPosition()}getRect(vt,At){const Nt=this.parentScale,[wt,pt]=this.pageDimensions,[mt,Et]=this.pageTranslation,kt=vt/Nt,jt=At/Nt,Ct=this.x*wt,zt=this.y*pt,Xt=this.width*wt,Tt=this.height*pt;switch(this.rotation){case 0:return[Ct+kt+mt,pt-zt-jt-Tt+Et,Ct+kt+Xt+mt,pt-zt-jt+Et];case 90:return[Ct+jt+mt,pt-zt+kt+Et,Ct+jt+Tt+mt,pt-zt+kt+Xt+Et];case 180:return[Ct-kt-Xt+mt,pt-zt+jt+Et,Ct-kt+mt,pt-zt+jt+Tt+Et];case 270:return[Ct-jt-Tt+mt,pt-zt-kt-Xt+Et,Ct-jt+mt,pt-zt-kt+Et];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(vt,At){const[Nt,wt,pt,mt]=vt,Et=pt-Nt,kt=mt-wt;switch(this.rotation){case 0:return[Nt,At-mt,Et,kt];case 90:return[Nt,At-wt,kt,Et];case 180:return[pt,At-wt,Et,kt];case 270:return[pt,At-mt,kt,Et];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Zt(this,it,!0)}disableEditMode(){Zt(this,it,!1)}isInEditMode(){return tt(this,it)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var vt,At;(vt=this.div)==null||vt.addEventListener("focusin",tt(this,ft)),(At=this.div)==null||At.addEventListener("focusout",tt(this,at))}serialize(vt=!1,At=null){(0,o.unreachable)("An editor must be serializable")}static deserialize(vt,At,Nt){const wt=new this.prototype.constructor({parent:At,id:At.getNextId(),uiManager:Nt});wt.rotation=vt.rotation;const[pt,mt]=wt.pageDimensions,[Et,kt,jt,Ct]=wt.getRectInCurrentCoords(vt.rect,mt);return wt.x=Et/pt,wt.y=kt/mt,wt.width=jt/pt,wt.height=Ct/mt,wt}remove(){var vt;this.div.removeEventListener("focusin",tt(this,ft)),this.div.removeEventListener("focusout",tt(this,at)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(vt=tt(this,$))==null||vt.remove(),Zt(this,$,null),Zt(this,ct,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Wt(this,ht,rs).call(this),tt(this,dt).classList.remove("hidden"))}select(){var vt;this.makeResizable(),(vt=this.div)==null||vt.classList.add("selectedEditor")}unselect(){var vt,At,Nt;(vt=tt(this,dt))==null||vt.classList.add("hidden"),(At=this.div)==null||At.classList.remove("selectedEditor"),(Nt=this.div)!=null&&Nt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(vt,At){}disableEditing(){tt(this,$)&&(tt(this,$).hidden=!0)}enableEditing(){tt(this,$)&&(tt(this,$).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return tt(this,_)}set isEditing(vt){Zt(this,_,vt),this.parent&&(vt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(vt,At){Zt(this,lt,!0);const Nt=vt/At,{style:wt}=this.div;wt.aspectRatio=Nt,wt.height="auto"}static get MIN_SIZE(){return 16}};h=new WeakMap,g=new WeakMap,$=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap,ft=new WeakMap,at=new WeakMap,b=new WeakMap,_=new WeakMap,it=new WeakMap,nt=new WeakMap,st=new WeakMap,ht=new WeakSet,br=function([vt,At],Nt,wt){[Nt,wt]=this.screenToPageTranslation(Nt,wt),this.x+=Nt/vt,this.y+=wt/At,this.fixAndSetPosition()},wr=function(){const[vt,At]=this.parentDimensions,{_borderLineWidth:Nt}=Ft,wt=Nt/vt,pt=Nt/At;switch(this.rotation){case 90:return[-wt,pt];case 180:return[wt,pt];case 270:return[wt,-pt];default:return[-wt,-pt]}},ot=new WeakSet,Sr=function(vt,At,Nt){switch(Nt){case 90:return[At,-vt];case 180:return[-vt,-At];case 270:return[-At,vt];default:return[vt,At]}},_r=function(vt){switch(vt){case 90:{const[At,Nt]=this.pageDimensions;return[0,-At/Nt,Nt/At,0]}case 180:return[-1,0,0,-1];case 270:{const[At,Nt]=this.pageDimensions;return[0,At/Nt,-Nt/At,0]}default:return[1,0,0,1]}},rs=function(){if(tt(this,dt))return;Zt(this,dt,document.createElement("div")),tt(this,dt).classList.add("resizers");const vt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||vt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const At of vt){const Nt=document.createElement("div");tt(this,dt).append(Nt),Nt.classList.add("resizer",At),Nt.addEventListener("pointerdown",Wt(this,ht,ss).bind(this,At)),Nt.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(tt(this,dt))},ss=function(vt,At){At.preventDefault();const{isMac:Nt}=o.FeatureTest.platform;if(At.button!==0||At.ctrlKey&&Nt)return;const wt=Wt(this,ht,is).bind(this,vt),pt=this._isDraggable;this._isDraggable=!1;const mt={passive:!0,capture:!0};window.addEventListener("pointermove",wt,mt);const Et=this.x,kt=this.y,jt=this.width,Ct=this.height,zt=this.parent.div.style.cursor,Xt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(At.target).cursor;const Tt=()=>{this._isDraggable=pt,window.removeEventListener("pointerup",Tt),window.removeEventListener("blur",Tt),window.removeEventListener("pointermove",wt,mt),this.parent.div.style.cursor=zt,this.div.style.cursor=Xt;const $t=this.x,Kt=this.y,qt=this.width,rn=this.height;$t===Et&&Kt===kt&&qt===jt&&rn===Ct||this.addCommands({cmd:()=>{this.width=qt,this.height=rn,this.x=$t,this.y=Kt;const[Ht,Vt]=this.parentDimensions;this.setDims(Ht*qt,Vt*rn),this.fixAndSetPosition()},undo:()=>{this.width=jt,this.height=Ct,this.x=Et,this.y=kt;const[Ht,Vt]=this.parentDimensions;this.setDims(Ht*jt,Vt*Ct),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Tt),window.addEventListener("blur",Tt)},is=function(vt,At){const[Nt,wt]=this.parentDimensions,pt=this.x,mt=this.y,Et=this.width,kt=this.height,jt=Ft.MIN_SIZE/Nt,Ct=Ft.MIN_SIZE/wt,zt=xn=>Math.round(xn*1e4)/1e4,Xt=Wt(this,ht,_r).call(this,this.rotation),Tt=(xn,wn)=>[Xt[0]*xn+Xt[2]*wn,Xt[1]*xn+Xt[3]*wn],$t=Wt(this,ht,_r).call(this,360-this.rotation),Kt=(xn,wn)=>[$t[0]*xn+$t[2]*wn,$t[1]*xn+$t[3]*wn];let qt,rn,Ht=!1,Vt=!1;switch(vt){case"topLeft":Ht=!0,qt=(xn,wn)=>[0,0],rn=(xn,wn)=>[xn,wn];break;case"topMiddle":qt=(xn,wn)=>[xn/2,0],rn=(xn,wn)=>[xn/2,wn];break;case"topRight":Ht=!0,qt=(xn,wn)=>[xn,0],rn=(xn,wn)=>[0,wn];break;case"middleRight":Vt=!0,qt=(xn,wn)=>[xn,wn/2],rn=(xn,wn)=>[0,wn/2];break;case"bottomRight":Ht=!0,qt=(xn,wn)=>[xn,wn],rn=(xn,wn)=>[0,0];break;case"bottomMiddle":qt=(xn,wn)=>[xn/2,wn],rn=(xn,wn)=>[xn/2,0];break;case"bottomLeft":Ht=!0,qt=(xn,wn)=>[0,wn],rn=(xn,wn)=>[xn,0];break;case"middleLeft":Vt=!0,qt=(xn,wn)=>[0,wn/2],rn=(xn,wn)=>[xn,wn/2];break}const gt=qt(Et,kt),bt=rn(Et,kt);let Dt=Tt(...bt);const Ot=zt(pt+Dt[0]),Qt=zt(mt+Dt[1]);let sn=1,on=1,[Gt,hn]=this.screenToPageTranslation(At.movementX,At.movementY);if([Gt,hn]=Kt(Gt/Nt,hn/wt),Ht){const xn=Math.hypot(Et,kt);sn=on=Math.max(Math.min(Math.hypot(bt[0]-gt[0]-Gt,bt[1]-gt[1]-hn)/xn,1/Et,1/kt),jt/Et,Ct/kt)}else Vt?sn=Math.max(jt,Math.min(1,Math.abs(bt[0]-gt[0]-Gt)))/Et:on=Math.max(Ct,Math.min(1,Math.abs(bt[1]-gt[1]-hn)))/kt;const dn=zt(Et*sn),Rn=zt(kt*on);Dt=Tt(...rn(dn,Rn));const An=Ot-Dt[0],Nn=Qt-Dt[1];this.width=dn,this.height=Rn,this.x=An,this.y=Nn,this.setDims(Nt*dn,wt*Rn),this.fixAndSetPosition()},Ar=async function(){var Nt;const vt=tt(this,$);if(!vt)return;if(!tt(this,h)&&!tt(this,g)){vt.classList.remove("done"),(Nt=tt(this,ct))==null||Nt.remove();return}Ft._l10nPromise.get("editor_alt_text_edit_button_label").then(wt=>{vt.setAttribute("aria-label",wt)});let At=tt(this,ct);if(!At){Zt(this,ct,At=document.createElement("span")),At.className="tooltip",At.setAttribute("role","tooltip");const wt=At.id=`alt-text-tooltip-${this.id}`;vt.setAttribute("aria-describedby",wt);const pt=100;vt.addEventListener("mouseenter",()=>{Zt(this,ut,setTimeout(()=>{Zt(this,ut,null),tt(this,ct).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},pt))}),vt.addEventListener("mouseleave",()=>{var mt;clearTimeout(tt(this,ut)),Zt(this,ut,null),(mt=tt(this,ct))==null||mt.classList.remove("show")})}vt.classList.add("done"),At.innerText=tt(this,g)?await Ft._l10nPromise.get("editor_alt_text_decorative_tooltip"):tt(this,h),At.parentNode||vt.append(At)},as=function(vt){if(!this._isDraggable)return;const At=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Nt,wt;At&&(Nt={passive:!0,capture:!0},wt=mt=>{const[Et,kt]=this.screenToPageTranslation(mt.movementX,mt.movementY);this._uiManager.dragSelectedEditors(Et,kt)},window.addEventListener("pointermove",wt,Nt));const pt=()=>{if(window.removeEventListener("pointerup",pt),window.removeEventListener("blur",pt),At&&window.removeEventListener("pointermove",wt,Nt),Zt(this,b,!1),!this._uiManager.endDragSession()){const{isMac:mt}=o.FeatureTest.platform;vt.ctrlKey&&!mt||vt.shiftKey||vt.metaKey&&mt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",pt),window.addEventListener("blur",pt)},Yt(Ft,ot),In(Ft,"_borderLineWidth",-1),In(Ft,"_colorManager",new a.ColorManager),In(Ft,"_zIndex",1),In(Ft,"SMALL_EDITOR_SIZE",0);let d=Ft;s.AnnotationEditor=d;class j extends d{constructor(vt){super(vt),this.annotationElementId=vt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,s,i)=>{var lt,dt,ft,at,b,Rr,nt,st,ht,rt,_e,os,et,yt,St,It,Lt,Ut,Ft,_t,vt,At,Nt,wt,pt,mt,Et,kt,jt,Ct,zt,Xt,Tt,$t,Kt,qt,rn,Ht,Vt,gt,bt,Dt,Ot,Qt,sn,on,Gt,ls,kr,jr,or,Cr,Pr,Un,Qn,cs,us,Tr,Zn,Nr;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=c,s.opacityToHex=d;var a=i(1),o=i(6);function c(Tn,Mt,an){for(const pn of an)Mt.addEventListener(pn,Tn[pn].bind(Tn))}function d(Tn){return Math.round(Math.min(255,Math.max(1,255*Tn))).toString(16).padStart(2,"0")}class j{constructor(){Yt(this,lt,0)}getId(){return`${a.AnnotationEditorPrefix}${Jn(this,lt)._++}`}}lt=new WeakMap;const it=class it{constructor(){Yt(this,b);Yt(this,dt,(0,a.getUuid)());Yt(this,ft,0);Yt(this,at,null)}static get _isSVGFittingCanvas(){const Mt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',pn=new OffscreenCanvas(1,3).getContext("2d"),En=new Image;En.src=Mt;const _n=En.decode().then(()=>(pn.drawImage(En,0,0,1,1,0,0,1,3),new Uint32Array(pn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",_n)}async getFromFile(Mt){const{lastModified:an,name:pn,size:En,type:_n}=Mt;return Wt(this,b,Rr).call(this,`${an}_${pn}_${En}_${_n}`,Mt)}async getFromUrl(Mt){return Wt(this,b,Rr).call(this,Mt,Mt)}async getFromId(Mt){tt(this,at)||Zt(this,at,new Map);const an=tt(this,at).get(Mt);return an?an.bitmap?(an.refCounter+=1,an):an.file?this.getFromFile(an.file):this.getFromUrl(an.url):null}getSvgUrl(Mt){const an=tt(this,at).get(Mt);return an!=null&&an.isSvg?an.svgUrl:null}deleteId(Mt){tt(this,at)||Zt(this,at,new Map);const an=tt(this,at).get(Mt);an&&(an.refCounter-=1,an.refCounter===0&&(an.bitmap=null))}isValidId(Mt){return Mt.startsWith(`image_${tt(this,dt)}_`)}};dt=new WeakMap,ft=new WeakMap,at=new WeakMap,b=new WeakSet,Rr=async function(Mt,an){tt(this,at)||Zt(this,at,new Map);let pn=tt(this,at).get(Mt);if(pn===null)return null;if(pn!=null&&pn.bitmap)return pn.refCounter+=1,pn;try{pn||(pn={bitmap:null,id:`image_${tt(this,dt)}_${Jn(this,ft)._++}`,refCounter:0,isSvg:!1});let En;if(typeof an=="string"){pn.url=an;const _n=await fetch(an);if(!_n.ok)throw new Error(_n.statusText);En=await _n.blob()}else En=pn.file=an;if(En.type==="image/svg+xml"){const _n=it._isSVGFittingCanvas,mn=new FileReader,Pt=new Image,Rt=new Promise((Bt,tn)=>{Pt.onload=()=>{pn.bitmap=Pt,pn.isSvg=!0,Bt()},mn.onload=async()=>{const nn=pn.svgUrl=mn.result;Pt.src=await _n?`${nn}#svgView(preserveAspectRatio(none))`:nn},Pt.onerror=mn.onerror=tn});mn.readAsDataURL(En),await Rt}else pn.bitmap=await createImageBitmap(En);pn.refCounter=1}catch(En){console.error(En),pn=null}return tt(this,at).set(Mt,pn),pn&&tt(this,at).set(pn.id,pn),pn};let h=it;class g{constructor(Mt=128){Yt(this,nt,[]);Yt(this,st,!1);Yt(this,ht);Yt(this,rt,-1);Zt(this,ht,Mt)}add({cmd:Mt,undo:an,mustExec:pn,type:En=NaN,overwriteIfSameType:_n=!1,keepUndo:mn=!1}){if(pn&&Mt(),tt(this,st))return;const Pt={cmd:Mt,undo:an,type:En};if(tt(this,rt)===-1){tt(this,nt).length>0&&(tt(this,nt).length=0),Zt(this,rt,0),tt(this,nt).push(Pt);return}if(_n&&tt(this,nt)[tt(this,rt)].type===En){mn&&(Pt.undo=tt(this,nt)[tt(this,rt)].undo),tt(this,nt)[tt(this,rt)]=Pt;return}const Rt=tt(this,rt)+1;Rt===tt(this,ht)?tt(this,nt).splice(0,1):(Zt(this,rt,Rt),Rt<tt(this,nt).length&&tt(this,nt).splice(Rt)),tt(this,nt).push(Pt)}undo(){tt(this,rt)!==-1&&(Zt(this,st,!0),tt(this,nt)[tt(this,rt)].undo(),Zt(this,st,!1),Zt(this,rt,tt(this,rt)-1))}redo(){tt(this,rt)<tt(this,nt).length-1&&(Zt(this,rt,tt(this,rt)+1),Zt(this,st,!0),tt(this,nt)[tt(this,rt)].cmd(),Zt(this,st,!1))}hasSomethingToUndo(){return tt(this,rt)!==-1}hasSomethingToRedo(){return tt(this,rt)<tt(this,nt).length-1}destroy(){Zt(this,nt,null)}}nt=new WeakMap,st=new WeakMap,ht=new WeakMap,rt=new WeakMap,s.CommandManager=g;class ${constructor(Mt){Yt(this,_e);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:an}=a.FeatureTest.platform;for(const[pn,En,_n={}]of Mt)for(const mn of pn){const Pt=mn.startsWith("mac+");an&&Pt?(this.callbacks.set(mn.slice(4),{callback:En,options:_n}),this.allKeys.add(mn.split("+").at(-1))):!an&&!Pt&&(this.callbacks.set(mn,{callback:En,options:_n}),this.allKeys.add(mn.split("+").at(-1)))}}exec(Mt,an){if(!this.allKeys.has(an.key))return;const pn=this.callbacks.get(Wt(this,_e,os).call(this,an));if(!pn)return;const{callback:En,options:{bubbles:_n=!1,args:mn=[],checker:Pt=null}}=pn;Pt&&!Pt(Mt,an)||(En.bind(Mt,...mn)(),_n||(an.stopPropagation(),an.preventDefault()))}}_e=new WeakSet,os=function(Mt){Mt.altKey&&this.buffer.push("alt"),Mt.ctrlKey&&this.buffer.push("ctrl"),Mt.metaKey&&this.buffer.push("meta"),Mt.shiftKey&&this.buffer.push("shift"),this.buffer.push(Mt.key);const an=this.buffer.join("+");return this.buffer.length=0,an},s.KeyboardManager=$;const xt=class xt{get _colors(){const Mt=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(Mt),(0,a.shadow)(this,"_colors",Mt)}convert(Mt){const an=(0,o.getRGB)(Mt);if(!window.matchMedia("(forced-colors: active)").matches)return an;for(const[pn,En]of this._colors)if(En.every((_n,mn)=>_n===an[mn]))return xt._colorsMapping.get(pn);return an}getHexCode(Mt){const an=this._colors.get(Mt);return an?a.Util.makeHexColor(...an):Mt}};In(xt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ct=xt;s.ColorManager=ct;const Ln=class Ln{constructor(Mt,an,pn,En,_n,mn){Yt(this,Gt);Yt(this,et,null);Yt(this,yt,new Map);Yt(this,St,new Map);Yt(this,It,null);Yt(this,Lt,null);Yt(this,Ut,new g);Yt(this,Ft,0);Yt(this,_t,new Set);Yt(this,vt,null);Yt(this,At,null);Yt(this,Nt,new Set);Yt(this,wt,null);Yt(this,pt,new j);Yt(this,mt,!1);Yt(this,Et,!1);Yt(this,kt,null);Yt(this,jt,a.AnnotationEditorType.NONE);Yt(this,Ct,new Set);Yt(this,zt,null);Yt(this,Xt,this.blur.bind(this));Yt(this,Tt,this.focus.bind(this));Yt(this,$t,this.copy.bind(this));Yt(this,Kt,this.cut.bind(this));Yt(this,qt,this.paste.bind(this));Yt(this,rn,this.keydown.bind(this));Yt(this,Ht,this.onEditingAction.bind(this));Yt(this,Vt,this.onPageChanging.bind(this));Yt(this,gt,this.onScaleChanging.bind(this));Yt(this,bt,this.onRotationChanging.bind(this));Yt(this,Dt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Yt(this,Ot,[0,0]);Yt(this,Qt,null);Yt(this,sn,null);Yt(this,on,null);Zt(this,sn,Mt),Zt(this,on,an),Zt(this,It,pn),this._eventBus=En,this._eventBus._on("editingaction",tt(this,Ht)),this._eventBus._on("pagechanging",tt(this,Vt)),this._eventBus._on("scalechanging",tt(this,gt)),this._eventBus._on("rotationchanging",tt(this,bt)),Zt(this,Lt,_n.annotationStorage),Zt(this,wt,_n.filterFactory),Zt(this,zt,mn),this.viewParameters={realScale:o.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Mt=Ln.prototype,an=_n=>{const{activeElement:mn}=document;return mn&&tt(_n,sn).contains(mn)&&_n.hasSomethingToControl()},pn=this.TRANSLATE_SMALL,En=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new $([[["ctrl+a","mac+meta+a"],Mt.selectAll],[["ctrl+z","mac+meta+z"],Mt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Mt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Mt.delete],[["Escape","mac+Escape"],Mt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Mt.translateSelectedEditors,{args:[-pn,0],checker:an}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Mt.translateSelectedEditors,{args:[-En,0],checker:an}],[["ArrowRight","mac+ArrowRight"],Mt.translateSelectedEditors,{args:[pn,0],checker:an}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Mt.translateSelectedEditors,{args:[En,0],checker:an}],[["ArrowUp","mac+ArrowUp"],Mt.translateSelectedEditors,{args:[0,-pn],checker:an}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Mt.translateSelectedEditors,{args:[0,-En],checker:an}],[["ArrowDown","mac+ArrowDown"],Mt.translateSelectedEditors,{args:[0,pn],checker:an}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Mt.translateSelectedEditors,{args:[0,En],checker:an}]]))}destroy(){Wt(this,Gt,or).call(this),Wt(this,Gt,kr).call(this),this._eventBus._off("editingaction",tt(this,Ht)),this._eventBus._off("pagechanging",tt(this,Vt)),this._eventBus._off("scalechanging",tt(this,gt)),this._eventBus._off("rotationchanging",tt(this,bt));for(const Mt of tt(this,St).values())Mt.destroy();tt(this,St).clear(),tt(this,yt).clear(),tt(this,Nt).clear(),Zt(this,et,null),tt(this,Ct).clear(),tt(this,Ut).destroy(),tt(this,It).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",tt(this,zt)?tt(this,wt).addHCMFilter(tt(this,zt).foreground,tt(this,zt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(tt(this,sn)).direction)}editAltText(Mt){var an;(an=tt(this,It))==null||an.editAltText(this,Mt)}onPageChanging({pageNumber:Mt}){Zt(this,Ft,Mt-1)}focusMainContainer(){tt(this,sn).focus()}findParent(Mt,an){for(const pn of tt(this,St).values()){const{x:En,y:_n,width:mn,height:Pt}=pn.div.getBoundingClientRect();if(Mt>=En&&Mt<=En+mn&&an>=_n&&an<=_n+Pt)return pn}return null}disableUserSelect(Mt=!1){tt(this,on).classList.toggle("noUserSelect",Mt)}addShouldRescale(Mt){tt(this,Nt).add(Mt)}removeShouldRescale(Mt){tt(this,Nt).delete(Mt)}onScaleChanging({scale:Mt}){this.commitOrRemove(),this.viewParameters.realScale=Mt*o.PixelsPerInch.PDF_TO_CSS_UNITS;for(const an of tt(this,Nt))an.onScaleChanging()}onRotationChanging({pagesRotation:Mt}){this.commitOrRemove(),this.viewParameters.rotation=Mt}addToAnnotationStorage(Mt){!Mt.isEmpty()&&tt(this,Lt)&&!tt(this,Lt).has(Mt.id)&&tt(this,Lt).setValue(Mt.id,Mt)}blur(){if(!this.hasSelection)return;const{activeElement:Mt}=document;for(const an of tt(this,Ct))if(an.div.contains(Mt)){Zt(this,kt,[an,Mt]),an._focusEventsAllowed=!1;break}}focus(){if(!tt(this,kt))return;const[Mt,an]=tt(this,kt);Zt(this,kt,null),an.addEventListener("focusin",()=>{Mt._focusEventsAllowed=!0},{once:!0}),an.focus()}addEditListeners(){Wt(this,Gt,jr).call(this),Wt(this,Gt,Cr).call(this)}removeEditListeners(){Wt(this,Gt,or).call(this),Wt(this,Gt,Pr).call(this)}copy(Mt){var pn;if(Mt.preventDefault(),(pn=tt(this,et))==null||pn.commitOrRemove(),!this.hasSelection)return;const an=[];for(const En of tt(this,Ct)){const _n=En.serialize(!0);_n&&an.push(_n)}an.length!==0&&Mt.clipboardData.setData("application/pdfjs",JSON.stringify(an))}cut(Mt){this.copy(Mt),this.delete()}paste(Mt){Mt.preventDefault();const{clipboardData:an}=Mt;for(const _n of an.items)for(const mn of tt(this,At))if(mn.isHandlingMimeForPasting(_n.type)){mn.paste(_n,this.currentLayer);return}let pn=an.getData("application/pdfjs");if(!pn)return;try{pn=JSON.parse(pn)}catch(_n){(0,a.warn)(`paste: "${_n.message}".`);return}if(!Array.isArray(pn))return;this.unselectAll();const En=this.currentLayer;try{const _n=[];for(const Rt of pn){const Bt=En.deserialize(Rt);if(!Bt)return;_n.push(Bt)}const mn=()=>{for(const Rt of _n)Wt(this,Gt,Tr).call(this,Rt);Wt(this,Gt,Nr).call(this,_n)},Pt=()=>{for(const Rt of _n)Rt.remove()};this.addCommands({cmd:mn,undo:Pt,mustExec:!0})}catch(_n){(0,a.warn)(`paste: "${_n.message}".`)}}keydown(Mt){var an;(an=this.getActive())!=null&&an.shouldGetKeyboardEvents()||Ln._keyboardManager.exec(this,Mt)}onEditingAction(Mt){["undo","redo","delete","selectAll"].includes(Mt.name)&&this[Mt.name]()}setEditingState(Mt){Mt?(Wt(this,Gt,ls).call(this),Wt(this,Gt,jr).call(this),Wt(this,Gt,Cr).call(this),Wt(this,Gt,Un).call(this,{isEditing:tt(this,jt)!==a.AnnotationEditorType.NONE,isEmpty:Wt(this,Gt,Zn).call(this),hasSomethingToUndo:tt(this,Ut).hasSomethingToUndo(),hasSomethingToRedo:tt(this,Ut).hasSomethingToRedo(),hasSelectedEditor:!1})):(Wt(this,Gt,kr).call(this),Wt(this,Gt,or).call(this),Wt(this,Gt,Pr).call(this),Wt(this,Gt,Un).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Mt){if(!tt(this,At)){Zt(this,At,Mt);for(const an of tt(this,At))Wt(this,Gt,Qn).call(this,an.defaultPropertiesToUpdate)}}getId(){return tt(this,pt).getId()}get currentLayer(){return tt(this,St).get(tt(this,Ft))}getLayer(Mt){return tt(this,St).get(Mt)}get currentPageIndex(){return tt(this,Ft)}addLayer(Mt){tt(this,St).set(Mt.pageIndex,Mt),tt(this,mt)?Mt.enable():Mt.disable()}removeLayer(Mt){tt(this,St).delete(Mt.pageIndex)}updateMode(Mt,an=null){if(tt(this,jt)!==Mt){if(Zt(this,jt,Mt),Mt===a.AnnotationEditorType.NONE){this.setEditingState(!1),Wt(this,Gt,us).call(this);return}this.setEditingState(!0),Wt(this,Gt,cs).call(this),this.unselectAll();for(const pn of tt(this,St).values())pn.updateMode(Mt);if(an){for(const pn of tt(this,yt).values())if(pn.annotationElementId===an){this.setSelected(pn),pn.enterInEditMode();break}}}}updateToolbar(Mt){Mt!==tt(this,jt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Mt})}updateParams(Mt,an){if(tt(this,At)){if(Mt===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Mt);return}for(const pn of tt(this,Ct))pn.updateParams(Mt,an);for(const pn of tt(this,At))pn.updateDefaultParams(Mt,an)}}enableWaiting(Mt=!1){if(tt(this,Et)!==Mt){Zt(this,Et,Mt);for(const an of tt(this,St).values())Mt?an.disableClick():an.enableClick(),an.div.classList.toggle("waiting",Mt)}}getEditors(Mt){const an=[];for(const pn of tt(this,yt).values())pn.pageIndex===Mt&&an.push(pn);return an}getEditor(Mt){return tt(this,yt).get(Mt)}addEditor(Mt){tt(this,yt).set(Mt.id,Mt)}removeEditor(Mt){var an;tt(this,yt).delete(Mt.id),this.unselect(Mt),(!Mt.annotationElementId||!tt(this,_t).has(Mt.annotationElementId))&&((an=tt(this,Lt))==null||an.remove(Mt.id))}addDeletedAnnotationElement(Mt){tt(this,_t).add(Mt.annotationElementId),Mt.deleted=!0}isDeletedAnnotationElement(Mt){return tt(this,_t).has(Mt)}removeDeletedAnnotationElement(Mt){tt(this,_t).delete(Mt.annotationElementId),Mt.deleted=!1}setActiveEditor(Mt){tt(this,et)!==Mt&&(Zt(this,et,Mt),Mt&&Wt(this,Gt,Qn).call(this,Mt.propertiesToUpdate))}toggleSelected(Mt){if(tt(this,Ct).has(Mt)){tt(this,Ct).delete(Mt),Mt.unselect(),Wt(this,Gt,Un).call(this,{hasSelectedEditor:this.hasSelection});return}tt(this,Ct).add(Mt),Mt.select(),Wt(this,Gt,Qn).call(this,Mt.propertiesToUpdate),Wt(this,Gt,Un).call(this,{hasSelectedEditor:!0})}setSelected(Mt){for(const an of tt(this,Ct))an!==Mt&&an.unselect();tt(this,Ct).clear(),tt(this,Ct).add(Mt),Mt.select(),Wt(this,Gt,Qn).call(this,Mt.propertiesToUpdate),Wt(this,Gt,Un).call(this,{hasSelectedEditor:!0})}isSelected(Mt){return tt(this,Ct).has(Mt)}unselect(Mt){Mt.unselect(),tt(this,Ct).delete(Mt),Wt(this,Gt,Un).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return tt(this,Ct).size!==0}undo(){tt(this,Ut).undo(),Wt(this,Gt,Un).call(this,{hasSomethingToUndo:tt(this,Ut).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Wt(this,Gt,Zn).call(this)})}redo(){tt(this,Ut).redo(),Wt(this,Gt,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:tt(this,Ut).hasSomethingToRedo(),isEmpty:Wt(this,Gt,Zn).call(this)})}addCommands(Mt){tt(this,Ut).add(Mt),Wt(this,Gt,Un).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Wt(this,Gt,Zn).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Mt=[...tt(this,Ct)],an=()=>{for(const En of Mt)En.remove()},pn=()=>{for(const En of Mt)Wt(this,Gt,Tr).call(this,En)};this.addCommands({cmd:an,undo:pn,mustExec:!0})}commitOrRemove(){var Mt;(Mt=tt(this,et))==null||Mt.commitOrRemove()}hasSomethingToControl(){return tt(this,et)||this.hasSelection}selectAll(){for(const Mt of tt(this,Ct))Mt.commit();Wt(this,Gt,Nr).call(this,tt(this,yt).values())}unselectAll(){if(tt(this,et)){tt(this,et).commitOrRemove();return}if(this.hasSelection){for(const Mt of tt(this,Ct))Mt.unselect();tt(this,Ct).clear(),Wt(this,Gt,Un).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Mt,an,pn=!1){if(pn||this.commitOrRemove(),!this.hasSelection)return;tt(this,Ot)[0]+=Mt,tt(this,Ot)[1]+=an;const[En,_n]=tt(this,Ot),mn=[...tt(this,Ct)],Pt=1e3;tt(this,Qt)&&clearTimeout(tt(this,Qt)),Zt(this,Qt,setTimeout(()=>{Zt(this,Qt,null),tt(this,Ot)[0]=tt(this,Ot)[1]=0,this.addCommands({cmd:()=>{for(const Rt of mn)tt(this,yt).has(Rt.id)&&Rt.translateInPage(En,_n)},undo:()=>{for(const Rt of mn)tt(this,yt).has(Rt.id)&&Rt.translateInPage(-En,-_n)},mustExec:!1})},Pt));for(const Rt of mn)Rt.translateInPage(Mt,an)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Zt(this,vt,new Map);for(const Mt of tt(this,Ct))tt(this,vt).set(Mt,{savedX:Mt.x,savedY:Mt.y,savedPageIndex:Mt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!tt(this,vt))return!1;this.disableUserSelect(!1);const Mt=tt(this,vt);Zt(this,vt,null);let an=!1;for(const[{x:En,y:_n,pageIndex:mn},Pt]of Mt)Pt.newX=En,Pt.newY=_n,Pt.newPageIndex=mn,an||(an=En!==Pt.savedX||_n!==Pt.savedY||mn!==Pt.savedPageIndex);if(!an)return!1;const pn=(En,_n,mn,Pt)=>{if(tt(this,yt).has(En.id)){const Rt=tt(this,St).get(Pt);Rt?En._setParentAndPosition(Rt,_n,mn):(En.pageIndex=Pt,En.x=_n,En.y=mn)}};return this.addCommands({cmd:()=>{for(const[En,{newX:_n,newY:mn,newPageIndex:Pt}]of Mt)pn(En,_n,mn,Pt)},undo:()=>{for(const[En,{savedX:_n,savedY:mn,savedPageIndex:Pt}]of Mt)pn(En,_n,mn,Pt)},mustExec:!0}),!0}dragSelectedEditors(Mt,an){if(tt(this,vt))for(const pn of tt(this,vt).keys())pn.drag(Mt,an)}rebuild(Mt){if(Mt.parent===null){const an=this.getLayer(Mt.pageIndex);an?(an.changeParent(Mt),an.addOrRebuild(Mt)):(this.addEditor(Mt),this.addToAnnotationStorage(Mt),Mt.rebuild())}else Mt.parent.addOrRebuild(Mt)}isActive(Mt){return tt(this,et)===Mt}getActive(){return tt(this,et)}getMode(){return tt(this,jt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new h)}};et=new WeakMap,yt=new WeakMap,St=new WeakMap,It=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,Ft=new WeakMap,_t=new WeakMap,vt=new WeakMap,At=new WeakMap,Nt=new WeakMap,wt=new WeakMap,pt=new WeakMap,mt=new WeakMap,Et=new WeakMap,kt=new WeakMap,jt=new WeakMap,Ct=new WeakMap,zt=new WeakMap,Xt=new WeakMap,Tt=new WeakMap,$t=new WeakMap,Kt=new WeakMap,qt=new WeakMap,rn=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Qt=new WeakMap,sn=new WeakMap,on=new WeakMap,Gt=new WeakSet,ls=function(){window.addEventListener("focus",tt(this,Tt)),window.addEventListener("blur",tt(this,Xt))},kr=function(){window.removeEventListener("focus",tt(this,Tt)),window.removeEventListener("blur",tt(this,Xt))},jr=function(){window.addEventListener("keydown",tt(this,rn),{capture:!0})},or=function(){window.removeEventListener("keydown",tt(this,rn),{capture:!0})},Cr=function(){document.addEventListener("copy",tt(this,$t)),document.addEventListener("cut",tt(this,Kt)),document.addEventListener("paste",tt(this,qt))},Pr=function(){document.removeEventListener("copy",tt(this,$t)),document.removeEventListener("cut",tt(this,Kt)),document.removeEventListener("paste",tt(this,qt))},Un=function(Mt){Object.entries(Mt).some(([pn,En])=>tt(this,Dt)[pn]!==En)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(tt(this,Dt),Mt)})},Qn=function(Mt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Mt})},cs=function(){if(!tt(this,mt)){Zt(this,mt,!0);for(const Mt of tt(this,St).values())Mt.enable()}},us=function(){if(this.unselectAll(),tt(this,mt)){Zt(this,mt,!1);for(const Mt of tt(this,St).values())Mt.disable()}},Tr=function(Mt){const an=tt(this,St).get(Mt.pageIndex);an?an.addOrRebuild(Mt):this.addEditor(Mt)},Zn=function(){if(tt(this,yt).size===0)return!0;if(tt(this,yt).size===1)for(const Mt of tt(this,yt).values())return Mt.isEmpty();return!1},Nr=function(Mt){tt(this,Ct).clear();for(const an of Mt)an.isEmpty()||(tt(this,Ct).add(an),an.select());Wt(this,Gt,Un).call(this,{hasSelectedEditor:!0})},In(Ln,"TRANSLATE_SMALL",1),In(Ln,"TRANSLATE_BIG",10);let ut=Ln;s.AnnotationEditorUIManager=ut},(e,s,i)=>{var Ft,_t,vt,At,Nt,wt,pt,mt,Et,kt,jt,Ct,Xn,Kn,Lr,lr,cr,er,tr;Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=rt,s.getColorValues=yt,s.getCurrentTransform=St,s.getCurrentTransformInverse=It,s.getFilenameFromUrl=b,s.getPdfFilenameFromUrl=_,s.getRGB=et,s.getXfaPageViewport=xt,s.isDataScheme=ft,s.isPdfFile=at,s.isValidFetchUrl=nt,s.loadScript=ht,s.noContextMenu=st,s.setLayerDimensions=Lt;var a=i(7),o=i(1);const c="http://www.w3.org/2000/svg",Ut=class Ut{};In(Ut,"CSS",96),In(Ut,"PDF",72),In(Ut,"PDF_TO_CSS_UNITS",Ut.CSS/Ut.PDF);let d=Ut;s.PixelsPerInch=d;class j extends a.BaseFilterFactory{constructor({docId:gt,ownerDocument:bt=globalThis.document}={}){super();Yt(this,Ct);Yt(this,Ft);Yt(this,_t);Yt(this,vt);Yt(this,At);Yt(this,Nt);Yt(this,wt);Yt(this,pt);Yt(this,mt);Yt(this,Et);Yt(this,kt);Yt(this,jt,0);Zt(this,vt,gt),Zt(this,At,bt)}addFilter(gt){if(!gt)return"none";let bt=tt(this,Ct,Xn).get(gt);if(bt)return bt;let Dt,Ot,Qt,sn;if(gt.length===1){const dn=gt[0],Rn=new Array(256);for(let An=0;An<256;An++)Rn[An]=dn[An]/255;sn=Dt=Ot=Qt=Rn.join(",")}else{const[dn,Rn,An]=gt,Nn=new Array(256),xn=new Array(256),wn=new Array(256);for(let Cn=0;Cn<256;Cn++)Nn[Cn]=dn[Cn]/255,xn[Cn]=Rn[Cn]/255,wn[Cn]=An[Cn]/255;Dt=Nn.join(","),Ot=xn.join(","),Qt=wn.join(","),sn=`${Dt}${Ot}${Qt}`}if(bt=tt(this,Ct,Xn).get(sn),bt)return tt(this,Ct,Xn).set(gt,bt),bt;const on=`g_${tt(this,vt)}_transfer_map_${Jn(this,jt)._++}`,Gt=`url(#${on})`;tt(this,Ct,Xn).set(gt,Gt),tt(this,Ct,Xn).set(sn,Gt);const hn=Wt(this,Ct,lr).call(this,on);return Wt(this,Ct,er).call(this,Dt,Ot,Qt,hn),Gt}addHCMFilter(gt,bt){var Rn;const Dt=`${gt}-${bt}`;if(tt(this,wt)===Dt)return tt(this,pt);if(Zt(this,wt,Dt),Zt(this,pt,"none"),(Rn=tt(this,Nt))==null||Rn.remove(),!gt||!bt)return tt(this,pt);const Ot=Wt(this,Ct,tr).call(this,gt);gt=o.Util.makeHexColor(...Ot);const Qt=Wt(this,Ct,tr).call(this,bt);if(bt=o.Util.makeHexColor(...Qt),tt(this,Ct,Kn).style.color="",gt==="#000000"&&bt==="#ffffff"||gt===bt)return tt(this,pt);const sn=new Array(256);for(let An=0;An<=255;An++){const Nn=An/255;sn[An]=Nn<=.03928?Nn/12.92:((Nn+.055)/1.055)**2.4}const on=sn.join(","),Gt=`g_${tt(this,vt)}_hcm_filter`,hn=Zt(this,mt,Wt(this,Ct,lr).call(this,Gt));Wt(this,Ct,er).call(this,on,on,on,hn),Wt(this,Ct,Lr).call(this,hn);const dn=(An,Nn)=>{const xn=Ot[An]/255,wn=Qt[An]/255,Cn=new Array(Nn+1);for(let Mn=0;Mn<=Nn;Mn++)Cn[Mn]=xn+Mn/Nn*(wn-xn);return Cn.join(",")};return Wt(this,Ct,er).call(this,dn(0,5),dn(1,5),dn(2,5),hn),Zt(this,pt,`url(#${Gt})`),tt(this,pt)}addHighlightHCMFilter(gt,bt,Dt,Ot){var wn;const Qt=`${gt}-${bt}-${Dt}-${Ot}`;if(tt(this,Et)===Qt)return tt(this,kt);if(Zt(this,Et,Qt),Zt(this,kt,"none"),(wn=tt(this,mt))==null||wn.remove(),!gt||!bt)return tt(this,kt);const[sn,on]=[gt,bt].map(Wt(this,Ct,tr).bind(this));let Gt=Math.round(.2126*sn[0]+.7152*sn[1]+.0722*sn[2]),hn=Math.round(.2126*on[0]+.7152*on[1]+.0722*on[2]),[dn,Rn]=[Dt,Ot].map(Wt(this,Ct,tr).bind(this));hn<Gt&&([Gt,hn,dn,Rn]=[hn,Gt,Rn,dn]),tt(this,Ct,Kn).style.color="";const An=(Cn,Mn,cn)=>{const Jt=new Array(256),en=(hn-Gt)/cn,gn=Cn/255,Ln=(Mn-Cn)/(255*cn);let Tn=0;for(let Mt=0;Mt<=cn;Mt++){const an=Math.round(Gt+Mt*en),pn=gn+Mt*Ln;for(let En=Tn;En<=an;En++)Jt[En]=pn;Tn=an+1}for(let Mt=Tn;Mt<256;Mt++)Jt[Mt]=Jt[Tn-1];return Jt.join(",")},Nn=`g_${tt(this,vt)}_hcm_highlight_filter`,xn=Zt(this,mt,Wt(this,Ct,lr).call(this,Nn));return Wt(this,Ct,Lr).call(this,xn),Wt(this,Ct,er).call(this,An(dn[0],Rn[0],5),An(dn[1],Rn[1],5),An(dn[2],Rn[2],5),xn),Zt(this,kt,`url(#${Nn})`),tt(this,kt)}destroy(gt=!1){gt&&(tt(this,pt)||tt(this,kt))||(tt(this,_t)&&(tt(this,_t).parentNode.parentNode.remove(),Zt(this,_t,null)),tt(this,Ft)&&(tt(this,Ft).clear(),Zt(this,Ft,null)),Zt(this,jt,0))}}Ft=new WeakMap,_t=new WeakMap,vt=new WeakMap,At=new WeakMap,Nt=new WeakMap,wt=new WeakMap,pt=new WeakMap,mt=new WeakMap,Et=new WeakMap,kt=new WeakMap,jt=new WeakMap,Ct=new WeakSet,Xn=function(){return tt(this,Ft)||Zt(this,Ft,new Map)},Kn=function(){if(!tt(this,_t)){const gt=tt(this,At).createElement("div"),{style:bt}=gt;bt.visibility="hidden",bt.contain="strict",bt.width=bt.height=0,bt.position="absolute",bt.top=bt.left=0,bt.zIndex=-1;const Dt=tt(this,At).createElementNS(c,"svg");Dt.setAttribute("width",0),Dt.setAttribute("height",0),Zt(this,_t,tt(this,At).createElementNS(c,"defs")),gt.append(Dt),Dt.append(tt(this,_t)),tt(this,At).body.append(gt)}return tt(this,_t)},Lr=function(gt){const bt=tt(this,At).createElementNS(c,"feColorMatrix");bt.setAttribute("type","matrix"),bt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),gt.append(bt)},lr=function(gt){const bt=tt(this,At).createElementNS(c,"filter");return bt.setAttribute("color-interpolation-filters","sRGB"),bt.setAttribute("id",gt),tt(this,Ct,Kn).append(bt),bt},cr=function(gt,bt,Dt){const Ot=tt(this,At).createElementNS(c,bt);Ot.setAttribute("type","discrete"),Ot.setAttribute("tableValues",Dt),gt.append(Ot)},er=function(gt,bt,Dt,Ot){const Qt=tt(this,At).createElementNS(c,"feComponentTransfer");Ot.append(Qt),Wt(this,Ct,cr).call(this,Qt,"feFuncR",gt),Wt(this,Ct,cr).call(this,Qt,"feFuncG",bt),Wt(this,Ct,cr).call(this,Qt,"feFuncB",Dt)},tr=function(gt){return tt(this,Ct,Kn).style.color=gt,et(getComputedStyle(tt(this,Ct,Kn)).getPropertyValue("color"))},s.DOMFilterFactory=j;class h extends a.BaseCanvasFactory{constructor({ownerDocument:Vt=globalThis.document}={}){super(),this._document=Vt}_createCanvas(Vt,gt){const bt=this._document.createElement("canvas");return bt.width=Vt,bt.height=gt,bt}}s.DOMCanvasFactory=h;async function g(Ht,Vt=!1){if(nt(Ht,document.baseURI)){const gt=await fetch(Ht);if(!gt.ok)throw new Error(gt.statusText);return Vt?new Uint8Array(await gt.arrayBuffer()):(0,o.stringToBytes)(await gt.text())}return new Promise((gt,bt)=>{const Dt=new XMLHttpRequest;Dt.open("GET",Ht,!0),Vt&&(Dt.responseType="arraybuffer"),Dt.onreadystatechange=()=>{if(Dt.readyState===XMLHttpRequest.DONE){if(Dt.status===200||Dt.status===0){let Ot;if(Vt&&Dt.response?Ot=new Uint8Array(Dt.response):!Vt&&Dt.responseText&&(Ot=(0,o.stringToBytes)(Dt.responseText)),Ot){gt(Ot);return}}bt(new Error(Dt.statusText))}},Dt.send(null)})}class $ extends a.BaseCMapReaderFactory{_fetchData(Vt,gt){return g(Vt,this.isCompressed).then(bt=>({cMapData:bt,compressionType:gt}))}}s.DOMCMapReaderFactory=$;class ct extends a.BaseStandardFontDataFactory{_fetchData(Vt){return g(Vt,!0)}}s.DOMStandardFontDataFactory=ct;class ut extends a.BaseSVGFactory{_createSVG(Vt){return document.createElementNS(c,Vt)}}s.DOMSVGFactory=ut;class lt{constructor({viewBox:Vt,scale:gt,rotation:bt,offsetX:Dt=0,offsetY:Ot=0,dontFlip:Qt=!1}){this.viewBox=Vt,this.scale=gt,this.rotation=bt,this.offsetX=Dt,this.offsetY=Ot;const sn=(Vt[2]+Vt[0])/2,on=(Vt[3]+Vt[1])/2;let Gt,hn,dn,Rn;switch(bt%=360,bt<0&&(bt+=360),bt){case 180:Gt=-1,hn=0,dn=0,Rn=1;break;case 90:Gt=0,hn=1,dn=1,Rn=0;break;case 270:Gt=0,hn=-1,dn=-1,Rn=0;break;case 0:Gt=1,hn=0,dn=0,Rn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Qt&&(dn=-dn,Rn=-Rn);let An,Nn,xn,wn;Gt===0?(An=Math.abs(on-Vt[1])*gt+Dt,Nn=Math.abs(sn-Vt[0])*gt+Ot,xn=(Vt[3]-Vt[1])*gt,wn=(Vt[2]-Vt[0])*gt):(An=Math.abs(sn-Vt[0])*gt+Dt,Nn=Math.abs(on-Vt[1])*gt+Ot,xn=(Vt[2]-Vt[0])*gt,wn=(Vt[3]-Vt[1])*gt),this.transform=[Gt*gt,hn*gt,dn*gt,Rn*gt,An-Gt*gt*sn-dn*gt*on,Nn-hn*gt*sn-Rn*gt*on],this.width=xn,this.height=wn}get rawDims(){const{viewBox:Vt}=this;return(0,o.shadow)(this,"rawDims",{pageWidth:Vt[2]-Vt[0],pageHeight:Vt[3]-Vt[1],pageX:Vt[0],pageY:Vt[1]})}clone({scale:Vt=this.scale,rotation:gt=this.rotation,offsetX:bt=this.offsetX,offsetY:Dt=this.offsetY,dontFlip:Ot=!1}={}){return new lt({viewBox:this.viewBox.slice(),scale:Vt,rotation:gt,offsetX:bt,offsetY:Dt,dontFlip:Ot})}convertToViewportPoint(Vt,gt){return o.Util.applyTransform([Vt,gt],this.transform)}convertToViewportRectangle(Vt){const gt=o.Util.applyTransform([Vt[0],Vt[1]],this.transform),bt=o.Util.applyTransform([Vt[2],Vt[3]],this.transform);return[gt[0],gt[1],bt[0],bt[1]]}convertToPdfPoint(Vt,gt){return o.Util.applyInverseTransform([Vt,gt],this.transform)}}s.PageViewport=lt;class dt extends o.BaseException{constructor(Vt,gt=0){super(Vt,"RenderingCancelledException"),this.extraDelay=gt}}s.RenderingCancelledException=dt;function ft(Ht){const Vt=Ht.length;let gt=0;for(;gt<Vt&&Ht[gt].trim()==="";)gt++;return Ht.substring(gt,gt+5).toLowerCase()==="data:"}function at(Ht){return typeof Ht=="string"&&/\.pdf$/i.test(Ht)}function b(Ht,Vt=!1){return Vt||([Ht]=Ht.split(/[#?]/,1)),Ht.substring(Ht.lastIndexOf("/")+1)}function _(Ht,Vt="document.pdf"){if(typeof Ht!="string")return Vt;if(ft(Ht))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Vt;const gt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,bt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Dt=gt.exec(Ht);let Ot=bt.exec(Dt[1])||bt.exec(Dt[2])||bt.exec(Dt[3]);if(Ot&&(Ot=Ot[0],Ot.includes("%")))try{Ot=bt.exec(decodeURIComponent(Ot))[0]}catch{}return Ot||Vt}class it{constructor(){In(this,"started",Object.create(null));In(this,"times",[])}time(Vt){Vt in this.started&&(0,o.warn)(`Timer is already running for ${Vt}`),this.started[Vt]=Date.now()}timeEnd(Vt){Vt in this.started||(0,o.warn)(`Timer has not been started for ${Vt}`),this.times.push({name:Vt,start:this.started[Vt],end:Date.now()}),delete this.started[Vt]}toString(){const Vt=[];let gt=0;for(const{name:bt}of this.times)gt=Math.max(bt.length,gt);for(const{name:bt,start:Dt,end:Ot}of this.times)Vt.push(`${bt.padEnd(gt)} ${Ot-Dt}ms
`);return Vt.join("")}}s.StatTimer=it;function nt(Ht,Vt){try{const{protocol:gt}=Vt?new URL(Ht,Vt):new URL(Ht);return gt==="http:"||gt==="https:"}catch{return!1}}function st(Ht){Ht.preventDefault()}function ht(Ht,Vt=!1){return new Promise((gt,bt)=>{const Dt=document.createElement("script");Dt.src=Ht,Dt.onload=function(Ot){Vt&&Dt.remove(),gt(Ot)},Dt.onerror=function(){bt(new Error(`Cannot load script at: ${Dt.src}`))},(document.head||document.documentElement).append(Dt)})}function rt(Ht){console.log("Deprecated API usage: "+Ht)}let _e;class ot{static toDateObject(Vt){if(!Vt||typeof Vt!="string")return null;_e||(_e=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const gt=_e.exec(Vt);if(!gt)return null;const bt=parseInt(gt[1],10);let Dt=parseInt(gt[2],10);Dt=Dt>=1&&Dt<=12?Dt-1:0;let Ot=parseInt(gt[3],10);Ot=Ot>=1&&Ot<=31?Ot:1;let Qt=parseInt(gt[4],10);Qt=Qt>=0&&Qt<=23?Qt:0;let sn=parseInt(gt[5],10);sn=sn>=0&&sn<=59?sn:0;let on=parseInt(gt[6],10);on=on>=0&&on<=59?on:0;const Gt=gt[7]||"Z";let hn=parseInt(gt[8],10);hn=hn>=0&&hn<=23?hn:0;let dn=parseInt(gt[9],10)||0;return dn=dn>=0&&dn<=59?dn:0,Gt==="-"?(Qt+=hn,sn+=dn):Gt==="+"&&(Qt-=hn,sn-=dn),new Date(Date.UTC(bt,Dt,Ot,Qt,sn,on))}}s.PDFDateString=ot;function xt(Ht,{scale:Vt=1,rotation:gt=0}){const{width:bt,height:Dt}=Ht.attributes.style,Ot=[0,0,parseInt(bt),parseInt(Dt)];return new lt({viewBox:Ot,scale:Vt,rotation:gt})}function et(Ht){if(Ht.startsWith("#")){const Vt=parseInt(Ht.slice(1),16);return[(Vt&16711680)>>16,(Vt&65280)>>8,Vt&255]}return Ht.startsWith("rgb(")?Ht.slice(4,-1).split(",").map(Vt=>parseInt(Vt)):Ht.startsWith("rgba(")?Ht.slice(5,-1).split(",").map(Vt=>parseInt(Vt)).slice(0,3):((0,o.warn)(`Not a valid color format: "${Ht}"`),[0,0,0])}function yt(Ht){const Vt=document.createElement("span");Vt.style.visibility="hidden",document.body.append(Vt);for(const gt of Ht.keys()){Vt.style.color=gt;const bt=window.getComputedStyle(Vt).color;Ht.set(gt,et(bt))}Vt.remove()}function St(Ht){const{a:Vt,b:gt,c:bt,d:Dt,e:Ot,f:Qt}=Ht.getTransform();return[Vt,gt,bt,Dt,Ot,Qt]}function It(Ht){const{a:Vt,b:gt,c:bt,d:Dt,e:Ot,f:Qt}=Ht.getTransform().invertSelf();return[Vt,gt,bt,Dt,Ot,Qt]}function Lt(Ht,Vt,gt=!1,bt=!0){if(Vt instanceof lt){const{pageWidth:Dt,pageHeight:Ot}=Vt.rawDims,{style:Qt}=Ht,sn=o.FeatureTest.isCSSRoundSupported,on=`var(--scale-factor) * ${Dt}px`,Gt=`var(--scale-factor) * ${Ot}px`,hn=sn?`round(${on}, 1px)`:`calc(${on})`,dn=sn?`round(${Gt}, 1px)`:`calc(${Gt})`;!gt||Vt.rotation%180===0?(Qt.width=hn,Qt.height=dn):(Qt.width=dn,Qt.height=hn)}bt&&Ht.setAttribute("data-main-rotation",Vt.rotation)}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var a=i(1);class o{constructor(){this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter($){return"none"}addHCMFilter($,ct){return"none"}addHighlightHCMFilter($,ct,ut,lt){return"none"}destroy($=!1){}}s.BaseFilterFactory=o;class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create($,ct){if($<=0||ct<=0)throw new Error("Invalid canvas size");const ut=this._createCanvas($,ct);return{canvas:ut,context:ut.getContext("2d")}}reset($,ct,ut){if(!$.canvas)throw new Error("Canvas is not specified");if(ct<=0||ut<=0)throw new Error("Invalid canvas size");$.canvas.width=ct,$.canvas.height=ut}destroy($){if(!$.canvas)throw new Error("Canvas is not specified");$.canvas.width=0,$.canvas.height=0,$.canvas=null,$.context=null}_createCanvas($,ct){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=c;class d{constructor({baseUrl:$=null,isCompressed:ct=!0}){this.constructor===d&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=$,this.isCompressed=ct}async fetch({name:$}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!$)throw new Error("CMap name must be specified.");const ct=this.baseUrl+$+(this.isCompressed?".bcmap":""),ut=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(ct,ut).catch(lt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ct}`)})}_fetchData($,ct){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=d;class j{constructor({baseUrl:$=null}){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=$}async fetch({filename:$}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!$)throw new Error("Font filename must be specified.");const ct=`${this.baseUrl}${$}`;return this._fetchData(ct).catch(ut=>{throw new Error(`Unable to load font data at: ${ct}`)})}_fetchData($){(0,a.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=j;class h{constructor(){this.constructor===h&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create($,ct,ut=!1){if($<=0||ct<=0)throw new Error("Invalid SVG dimensions");const lt=this._createSVG("svg:svg");return lt.setAttribute("version","1.1"),ut||(lt.setAttribute("width",`${$}px`),lt.setAttribute("height",`${ct}px`)),lt.setAttribute("preserveAspectRatio","none"),lt.setAttribute("viewBox",`0 0 ${$} ${ct}`),lt}createElement($){if(typeof $!="string")throw new Error("Invalid SVG element type");return this._createSVG($)}_createSVG($){(0,a.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=h},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var a=i(1);const o=3285377520,c=4294901760,d=65535;class j{constructor(g){this.h1=g?g&4294967295:o,this.h2=g?g&4294967295:o}update(g){let $,ct;if(typeof g=="string"){$=new Uint8Array(g.length*2),ct=0;for(let rt=0,_e=g.length;rt<_e;rt++){const ot=g.charCodeAt(rt);ot<=255?$[ct++]=ot:($[ct++]=ot>>>8,$[ct++]=ot&255)}}else if((0,a.isArrayBuffer)(g))$=g.slice(),ct=$.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const ut=ct>>2,lt=ct-ut*4,dt=new Uint32Array($.buffer,0,ut);let ft=0,at=0,b=this.h1,_=this.h2;const it=3432918353,nt=461845907,st=it&d,ht=nt&d;for(let rt=0;rt<ut;rt++)rt&1?(ft=dt[rt],ft=ft*it&c|ft*st&d,ft=ft<<15|ft>>>17,ft=ft*nt&c|ft*ht&d,b^=ft,b=b<<13|b>>>19,b=b*5+3864292196):(at=dt[rt],at=at*it&c|at*st&d,at=at<<15|at>>>17,at=at*nt&c|at*ht&d,_^=at,_=_<<13|_>>>19,_=_*5+3864292196);switch(ft=0,lt){case 3:ft^=$[ut*4+2]<<16;case 2:ft^=$[ut*4+1]<<8;case 1:ft^=$[ut*4],ft=ft*it&c|ft*st&d,ft=ft<<15|ft>>>17,ft=ft*nt&c|ft*ht&d,ut&1?b^=ft:_^=ft}this.h1=b,this.h2=_}hexdigest(){let g=this.h1,$=this.h2;return g^=$>>>1,g=g*3981806797&c|g*36045&d,$=$*4283543511&c|(($<<16|g>>>16)*2950163797&c)>>>16,g^=$>>>1,g=g*444984403&c|g*60499&d,$=$*3301882366&c|(($<<16|g>>>16)*3120437893&c)>>>16,g^=$>>>1,(g>>>0).toString(16).padStart(8,"0")+($>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=j},(e,s,i)=>{var d;Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var a=i(1);class o{constructor({ownerDocument:h=globalThis.document,styleElement:g=null}){Yt(this,d,new Set);this._document=h,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(h){this.nativeFontFaces.add(h),this._document.fonts.add(h)}removeNativeFontFace(h){this.nativeFontFaces.delete(h),this._document.fonts.delete(h)}insertRule(h){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const g=this.styleElement.sheet;g.insertRule(h,g.cssRules.length)}clear(){for(const h of this.nativeFontFaces)this._document.fonts.delete(h);this.nativeFontFaces.clear(),tt(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(h){if(!(!h||tt(this,d).has(h.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:g,src:$,style:ct}=h,ut=new FontFace(g,$,ct);this.addNativeFontFace(ut);try{await ut.load(),tt(this,d).add(g)}catch{(0,a.warn)(`Cannot load system font: ${h.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(ut)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(h){if(h.attached||h.missingFile&&!h.systemFontInfo)return;if(h.attached=!0,h.systemFontInfo){await this.loadSystemFont(h.systemFontInfo);return}if(this.isFontLoadingAPISupported){const $=h.createNativeFontFace();if($){this.addNativeFontFace($);try{await $.loaded}catch(ct){throw(0,a.warn)(`Failed to load font '${$.family}': '${ct}'.`),h.disableFontFace=!0,ct}}return}const g=h.createFontFaceRule();if(g){if(this.insertRule(g),this.isSyncFontLoadingSupported)return;await new Promise($=>{const ct=this._queueLoadingCallback($);this._prepareFontLoadEvent(h,ct)})}}get isFontLoadingAPISupported(){var g;const h=!!((g=this._document)!=null&&g.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",h)}get isSyncFontLoadingSupported(){let h=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(h=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",h)}_queueLoadingCallback(h){function g(){for((0,a.assert)(!ct.done,"completeRequest() cannot be called twice."),ct.done=!0;$.length>0&&$[0].done;){const ut=$.shift();setTimeout(ut.callback,0)}}const{loadingRequests:$}=this,ct={done:!1,complete:g,callback:h};return $.push(ct),ct}get _loadTestFont(){const h=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",h)}_prepareFontLoadEvent(h,g){function $(et,yt){return et.charCodeAt(yt)<<24|et.charCodeAt(yt+1)<<16|et.charCodeAt(yt+2)<<8|et.charCodeAt(yt+3)&255}function ct(et,yt,St,It){const Lt=et.substring(0,yt),Ut=et.substring(yt+St);return Lt+It+Ut}let ut,lt;const dt=this._document.createElement("canvas");dt.width=1,dt.height=1;const ft=dt.getContext("2d");let at=0;function b(et,yt){if(++at>30){(0,a.warn)("Load test font never loaded."),yt();return}if(ft.font="30px "+et,ft.fillText(".",0,20),ft.getImageData(0,0,1,1).data[3]>0){yt();return}setTimeout(b.bind(null,et,yt))}const _=`lt${Date.now()}${this.loadTestFontId++}`;let it=this._loadTestFont;it=ct(it,976,_.length,_);const st=16,ht=1482184792;let rt=$(it,st);for(ut=0,lt=_.length-3;ut<lt;ut+=4)rt=rt-ht+$(_,ut)|0;ut<_.length&&(rt=rt-ht+$(_+"XXX",ut)|0),it=ct(it,st,4,(0,a.string32)(rt));const _e=`url(data:font/opentype;base64,${btoa(it)});`,ot=`@font-face {font-family:"${_}";src:${_e}}`;this.insertRule(ot);const xt=this._document.createElement("div");xt.style.visibility="hidden",xt.style.width=xt.style.height="10px",xt.style.position="absolute",xt.style.top=xt.style.left="0px";for(const et of[h.loadedName,_]){const yt=this._document.createElement("span");yt.textContent="Hi",yt.style.fontFamily=et,xt.append(yt)}this._document.body.append(xt),b(_,()=>{xt.remove(),g.complete()})}}d=new WeakMap,s.FontLoader=o;class c{constructor(h,{isEvalSupported:g=!0,disableFontFace:$=!1,ignoreErrors:ct=!1,inspectFont:ut=null}){this.compiledGlyphs=Object.create(null);for(const lt in h)this[lt]=h[lt];this.isEvalSupported=g!==!1,this.disableFontFace=$===!0,this.ignoreErrors=ct===!0,this._inspectFont=ut}createNativeFontFace(){var g;if(!this.data||this.disableFontFace)return null;let h;if(!this.cssFontInfo)h=new FontFace(this.loadedName,this.data,{});else{const $={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($.style=`oblique ${this.cssFontInfo.italicAngle}deg`),h=new FontFace(this.cssFontInfo.fontFamily,this.data,$)}return(g=this._inspectFont)==null||g.call(this,this),h}createFontFaceRule(){var ct;if(!this.data||this.disableFontFace)return null;const h=(0,a.bytesToString)(this.data),g=`url(data:${this.mimetype};base64,${btoa(h)});`;let $;if(!this.cssFontInfo)$=`@font-face {font-family:"${this.loadedName}";src:${g}}`;else{let ut=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(ut+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${ut}src:${g}}`}return(ct=this._inspectFont)==null||ct.call(this,this,g),$}getPathGenerator(h,g){if(this.compiledGlyphs[g]!==void 0)return this.compiledGlyphs[g];let $;try{$=h.get(this.loadedName+"_path_"+g)}catch(ct){if(!this.ignoreErrors)throw ct;return(0,a.warn)(`getPathGenerator - ignoring character: "${ct}".`),this.compiledGlyphs[g]=function(ut,lt){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const ct=[];for(const ut of $){const lt=ut.args!==void 0?ut.args.join(","):"";ct.push("c.",ut.cmd,"(",lt,`);
`)}return this.compiledGlyphs[g]=new Function("c","size",ct.join(""))}return this.compiledGlyphs[g]=function(ct,ut){for(const lt of $)lt.cmd==="scale"&&(lt.args=[ut,-ut]),ct[lt.cmd].apply(ct,lt.args)}}}s.FontFaceObject=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var a=i(7);i(1);const o=function(g){return new Promise(($,ct)=>{require$$5.readFile(g,(lt,dt)=>{if(lt||!dt){ct(new Error(lt));return}$(new Uint8Array(dt))})})};class c extends a.BaseFilterFactory{}s.NodeFilterFactory=c;class d extends a.BaseCanvasFactory{_createCanvas($,ct){return require$$5.createCanvas($,ct)}}s.NodeCanvasFactory=d;class j extends a.BaseCMapReaderFactory{_fetchData($,ct){return o($).then(ut=>({cMapData:ut,compressionType:ct}))}}s.NodeCMapReaderFactory=j;class h extends a.BaseStandardFontDataFactory{_fetchData($){return o($)}}s.NodeStandardFontDataFactory=h},(e,s,i)=>{var _t,Mr,Fr;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var a=i(1),o=i(6),c=i(12),d=i(13);const j=16,h=100,g=4096,$=15,ct=10,ut=1e3,lt=16;function dt(wt,pt){if(wt._removeMirroring)throw new Error("Context is already forwarding operations.");wt.__originalSave=wt.save,wt.__originalRestore=wt.restore,wt.__originalRotate=wt.rotate,wt.__originalScale=wt.scale,wt.__originalTranslate=wt.translate,wt.__originalTransform=wt.transform,wt.__originalSetTransform=wt.setTransform,wt.__originalResetTransform=wt.resetTransform,wt.__originalClip=wt.clip,wt.__originalMoveTo=wt.moveTo,wt.__originalLineTo=wt.lineTo,wt.__originalBezierCurveTo=wt.bezierCurveTo,wt.__originalRect=wt.rect,wt.__originalClosePath=wt.closePath,wt.__originalBeginPath=wt.beginPath,wt._removeMirroring=()=>{wt.save=wt.__originalSave,wt.restore=wt.__originalRestore,wt.rotate=wt.__originalRotate,wt.scale=wt.__originalScale,wt.translate=wt.__originalTranslate,wt.transform=wt.__originalTransform,wt.setTransform=wt.__originalSetTransform,wt.resetTransform=wt.__originalResetTransform,wt.clip=wt.__originalClip,wt.moveTo=wt.__originalMoveTo,wt.lineTo=wt.__originalLineTo,wt.bezierCurveTo=wt.__originalBezierCurveTo,wt.rect=wt.__originalRect,wt.closePath=wt.__originalClosePath,wt.beginPath=wt.__originalBeginPath,delete wt._removeMirroring},wt.save=function(){pt.save(),this.__originalSave()},wt.restore=function(){pt.restore(),this.__originalRestore()},wt.translate=function(Et,kt){pt.translate(Et,kt),this.__originalTranslate(Et,kt)},wt.scale=function(Et,kt){pt.scale(Et,kt),this.__originalScale(Et,kt)},wt.transform=function(Et,kt,jt,Ct,zt,Xt){pt.transform(Et,kt,jt,Ct,zt,Xt),this.__originalTransform(Et,kt,jt,Ct,zt,Xt)},wt.setTransform=function(Et,kt,jt,Ct,zt,Xt){pt.setTransform(Et,kt,jt,Ct,zt,Xt),this.__originalSetTransform(Et,kt,jt,Ct,zt,Xt)},wt.resetTransform=function(){pt.resetTransform(),this.__originalResetTransform()},wt.rotate=function(Et){pt.rotate(Et),this.__originalRotate(Et)},wt.clip=function(Et){pt.clip(Et),this.__originalClip(Et)},wt.moveTo=function(mt,Et){pt.moveTo(mt,Et),this.__originalMoveTo(mt,Et)},wt.lineTo=function(mt,Et){pt.lineTo(mt,Et),this.__originalLineTo(mt,Et)},wt.bezierCurveTo=function(mt,Et,kt,jt,Ct,zt){pt.bezierCurveTo(mt,Et,kt,jt,Ct,zt),this.__originalBezierCurveTo(mt,Et,kt,jt,Ct,zt)},wt.rect=function(mt,Et,kt,jt){pt.rect(mt,Et,kt,jt),this.__originalRect(mt,Et,kt,jt)},wt.closePath=function(){pt.closePath(),this.__originalClosePath()},wt.beginPath=function(){pt.beginPath(),this.__originalBeginPath()}}class ft{constructor(pt){this.canvasFactory=pt,this.cache=Object.create(null)}getCanvas(pt,mt,Et){let kt;return this.cache[pt]!==void 0?(kt=this.cache[pt],this.canvasFactory.reset(kt,mt,Et)):(kt=this.canvasFactory.create(mt,Et),this.cache[pt]=kt),kt}delete(pt){delete this.cache[pt]}clear(){for(const pt in this.cache){const mt=this.cache[pt];this.canvasFactory.destroy(mt),delete this.cache[pt]}}}function at(wt,pt,mt,Et,kt,jt,Ct,zt,Xt,Tt){const[$t,Kt,qt,rn,Ht,Vt]=(0,o.getCurrentTransform)(wt);if(Kt===0&&qt===0){const Dt=Ct*$t+Ht,Ot=Math.round(Dt),Qt=zt*rn+Vt,sn=Math.round(Qt),on=(Ct+Xt)*$t+Ht,Gt=Math.abs(Math.round(on)-Ot)||1,hn=(zt+Tt)*rn+Vt,dn=Math.abs(Math.round(hn)-sn)||1;return wt.setTransform(Math.sign($t),0,0,Math.sign(rn),Ot,sn),wt.drawImage(pt,mt,Et,kt,jt,0,0,Gt,dn),wt.setTransform($t,Kt,qt,rn,Ht,Vt),[Gt,dn]}if($t===0&&rn===0){const Dt=zt*qt+Ht,Ot=Math.round(Dt),Qt=Ct*Kt+Vt,sn=Math.round(Qt),on=(zt+Tt)*qt+Ht,Gt=Math.abs(Math.round(on)-Ot)||1,hn=(Ct+Xt)*Kt+Vt,dn=Math.abs(Math.round(hn)-sn)||1;return wt.setTransform(0,Math.sign(Kt),Math.sign(qt),0,Ot,sn),wt.drawImage(pt,mt,Et,kt,jt,0,0,dn,Gt),wt.setTransform($t,Kt,qt,rn,Ht,Vt),[dn,Gt]}wt.drawImage(pt,mt,Et,kt,jt,Ct,zt,Xt,Tt);const gt=Math.hypot($t,Kt),bt=Math.hypot(qt,rn);return[gt*Xt,bt*Tt]}function b(wt){const{width:pt,height:mt}=wt;if(pt>ut||mt>ut)return null;const Et=1e3,kt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),jt=pt+1;let Ct=new Uint8Array(jt*(mt+1)),zt,Xt,Tt;const $t=pt+7&-8;let Kt=new Uint8Array($t*mt),qt=0;for(const bt of wt.data){let Dt=128;for(;Dt>0;)Kt[qt++]=bt&Dt?0:255,Dt>>=1}let rn=0;for(qt=0,Kt[qt]!==0&&(Ct[0]=1,++rn),Xt=1;Xt<pt;Xt++)Kt[qt]!==Kt[qt+1]&&(Ct[Xt]=Kt[qt]?2:1,++rn),qt++;for(Kt[qt]!==0&&(Ct[Xt]=2,++rn),zt=1;zt<mt;zt++){qt=zt*$t,Tt=zt*jt,Kt[qt-$t]!==Kt[qt]&&(Ct[Tt]=Kt[qt]?1:8,++rn);let bt=(Kt[qt]?4:0)+(Kt[qt-$t]?8:0);for(Xt=1;Xt<pt;Xt++)bt=(bt>>2)+(Kt[qt+1]?4:0)+(Kt[qt-$t+1]?8:0),kt[bt]&&(Ct[Tt+Xt]=kt[bt],++rn),qt++;if(Kt[qt-$t]!==Kt[qt]&&(Ct[Tt+Xt]=Kt[qt]?2:4,++rn),rn>Et)return null}for(qt=$t*(mt-1),Tt=zt*jt,Kt[qt]!==0&&(Ct[Tt]=8,++rn),Xt=1;Xt<pt;Xt++)Kt[qt]!==Kt[qt+1]&&(Ct[Tt+Xt]=Kt[qt]?4:8,++rn),qt++;if(Kt[qt]!==0&&(Ct[Tt+Xt]=4,++rn),rn>Et)return null;const Ht=new Int32Array([0,jt,-1,0,-jt,0,0,0,1]),Vt=new Path2D;for(zt=0;rn&&zt<=mt;zt++){let bt=zt*jt;const Dt=bt+pt;for(;bt<Dt&&!Ct[bt];)bt++;if(bt===Dt)continue;Vt.moveTo(bt%jt,zt);const Ot=bt;let Qt=Ct[bt];do{const sn=Ht[Qt];do bt+=sn;while(!Ct[bt]);const on=Ct[bt];on!==5&&on!==10?(Qt=on,Ct[bt]=0):(Qt=on&51*Qt>>4,Ct[bt]&=Qt>>2|Qt<<2),Vt.lineTo(bt%jt,bt/jt|0),Ct[bt]||--rn}while(Ot!==bt);--zt}return Kt=null,Ct=null,function(bt){bt.save(),bt.scale(1/pt,-1/mt),bt.translate(0,-mt),bt.fill(Vt),bt.beginPath(),bt.restore()}}class _{constructor(pt,mt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,pt,mt])}clone(){const pt=Object.create(this);return pt.clipBox=this.clipBox.slice(),pt}setCurrentPoint(pt,mt){this.x=pt,this.y=mt}updatePathMinMax(pt,mt,Et){[mt,Et]=a.Util.applyTransform([mt,Et],pt),this.minX=Math.min(this.minX,mt),this.minY=Math.min(this.minY,Et),this.maxX=Math.max(this.maxX,mt),this.maxY=Math.max(this.maxY,Et)}updateRectMinMax(pt,mt){const Et=a.Util.applyTransform(mt,pt),kt=a.Util.applyTransform(mt.slice(2),pt);this.minX=Math.min(this.minX,Et[0],kt[0]),this.minY=Math.min(this.minY,Et[1],kt[1]),this.maxX=Math.max(this.maxX,Et[0],kt[0]),this.maxY=Math.max(this.maxY,Et[1],kt[1])}updateScalingPathMinMax(pt,mt){a.Util.scaleMinMax(pt,mt),this.minX=Math.min(this.minX,mt[0]),this.maxX=Math.max(this.maxX,mt[1]),this.minY=Math.min(this.minY,mt[2]),this.maxY=Math.max(this.maxY,mt[3])}updateCurvePathMinMax(pt,mt,Et,kt,jt,Ct,zt,Xt,Tt,$t){const Kt=a.Util.bezierBoundingBox(mt,Et,kt,jt,Ct,zt,Xt,Tt);if($t){$t[0]=Math.min($t[0],Kt[0],Kt[2]),$t[1]=Math.max($t[1],Kt[0],Kt[2]),$t[2]=Math.min($t[2],Kt[1],Kt[3]),$t[3]=Math.max($t[3],Kt[1],Kt[3]);return}this.updateRectMinMax(pt,Kt)}getPathBoundingBox(pt=c.PathType.FILL,mt=null){const Et=[this.minX,this.minY,this.maxX,this.maxY];if(pt===c.PathType.STROKE){mt||(0,a.unreachable)("Stroke bounding box must include transform.");const kt=a.Util.singularValueDecompose2dScale(mt),jt=kt[0]*this.lineWidth/2,Ct=kt[1]*this.lineWidth/2;Et[0]-=jt,Et[1]-=Ct,Et[2]+=jt,Et[3]+=Ct}return Et}updateClipFromPath(){const pt=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(pt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(pt){this.clipBox=pt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(pt=c.PathType.FILL,mt=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(pt,mt))}}function it(wt,pt){if(typeof ImageData<"u"&&pt instanceof ImageData){wt.putImageData(pt,0,0);return}const mt=pt.height,Et=pt.width,kt=mt%lt,jt=(mt-kt)/lt,Ct=kt===0?jt:jt+1,zt=wt.createImageData(Et,lt);let Xt=0,Tt;const $t=pt.data,Kt=zt.data;let qt,rn,Ht,Vt;if(pt.kind===a.ImageKind.GRAYSCALE_1BPP){const gt=$t.byteLength,bt=new Uint32Array(Kt.buffer,0,Kt.byteLength>>2),Dt=bt.length,Ot=Et+7>>3,Qt=4294967295,sn=a.FeatureTest.isLittleEndian?4278190080:255;for(qt=0;qt<Ct;qt++){for(Ht=qt<jt?lt:kt,Tt=0,rn=0;rn<Ht;rn++){const on=gt-Xt;let Gt=0;const hn=on>Ot?Et:on*8-7,dn=hn&-8;let Rn=0,An=0;for(;Gt<dn;Gt+=8)An=$t[Xt++],bt[Tt++]=An&128?Qt:sn,bt[Tt++]=An&64?Qt:sn,bt[Tt++]=An&32?Qt:sn,bt[Tt++]=An&16?Qt:sn,bt[Tt++]=An&8?Qt:sn,bt[Tt++]=An&4?Qt:sn,bt[Tt++]=An&2?Qt:sn,bt[Tt++]=An&1?Qt:sn;for(;Gt<hn;Gt++)Rn===0&&(An=$t[Xt++],Rn=128),bt[Tt++]=An&Rn?Qt:sn,Rn>>=1}for(;Tt<Dt;)bt[Tt++]=0;wt.putImageData(zt,0,qt*lt)}}else if(pt.kind===a.ImageKind.RGBA_32BPP){for(rn=0,Vt=Et*lt*4,qt=0;qt<jt;qt++)Kt.set($t.subarray(Xt,Xt+Vt)),Xt+=Vt,wt.putImageData(zt,0,rn),rn+=lt;qt<Ct&&(Vt=Et*kt*4,Kt.set($t.subarray(Xt,Xt+Vt)),wt.putImageData(zt,0,rn))}else if(pt.kind===a.ImageKind.RGB_24BPP)for(Ht=lt,Vt=Et*Ht,qt=0;qt<Ct;qt++){for(qt>=jt&&(Ht=kt,Vt=Et*Ht),Tt=0,rn=Vt;rn--;)Kt[Tt++]=$t[Xt++],Kt[Tt++]=$t[Xt++],Kt[Tt++]=$t[Xt++],Kt[Tt++]=255;wt.putImageData(zt,0,qt*lt)}else throw new Error(`bad image kind: ${pt.kind}`)}function nt(wt,pt){if(pt.bitmap){wt.drawImage(pt.bitmap,0,0);return}const mt=pt.height,Et=pt.width,kt=mt%lt,jt=(mt-kt)/lt,Ct=kt===0?jt:jt+1,zt=wt.createImageData(Et,lt);let Xt=0;const Tt=pt.data,$t=zt.data;for(let Kt=0;Kt<Ct;Kt++){const qt=Kt<jt?lt:kt;({srcPos:Xt}=(0,d.convertBlackAndWhiteToRGBA)({src:Tt,srcPos:Xt,dest:$t,width:Et,height:qt,nonBlackColor:0})),wt.putImageData(zt,0,Kt*lt)}}function st(wt,pt){const mt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Et of mt)wt[Et]!==void 0&&(pt[Et]=wt[Et]);wt.setLineDash!==void 0&&(pt.setLineDash(wt.getLineDash()),pt.lineDashOffset=wt.lineDashOffset)}function ht(wt){if(wt.strokeStyle=wt.fillStyle="#000000",wt.fillRule="nonzero",wt.globalAlpha=1,wt.lineWidth=1,wt.lineCap="butt",wt.lineJoin="miter",wt.miterLimit=10,wt.globalCompositeOperation="source-over",wt.font="10px sans-serif",wt.setLineDash!==void 0&&(wt.setLineDash([]),wt.lineDashOffset=0),!a.isNodeJS){const{filter:pt}=wt;pt!=="none"&&pt!==""&&(wt.filter="none")}}function rt(wt,pt,mt,Et){const kt=wt.length;for(let jt=3;jt<kt;jt+=4){const Ct=wt[jt];if(Ct===0)wt[jt-3]=pt,wt[jt-2]=mt,wt[jt-1]=Et;else if(Ct<255){const zt=255-Ct;wt[jt-3]=wt[jt-3]*Ct+pt*zt>>8,wt[jt-2]=wt[jt-2]*Ct+mt*zt>>8,wt[jt-1]=wt[jt-1]*Ct+Et*zt>>8}}}function _e(wt,pt,mt){const Et=wt.length,kt=1/255;for(let jt=3;jt<Et;jt+=4){const Ct=mt?mt[wt[jt]]:wt[jt];pt[jt]=pt[jt]*Ct*kt|0}}function ot(wt,pt,mt){const Et=wt.length;for(let kt=3;kt<Et;kt+=4){const jt=wt[kt-3]*77+wt[kt-2]*152+wt[kt-1]*28;pt[kt]=mt?pt[kt]*mt[jt>>8]>>8:pt[kt]*jt>>16}}function xt(wt,pt,mt,Et,kt,jt,Ct,zt,Xt,Tt,$t){const Kt=!!jt,qt=Kt?jt[0]:0,rn=Kt?jt[1]:0,Ht=Kt?jt[2]:0,Vt=kt==="Luminosity"?ot:_e,bt=Math.min(Et,Math.ceil(1048576/mt));for(let Dt=0;Dt<Et;Dt+=bt){const Ot=Math.min(bt,Et-Dt),Qt=wt.getImageData(zt-Tt,Dt+(Xt-$t),mt,Ot),sn=pt.getImageData(zt,Dt+Xt,mt,Ot);Kt&&rt(Qt.data,qt,rn,Ht),Vt(Qt.data,sn.data,Ct),pt.putImageData(sn,zt,Dt+Xt)}}function et(wt,pt,mt,Et){const kt=Et[0],jt=Et[1],Ct=Et[2]-kt,zt=Et[3]-jt;Ct===0||zt===0||(xt(pt.context,mt,Ct,zt,pt.subtype,pt.backdrop,pt.transferMap,kt,jt,pt.offsetX,pt.offsetY),wt.save(),wt.globalAlpha=1,wt.globalCompositeOperation="source-over",wt.setTransform(1,0,0,1,0,0),wt.drawImage(mt.canvas,0,0),wt.restore())}function yt(wt,pt){const mt=a.Util.singularValueDecompose2dScale(wt);mt[0]=Math.fround(mt[0]),mt[1]=Math.fround(mt[1]);const Et=Math.fround((globalThis.devicePixelRatio||1)*o.PixelsPerInch.PDF_TO_CSS_UNITS);return pt!==void 0?pt:mt[0]<=Et||mt[1]<=Et}const St=["butt","round","square"],It=["miter","round","bevel"],Lt={},Ut={},Nt=class Nt{constructor(pt,mt,Et,kt,jt,{optionalContentConfig:Ct,markedContentStack:zt=null},Xt,Tt){Yt(this,_t);this.ctx=pt,this.current=new _(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=mt,this.objs=Et,this.canvasFactory=kt,this.filterFactory=jt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=zt||[],this.optionalContentConfig=Ct,this.cachedCanvases=new ft(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Xt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Tt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(pt,mt=null){return typeof pt=="string"?pt.startsWith("g_")?this.commonObjs.get(pt):this.objs.get(pt):mt}beginDrawing({transform:pt,viewport:mt,transparency:Et=!1,background:kt=null}){const jt=this.ctx.canvas.width,Ct=this.ctx.canvas.height,zt=this.ctx.fillStyle;if(this.ctx.fillStyle=kt||"#ffffff",this.ctx.fillRect(0,0,jt,Ct),this.ctx.fillStyle=zt,Et){const Xt=this.cachedCanvases.getCanvas("transparent",jt,Ct);this.compositeCtx=this.ctx,this.transparentCanvas=Xt.canvas,this.ctx=Xt.context,this.ctx.save(),this.ctx.transform(...(0,o.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ht(this.ctx),pt&&(this.ctx.transform(...pt),this.outputScaleX=pt[0],this.outputScaleY=pt[0]),this.ctx.transform(...mt.transform),this.viewportScale=mt.scale,this.baseTransform=(0,o.getCurrentTransform)(this.ctx)}executeOperatorList(pt,mt,Et,kt){const jt=pt.argsArray,Ct=pt.fnArray;let zt=mt||0;const Xt=jt.length;if(Xt===zt)return zt;const Tt=Xt-zt>ct&&typeof Et=="function",$t=Tt?Date.now()+$:0;let Kt=0;const qt=this.commonObjs,rn=this.objs;let Ht;for(;;){if(kt!==void 0&&zt===kt.nextBreakPoint)return kt.breakIt(zt,Et),zt;if(Ht=Ct[zt],Ht!==a.OPS.dependency)this[Ht].apply(this,jt[zt]);else for(const Vt of jt[zt]){const gt=Vt.startsWith("g_")?qt:rn;if(!gt.has(Vt))return gt.get(Vt,Et),zt}if(zt++,zt===Xt)return zt;if(Tt&&++Kt>ct){if(Date.now()>$t)return Et(),zt;Kt=0}}}endDrawing(){Wt(this,_t,Mr).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const pt of this._cachedBitmapsMap.values()){for(const mt of pt.values())typeof HTMLCanvasElement<"u"&&mt instanceof HTMLCanvasElement&&(mt.width=mt.height=0);pt.clear()}this._cachedBitmapsMap.clear(),Wt(this,_t,Fr).call(this)}_scaleImage(pt,mt){const Et=pt.width,kt=pt.height;let jt=Math.max(Math.hypot(mt[0],mt[1]),1),Ct=Math.max(Math.hypot(mt[2],mt[3]),1),zt=Et,Xt=kt,Tt="prescale1",$t,Kt;for(;jt>2&&zt>1||Ct>2&&Xt>1;){let qt=zt,rn=Xt;jt>2&&zt>1&&(qt=zt>=16384?Math.floor(zt/2)-1||1:Math.ceil(zt/2),jt/=zt/qt),Ct>2&&Xt>1&&(rn=Xt>=16384?Math.floor(Xt/2)-1||1:Math.ceil(Xt)/2,Ct/=Xt/rn),$t=this.cachedCanvases.getCanvas(Tt,qt,rn),Kt=$t.context,Kt.clearRect(0,0,qt,rn),Kt.drawImage(pt,0,0,zt,Xt,0,0,qt,rn),pt=$t.canvas,zt=qt,Xt=rn,Tt=Tt==="prescale1"?"prescale2":"prescale1"}return{img:pt,paintWidth:zt,paintHeight:Xt}}_createMaskCanvas(pt){const mt=this.ctx,{width:Et,height:kt}=pt,jt=this.current.fillColor,Ct=this.current.patternFill,zt=(0,o.getCurrentTransform)(mt);let Xt,Tt,$t,Kt;if((pt.bitmap||pt.data)&&pt.count>1){const Gt=pt.bitmap||pt.data.buffer;Tt=JSON.stringify(Ct?zt:[zt.slice(0,4),jt]),Xt=this._cachedBitmapsMap.get(Gt),Xt||(Xt=new Map,this._cachedBitmapsMap.set(Gt,Xt));const hn=Xt.get(Tt);if(hn&&!Ct){const dn=Math.round(Math.min(zt[0],zt[2])+zt[4]),Rn=Math.round(Math.min(zt[1],zt[3])+zt[5]);return{canvas:hn,offsetX:dn,offsetY:Rn}}$t=hn}$t||(Kt=this.cachedCanvases.getCanvas("maskCanvas",Et,kt),nt(Kt.context,pt));let qt=a.Util.transform(zt,[1/Et,0,0,-1/kt,0,0]);qt=a.Util.transform(qt,[1,0,0,1,0,-kt]);const rn=a.Util.applyTransform([0,0],qt),Ht=a.Util.applyTransform([Et,kt],qt),Vt=a.Util.normalizeRect([rn[0],rn[1],Ht[0],Ht[1]]),gt=Math.round(Vt[2]-Vt[0])||1,bt=Math.round(Vt[3]-Vt[1])||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",gt,bt),Ot=Dt.context,Qt=Math.min(rn[0],Ht[0]),sn=Math.min(rn[1],Ht[1]);Ot.translate(-Qt,-sn),Ot.transform(...qt),$t||($t=this._scaleImage(Kt.canvas,(0,o.getCurrentTransformInverse)(Ot)),$t=$t.img,Xt&&Ct&&Xt.set(Tt,$t)),Ot.imageSmoothingEnabled=yt((0,o.getCurrentTransform)(Ot),pt.interpolate),at(Ot,$t,0,0,$t.width,$t.height,0,0,Et,kt),Ot.globalCompositeOperation="source-in";const on=a.Util.transform((0,o.getCurrentTransformInverse)(Ot),[1,0,0,1,-Qt,-sn]);return Ot.fillStyle=Ct?jt.getPattern(mt,this,on,c.PathType.FILL):jt,Ot.fillRect(0,0,Et,kt),Xt&&!Ct&&(this.cachedCanvases.delete("fillCanvas"),Xt.set(Tt,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(Qt),offsetY:Math.round(sn)}}setLineWidth(pt){pt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=pt,this.ctx.lineWidth=pt}setLineCap(pt){this.ctx.lineCap=St[pt]}setLineJoin(pt){this.ctx.lineJoin=It[pt]}setMiterLimit(pt){this.ctx.miterLimit=pt}setDash(pt,mt){const Et=this.ctx;Et.setLineDash!==void 0&&(Et.setLineDash(pt),Et.lineDashOffset=mt)}setRenderingIntent(pt){}setFlatness(pt){}setGState(pt){for(const[mt,Et]of pt)switch(mt){case"LW":this.setLineWidth(Et);break;case"LC":this.setLineCap(Et);break;case"LJ":this.setLineJoin(Et);break;case"ML":this.setMiterLimit(Et);break;case"D":this.setDash(Et[0],Et[1]);break;case"RI":this.setRenderingIntent(Et);break;case"FL":this.setFlatness(Et);break;case"Font":this.setFont(Et[0],Et[1]);break;case"CA":this.current.strokeAlpha=Et;break;case"ca":this.current.fillAlpha=Et,this.ctx.globalAlpha=Et;break;case"BM":this.ctx.globalCompositeOperation=Et;break;case"SMask":this.current.activeSMask=Et?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Et);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const pt=this.inSMaskMode;this.current.activeSMask&&!pt?this.beginSMaskMode():!this.current.activeSMask&&pt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const pt=this.ctx.canvas.width,mt=this.ctx.canvas.height,Et="smaskGroupAt"+this.groupLevel,kt=this.cachedCanvases.getCanvas(Et,pt,mt);this.suspendedCtx=this.ctx,this.ctx=kt.context;const jt=this.ctx;jt.setTransform(...(0,o.getCurrentTransform)(this.suspendedCtx)),st(this.suspendedCtx,jt),dt(jt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),st(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(pt){if(!this.current.activeSMask)return;pt?(pt[0]=Math.floor(pt[0]),pt[1]=Math.floor(pt[1]),pt[2]=Math.ceil(pt[2]),pt[3]=Math.ceil(pt[3])):pt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const mt=this.current.activeSMask,Et=this.suspendedCtx;et(Et,mt,this.ctx,pt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(st(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const pt=this.current;this.stateStack.push(pt),this.current=pt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),st(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(pt,mt,Et,kt,jt,Ct){this.ctx.transform(pt,mt,Et,kt,jt,Ct),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(pt,mt,Et){const kt=this.ctx,jt=this.current;let Ct=jt.x,zt=jt.y,Xt,Tt;const $t=(0,o.getCurrentTransform)(kt),Kt=$t[0]===0&&$t[3]===0||$t[1]===0&&$t[2]===0,qt=Kt?Et.slice(0):null;for(let rn=0,Ht=0,Vt=pt.length;rn<Vt;rn++)switch(pt[rn]|0){case a.OPS.rectangle:Ct=mt[Ht++],zt=mt[Ht++];const gt=mt[Ht++],bt=mt[Ht++],Dt=Ct+gt,Ot=zt+bt;kt.moveTo(Ct,zt),gt===0||bt===0?kt.lineTo(Dt,Ot):(kt.lineTo(Dt,zt),kt.lineTo(Dt,Ot),kt.lineTo(Ct,Ot)),Kt||jt.updateRectMinMax($t,[Ct,zt,Dt,Ot]),kt.closePath();break;case a.OPS.moveTo:Ct=mt[Ht++],zt=mt[Ht++],kt.moveTo(Ct,zt),Kt||jt.updatePathMinMax($t,Ct,zt);break;case a.OPS.lineTo:Ct=mt[Ht++],zt=mt[Ht++],kt.lineTo(Ct,zt),Kt||jt.updatePathMinMax($t,Ct,zt);break;case a.OPS.curveTo:Xt=Ct,Tt=zt,Ct=mt[Ht+4],zt=mt[Ht+5],kt.bezierCurveTo(mt[Ht],mt[Ht+1],mt[Ht+2],mt[Ht+3],Ct,zt),jt.updateCurvePathMinMax($t,Xt,Tt,mt[Ht],mt[Ht+1],mt[Ht+2],mt[Ht+3],Ct,zt,qt),Ht+=6;break;case a.OPS.curveTo2:Xt=Ct,Tt=zt,kt.bezierCurveTo(Ct,zt,mt[Ht],mt[Ht+1],mt[Ht+2],mt[Ht+3]),jt.updateCurvePathMinMax($t,Xt,Tt,Ct,zt,mt[Ht],mt[Ht+1],mt[Ht+2],mt[Ht+3],qt),Ct=mt[Ht+2],zt=mt[Ht+3],Ht+=4;break;case a.OPS.curveTo3:Xt=Ct,Tt=zt,Ct=mt[Ht+2],zt=mt[Ht+3],kt.bezierCurveTo(mt[Ht],mt[Ht+1],Ct,zt,Ct,zt),jt.updateCurvePathMinMax($t,Xt,Tt,mt[Ht],mt[Ht+1],Ct,zt,Ct,zt,qt),Ht+=4;break;case a.OPS.closePath:kt.closePath();break}Kt&&jt.updateScalingPathMinMax($t,qt),jt.setCurrentPoint(Ct,zt)}closePath(){this.ctx.closePath()}stroke(pt=!0){const mt=this.ctx,Et=this.current.strokeColor;mt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Et=="object"&&(Et!=null&&Et.getPattern)?(mt.save(),mt.strokeStyle=Et.getPattern(mt,this,(0,o.getCurrentTransformInverse)(mt),c.PathType.STROKE),this.rescaleAndStroke(!1),mt.restore()):this.rescaleAndStroke(!0)),pt&&this.consumePath(this.current.getClippedPathBoundingBox()),mt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(pt=!0){const mt=this.ctx,Et=this.current.fillColor,kt=this.current.patternFill;let jt=!1;kt&&(mt.save(),mt.fillStyle=Et.getPattern(mt,this,(0,o.getCurrentTransformInverse)(mt),c.PathType.FILL),jt=!0);const Ct=this.current.getClippedPathBoundingBox();this.contentVisible&&Ct!==null&&(this.pendingEOFill?(mt.fill("evenodd"),this.pendingEOFill=!1):mt.fill()),jt&&mt.restore(),pt&&this.consumePath(Ct)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Lt}eoClip(){this.pendingClip=Ut}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const pt=this.pendingTextPaths,mt=this.ctx;if(pt===void 0){mt.beginPath();return}mt.save(),mt.beginPath();for(const Et of pt)mt.setTransform(...Et.transform),mt.translate(Et.x,Et.y),Et.addToPath(mt,Et.fontSize);mt.restore(),mt.clip(),mt.beginPath(),delete this.pendingTextPaths}setCharSpacing(pt){this.current.charSpacing=pt}setWordSpacing(pt){this.current.wordSpacing=pt}setHScale(pt){this.current.textHScale=pt/100}setLeading(pt){this.current.leading=-pt}setFont(pt,mt){var $t;const Et=this.commonObjs.get(pt),kt=this.current;if(!Et)throw new Error(`Can't find font for ${pt}`);if(kt.fontMatrix=Et.fontMatrix||a.FONT_IDENTITY_MATRIX,(kt.fontMatrix[0]===0||kt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+pt),mt<0?(mt=-mt,kt.fontDirection=-1):kt.fontDirection=1,this.current.font=Et,this.current.fontSize=mt,Et.isType3Font)return;const jt=Et.loadedName||"sans-serif",Ct=(($t=Et.systemFontInfo)==null?void 0:$t.css)||`"${jt}", ${Et.fallbackName}`;let zt="normal";Et.black?zt="900":Et.bold&&(zt="bold");const Xt=Et.italic?"italic":"normal";let Tt=mt;mt<j?Tt=j:mt>h&&(Tt=h),this.current.fontSizeScale=mt/Tt,this.ctx.font=`${Xt} ${zt} ${Tt}px ${Ct}`}setTextRenderingMode(pt){this.current.textRenderingMode=pt}setTextRise(pt){this.current.textRise=pt}moveText(pt,mt){this.current.x=this.current.lineX+=pt,this.current.y=this.current.lineY+=mt}setLeadingMoveText(pt,mt){this.setLeading(-mt),this.moveText(pt,mt)}setTextMatrix(pt,mt,Et,kt,jt,Ct){this.current.textMatrix=[pt,mt,Et,kt,jt,Ct],this.current.textMatrixScale=Math.hypot(pt,mt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(pt,mt,Et,kt){const jt=this.ctx,Ct=this.current,zt=Ct.font,Xt=Ct.textRenderingMode,Tt=Ct.fontSize/Ct.fontSizeScale,$t=Xt&a.TextRenderingMode.FILL_STROKE_MASK,Kt=!!(Xt&a.TextRenderingMode.ADD_TO_PATH_FLAG),qt=Ct.patternFill&&!zt.missingFile;let rn;(zt.disableFontFace||Kt||qt)&&(rn=zt.getPathGenerator(this.commonObjs,pt)),zt.disableFontFace||qt?(jt.save(),jt.translate(mt,Et),jt.beginPath(),rn(jt,Tt),kt&&jt.setTransform(...kt),($t===a.TextRenderingMode.FILL||$t===a.TextRenderingMode.FILL_STROKE)&&jt.fill(),($t===a.TextRenderingMode.STROKE||$t===a.TextRenderingMode.FILL_STROKE)&&jt.stroke(),jt.restore()):(($t===a.TextRenderingMode.FILL||$t===a.TextRenderingMode.FILL_STROKE)&&jt.fillText(pt,mt,Et),($t===a.TextRenderingMode.STROKE||$t===a.TextRenderingMode.FILL_STROKE)&&jt.strokeText(pt,mt,Et)),Kt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,o.getCurrentTransform)(jt),x:mt,y:Et,fontSize:Tt,addToPath:rn})}get isFontSubpixelAAEnabled(){const{context:pt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);pt.scale(1.5,1),pt.fillText("I",0,10);const mt=pt.getImageData(0,0,10,10).data;let Et=!1;for(let kt=3;kt<mt.length;kt+=4)if(mt[kt]>0&&mt[kt]<255){Et=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",Et)}showText(pt){const mt=this.current,Et=mt.font;if(Et.isType3Font)return this.showType3Text(pt);const kt=mt.fontSize;if(kt===0)return;const jt=this.ctx,Ct=mt.fontSizeScale,zt=mt.charSpacing,Xt=mt.wordSpacing,Tt=mt.fontDirection,$t=mt.textHScale*Tt,Kt=pt.length,qt=Et.vertical,rn=qt?1:-1,Ht=Et.defaultVMetrics,Vt=kt*mt.fontMatrix[0],gt=mt.textRenderingMode===a.TextRenderingMode.FILL&&!Et.disableFontFace&&!mt.patternFill;jt.save(),jt.transform(...mt.textMatrix),jt.translate(mt.x,mt.y+mt.textRise),Tt>0?jt.scale($t,-1):jt.scale($t,1);let bt;if(mt.patternFill){jt.save();const on=mt.fillColor.getPattern(jt,this,(0,o.getCurrentTransformInverse)(jt),c.PathType.FILL);bt=(0,o.getCurrentTransform)(jt),jt.restore(),jt.fillStyle=on}let Dt=mt.lineWidth;const Ot=mt.textMatrixScale;if(Ot===0||Dt===0){const on=mt.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(on===a.TextRenderingMode.STROKE||on===a.TextRenderingMode.FILL_STROKE)&&(Dt=this.getSinglePixelWidth())}else Dt/=Ot;if(Ct!==1&&(jt.scale(Ct,Ct),Dt/=Ct),jt.lineWidth=Dt,Et.isInvalidPDFjsFont){const on=[];let Gt=0;for(const hn of pt)on.push(hn.unicode),Gt+=hn.width;jt.fillText(on.join(""),0,0),mt.x+=Gt*Vt*$t,jt.restore(),this.compose();return}let Qt=0,sn;for(sn=0;sn<Kt;++sn){const on=pt[sn];if(typeof on=="number"){Qt+=rn*on*kt/1e3;continue}let Gt=!1;const hn=(on.isSpace?Xt:0)+zt,dn=on.fontChar,Rn=on.accent;let An,Nn,xn=on.width;if(qt){const Cn=on.vmetric||Ht,Mn=-(on.vmetric?Cn[1]:xn*.5)*Vt,cn=Cn[2]*Vt;xn=Cn?-Cn[0]:xn,An=Mn/Ct,Nn=(Qt+cn)/Ct}else An=Qt/Ct,Nn=0;if(Et.remeasure&&xn>0){const Cn=jt.measureText(dn).width*1e3/kt*Ct;if(xn<Cn&&this.isFontSubpixelAAEnabled){const Mn=xn/Cn;Gt=!0,jt.save(),jt.scale(Mn,1),An/=Mn}else xn!==Cn&&(An+=(xn-Cn)/2e3*kt/Ct)}if(this.contentVisible&&(on.isInFont||Et.missingFile)){if(gt&&!Rn)jt.fillText(dn,An,Nn);else if(this.paintChar(dn,An,Nn,bt),Rn){const Cn=An+kt*Rn.offset.x/Ct,Mn=Nn-kt*Rn.offset.y/Ct;this.paintChar(Rn.fontChar,Cn,Mn,bt)}}const wn=qt?xn*Vt-hn*Tt:xn*Vt+hn*Tt;Qt+=wn,Gt&&jt.restore()}qt?mt.y-=Qt:mt.x+=Qt*$t,jt.restore(),this.compose()}showType3Text(pt){const mt=this.ctx,Et=this.current,kt=Et.font,jt=Et.fontSize,Ct=Et.fontDirection,zt=kt.vertical?1:-1,Xt=Et.charSpacing,Tt=Et.wordSpacing,$t=Et.textHScale*Ct,Kt=Et.fontMatrix||a.FONT_IDENTITY_MATRIX,qt=pt.length,rn=Et.textRenderingMode===a.TextRenderingMode.INVISIBLE;let Ht,Vt,gt,bt;if(!(rn||jt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,mt.save(),mt.transform(...Et.textMatrix),mt.translate(Et.x,Et.y),mt.scale($t,Ct),Ht=0;Ht<qt;++Ht){if(Vt=pt[Ht],typeof Vt=="number"){bt=zt*Vt*jt/1e3,this.ctx.translate(bt,0),Et.x+=bt*$t;continue}const Dt=(Vt.isSpace?Tt:0)+Xt,Ot=kt.charProcOperatorList[Vt.operatorListId];if(!Ot){(0,a.warn)(`Type3 character "${Vt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Vt,this.save(),mt.scale(jt,jt),mt.transform(...Kt),this.executeOperatorList(Ot),this.restore()),gt=a.Util.applyTransform([Vt.width,0],Kt)[0]*jt+Dt,mt.translate(gt,0),Et.x+=gt*$t}mt.restore(),this.processingType3=null}}setCharWidth(pt,mt){}setCharWidthAndBounds(pt,mt,Et,kt,jt,Ct){this.ctx.rect(Et,kt,jt-Et,Ct-kt),this.ctx.clip(),this.endPath()}getColorN_Pattern(pt){let mt;if(pt[0]==="TilingPattern"){const Et=pt[1],kt=this.baseTransform||(0,o.getCurrentTransform)(this.ctx),jt={createCanvasGraphics:Ct=>new Nt(Ct,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};mt=new c.TilingPattern(pt,Et,this.ctx,jt,kt)}else mt=this._getPattern(pt[1],pt[2]);return mt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(pt,mt,Et){const kt=a.Util.makeHexColor(pt,mt,Et);this.ctx.strokeStyle=kt,this.current.strokeColor=kt}setFillRGBColor(pt,mt,Et){const kt=a.Util.makeHexColor(pt,mt,Et);this.ctx.fillStyle=kt,this.current.fillColor=kt,this.current.patternFill=!1}_getPattern(pt,mt=null){let Et;return this.cachedPatterns.has(pt)?Et=this.cachedPatterns.get(pt):(Et=(0,c.getShadingPattern)(this.getObject(pt)),this.cachedPatterns.set(pt,Et)),mt&&(Et.matrix=mt),Et}shadingFill(pt){if(!this.contentVisible)return;const mt=this.ctx;this.save();const Et=this._getPattern(pt);mt.fillStyle=Et.getPattern(mt,this,(0,o.getCurrentTransformInverse)(mt),c.PathType.SHADING);const kt=(0,o.getCurrentTransformInverse)(mt);if(kt){const{width:jt,height:Ct}=mt.canvas,[zt,Xt,Tt,$t]=a.Util.getAxialAlignedBoundingBox([0,0,jt,Ct],kt);this.ctx.fillRect(zt,Xt,Tt-zt,$t-Xt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(pt,mt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(pt)&&pt.length===6&&this.transform(...pt),this.baseTransform=(0,o.getCurrentTransform)(this.ctx),mt)){const Et=mt[2]-mt[0],kt=mt[3]-mt[1];this.ctx.rect(mt[0],mt[1],Et,kt),this.current.updateRectMinMax((0,o.getCurrentTransform)(this.ctx),mt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(pt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const mt=this.ctx;pt.isolated||(0,a.info)("TODO: Support non-isolated groups."),pt.knockout&&(0,a.warn)("Knockout groups not supported.");const Et=(0,o.getCurrentTransform)(mt);if(pt.matrix&&mt.transform(...pt.matrix),!pt.bbox)throw new Error("Bounding box is required.");let kt=a.Util.getAxialAlignedBoundingBox(pt.bbox,(0,o.getCurrentTransform)(mt));const jt=[0,0,mt.canvas.width,mt.canvas.height];kt=a.Util.intersect(kt,jt)||[0,0,0,0];const Ct=Math.floor(kt[0]),zt=Math.floor(kt[1]);let Xt=Math.max(Math.ceil(kt[2])-Ct,1),Tt=Math.max(Math.ceil(kt[3])-zt,1),$t=1,Kt=1;Xt>g&&($t=Xt/g,Xt=g),Tt>g&&(Kt=Tt/g,Tt=g),this.current.startNewPathAndClipBox([0,0,Xt,Tt]);let qt="groupAt"+this.groupLevel;pt.smask&&(qt+="_smask_"+this.smaskCounter++%2);const rn=this.cachedCanvases.getCanvas(qt,Xt,Tt),Ht=rn.context;Ht.scale(1/$t,1/Kt),Ht.translate(-Ct,-zt),Ht.transform(...Et),pt.smask?this.smaskStack.push({canvas:rn.canvas,context:Ht,offsetX:Ct,offsetY:zt,scaleX:$t,scaleY:Kt,subtype:pt.smask.subtype,backdrop:pt.smask.backdrop,transferMap:pt.smask.transferMap||null,startTransformInverse:null}):(mt.setTransform(1,0,0,1,0,0),mt.translate(Ct,zt),mt.scale($t,Kt),mt.save()),st(mt,Ht),this.ctx=Ht,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(mt),this.groupLevel++}endGroup(pt){if(!this.contentVisible)return;this.groupLevel--;const mt=this.ctx,Et=this.groupStack.pop();if(this.ctx=Et,this.ctx.imageSmoothingEnabled=!1,pt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const kt=(0,o.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...kt);const jt=a.Util.getAxialAlignedBoundingBox([0,0,mt.canvas.width,mt.canvas.height],kt);this.ctx.drawImage(mt.canvas,0,0),this.ctx.restore(),this.compose(jt)}}beginAnnotation(pt,mt,Et,kt,jt){if(Wt(this,_t,Mr).call(this),ht(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(mt)&&mt.length===4){const Ct=mt[2]-mt[0],zt=mt[3]-mt[1];if(jt&&this.annotationCanvasMap){Et=Et.slice(),Et[4]-=mt[0],Et[5]-=mt[1],mt=mt.slice(),mt[0]=mt[1]=0,mt[2]=Ct,mt[3]=zt;const[Xt,Tt]=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(this.ctx)),{viewportScale:$t}=this,Kt=Math.ceil(Ct*this.outputScaleX*$t),qt=Math.ceil(zt*this.outputScaleY*$t);this.annotationCanvas=this.canvasFactory.create(Kt,qt);const{canvas:rn,context:Ht}=this.annotationCanvas;this.annotationCanvasMap.set(pt,rn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ht,this.ctx.save(),this.ctx.setTransform(Xt,0,0,-Tt,0,zt*Tt),ht(this.ctx)}else ht(this.ctx),this.ctx.rect(mt[0],mt[1],Ct,zt),this.ctx.clip(),this.endPath()}this.current=new _(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Et),this.transform(...kt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Wt(this,_t,Fr).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(pt){if(!this.contentVisible)return;const mt=pt.count;pt=this.getObject(pt.data,pt),pt.count=mt;const Et=this.ctx,kt=this.processingType3;if(kt&&(kt.compiled===void 0&&(kt.compiled=b(pt)),kt.compiled)){kt.compiled(Et);return}const jt=this._createMaskCanvas(pt),Ct=jt.canvas;Et.save(),Et.setTransform(1,0,0,1,0,0),Et.drawImage(Ct,jt.offsetX,jt.offsetY),Et.restore(),this.compose()}paintImageMaskXObjectRepeat(pt,mt,Et=0,kt=0,jt,Ct){if(!this.contentVisible)return;pt=this.getObject(pt.data,pt);const zt=this.ctx;zt.save();const Xt=(0,o.getCurrentTransform)(zt);zt.transform(mt,Et,kt,jt,0,0);const Tt=this._createMaskCanvas(pt);zt.setTransform(1,0,0,1,Tt.offsetX-Xt[4],Tt.offsetY-Xt[5]);for(let $t=0,Kt=Ct.length;$t<Kt;$t+=2){const qt=a.Util.transform(Xt,[mt,Et,kt,jt,Ct[$t],Ct[$t+1]]),[rn,Ht]=a.Util.applyTransform([0,0],qt);zt.drawImage(Tt.canvas,rn,Ht)}zt.restore(),this.compose()}paintImageMaskXObjectGroup(pt){if(!this.contentVisible)return;const mt=this.ctx,Et=this.current.fillColor,kt=this.current.patternFill;for(const jt of pt){const{data:Ct,width:zt,height:Xt,transform:Tt}=jt,$t=this.cachedCanvases.getCanvas("maskCanvas",zt,Xt),Kt=$t.context;Kt.save();const qt=this.getObject(Ct,jt);nt(Kt,qt),Kt.globalCompositeOperation="source-in",Kt.fillStyle=kt?Et.getPattern(Kt,this,(0,o.getCurrentTransformInverse)(mt),c.PathType.FILL):Et,Kt.fillRect(0,0,zt,Xt),Kt.restore(),mt.save(),mt.transform(...Tt),mt.scale(1,-1),at(mt,$t.canvas,0,0,zt,Xt,0,-1,1,1),mt.restore()}this.compose()}paintImageXObject(pt){if(!this.contentVisible)return;const mt=this.getObject(pt);if(!mt){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(mt)}paintImageXObjectRepeat(pt,mt,Et,kt){if(!this.contentVisible)return;const jt=this.getObject(pt);if(!jt){(0,a.warn)("Dependent image isn't ready yet");return}const Ct=jt.width,zt=jt.height,Xt=[];for(let Tt=0,$t=kt.length;Tt<$t;Tt+=2)Xt.push({transform:[mt,0,0,Et,kt[Tt],kt[Tt+1]],x:0,y:0,w:Ct,h:zt});this.paintInlineImageXObjectGroup(jt,Xt)}applyTransferMapsToCanvas(pt){return this.current.transferMaps!=="none"&&(pt.filter=this.current.transferMaps,pt.drawImage(pt.canvas,0,0),pt.filter="none"),pt.canvas}applyTransferMapsToBitmap(pt){if(this.current.transferMaps==="none")return pt.bitmap;const{bitmap:mt,width:Et,height:kt}=pt,jt=this.cachedCanvases.getCanvas("inlineImage",Et,kt),Ct=jt.context;return Ct.filter=this.current.transferMaps,Ct.drawImage(mt,0,0),Ct.filter="none",jt.canvas}paintInlineImageXObject(pt){if(!this.contentVisible)return;const mt=pt.width,Et=pt.height,kt=this.ctx;if(this.save(),!a.isNodeJS){const{filter:zt}=kt;zt!=="none"&&zt!==""&&(kt.filter="none")}kt.scale(1/mt,-1/Et);let jt;if(pt.bitmap)jt=this.applyTransferMapsToBitmap(pt);else if(typeof HTMLElement=="function"&&pt instanceof HTMLElement||!pt.data)jt=pt;else{const Xt=this.cachedCanvases.getCanvas("inlineImage",mt,Et).context;it(Xt,pt),jt=this.applyTransferMapsToCanvas(Xt)}const Ct=this._scaleImage(jt,(0,o.getCurrentTransformInverse)(kt));kt.imageSmoothingEnabled=yt((0,o.getCurrentTransform)(kt),pt.interpolate),at(kt,Ct.img,0,0,Ct.paintWidth,Ct.paintHeight,0,-Et,mt,Et),this.compose(),this.restore()}paintInlineImageXObjectGroup(pt,mt){if(!this.contentVisible)return;const Et=this.ctx;let kt;if(pt.bitmap)kt=pt.bitmap;else{const jt=pt.width,Ct=pt.height,Xt=this.cachedCanvases.getCanvas("inlineImage",jt,Ct).context;it(Xt,pt),kt=this.applyTransferMapsToCanvas(Xt)}for(const jt of mt)Et.save(),Et.transform(...jt.transform),Et.scale(1,-1),at(Et,kt,jt.x,jt.y,jt.w,jt.h,0,-1,1,1),Et.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(pt){}markPointProps(pt,mt){}beginMarkedContent(pt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(pt,mt){pt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(mt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(pt){const mt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(pt);const Et=this.ctx;this.pendingClip&&(mt||(this.pendingClip===Ut?Et.clip("evenodd"):Et.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Et.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const pt=(0,o.getCurrentTransform)(this.ctx);if(pt[1]===0&&pt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(pt[0]),Math.abs(pt[3]));else{const mt=Math.abs(pt[0]*pt[3]-pt[2]*pt[1]),Et=Math.hypot(pt[0],pt[2]),kt=Math.hypot(pt[1],pt[3]);this._cachedGetSinglePixelWidth=Math.max(Et,kt)/mt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:pt}=this.current,{a:mt,b:Et,c:kt,d:jt}=this.ctx.getTransform();let Ct,zt;if(Et===0&&kt===0){const Xt=Math.abs(mt),Tt=Math.abs(jt);if(Xt===Tt)if(pt===0)Ct=zt=1/Xt;else{const $t=Xt*pt;Ct=zt=$t<1?1/$t:1}else if(pt===0)Ct=1/Xt,zt=1/Tt;else{const $t=Xt*pt,Kt=Tt*pt;Ct=$t<1?1/$t:1,zt=Kt<1?1/Kt:1}}else{const Xt=Math.abs(mt*jt-Et*kt),Tt=Math.hypot(mt,Et),$t=Math.hypot(kt,jt);if(pt===0)Ct=$t/Xt,zt=Tt/Xt;else{const Kt=pt*Xt;Ct=$t>Kt?$t/Kt:1,zt=Tt>Kt?Tt/Kt:1}}this._cachedScaleForStroking[0]=Ct,this._cachedScaleForStroking[1]=zt}return this._cachedScaleForStroking}rescaleAndStroke(pt){const{ctx:mt}=this,{lineWidth:Et}=this.current,[kt,jt]=this.getScaleForStroking();if(mt.lineWidth=Et||1,kt===1&&jt===1){mt.stroke();return}const Ct=mt.getLineDash();if(pt&&mt.save(),mt.scale(kt,jt),Ct.length>0){const zt=Math.max(kt,jt);mt.setLineDash(Ct.map(Xt=>Xt/zt)),mt.lineDashOffset/=zt}mt.stroke(),pt&&mt.restore()}isContentVisible(){for(let pt=this.markedContentStack.length-1;pt>=0;pt--)if(!this.markedContentStack[pt].visible)return!1;return!0}};_t=new WeakSet,Mr=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Fr=function(){if(this.pageColors){const pt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(pt!=="none"){const mt=this.ctx.filter;this.ctx.filter=pt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=mt}}};let Ft=Nt;s.CanvasGraphics=Ft;for(const wt in a.OPS)Ft.prototype[wt]!==void 0&&(Ft.prototype[a.OPS[wt]]=Ft.prototype[wt])},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=lt;var a=i(1),o=i(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=c;function d(b,_){if(!_)return;const it=_[2]-_[0],nt=_[3]-_[1],st=new Path2D;st.rect(_[0],_[1],it,nt),b.clip(st)}class j{constructor(){this.constructor===j&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class h extends j{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let it;this._type==="axial"?it=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(it=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const nt of this._colorStops)it.addColorStop(nt[0],nt[1]);return it}getPattern(_,it,nt,st){let ht;if(st===c.STROKE||st===c.FILL){const rt=it.current.getClippedPathBoundingBox(st,(0,o.getCurrentTransform)(_))||[0,0,0,0],_e=Math.ceil(rt[2]-rt[0])||1,ot=Math.ceil(rt[3]-rt[1])||1,xt=it.cachedCanvases.getCanvas("pattern",_e,ot,!0),et=xt.context;et.clearRect(0,0,et.canvas.width,et.canvas.height),et.beginPath(),et.rect(0,0,et.canvas.width,et.canvas.height),et.translate(-rt[0],-rt[1]),nt=a.Util.transform(nt,[1,0,0,1,rt[0],rt[1]]),et.transform(...it.baseTransform),this.matrix&&et.transform(...this.matrix),d(et,this._bbox),et.fillStyle=this._createGradient(et),et.fill(),ht=_.createPattern(xt.canvas,"no-repeat");const yt=new DOMMatrix(nt);ht.setTransform(yt)}else d(_,this._bbox),ht=this._createGradient(_);return ht}}function g(b,_,it,nt,st,ht,rt,_e){const ot=_.coords,xt=_.colors,et=b.data,yt=b.width*4;let St;ot[it+1]>ot[nt+1]&&(St=it,it=nt,nt=St,St=ht,ht=rt,rt=St),ot[nt+1]>ot[st+1]&&(St=nt,nt=st,st=St,St=rt,rt=_e,_e=St),ot[it+1]>ot[nt+1]&&(St=it,it=nt,nt=St,St=ht,ht=rt,rt=St);const It=(ot[it]+_.offsetX)*_.scaleX,Lt=(ot[it+1]+_.offsetY)*_.scaleY,Ut=(ot[nt]+_.offsetX)*_.scaleX,Ft=(ot[nt+1]+_.offsetY)*_.scaleY,_t=(ot[st]+_.offsetX)*_.scaleX,vt=(ot[st+1]+_.offsetY)*_.scaleY;if(Lt>=vt)return;const At=xt[ht],Nt=xt[ht+1],wt=xt[ht+2],pt=xt[rt],mt=xt[rt+1],Et=xt[rt+2],kt=xt[_e],jt=xt[_e+1],Ct=xt[_e+2],zt=Math.round(Lt),Xt=Math.round(vt);let Tt,$t,Kt,qt,rn,Ht,Vt,gt;for(let bt=zt;bt<=Xt;bt++){if(bt<Ft){const on=bt<Lt?0:(Lt-bt)/(Lt-Ft);Tt=It-(It-Ut)*on,$t=At-(At-pt)*on,Kt=Nt-(Nt-mt)*on,qt=wt-(wt-Et)*on}else{let on;bt>vt?on=1:Ft===vt?on=0:on=(Ft-bt)/(Ft-vt),Tt=Ut-(Ut-_t)*on,$t=pt-(pt-kt)*on,Kt=mt-(mt-jt)*on,qt=Et-(Et-Ct)*on}let Dt;bt<Lt?Dt=0:bt>vt?Dt=1:Dt=(Lt-bt)/(Lt-vt),rn=It-(It-_t)*Dt,Ht=At-(At-kt)*Dt,Vt=Nt-(Nt-jt)*Dt,gt=wt-(wt-Ct)*Dt;const Ot=Math.round(Math.min(Tt,rn)),Qt=Math.round(Math.max(Tt,rn));let sn=yt*bt+Ot*4;for(let on=Ot;on<=Qt;on++)Dt=(Tt-on)/(Tt-rn),Dt<0?Dt=0:Dt>1&&(Dt=1),et[sn++]=$t-($t-Ht)*Dt|0,et[sn++]=Kt-(Kt-Vt)*Dt|0,et[sn++]=qt-(qt-gt)*Dt|0,et[sn++]=255}}function $(b,_,it){const nt=_.coords,st=_.colors;let ht,rt;switch(_.type){case"lattice":const _e=_.verticesPerRow,ot=Math.floor(nt.length/_e)-1,xt=_e-1;for(ht=0;ht<ot;ht++){let et=ht*_e;for(let yt=0;yt<xt;yt++,et++)g(b,it,nt[et],nt[et+1],nt[et+_e],st[et],st[et+1],st[et+_e]),g(b,it,nt[et+_e+1],nt[et+1],nt[et+_e],st[et+_e+1],st[et+1],st[et+_e])}break;case"triangles":for(ht=0,rt=nt.length;ht<rt;ht+=3)g(b,it,nt[ht],nt[ht+1],nt[ht+2],st[ht],st[ht+1],st[ht+2]);break;default:throw new Error("illegal figure")}}class ct extends j{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,it,nt){const _e=Math.floor(this._bounds[0]),ot=Math.floor(this._bounds[1]),xt=Math.ceil(this._bounds[2])-_e,et=Math.ceil(this._bounds[3])-ot,yt=Math.min(Math.ceil(Math.abs(xt*_[0]*1.1)),3e3),St=Math.min(Math.ceil(Math.abs(et*_[1]*1.1)),3e3),It=xt/yt,Lt=et/St,Ut={coords:this._coords,colors:this._colors,offsetX:-_e,offsetY:-ot,scaleX:1/It,scaleY:1/Lt},Ft=yt+2*2,_t=St+2*2,vt=nt.getCanvas("mesh",Ft,_t,!1),At=vt.context,Nt=At.createImageData(yt,St);if(it){const pt=Nt.data;for(let mt=0,Et=pt.length;mt<Et;mt+=4)pt[mt]=it[0],pt[mt+1]=it[1],pt[mt+2]=it[2],pt[mt+3]=255}for(const pt of this._figures)$(Nt,pt,Ut);return At.putImageData(Nt,2,2),{canvas:vt.canvas,offsetX:_e-2*It,offsetY:ot-2*Lt,scaleX:It,scaleY:Lt}}getPattern(_,it,nt,st){d(_,this._bbox);let ht;if(st===c.SHADING)ht=a.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(_));else if(ht=a.Util.singularValueDecompose2dScale(it.baseTransform),this.matrix){const _e=a.Util.singularValueDecompose2dScale(this.matrix);ht=[ht[0]*_e[0],ht[1]*_e[1]]}const rt=this._createMeshCanvas(ht,st===c.SHADING?null:this._background,it.cachedCanvases);return st!==c.SHADING&&(_.setTransform(...it.baseTransform),this.matrix&&_.transform(...this.matrix)),_.translate(rt.offsetX,rt.offsetY),_.scale(rt.scaleX,rt.scaleY),_.createPattern(rt.canvas,"no-repeat")}}class ut extends j{getPattern(){return"hotpink"}}function lt(b){switch(b[0]){case"RadialAxial":return new h(b);case"Mesh":return new ct(b);case"Dummy":return new ut}throw new Error(`Unknown IR type: ${b[0]}`)}const dt={COLORED:1,UNCOLORED:2},at=class at{constructor(_,it,nt,st,ht){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=it,this.ctx=nt,this.canvasGraphicsFactory=st,this.baseTransform=ht}createPatternCanvas(_){const it=this.operatorList,nt=this.bbox,st=this.xstep,ht=this.ystep,rt=this.paintType,_e=this.tilingType,ot=this.color,xt=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+_e);const et=nt[0],yt=nt[1],St=nt[2],It=nt[3],Lt=a.Util.singularValueDecompose2dScale(this.matrix),Ut=a.Util.singularValueDecompose2dScale(this.baseTransform),Ft=[Lt[0]*Ut[0],Lt[1]*Ut[1]],_t=this.getSizeAndScale(st,this.ctx.canvas.width,Ft[0]),vt=this.getSizeAndScale(ht,this.ctx.canvas.height,Ft[1]),At=_.cachedCanvases.getCanvas("pattern",_t.size,vt.size,!0),Nt=At.context,wt=xt.createCanvasGraphics(Nt);wt.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(wt,rt,ot);let pt=et,mt=yt,Et=St,kt=It;return et<0&&(pt=0,Et+=Math.abs(et)),yt<0&&(mt=0,kt+=Math.abs(yt)),Nt.translate(-(_t.scale*pt),-(vt.scale*mt)),wt.transform(_t.scale,0,0,vt.scale,0,0),Nt.save(),this.clipBbox(wt,pt,mt,Et,kt),wt.baseTransform=(0,o.getCurrentTransform)(wt.ctx),wt.executeOperatorList(it),wt.endDrawing(),{canvas:At.canvas,scaleX:_t.scale,scaleY:vt.scale,offsetX:pt,offsetY:mt}}getSizeAndScale(_,it,nt){_=Math.abs(_);const st=Math.max(at.MAX_PATTERN_SIZE,it);let ht=Math.ceil(_*nt);return ht>=st?ht=st:nt=ht/_,{scale:nt,size:ht}}clipBbox(_,it,nt,st,ht){const rt=st-it,_e=ht-nt;_.ctx.rect(it,nt,rt,_e),_.current.updateRectMinMax((0,o.getCurrentTransform)(_.ctx),[it,nt,st,ht]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,it,nt){const st=_.ctx,ht=_.current;switch(it){case dt.COLORED:const rt=this.ctx;st.fillStyle=rt.fillStyle,st.strokeStyle=rt.strokeStyle,ht.fillColor=rt.fillStyle,ht.strokeColor=rt.strokeStyle;break;case dt.UNCOLORED:const _e=a.Util.makeHexColor(nt[0],nt[1],nt[2]);st.fillStyle=_e,st.strokeStyle=_e,ht.fillColor=_e,ht.strokeColor=_e;break;default:throw new a.FormatError(`Unsupported paint type: ${it}`)}}getPattern(_,it,nt,st){let ht=nt;st!==c.SHADING&&(ht=a.Util.transform(ht,it.baseTransform),this.matrix&&(ht=a.Util.transform(ht,this.matrix)));const rt=this.createPatternCanvas(it);let _e=new DOMMatrix(ht);_e=_e.translate(rt.offsetX,rt.offsetY),_e=_e.scale(1/rt.scaleX,1/rt.scaleY);const ot=_.createPattern(rt.canvas,"repeat");return ot.setTransform(_e),ot}};In(at,"MAX_PATTERN_SIZE",3e3);let ft=at;s.TilingPattern=ft},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=c,s.convertToRGBA=o,s.grayToRGBA=j;var a=i(1);function o(h){switch(h.kind){case a.ImageKind.GRAYSCALE_1BPP:return c(h);case a.ImageKind.RGB_24BPP:return d(h)}return null}function c({src:h,srcPos:g=0,dest:$,width:ct,height:ut,nonBlackColor:lt=4294967295,inverseDecode:dt=!1}){const ft=a.FeatureTest.isLittleEndian?4278190080:255,[at,b]=dt?[lt,ft]:[ft,lt],_=ct>>3,it=ct&7,nt=h.length;$=new Uint32Array($.buffer);let st=0;for(let ht=0;ht<ut;ht++){for(const _e=g+_;g<_e;g++){const ot=g<nt?h[g]:255;$[st++]=ot&128?b:at,$[st++]=ot&64?b:at,$[st++]=ot&32?b:at,$[st++]=ot&16?b:at,$[st++]=ot&8?b:at,$[st++]=ot&4?b:at,$[st++]=ot&2?b:at,$[st++]=ot&1?b:at}if(it===0)continue;const rt=g<nt?h[g++]:255;for(let _e=0;_e<it;_e++)$[st++]=rt&1<<7-_e?b:at}return{srcPos:g,destPos:st}}function d({src:h,srcPos:g=0,dest:$,destPos:ct=0,width:ut,height:lt}){let dt=0;const ft=h.length>>2,at=new Uint32Array(h.buffer,g,ft);if(a.FeatureTest.isLittleEndian){for(;dt<ft-2;dt+=3,ct+=4){const b=at[dt],_=at[dt+1],it=at[dt+2];$[ct]=b|4278190080,$[ct+1]=b>>>24|_<<8|4278190080,$[ct+2]=_>>>16|it<<16|4278190080,$[ct+3]=it>>>8|4278190080}for(let b=dt*4,_=h.length;b<_;b+=3)$[ct++]=h[b]|h[b+1]<<8|h[b+2]<<16|4278190080}else{for(;dt<ft-2;dt+=3,ct+=4){const b=at[dt],_=at[dt+1],it=at[dt+2];$[ct]=b|255,$[ct+1]=b<<24|_>>>8|255,$[ct+2]=_<<16|it>>>16|255,$[ct+3]=it<<8|255}for(let b=dt*4,_=h.length;b<_;b+=3)$[ct++]=h[b]<<24|h[b+1]<<16|h[b+2]<<8|255}return{srcPos:g,destPos:ct}}function j(h,g){if(a.FeatureTest.isLittleEndian)for(let $=0,ct=h.length;$<ct;$++)g[$]=h[$]*65793|4278190080;else for(let $=0,ct=h.length;$<ct;$++)g[$]=h[$]*16843008|255}},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const i=Object.create(null);s.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(e,s,i)=>{var h,ds,hs,ur;Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var a=i(1);const o={DATA:1,ERROR:2},c={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(ut){switch(ut instanceof Error||typeof ut=="object"&&ut!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ut.name){case"AbortException":return new a.AbortException(ut.message);case"MissingPDFException":return new a.MissingPDFException(ut.message);case"PasswordException":return new a.PasswordException(ut.message,ut.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(ut.message,ut.status);case"UnknownErrorException":return new a.UnknownErrorException(ut.message,ut.details);default:return new a.UnknownErrorException(ut.message,ut.toString())}}class j{constructor(lt,dt,ft){Yt(this,h);this.sourceName=lt,this.targetName=dt,this.comObj=ft,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=at=>{const b=at.data;if(b.targetName!==this.sourceName)return;if(b.stream){Wt(this,h,hs).call(this,b);return}if(b.callback){const it=b.callbackId,nt=this.callbackCapabilities[it];if(!nt)throw new Error(`Cannot resolve callback ${it}`);if(delete this.callbackCapabilities[it],b.callback===o.DATA)nt.resolve(b.data);else if(b.callback===o.ERROR)nt.reject(d(b.reason));else throw new Error("Unexpected callback case");return}const _=this.actionHandler[b.action];if(!_)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const it=this.sourceName,nt=b.sourceName;new Promise(function(st){st(_(b.data))}).then(function(st){ft.postMessage({sourceName:it,targetName:nt,callback:o.DATA,callbackId:b.callbackId,data:st})},function(st){ft.postMessage({sourceName:it,targetName:nt,callback:o.ERROR,callbackId:b.callbackId,reason:d(st)})});return}if(b.streamId){Wt(this,h,ds).call(this,b);return}_(b.data)},ft.addEventListener("message",this._onComObjOnMessage)}on(lt,dt){const ft=this.actionHandler;if(ft[lt])throw new Error(`There is already an actionName called "${lt}"`);ft[lt]=dt}send(lt,dt,ft){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:lt,data:dt},ft)}sendWithPromise(lt,dt,ft){const at=this.callbackId++,b=new a.PromiseCapability;this.callbackCapabilities[at]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:lt,callbackId:at,data:dt},ft)}catch(_){b.reject(_)}return b.promise}sendWithStream(lt,dt,ft,at){const b=this.streamId++,_=this.sourceName,it=this.targetName,nt=this.comObj;return new ReadableStream({start:st=>{const ht=new a.PromiseCapability;return this.streamControllers[b]={controller:st,startCall:ht,pullCall:null,cancelCall:null,isClosed:!1},nt.postMessage({sourceName:_,targetName:it,action:lt,streamId:b,data:dt,desiredSize:st.desiredSize},at),ht.promise},pull:st=>{const ht=new a.PromiseCapability;return this.streamControllers[b].pullCall=ht,nt.postMessage({sourceName:_,targetName:it,stream:c.PULL,streamId:b,desiredSize:st.desiredSize}),ht.promise},cancel:st=>{(0,a.assert)(st instanceof Error,"cancel must have a valid reason");const ht=new a.PromiseCapability;return this.streamControllers[b].cancelCall=ht,this.streamControllers[b].isClosed=!0,nt.postMessage({sourceName:_,targetName:it,stream:c.CANCEL,streamId:b,reason:d(st)}),ht.promise}},ft)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}h=new WeakSet,ds=function(lt){const dt=lt.streamId,ft=this.sourceName,at=lt.sourceName,b=this.comObj,_=this,it=this.actionHandler[lt.action],nt={enqueue(st,ht=1,rt){if(this.isCancelled)return;const _e=this.desiredSize;this.desiredSize-=ht,_e>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),b.postMessage({sourceName:ft,targetName:at,stream:c.ENQUEUE,streamId:dt,chunk:st},rt)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:ft,targetName:at,stream:c.CLOSE,streamId:dt}),delete _.streamSinks[dt])},error(st){(0,a.assert)(st instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:ft,targetName:at,stream:c.ERROR,streamId:dt,reason:d(st)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:lt.desiredSize,ready:null};nt.sinkCapability.resolve(),nt.ready=nt.sinkCapability.promise,this.streamSinks[dt]=nt,new Promise(function(st){st(it(lt.data,nt))}).then(function(){b.postMessage({sourceName:ft,targetName:at,stream:c.START_COMPLETE,streamId:dt,success:!0})},function(st){b.postMessage({sourceName:ft,targetName:at,stream:c.START_COMPLETE,streamId:dt,reason:d(st)})})},hs=function(lt){const dt=lt.streamId,ft=this.sourceName,at=lt.sourceName,b=this.comObj,_=this.streamControllers[dt],it=this.streamSinks[dt];switch(lt.stream){case c.START_COMPLETE:lt.success?_.startCall.resolve():_.startCall.reject(d(lt.reason));break;case c.PULL_COMPLETE:lt.success?_.pullCall.resolve():_.pullCall.reject(d(lt.reason));break;case c.PULL:if(!it){b.postMessage({sourceName:ft,targetName:at,stream:c.PULL_COMPLETE,streamId:dt,success:!0});break}it.desiredSize<=0&&lt.desiredSize>0&&it.sinkCapability.resolve(),it.desiredSize=lt.desiredSize,new Promise(function(nt){var st;nt((st=it.onPull)==null?void 0:st.call(it))}).then(function(){b.postMessage({sourceName:ft,targetName:at,stream:c.PULL_COMPLETE,streamId:dt,success:!0})},function(nt){b.postMessage({sourceName:ft,targetName:at,stream:c.PULL_COMPLETE,streamId:dt,reason:d(nt)})});break;case c.ENQUEUE:if((0,a.assert)(_,"enqueue should have stream controller"),_.isClosed)break;_.controller.enqueue(lt.chunk);break;case c.CLOSE:if((0,a.assert)(_,"close should have stream controller"),_.isClosed)break;_.isClosed=!0,_.controller.close(),Wt(this,h,ur).call(this,_,dt);break;case c.ERROR:(0,a.assert)(_,"error should have stream controller"),_.controller.error(d(lt.reason)),Wt(this,h,ur).call(this,_,dt);break;case c.CANCEL_COMPLETE:lt.success?_.cancelCall.resolve():_.cancelCall.reject(d(lt.reason)),Wt(this,h,ur).call(this,_,dt);break;case c.CANCEL:if(!it)break;new Promise(function(nt){var st;nt((st=it.onCancel)==null?void 0:st.call(it,d(lt.reason)))}).then(function(){b.postMessage({sourceName:ft,targetName:at,stream:c.CANCEL_COMPLETE,streamId:dt,success:!0})},function(nt){b.postMessage({sourceName:ft,targetName:at,stream:c.CANCEL_COMPLETE,streamId:dt,reason:d(nt)})}),it.sinkCapability.reject(d(lt.reason)),it.isCancelled=!0,delete this.streamSinks[dt];break;default:throw new Error("Unexpected stream case")}},ur=async function(lt,dt){var ft,at,b;await Promise.allSettled([(ft=lt.startCall)==null?void 0:ft.promise,(at=lt.pullCall)==null?void 0:at.promise,(b=lt.cancelCall)==null?void 0:b.promise]),delete this.streamControllers[dt]},s.MessageHandler=j},(e,s,i)=>{var c,d;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var a=i(1);class o{constructor({parsedData:h,rawData:g}){Yt(this,c);Yt(this,d);Zt(this,c,h),Zt(this,d,g)}getRaw(){return tt(this,d)}get(h){return tt(this,c).get(h)??null}getAll(){return(0,a.objectFromMap)(tt(this,c))}has(h){return tt(this,c).has(h)}}c=new WeakMap,d=new WeakMap,s.Metadata=o},(e,s,i)=>{var h,g,$,ct,ut,lt,Dr;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var a=i(1),o=i(8);const c=Symbol("INTERNAL");class d{constructor(at,b){Yt(this,h,!0);this.name=at,this.intent=b}get visible(){return tt(this,h)}_setVisible(at,b){at!==c&&(0,a.unreachable)("Internal method `_setVisible` called."),Zt(this,h,b)}}h=new WeakMap;class j{constructor(at){Yt(this,lt);Yt(this,g,null);Yt(this,$,new Map);Yt(this,ct,null);Yt(this,ut,null);if(this.name=null,this.creator=null,at!==null){this.name=at.name,this.creator=at.creator,Zt(this,ut,at.order);for(const b of at.groups)tt(this,$).set(b.id,new d(b.name,b.intent));if(at.baseState==="OFF")for(const b of tt(this,$).values())b._setVisible(c,!1);for(const b of at.on)tt(this,$).get(b)._setVisible(c,!0);for(const b of at.off)tt(this,$).get(b)._setVisible(c,!1);Zt(this,ct,this.getHash())}}isVisible(at){if(tt(this,$).size===0)return!0;if(!at)return(0,a.warn)("Optional content group not defined."),!0;if(at.type==="OCG")return tt(this,$).has(at.id)?tt(this,$).get(at.id).visible:((0,a.warn)(`Optional content group not found: ${at.id}`),!0);if(at.type==="OCMD"){if(at.expression)return Wt(this,lt,Dr).call(this,at.expression);if(!at.policy||at.policy==="AnyOn"){for(const b of at.ids){if(!tt(this,$).has(b))return(0,a.warn)(`Optional content group not found: ${b}`),!0;if(tt(this,$).get(b).visible)return!0}return!1}else if(at.policy==="AllOn"){for(const b of at.ids){if(!tt(this,$).has(b))return(0,a.warn)(`Optional content group not found: ${b}`),!0;if(!tt(this,$).get(b).visible)return!1}return!0}else if(at.policy==="AnyOff"){for(const b of at.ids){if(!tt(this,$).has(b))return(0,a.warn)(`Optional content group not found: ${b}`),!0;if(!tt(this,$).get(b).visible)return!0}return!1}else if(at.policy==="AllOff"){for(const b of at.ids){if(!tt(this,$).has(b))return(0,a.warn)(`Optional content group not found: ${b}`),!0;if(tt(this,$).get(b).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${at.policy}.`),!0}return(0,a.warn)(`Unknown group type ${at.type}.`),!0}setVisibility(at,b=!0){if(!tt(this,$).has(at)){(0,a.warn)(`Optional content group not found: ${at}`);return}tt(this,$).get(at)._setVisible(c,!!b),Zt(this,g,null)}get hasInitialVisibility(){return tt(this,ct)===null||this.getHash()===tt(this,ct)}getOrder(){return tt(this,$).size?tt(this,ut)?tt(this,ut).slice():[...tt(this,$).keys()]:null}getGroups(){return tt(this,$).size>0?(0,a.objectFromMap)(tt(this,$)):null}getGroup(at){return tt(this,$).get(at)||null}getHash(){if(tt(this,g)!==null)return tt(this,g);const at=new o.MurmurHash3_64;for(const[b,_]of tt(this,$))at.update(`${b}:${_.visible}`);return Zt(this,g,at.hexdigest())}}g=new WeakMap,$=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakSet,Dr=function(at){const b=at.length;if(b<2)return!0;const _=at[0];for(let it=1;it<b;it++){const nt=at[it];let st;if(Array.isArray(nt))st=Wt(this,lt,Dr).call(this,nt);else if(tt(this,$).has(nt))st=tt(this,$).get(nt).visible;else return(0,a.warn)(`Optional content group not found: ${nt}`),!0;switch(_){case"And":if(!st)return!1;break;case"Or":if(st)return!0;break;case"Not":return!st;default:return!0}}return _==="And"},s.OptionalContentConfig=j},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var a=i(1),o=i(6);class c{constructor({length:g,initialData:$,progressiveDone:ct=!1,contentDispositionFilename:ut=null,disableRange:lt=!1,disableStream:dt=!1},ft){if((0,a.assert)(ft,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ct,this._contentDispositionFilename=ut,($==null?void 0:$.length)>0){const at=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;this._queuedChunks.push(at)}this._pdfDataRangeTransport=ft,this._isStreamingSupported=!dt,this._isRangeSupported=!lt,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((at,b)=>{this._onReceiveData({begin:at,chunk:b})}),this._pdfDataRangeTransport.addProgressListener((at,b)=>{this._onProgress({loaded:at,total:b})}),this._pdfDataRangeTransport.addProgressiveReadListener(at=>{this._onReceiveData({chunk:at})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:g,chunk:$}){const ct=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ct):this._queuedChunks.push(ct);else{const ut=this._rangeReaders.some(function(lt){return lt._begin!==g?!1:(lt._enqueue(ct),!0)});(0,a.assert)(ut,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var g;return((g=this._fullRequestReader)==null?void 0:g._loaded)??0}_onProgress(g){var $,ct,ut,lt;g.total===void 0?(ct=($=this._rangeReaders[0])==null?void 0:$.onProgress)==null||ct.call($,{loaded:g.loaded}):(lt=(ut=this._fullRequestReader)==null?void 0:ut.onProgress)==null||lt.call(ut,{loaded:g.loaded,total:g.total})}_onProgressiveDone(){var g;(g=this._fullRequestReader)==null||g.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const $=this._rangeReaders.indexOf(g);$>=0&&this._rangeReaders.splice($,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new d(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,$){if($<=this._progressiveDataLength)return null;const ct=new j(this,g,$);return this._pdfDataRangeTransport.requestDataRange(g,$),this._rangeReaders.push(ct),ct}cancelAllRequests(g){var $;($=this._fullRequestReader)==null||$.cancel(g);for(const ct of this._rangeReaders.slice(0))ct.cancel(g);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=c;class d{constructor(g,$,ct=!1,ut=null){this._stream=g,this._done=ct||!1,this._filename=(0,o.isPdfFile)(ut)?ut:null,this._queuedChunks=$||[],this._loaded=0;for(const lt of this._queuedChunks)this._loaded+=lt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new a.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class j{constructor(g,$,ct){this._stream=g,this._begin=$,this._end=ct,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const ct of this._requests)ct.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const $=this._queuedChunk;return this._queuedChunk=null,{value:$,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new a.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var a=i(1),o=i(20);function c(ct,ut,lt){return{method:"GET",headers:ct,signal:lt.signal,mode:"cors",credentials:ut?"include":"same-origin",redirect:"follow"}}function d(ct){const ut=new Headers;for(const lt in ct){const dt=ct[lt];dt!==void 0&&ut.append(lt,dt)}return ut}function j(ct){return ct instanceof Uint8Array?ct.buffer:ct instanceof ArrayBuffer?ct:((0,a.warn)(`getArrayBuffer - unexpected data format: ${ct}`),new Uint8Array(ct).buffer)}class h{constructor(ut){this.source=ut,this.isHttp=/^https?:/i.test(ut.url),this.httpHeaders=this.isHttp&&ut.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var ut;return((ut=this._fullRequestReader)==null?void 0:ut._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}getRangeReader(ut,lt){if(lt<=this._progressiveDataLength)return null;const dt=new $(this,ut,lt);return this._rangeRequestReaders.push(dt),dt}cancelAllRequests(ut){var lt;(lt=this._fullRequestReader)==null||lt.cancel(ut);for(const dt of this._rangeRequestReaders.slice(0))dt.cancel(ut)}}s.PDFFetchStream=h;class g{constructor(ut){this._stream=ut,this._reader=null,this._loaded=0,this._filename=null;const lt=ut.source;this._withCredentials=lt.withCredentials||!1,this._contentLength=lt.length,this._headersCapability=new a.PromiseCapability,this._disableRange=lt.disableRange||!1,this._rangeChunkSize=lt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!lt.disableStream,this._isRangeSupported=!lt.disableRange,this._headers=d(this._stream.httpHeaders);const dt=lt.url;fetch(dt,c(this._headers,this._withCredentials,this._abortController)).then(ft=>{if(!(0,o.validateResponseStatus)(ft.status))throw(0,o.createResponseStatusError)(ft.status,dt);this._reader=ft.body.getReader(),this._headersCapability.resolve();const at=it=>ft.headers.get(it),{allowRangeRequests:b,suggestedLength:_}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:at,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=b,this._contentLength=_||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(at),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var dt;await this._headersCapability.promise;const{value:ut,done:lt}=await this._reader.read();return lt?{value:ut,done:lt}:(this._loaded+=ut.byteLength,(dt=this.onProgress)==null||dt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:j(ut),done:!1})}cancel(ut){var lt;(lt=this._reader)==null||lt.cancel(ut),this._abortController.abort()}}class ${constructor(ut,lt,dt){this._stream=ut,this._reader=null,this._loaded=0;const ft=ut.source;this._withCredentials=ft.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!ft.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${lt}-${dt-1}`);const at=ft.url;fetch(at,c(this._headers,this._withCredentials,this._abortController)).then(b=>{if(!(0,o.validateResponseStatus)(b.status))throw(0,o.createResponseStatusError)(b.status,at);this._readCapability.resolve(),this._reader=b.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var dt;await this._readCapability.promise;const{value:ut,done:lt}=await this._reader.read();return lt?{value:ut,done:lt}:(this._loaded+=ut.byteLength,(dt=this.onProgress)==null||dt.call(this,{loaded:this._loaded}),{value:j(ut),done:!1})}cancel(ut){var lt;(lt=this._reader)==null||lt.cancel(ut),this._abortController.abort()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=h,s.extractFilenameFromHeader=j,s.validateRangeRequestCapabilities=d,s.validateResponseStatus=g;var a=i(1),o=i(21),c=i(6);function d({getResponseHeader:$,isHttp:ct,rangeChunkSize:ut,disableRange:lt}){const dt={allowRangeRequests:!1,suggestedLength:void 0},ft=parseInt($("Content-Length"),10);return!Number.isInteger(ft)||(dt.suggestedLength=ft,ft<=2*ut)||lt||!ct||$("Accept-Ranges")!=="bytes"||($("Content-Encoding")||"identity")!=="identity"||(dt.allowRangeRequests=!0),dt}function j($){const ct=$("Content-Disposition");if(ct){let ut=(0,o.getFilenameFromContentDispositionHeader)(ct);if(ut.includes("%"))try{ut=decodeURIComponent(ut)}catch{}if((0,c.isPdfFile)(ut))return ut}return null}function h($,ct){return $===404||$===0&&ct.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+ct+'".'):new a.UnexpectedResponseException(`Unexpected server response (${$}) while retrieving PDF "${ct}".`,$)}function g($){return $===200||$===206}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=o;var a=i(1);function o(c){let d=!0,j=h("filename\\*","i").exec(c);if(j){j=j[1];let ft=ut(j);return ft=unescape(ft),ft=lt(ft),ft=dt(ft),$(ft)}if(j=ct(c),j){const ft=dt(j);return $(ft)}if(j=h("filename","i").exec(c),j){j=j[1];let ft=ut(j);return ft=dt(ft),$(ft)}function h(ft,at){return new RegExp("(?:^|;)\\s*"+ft+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',at)}function g(ft,at){if(ft){if(!/^[\x00-\xFF]+$/.test(at))return at;try{const b=new TextDecoder(ft,{fatal:!0}),_=(0,a.stringToBytes)(at);at=b.decode(_),d=!1}catch{}}return at}function $(ft){return d&&/[\x80-\xff]/.test(ft)&&(ft=g("utf-8",ft),d&&(ft=g("iso-8859-1",ft))),ft}function ct(ft){const at=[];let b;const _=h("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=_.exec(ft))!==null;){let[,nt,st,ht]=b;if(nt=parseInt(nt,10),nt in at){if(nt===0)break;continue}at[nt]=[st,ht]}const it=[];for(let nt=0;nt<at.length&&nt in at;++nt){let[st,ht]=at[nt];ht=ut(ht),st&&(ht=unescape(ht),nt===0&&(ht=lt(ht))),it.push(ht)}return it.join("")}function ut(ft){if(ft.startsWith('"')){const at=ft.slice(1).split('\\"');for(let b=0;b<at.length;++b){const _=at[b].indexOf('"');_!==-1&&(at[b]=at[b].slice(0,_),at.length=b+1),at[b]=at[b].replaceAll(/\\(.)/g,"$1")}ft=at.join('"')}return ft}function lt(ft){const at=ft.indexOf("'");if(at===-1)return ft;const b=ft.slice(0,at),it=ft.slice(at+1).replace(/^[^']*'/,"");return g(b,it)}function dt(ft){return!ft.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ft)?ft:ft.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(at,b,_,it){if(_==="q"||_==="Q")return it=it.replaceAll("_"," "),it=it.replaceAll(/=([0-9a-fA-F]{2})/g,function(nt,st){return String.fromCharCode(parseInt(st,16))}),g(b,it);try{it=atob(it)}catch{}return g(b,it)})}return""}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var a=i(1),o=i(20);const c=200,d=206;function j(ut){const lt=ut.response;return typeof lt!="string"?lt:(0,a.stringToBytes)(lt).buffer}class h{constructor(lt,dt={}){this.url=lt,this.isHttp=/^https?:/i.test(lt),this.httpHeaders=this.isHttp&&dt.httpHeaders||Object.create(null),this.withCredentials=dt.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(lt,dt,ft){const at={begin:lt,end:dt};for(const b in ft)at[b]=ft[b];return this.request(at)}requestFull(lt){return this.request(lt)}request(lt){const dt=new XMLHttpRequest,ft=this.currXhrId++,at=this.pendingRequests[ft]={xhr:dt};dt.open("GET",this.url),dt.withCredentials=this.withCredentials;for(const b in this.httpHeaders){const _=this.httpHeaders[b];_!==void 0&&dt.setRequestHeader(b,_)}return this.isHttp&&"begin"in lt&&"end"in lt?(dt.setRequestHeader("Range",`bytes=${lt.begin}-${lt.end-1}`),at.expectedStatus=d):at.expectedStatus=c,dt.responseType="arraybuffer",lt.onError&&(dt.onerror=function(b){lt.onError(dt.status)}),dt.onreadystatechange=this.onStateChange.bind(this,ft),dt.onprogress=this.onProgress.bind(this,ft),at.onHeadersReceived=lt.onHeadersReceived,at.onDone=lt.onDone,at.onError=lt.onError,at.onProgress=lt.onProgress,dt.send(null),ft}onProgress(lt,dt){var at;const ft=this.pendingRequests[lt];ft&&((at=ft.onProgress)==null||at.call(ft,dt))}onStateChange(lt,dt){var nt,st,ht;const ft=this.pendingRequests[lt];if(!ft)return;const at=ft.xhr;if(at.readyState>=2&&ft.onHeadersReceived&&(ft.onHeadersReceived(),delete ft.onHeadersReceived),at.readyState!==4||!(lt in this.pendingRequests))return;if(delete this.pendingRequests[lt],at.status===0&&this.isHttp){(nt=ft.onError)==null||nt.call(ft,at.status);return}const b=at.status||c;if(!(b===c&&ft.expectedStatus===d)&&b!==ft.expectedStatus){(st=ft.onError)==null||st.call(ft,at.status);return}const it=j(at);if(b===d){const rt=at.getResponseHeader("Content-Range"),_e=/bytes (\d+)-(\d+)\/(\d+)/.exec(rt);ft.onDone({begin:parseInt(_e[1],10),chunk:it})}else it?ft.onDone({begin:0,chunk:it}):(ht=ft.onError)==null||ht.call(ft,at.status)}getRequestXhr(lt){return this.pendingRequests[lt].xhr}isPendingRequest(lt){return lt in this.pendingRequests}abortRequest(lt){const dt=this.pendingRequests[lt].xhr;delete this.pendingRequests[lt],dt.abort()}}class g{constructor(lt){this._source=lt,this._manager=new h(lt.url,{httpHeaders:lt.httpHeaders,withCredentials:lt.withCredentials}),this._rangeChunkSize=lt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(lt){const dt=this._rangeRequestReaders.indexOf(lt);dt>=0&&this._rangeRequestReaders.splice(dt,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $(this._manager,this._source),this._fullRequestReader}getRangeReader(lt,dt){const ft=new ct(this._manager,lt,dt);return ft.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ft),ft}cancelAllRequests(lt){var dt;(dt=this._fullRequestReader)==null||dt.cancel(lt);for(const ft of this._rangeRequestReaders.slice(0))ft.cancel(lt)}}s.PDFNetworkStream=g;class ${constructor(lt,dt){this._manager=lt;const ft={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=dt.url,this._fullRequestId=lt.requestFull(ft),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=dt.disableRange||!1,this._contentLength=dt.length,this._rangeChunkSize=dt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const lt=this._fullRequestId,dt=this._manager.getRequestXhr(lt),ft=_=>dt.getResponseHeader(_),{allowRangeRequests:at,suggestedLength:b}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:ft,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});at&&(this._isRangeSupported=!0),this._contentLength=b||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(ft),this._isRangeSupported&&this._manager.abortRequest(lt),this._headersReceivedCapability.resolve()}_onDone(lt){if(lt&&(this._requests.length>0?this._requests.shift().resolve({value:lt.chunk,done:!1}):this._cachedChunks.push(lt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const dt of this._requests)dt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(lt){this._storedError=(0,o.createResponseStatusError)(lt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const dt of this._requests)dt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(lt){var dt;(dt=this.onProgress)==null||dt.call(this,{loaded:lt.loaded,total:lt.lengthComputable?lt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const lt=new a.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0,this._headersReceivedCapability.reject(lt);for(const dt of this._requests)dt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ct{constructor(lt,dt,ft){this._manager=lt;const at={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=lt.url,this._requestId=lt.requestRange(dt,ft,at),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var lt;(lt=this.onClosed)==null||lt.call(this,this)}_onDone(lt){const dt=lt.chunk;this._requests.length>0?this._requests.shift().resolve({value:dt,done:!1}):this._queuedChunk=dt,this._done=!0;for(const ft of this._requests)ft.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(lt){this._storedError=(0,o.createResponseStatusError)(lt,this._url);for(const dt of this._requests)dt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(lt){var dt;this.isStreamingSupported||(dt=this.onProgress)==null||dt.call(this,{loaded:lt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const dt=this._queuedChunk;return this._queuedChunk=null,{value:dt,done:!1}}if(this._done)return{value:void 0,done:!0};const lt=new a.PromiseCapability;return this._requests.push(lt),lt.promise}cancel(lt){this._done=!0;for(const dt of this._requests)dt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var a=i(1),o=i(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(ft){const at=require$$5,b=at.parse(ft);return b.protocol==="file:"||b.host?b:/^[a-z]:[/\\]/i.test(ft)?at.parse(`file:///${ft}`):(b.host||(b.protocol="file:"),b)}class j{constructor(at){this.source=at,this.url=d(at.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&at.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var at;return((at=this._fullRequestReader)==null?void 0:at._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new lt(this):new ct(this),this._fullRequestReader}getRangeReader(at,b){if(b<=this._progressiveDataLength)return null;const _=this.isFsUrl?new dt(this,at,b):new ut(this,at,b);return this._rangeRequestReaders.push(_),_}cancelAllRequests(at){var b;(b=this._fullRequestReader)==null||b.cancel(at);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(at)}}s.PDFNodeStream=j;class h{constructor(at){this._url=at.url,this._done=!1,this._storedError=null,this.onProgress=null;const b=at.source;this._contentLength=b.length,this._loaded=0,this._filename=null,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const at=this._readableStream.read();return at===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=at.length,(_=this.onProgress)==null||_.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(at).buffer,done:!1})}cancel(at){if(!this._readableStream){this._error(at);return}this._readableStream.destroy(at)}_error(at){this._storedError=at,this._readCapability.resolve()}_setReadableStream(at){this._readableStream=at,at.on("readable",()=>{this._readCapability.resolve()}),at.on("end",()=>{at.destroy(),this._done=!0,this._readCapability.resolve()}),at.on("error",b=>{this._error(b)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(at){this._url=at.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const b=at.source;this._isStreamingSupported=!b.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var _;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const at=this._readableStream.read();return at===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=at.length,(_=this.onProgress)==null||_.call(this,{loaded:this._loaded}),{value:new Uint8Array(at).buffer,done:!1})}cancel(at){if(!this._readableStream){this._error(at);return}this._readableStream.destroy(at)}_error(at){this._storedError=at,this._readCapability.resolve()}_setReadableStream(at){this._readableStream=at,at.on("readable",()=>{this._readCapability.resolve()}),at.on("end",()=>{at.destroy(),this._done=!0,this._readCapability.resolve()}),at.on("error",b=>{this._error(b)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function $(ft,at){return{protocol:ft.protocol,auth:ft.auth,host:ft.hostname,port:ft.port,path:ft.path,method:"GET",headers:at}}class ct extends h{constructor(at){super(at);const b=_=>{if(_.statusCode===404){const ht=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ht,this._headersCapability.reject(ht);return}this._headersCapability.resolve(),this._setReadableStream(_);const it=ht=>this._readableStream.headers[ht.toLowerCase()],{allowRangeRequests:nt,suggestedLength:st}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:it,isHttp:at.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=nt,this._contentLength=st||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(it)};if(this._request=null,this._url.protocol==="http:"){const _=require$$5;this._request=_.request($(this._url,at.httpHeaders),b)}else{const _=require$$5;this._request=_.request($(this._url,at.httpHeaders),b)}this._request.on("error",_=>{this._storedError=_,this._headersCapability.reject(_)}),this._request.end()}}class ut extends g{constructor(at,b,_){super(at),this._httpHeaders={};for(const nt in at.httpHeaders){const st=at.httpHeaders[nt];st!==void 0&&(this._httpHeaders[nt]=st)}this._httpHeaders.Range=`bytes=${b}-${_-1}`;const it=nt=>{if(nt.statusCode===404){const st=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=st;return}this._setReadableStream(nt)};if(this._request=null,this._url.protocol==="http:"){const nt=require$$5;this._request=nt.request($(this._url,this._httpHeaders),it)}else{const nt=require$$5;this._request=nt.request($(this._url,this._httpHeaders),it)}this._request.on("error",nt=>{this._storedError=nt}),this._request.end()}}class lt extends h{constructor(at){super(at);let b=decodeURIComponent(this._url.path);c.test(this._url.href)&&(b=b.replace(/^\//,""));const _=require$$5;_.lstat(b,(it,nt)=>{if(it){it.code==="ENOENT"&&(it=new a.MissingPDFException(`Missing PDF "${b}".`)),this._storedError=it,this._headersCapability.reject(it);return}this._contentLength=nt.size,this._setReadableStream(_.createReadStream(b)),this._headersCapability.resolve()})}}class dt extends g{constructor(at,b,_){super(at);let it=decodeURIComponent(this._url.path);c.test(this._url.href)&&(it=it.replace(/^\//,""));const nt=require$$5;this._setReadableStream(nt.createReadStream(it,{start:b,end:_-1}))}}},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var a=i(6),o=i(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",j="http://www.w3.org/1999/xlink",h=["butt","round","square"],g=["miter","round","bevel"],$=function(nt,st="",ht=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ht)return URL.createObjectURL(new Blob([nt],{type:st}));const rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let _e=`data:${st};base64,`;for(let ot=0,xt=nt.length;ot<xt;ot+=3){const et=nt[ot]&255,yt=nt[ot+1]&255,St=nt[ot+2]&255,It=et>>2,Lt=(et&3)<<4|yt>>4,Ut=ot+1<xt?(yt&15)<<2|St>>6:64,Ft=ot+2<xt?St&63:64;_e+=rt[It]+rt[Lt]+rt[Ut]+rt[Ft]}return _e},ct=function(){const nt=new Uint8Array([137,80,78,71,13,10,26,10]),st=12,ht=new Int32Array(256);for(let St=0;St<256;St++){let It=St;for(let Lt=0;Lt<8;Lt++)It=It&1?3988292384^It>>1&2147483647:It>>1&2147483647;ht[St]=It}function rt(St,It,Lt){let Ut=-1;for(let Ft=It;Ft<Lt;Ft++){const _t=(Ut^St[Ft])&255,vt=ht[_t];Ut=Ut>>>8^vt}return Ut^-1}function _e(St,It,Lt,Ut){let Ft=Ut;const _t=It.length;Lt[Ft]=_t>>24&255,Lt[Ft+1]=_t>>16&255,Lt[Ft+2]=_t>>8&255,Lt[Ft+3]=_t&255,Ft+=4,Lt[Ft]=St.charCodeAt(0)&255,Lt[Ft+1]=St.charCodeAt(1)&255,Lt[Ft+2]=St.charCodeAt(2)&255,Lt[Ft+3]=St.charCodeAt(3)&255,Ft+=4,Lt.set(It,Ft),Ft+=It.length;const vt=rt(Lt,Ut+4,Ft);Lt[Ft]=vt>>24&255,Lt[Ft+1]=vt>>16&255,Lt[Ft+2]=vt>>8&255,Lt[Ft+3]=vt&255}function ot(St,It,Lt){let Ut=1,Ft=0;for(let _t=It;_t<Lt;++_t)Ut=(Ut+(St[_t]&255))%65521,Ft=(Ft+Ut)%65521;return Ft<<16|Ut}function xt(St){if(!o.isNodeJS)return et(St);try{const It=parseInt(process.versions.node)>=8?St:Buffer.from(St),Lt=require$$5.deflateSync(It,{level:9});return Lt instanceof Uint8Array?Lt:new Uint8Array(Lt)}catch(It){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+It)}return et(St)}function et(St){let It=St.length;const Lt=65535,Ut=Math.ceil(It/Lt),Ft=new Uint8Array(2+It+Ut*5+4);let _t=0;Ft[_t++]=120,Ft[_t++]=156;let vt=0;for(;It>Lt;)Ft[_t++]=0,Ft[_t++]=255,Ft[_t++]=255,Ft[_t++]=0,Ft[_t++]=0,Ft.set(St.subarray(vt,vt+Lt),_t),_t+=Lt,vt+=Lt,It-=Lt;Ft[_t++]=1,Ft[_t++]=It&255,Ft[_t++]=It>>8&255,Ft[_t++]=~It&65535&255,Ft[_t++]=(~It&65535)>>8&255,Ft.set(St.subarray(vt),_t),_t+=St.length-vt;const At=ot(St,0,St.length);return Ft[_t++]=At>>24&255,Ft[_t++]=At>>16&255,Ft[_t++]=At>>8&255,Ft[_t++]=At&255,Ft}function yt(St,It,Lt,Ut){const Ft=St.width,_t=St.height;let vt,At,Nt;const wt=St.data;switch(It){case o.ImageKind.GRAYSCALE_1BPP:At=0,vt=1,Nt=Ft+7>>3;break;case o.ImageKind.RGB_24BPP:At=2,vt=8,Nt=Ft*3;break;case o.ImageKind.RGBA_32BPP:At=6,vt=8,Nt=Ft*4;break;default:throw new Error("invalid format")}const pt=new Uint8Array((1+Nt)*_t);let mt=0,Et=0;for(let Tt=0;Tt<_t;++Tt)pt[mt++]=0,pt.set(wt.subarray(Et,Et+Nt),mt),Et+=Nt,mt+=Nt;if(It===o.ImageKind.GRAYSCALE_1BPP&&Ut){mt=0;for(let Tt=0;Tt<_t;Tt++){mt++;for(let $t=0;$t<Nt;$t++)pt[mt++]^=255}}const kt=new Uint8Array([Ft>>24&255,Ft>>16&255,Ft>>8&255,Ft&255,_t>>24&255,_t>>16&255,_t>>8&255,_t&255,vt,At,0,0,0]),jt=xt(pt),Ct=nt.length+st*3+kt.length+jt.length,zt=new Uint8Array(Ct);let Xt=0;return zt.set(nt,Xt),Xt+=nt.length,_e("IHDR",kt,zt,Xt),Xt+=st+kt.length,_e("IDATA",jt,zt,Xt),Xt+=st+jt.length,_e("IEND",new Uint8Array(0),zt,Xt),$(zt,"image/png",Lt)}return function(It,Lt,Ut){const Ft=It.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:It.kind;return yt(It,Ft,Lt,Ut)}}();class ut{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(st,ht){this.x=st,this.y=ht}}function lt(nt){let st=[];const ht=[];for(const rt of nt){if(rt.fn==="save"){st.push({fnId:92,fn:"group",items:[]}),ht.push(st),st=st.at(-1).items;continue}rt.fn==="restore"?st=ht.pop():st.push(rt)}return st}function dt(nt){if(Number.isInteger(nt))return nt.toString();const st=nt.toFixed(10);let ht=st.length-1;if(st[ht]!=="0")return st;do ht--;while(st[ht]==="0");return st.substring(0,st[ht]==="."?ht:ht+1)}function ft(nt){if(nt[4]===0&&nt[5]===0){if(nt[1]===0&&nt[2]===0)return nt[0]===1&&nt[3]===1?"":`scale(${dt(nt[0])} ${dt(nt[3])})`;if(nt[0]===nt[3]&&nt[1]===-nt[2]){const st=Math.acos(nt[0])*180/Math.PI;return`rotate(${dt(st)})`}}else if(nt[0]===1&&nt[1]===0&&nt[2]===0&&nt[3]===1)return`translate(${dt(nt[4])} ${dt(nt[5])})`;return`matrix(${dt(nt[0])} ${dt(nt[1])} ${dt(nt[2])} ${dt(nt[3])} ${dt(nt[4])} ${dt(nt[5])})`}let at=0,b=0,_=0;class it{constructor(st,ht,rt=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new ut,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=st,this.objs=ht,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!rt,this._operatorIdMapping=[];for(const _e in o.OPS)this._operatorIdMapping[o.OPS[_e]]=_e}getObject(st,ht=null){return typeof st=="string"?st.startsWith("g_")?this.commonObjs.get(st):this.objs.get(st):ht}save(){this.transformStack.push(this.transformMatrix);const st=this.current;this.extraStack.push(st),this.current=st.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(st){this.save(),this.executeOpTree(st),this.restore()}loadDependencies(st){const ht=st.fnArray,rt=st.argsArray;for(let _e=0,ot=ht.length;_e<ot;_e++)if(ht[_e]===o.OPS.dependency)for(const xt of rt[_e]){const et=xt.startsWith("g_")?this.commonObjs:this.objs,yt=new Promise(St=>{et.get(xt,St)});this.current.dependencies.push(yt)}return Promise.all(this.current.dependencies)}transform(st,ht,rt,_e,ot,xt){const et=[st,ht,rt,_e,ot,xt];this.transformMatrix=o.Util.transform(this.transformMatrix,et),this.tgrp=null}getSVG(st,ht){this.viewport=ht;const rt=this._initialize(ht);return this.loadDependencies(st).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(st)),rt))}convertOpList(st){const ht=this._operatorIdMapping,rt=st.argsArray,_e=st.fnArray,ot=[];for(let xt=0,et=_e.length;xt<et;xt++){const yt=_e[xt];ot.push({fnId:yt,fn:ht[yt],args:rt[xt]})}return lt(ot)}executeOpTree(st){for(const ht of st){const rt=ht.fn,_e=ht.fnId,ot=ht.args;switch(_e|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(ot);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(ot[0],ot[1]);break;case o.OPS.setFont:this.setFont(ot);break;case o.OPS.showText:this.showText(ot[0]);break;case o.OPS.showSpacedText:this.showText(ot[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(ot[0],ot[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(ot[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(ot[0]);break;case o.OPS.setHScale:this.setHScale(ot[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]);break;case o.OPS.setTextRise:this.setTextRise(ot[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(ot[0]);break;case o.OPS.setLineWidth:this.setLineWidth(ot[0]);break;case o.OPS.setLineJoin:this.setLineJoin(ot[0]);break;case o.OPS.setLineCap:this.setLineCap(ot[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(ot[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(ot[0],ot[1],ot[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ot[0],ot[1],ot[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(ot);break;case o.OPS.setFillColorN:this.setFillColorN(ot);break;case o.OPS.shadingFill:this.shadingFill(ot[0]);break;case o.OPS.setDash:this.setDash(ot[0],ot[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(ot[0]);break;case o.OPS.setFlatness:this.setFlatness(ot[0]);break;case o.OPS.setGState:this.setGState(ot[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(ot[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ot[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ot[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ot[0],ot[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5]);break;case o.OPS.constructPath:this.constructPath(ot[0],ot[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(ht.items);break;default:(0,o.warn)(`Unimplemented operator ${rt}`);break}}}setWordSpacing(st){this.current.wordSpacing=st}setCharSpacing(st){this.current.charSpacing=st}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(st,ht,rt,_e,ot,xt){const et=this.current;et.textMatrix=et.lineMatrix=[st,ht,rt,_e,ot,xt],et.textMatrixScale=Math.hypot(st,ht),et.x=et.lineX=0,et.y=et.lineY=0,et.xcoords=[],et.ycoords=[],et.tspan=this.svgFactory.createElement("svg:tspan"),et.tspan.setAttributeNS(null,"font-family",et.fontFamily),et.tspan.setAttributeNS(null,"font-size",`${dt(et.fontSize)}px`),et.tspan.setAttributeNS(null,"y",dt(-et.y)),et.txtElement=this.svgFactory.createElement("svg:text"),et.txtElement.append(et.tspan)}beginText(){const st=this.current;st.x=st.lineX=0,st.y=st.lineY=0,st.textMatrix=o.IDENTITY_MATRIX,st.lineMatrix=o.IDENTITY_MATRIX,st.textMatrixScale=1,st.tspan=this.svgFactory.createElement("svg:tspan"),st.txtElement=this.svgFactory.createElement("svg:text"),st.txtgrp=this.svgFactory.createElement("svg:g"),st.xcoords=[],st.ycoords=[]}moveText(st,ht){const rt=this.current;rt.x=rt.lineX+=st,rt.y=rt.lineY+=ht,rt.xcoords=[],rt.ycoords=[],rt.tspan=this.svgFactory.createElement("svg:tspan"),rt.tspan.setAttributeNS(null,"font-family",rt.fontFamily),rt.tspan.setAttributeNS(null,"font-size",`${dt(rt.fontSize)}px`),rt.tspan.setAttributeNS(null,"y",dt(-rt.y))}showText(st){const ht=this.current,rt=ht.font,_e=ht.fontSize;if(_e===0)return;const ot=ht.fontSizeScale,xt=ht.charSpacing,et=ht.wordSpacing,yt=ht.fontDirection,St=ht.textHScale*yt,It=rt.vertical,Lt=It?1:-1,Ut=rt.defaultVMetrics,Ft=_e*ht.fontMatrix[0];let _t=0;for(const Nt of st){if(Nt===null){_t+=yt*et;continue}else if(typeof Nt=="number"){_t+=Lt*Nt*_e/1e3;continue}const wt=(Nt.isSpace?et:0)+xt,pt=Nt.fontChar;let mt,Et,kt=Nt.width;if(It){let Ct;const zt=Nt.vmetric||Ut;Ct=Nt.vmetric?zt[1]:kt*.5,Ct=-Ct*Ft;const Xt=zt[2]*Ft;kt=zt?-zt[0]:kt,mt=Ct/ot,Et=(_t+Xt)/ot}else mt=_t/ot,Et=0;(Nt.isInFont||rt.missingFile)&&(ht.xcoords.push(ht.x+mt),It&&ht.ycoords.push(-ht.y+Et),ht.tspan.textContent+=pt);const jt=It?kt*Ft-wt*yt:kt*Ft+wt*yt;_t+=jt}ht.tspan.setAttributeNS(null,"x",ht.xcoords.map(dt).join(" ")),It?ht.tspan.setAttributeNS(null,"y",ht.ycoords.map(dt).join(" ")):ht.tspan.setAttributeNS(null,"y",dt(-ht.y)),It?ht.y-=_t:ht.x+=_t*St,ht.tspan.setAttributeNS(null,"font-family",ht.fontFamily),ht.tspan.setAttributeNS(null,"font-size",`${dt(ht.fontSize)}px`),ht.fontStyle!==c.fontStyle&&ht.tspan.setAttributeNS(null,"font-style",ht.fontStyle),ht.fontWeight!==c.fontWeight&&ht.tspan.setAttributeNS(null,"font-weight",ht.fontWeight);const vt=ht.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(vt===o.TextRenderingMode.FILL||vt===o.TextRenderingMode.FILL_STROKE?(ht.fillColor!==c.fillColor&&ht.tspan.setAttributeNS(null,"fill",ht.fillColor),ht.fillAlpha<1&&ht.tspan.setAttributeNS(null,"fill-opacity",ht.fillAlpha)):ht.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?ht.tspan.setAttributeNS(null,"fill","transparent"):ht.tspan.setAttributeNS(null,"fill","none"),vt===o.TextRenderingMode.STROKE||vt===o.TextRenderingMode.FILL_STROKE){const Nt=1/(ht.textMatrixScale||1);this._setStrokeAttributes(ht.tspan,Nt)}let At=ht.textMatrix;ht.textRise!==0&&(At=At.slice(),At[5]+=ht.textRise),ht.txtElement.setAttributeNS(null,"transform",`${ft(At)} scale(${dt(St)}, -1)`),ht.txtElement.setAttributeNS(d,"xml:space","preserve"),ht.txtElement.append(ht.tspan),ht.txtgrp.append(ht.txtElement),this._ensureTransformGroup().append(ht.txtElement)}setLeadingMoveText(st,ht){this.setLeading(-ht),this.moveText(st,ht)}addFontStyle(st){if(!st.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ht=$(st.data,st.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${st.loadedName}"; src: url(${ht}); }
`}setFont(st){const ht=this.current,rt=this.commonObjs.get(st[0]);let _e=st[1];ht.font=rt,this.embedFonts&&!rt.missingFile&&!this.embeddedFonts[rt.loadedName]&&(this.addFontStyle(rt),this.embeddedFonts[rt.loadedName]=rt),ht.fontMatrix=rt.fontMatrix||o.FONT_IDENTITY_MATRIX;let ot="normal";rt.black?ot="900":rt.bold&&(ot="bold");const xt=rt.italic?"italic":"normal";_e<0?(_e=-_e,ht.fontDirection=-1):ht.fontDirection=1,ht.fontSize=_e,ht.fontFamily=rt.loadedName,ht.fontWeight=ot,ht.fontStyle=xt,ht.tspan=this.svgFactory.createElement("svg:tspan"),ht.tspan.setAttributeNS(null,"y",dt(-ht.y)),ht.xcoords=[],ht.ycoords=[]}endText(){var ht;const st=this.current;st.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&((ht=st.txtElement)!=null&&ht.hasChildNodes())&&(st.element=st.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(st){st>0&&(this.current.lineWidth=st)}setLineCap(st){this.current.lineCap=h[st]}setLineJoin(st){this.current.lineJoin=g[st]}setMiterLimit(st){this.current.miterLimit=st}setStrokeAlpha(st){this.current.strokeAlpha=st}setStrokeRGBColor(st,ht,rt){this.current.strokeColor=o.Util.makeHexColor(st,ht,rt)}setFillAlpha(st){this.current.fillAlpha=st}setFillRGBColor(st,ht,rt){this.current.fillColor=o.Util.makeHexColor(st,ht,rt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(st){this.current.strokeColor=this._makeColorN_Pattern(st)}setFillColorN(st){this.current.fillColor=this._makeColorN_Pattern(st)}shadingFill(st){const{width:ht,height:rt}=this.viewport,_e=o.Util.inverseTransform(this.transformMatrix),[ot,xt,et,yt]=o.Util.getAxialAlignedBoundingBox([0,0,ht,rt],_e),St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x",ot),St.setAttributeNS(null,"y",xt),St.setAttributeNS(null,"width",et-ot),St.setAttributeNS(null,"height",yt-xt),St.setAttributeNS(null,"fill",this._makeShadingPattern(st)),this.current.fillAlpha<1&&St.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(St)}_makeColorN_Pattern(st){return st[0]==="TilingPattern"?this._makeTilingPattern(st):this._makeShadingPattern(st)}_makeTilingPattern(st){const ht=st[1],rt=st[2],_e=st[3]||o.IDENTITY_MATRIX,[ot,xt,et,yt]=st[4],St=st[5],It=st[6],Lt=st[7],Ut=`shading${_++}`,[Ft,_t,vt,At]=o.Util.normalizeRect([...o.Util.applyTransform([ot,xt],_e),...o.Util.applyTransform([et,yt],_e)]),[Nt,wt]=o.Util.singularValueDecompose2dScale(_e),pt=St*Nt,mt=It*wt,Et=this.svgFactory.createElement("svg:pattern");Et.setAttributeNS(null,"id",Ut),Et.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Et.setAttributeNS(null,"width",pt),Et.setAttributeNS(null,"height",mt),Et.setAttributeNS(null,"x",`${Ft}`),Et.setAttributeNS(null,"y",`${_t}`);const kt=this.svg,jt=this.transformMatrix,Ct=this.current.fillColor,zt=this.current.strokeColor,Xt=this.svgFactory.create(vt-Ft,At-_t);if(this.svg=Xt,this.transformMatrix=_e,Lt===2){const Tt=o.Util.makeHexColor(...ht);this.current.fillColor=Tt,this.current.strokeColor=Tt}return this.executeOpTree(this.convertOpList(rt)),this.svg=kt,this.transformMatrix=jt,this.current.fillColor=Ct,this.current.strokeColor=zt,Et.append(Xt.childNodes[0]),this.defs.append(Et),`url(#${Ut})`}_makeShadingPattern(st){switch(typeof st=="string"&&(st=this.objs.get(st)),st[0]){case"RadialAxial":const ht=`shading${_++}`,rt=st[3];let _e;switch(st[1]){case"axial":const ot=st[4],xt=st[5];_e=this.svgFactory.createElement("svg:linearGradient"),_e.setAttributeNS(null,"id",ht),_e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_e.setAttributeNS(null,"x1",ot[0]),_e.setAttributeNS(null,"y1",ot[1]),_e.setAttributeNS(null,"x2",xt[0]),_e.setAttributeNS(null,"y2",xt[1]);break;case"radial":const et=st[4],yt=st[5],St=st[6],It=st[7];_e=this.svgFactory.createElement("svg:radialGradient"),_e.setAttributeNS(null,"id",ht),_e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),_e.setAttributeNS(null,"cx",yt[0]),_e.setAttributeNS(null,"cy",yt[1]),_e.setAttributeNS(null,"r",It),_e.setAttributeNS(null,"fx",et[0]),_e.setAttributeNS(null,"fy",et[1]),_e.setAttributeNS(null,"fr",St);break;default:throw new Error(`Unknown RadialAxial type: ${st[1]}`)}for(const ot of rt){const xt=this.svgFactory.createElement("svg:stop");xt.setAttributeNS(null,"offset",ot[0]),xt.setAttributeNS(null,"stop-color",ot[1]),_e.append(xt)}return this.defs.append(_e),`url(#${ht})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${st[0]}`)}}setDash(st,ht){this.current.dashArray=st,this.current.dashPhase=ht}constructPath(st,ht){const rt=this.current;let _e=rt.x,ot=rt.y,xt=[],et=0;for(const yt of st)switch(yt|0){case o.OPS.rectangle:_e=ht[et++],ot=ht[et++];const St=ht[et++],It=ht[et++],Lt=_e+St,Ut=ot+It;xt.push("M",dt(_e),dt(ot),"L",dt(Lt),dt(ot),"L",dt(Lt),dt(Ut),"L",dt(_e),dt(Ut),"Z");break;case o.OPS.moveTo:_e=ht[et++],ot=ht[et++],xt.push("M",dt(_e),dt(ot));break;case o.OPS.lineTo:_e=ht[et++],ot=ht[et++],xt.push("L",dt(_e),dt(ot));break;case o.OPS.curveTo:_e=ht[et+4],ot=ht[et+5],xt.push("C",dt(ht[et]),dt(ht[et+1]),dt(ht[et+2]),dt(ht[et+3]),dt(_e),dt(ot)),et+=6;break;case o.OPS.curveTo2:xt.push("C",dt(_e),dt(ot),dt(ht[et]),dt(ht[et+1]),dt(ht[et+2]),dt(ht[et+3])),_e=ht[et+2],ot=ht[et+3],et+=4;break;case o.OPS.curveTo3:_e=ht[et+2],ot=ht[et+3],xt.push("C",dt(ht[et]),dt(ht[et+1]),dt(_e),dt(ot),dt(_e),dt(ot)),et+=4;break;case o.OPS.closePath:xt.push("Z");break}xt=xt.join(" "),rt.path&&st.length>0&&st[0]!==o.OPS.rectangle&&st[0]!==o.OPS.moveTo?xt=rt.path.getAttributeNS(null,"d")+xt:(rt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(rt.path)),rt.path.setAttributeNS(null,"d",xt),rt.path.setAttributeNS(null,"fill","none"),rt.element=rt.path,rt.setCurrentPoint(_e,ot)}endPath(){const st=this.current;if(st.path=null,!this.pendingClip)return;if(!st.element){this.pendingClip=null;return}const ht=`clippath${at++}`,rt=this.svgFactory.createElement("svg:clipPath");rt.setAttributeNS(null,"id",ht),rt.setAttributeNS(null,"transform",ft(this.transformMatrix));const _e=st.element.cloneNode(!0);if(this.pendingClip==="evenodd"?_e.setAttributeNS(null,"clip-rule","evenodd"):_e.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,rt.append(_e),this.defs.append(rt),st.activeClipUrl){st.clipGroup=null;for(const ot of this.extraStack)ot.clipGroup=null;rt.setAttributeNS(null,"clip-path",st.activeClipUrl)}st.activeClipUrl=`url(#${ht})`,this.tgrp=null}clip(st){this.pendingClip=st}closePath(){const st=this.current;if(st.path){const ht=`${st.path.getAttributeNS(null,"d")}Z`;st.path.setAttributeNS(null,"d",ht)}}setLeading(st){this.current.leading=-st}setTextRise(st){this.current.textRise=st}setTextRenderingMode(st){this.current.textRenderingMode=st}setHScale(st){this.current.textHScale=st/100}setRenderingIntent(st){}setFlatness(st){}setGState(st){for(const[ht,rt]of st)switch(ht){case"LW":this.setLineWidth(rt);break;case"LC":this.setLineCap(rt);break;case"LJ":this.setLineJoin(rt);break;case"ML":this.setMiterLimit(rt);break;case"D":this.setDash(rt[0],rt[1]);break;case"RI":this.setRenderingIntent(rt);break;case"FL":this.setFlatness(rt);break;case"Font":this.setFont(rt);break;case"CA":this.setStrokeAlpha(rt);break;case"ca":this.setFillAlpha(rt);break;default:(0,o.warn)(`Unimplemented graphic state operator ${ht}`);break}}fill(){const st=this.current;st.element&&(st.element.setAttributeNS(null,"fill",st.fillColor),st.element.setAttributeNS(null,"fill-opacity",st.fillAlpha),this.endPath())}stroke(){const st=this.current;st.element&&(this._setStrokeAttributes(st.element),st.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(st,ht=1){const rt=this.current;let _e=rt.dashArray;ht!==1&&_e.length>0&&(_e=_e.map(function(ot){return ht*ot})),st.setAttributeNS(null,"stroke",rt.strokeColor),st.setAttributeNS(null,"stroke-opacity",rt.strokeAlpha),st.setAttributeNS(null,"stroke-miterlimit",dt(rt.miterLimit)),st.setAttributeNS(null,"stroke-linecap",rt.lineCap),st.setAttributeNS(null,"stroke-linejoin",rt.lineJoin),st.setAttributeNS(null,"stroke-width",dt(ht*rt.lineWidth)+"px"),st.setAttributeNS(null,"stroke-dasharray",_e.map(dt).join(" ")),st.setAttributeNS(null,"stroke-dashoffset",dt(ht*rt.dashPhase)+"px")}eoFill(){var st;(st=this.current.element)==null||st.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var st;(st=this.current.element)==null||st.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x","0"),st.setAttributeNS(null,"y","0"),st.setAttributeNS(null,"width","1px"),st.setAttributeNS(null,"height","1px"),st.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(st)}paintImageXObject(st){const ht=this.getObject(st);if(!ht){(0,o.warn)(`Dependent image with object ID ${st} is not ready yet`);return}this.paintInlineImageXObject(ht)}paintInlineImageXObject(st,ht){const rt=st.width,_e=st.height,ot=ct(st,this.forceDataSchema,!!ht),xt=this.svgFactory.createElement("svg:rect");xt.setAttributeNS(null,"x","0"),xt.setAttributeNS(null,"y","0"),xt.setAttributeNS(null,"width",dt(rt)),xt.setAttributeNS(null,"height",dt(_e)),this.current.element=xt,this.clip("nonzero");const et=this.svgFactory.createElement("svg:image");et.setAttributeNS(j,"xlink:href",ot),et.setAttributeNS(null,"x","0"),et.setAttributeNS(null,"y",dt(-_e)),et.setAttributeNS(null,"width",dt(rt)+"px"),et.setAttributeNS(null,"height",dt(_e)+"px"),et.setAttributeNS(null,"transform",`scale(${dt(1/rt)} ${dt(-1/_e)})`),ht?ht.append(et):this._ensureTransformGroup().append(et)}paintImageMaskXObject(st){const ht=this.getObject(st.data,st);if(ht.bitmap){(0,o.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const rt=this.current,_e=ht.width,ot=ht.height,xt=rt.fillColor;rt.maskId=`mask${b++}`;const et=this.svgFactory.createElement("svg:mask");et.setAttributeNS(null,"id",rt.maskId);const yt=this.svgFactory.createElement("svg:rect");yt.setAttributeNS(null,"x","0"),yt.setAttributeNS(null,"y","0"),yt.setAttributeNS(null,"width",dt(_e)),yt.setAttributeNS(null,"height",dt(ot)),yt.setAttributeNS(null,"fill",xt),yt.setAttributeNS(null,"mask",`url(#${rt.maskId})`),this.defs.append(et),this._ensureTransformGroup().append(yt),this.paintInlineImageXObject(ht,et)}paintFormXObjectBegin(st,ht){if(Array.isArray(st)&&st.length===6&&this.transform(st[0],st[1],st[2],st[3],st[4],st[5]),ht){const rt=ht[2]-ht[0],_e=ht[3]-ht[1],ot=this.svgFactory.createElement("svg:rect");ot.setAttributeNS(null,"x",ht[0]),ot.setAttributeNS(null,"y",ht[1]),ot.setAttributeNS(null,"width",dt(rt)),ot.setAttributeNS(null,"height",dt(_e)),this.current.element=ot,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(st){const ht=this.svgFactory.create(st.width,st.height),rt=this.svgFactory.createElement("svg:defs");ht.append(rt),this.defs=rt;const _e=this.svgFactory.createElement("svg:g");return _e.setAttributeNS(null,"transform",ft(st.transform)),ht.append(_e),this.svg=_e,ht}_ensureClipGroup(){if(!this.current.clipGroup){const st=this.svgFactory.createElement("svg:g");st.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(st),this.current.clipGroup=st}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ft(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=it},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class i{static textContent(o){const c=[],d={items:c,styles:Object.create(null)};function j(h){var ct;if(!h)return;let g=null;const $=h.name;if($==="#text")g=h.value;else if(i.shouldBuildText($))(ct=h==null?void 0:h.attributes)!=null&&ct.textContent?g=h.attributes.textContent:h.value&&(g=h.value);else return;if(g!==null&&c.push({str:g}),!!h.children)for(const ut of h.children)j(ut)}return j(o),d}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}s.XfaText=i},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=ft,s.updateTextLayer=at;var a=i(1),o=i(6);const c=1e5,d=30,j=.8,h=new Map;function g(b,_){let it;if(_&&a.FeatureTest.isOffscreenCanvasSupported)it=new OffscreenCanvas(b,b).getContext("2d",{alpha:!1});else{const nt=document.createElement("canvas");nt.width=nt.height=b,it=nt.getContext("2d",{alpha:!1})}return it}function $(b,_){const it=h.get(b);if(it)return it;const nt=g(d,_);nt.font=`${d}px ${b}`;const st=nt.measureText("");let ht=st.fontBoundingBoxAscent,rt=Math.abs(st.fontBoundingBoxDescent);if(ht){const ot=ht/(ht+rt);return h.set(b,ot),nt.canvas.width=nt.canvas.height=0,ot}nt.strokeStyle="red",nt.clearRect(0,0,d,d),nt.strokeText("g",0,0);let _e=nt.getImageData(0,0,d,d).data;rt=0;for(let ot=_e.length-1-3;ot>=0;ot-=4)if(_e[ot]>0){rt=Math.ceil(ot/4/d);break}nt.clearRect(0,0,d,d),nt.strokeText("A",0,d),_e=nt.getImageData(0,0,d,d).data,ht=0;for(let ot=0,xt=_e.length;ot<xt;ot+=4)if(_e[ot]>0){ht=d-Math.floor(ot/4/d);break}if(nt.canvas.width=nt.canvas.height=0,ht){const ot=ht/(ht+rt);return h.set(b,ot),ot}return h.set(b,j),j}function ct(b,_,it){const nt=document.createElement("span"),st={angle:0,canvasWidth:0,hasText:_.str!=="",hasEOL:_.hasEOL,fontSize:0};b._textDivs.push(nt);const ht=a.Util.transform(b._transform,_.transform);let rt=Math.atan2(ht[1],ht[0]);const _e=it[_.fontName];_e.vertical&&(rt+=Math.PI/2);const ot=Math.hypot(ht[2],ht[3]),xt=ot*$(_e.fontFamily,b._isOffscreenCanvasSupported);let et,yt;rt===0?(et=ht[4],yt=ht[5]-xt):(et=ht[4]+xt*Math.sin(rt),yt=ht[5]-xt*Math.cos(rt));const St="calc(var(--scale-factor)*",It=nt.style;b._container===b._rootContainer?(It.left=`${(100*et/b._pageWidth).toFixed(2)}%`,It.top=`${(100*yt/b._pageHeight).toFixed(2)}%`):(It.left=`${St}${et.toFixed(2)}px)`,It.top=`${St}${yt.toFixed(2)}px)`),It.fontSize=`${St}${ot.toFixed(2)}px)`,It.fontFamily=_e.fontFamily,st.fontSize=ot,nt.setAttribute("role","presentation"),nt.textContent=_.str,nt.dir=_.dir,b._fontInspectorEnabled&&(nt.dataset.fontName=_.fontName),rt!==0&&(st.angle=rt*(180/Math.PI));let Lt=!1;if(_.str.length>1)Lt=!0;else if(_.str!==" "&&_.transform[0]!==_.transform[3]){const Ut=Math.abs(_.transform[0]),Ft=Math.abs(_.transform[3]);Ut!==Ft&&Math.max(Ut,Ft)/Math.min(Ut,Ft)>1.5&&(Lt=!0)}Lt&&(st.canvasWidth=_e.vertical?_.height:_.width),b._textDivProperties.set(nt,st),b._isReadableStream&&b._layoutText(nt)}function ut(b){const{div:_,scale:it,properties:nt,ctx:st,prevFontSize:ht,prevFontFamily:rt}=b,{style:_e}=_;let ot="";if(nt.canvasWidth!==0&&nt.hasText){const{fontFamily:xt}=_e,{canvasWidth:et,fontSize:yt}=nt;(ht!==yt||rt!==xt)&&(st.font=`${yt*it}px ${xt}`,b.prevFontSize=yt,b.prevFontFamily=xt);const{width:St}=st.measureText(_.textContent);St>0&&(ot=`scaleX(${et*it/St})`)}nt.angle!==0&&(ot=`rotate(${nt.angle}deg) ${ot}`),ot.length>0&&(_e.transform=ot)}function lt(b){if(b._canceled)return;const _=b._textDivs,it=b._capability;if(_.length>c){it.resolve();return}if(!b._isReadableStream)for(const st of _)b._layoutText(st);it.resolve()}class dt{constructor({textContentSource:_,container:it,viewport:nt,textDivs:st,textDivProperties:ht,textContentItemsStr:rt,isOffscreenCanvasSupported:_e}){var St;this._textContentSource=_,this._isReadableStream=_ instanceof ReadableStream,this._container=this._rootContainer=it,this._textDivs=st||[],this._textContentItemsStr=rt||[],this._isOffscreenCanvasSupported=_e,this._fontInspectorEnabled=!!((St=globalThis.FontInspector)!=null&&St.enabled),this._reader=null,this._textDivProperties=ht||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:nt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g(0,_e)};const{pageWidth:ot,pageHeight:xt,pageX:et,pageY:yt}=nt.rawDims;this._transform=[1,0,0,-1,-et,yt+xt],this._pageWidth=ot,this._pageHeight=xt,(0,o.setLayerDimensions)(it,nt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(_,it){for(const nt of _){if(nt.str===void 0){if(nt.type==="beginMarkedContentProps"||nt.type==="beginMarkedContent"){const st=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),nt.id!==null&&this._container.setAttribute("id",`${nt.id}`),st.append(this._container)}else nt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(nt.str),ct(this,nt,it)}}_layoutText(_){const it=this._layoutTextParams.properties=this._textDivProperties.get(_);if(this._layoutTextParams.div=_,ut(this._layoutTextParams),it.hasText&&this._container.append(_),it.hasEOL){const nt=document.createElement("br");nt.setAttribute("role","presentation"),this._container.append(nt)}}_render(){const _=new a.PromiseCapability;let it=Object.create(null);if(this._isReadableStream){const nt=()=>{this._reader.read().then(({value:st,done:ht})=>{if(ht){_.resolve();return}Object.assign(it,st.styles),this._processItems(st.items,it),nt()},_.reject)};this._reader=this._textContentSource.getReader(),nt()}else if(this._textContentSource){const{items:nt,styles:st}=this._textContentSource;this._processItems(nt,st),_.resolve()}else throw new Error('No "textContentSource" parameter specified.');_.promise.then(()=>{it=null,lt(this)},this._capability.reject)}}s.TextLayerRenderTask=dt;function ft(b){!b.textContentSource&&(b.textContent||b.textContentStream)&&((0,o.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),b.textContentSource=b.textContent||b.textContentStream);const{container:_,viewport:it}=b,nt=getComputedStyle(_),st=nt.getPropertyValue("visibility"),ht=parseFloat(nt.getPropertyValue("--scale-factor"));st==="visible"&&(!ht||Math.abs(ht-it.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const rt=new dt(b);return rt._render(),rt}function at({container:b,viewport:_,textDivs:it,textDivProperties:nt,isOffscreenCanvasSupported:st,mustRotate:ht=!0,mustRescale:rt=!0}){if(ht&&(0,o.setLayerDimensions)(b,{rotation:_.rotation}),rt){const _e=g(0,st),xt={prevFontSize:null,prevFontFamily:null,div:null,scale:_.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:_e};for(const et of it)xt.properties=nt.get(et),xt.div=et,ut(xt)}}},(e,s,i)=>{var $,ct,ut,lt,dt,ft,at,b,_,it,nt,Ir,dr,Or,$r;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var a=i(1),o=i(4),c=i(28),d=i(33),j=i(6),h=i(34);const ot=class ot{constructor({uiManager:et,pageIndex:yt,div:St,accessibilityManager:It,annotationLayer:Lt,viewport:Ut,l10n:Ft}){Yt(this,nt);Yt(this,$);Yt(this,ct,!1);Yt(this,ut,null);Yt(this,lt,this.pointerup.bind(this));Yt(this,dt,this.pointerdown.bind(this));Yt(this,ft,new Map);Yt(this,at,!1);Yt(this,b,!1);Yt(this,_,!1);Yt(this,it);const _t=[c.FreeTextEditor,d.InkEditor,h.StampEditor];if(!ot._initialized){ot._initialized=!0;for(const vt of _t)vt.initialize(Ft)}et.registerEditorTypes(_t),Zt(this,it,et),this.pageIndex=yt,this.div=St,Zt(this,$,It),Zt(this,ut,Lt),this.viewport=Ut,tt(this,it).addLayer(this)}get isEmpty(){return tt(this,ft).size===0}updateToolbar(et){tt(this,it).updateToolbar(et)}updateMode(et=tt(this,it).getMode()){Wt(this,nt,$r).call(this),et===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),et!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",et===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",et===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",et===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(et){if(!et&&tt(this,it).getMode()!==a.AnnotationEditorType.INK)return;if(!et){for(const St of tt(this,ft).values())if(St.isEmpty()){St.setInBackground();return}}Wt(this,nt,dr).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(et){tt(this,it).setEditingState(et)}addCommands(et){tt(this,it).addCommands(et)}enable(){this.div.style.pointerEvents="auto";const et=new Set;for(const St of tt(this,ft).values())St.enableEditing(),St.annotationElementId&&et.add(St.annotationElementId);if(!tt(this,ut))return;const yt=tt(this,ut).getEditableAnnotations();for(const St of yt){if(St.hide(),tt(this,it).isDeletedAnnotationElement(St.data.id)||et.has(St.data.id))continue;const It=this.deserialize(St);It&&(this.addOrRebuild(It),It.enableEditing())}}disable(){var yt;Zt(this,_,!0),this.div.style.pointerEvents="none";const et=new Set;for(const St of tt(this,ft).values()){if(St.disableEditing(),!St.annotationElementId||St.serialize()!==null){et.add(St.annotationElementId);continue}(yt=this.getEditableAnnotation(St.annotationElementId))==null||yt.show(),St.remove()}if(tt(this,ut)){const St=tt(this,ut).getEditableAnnotations();for(const It of St){const{id:Lt}=It.data;et.has(Lt)||tt(this,it).isDeletedAnnotationElement(Lt)||It.show()}}Wt(this,nt,$r).call(this),this.isEmpty&&(this.div.hidden=!0),Zt(this,_,!1)}getEditableAnnotation(et){var yt;return((yt=tt(this,ut))==null?void 0:yt.getEditableAnnotation(et))||null}setActiveEditor(et){tt(this,it).getActive()!==et&&tt(this,it).setActiveEditor(et)}enableClick(){this.div.addEventListener("pointerdown",tt(this,dt)),this.div.addEventListener("pointerup",tt(this,lt))}disableClick(){this.div.removeEventListener("pointerdown",tt(this,dt)),this.div.removeEventListener("pointerup",tt(this,lt))}attach(et){tt(this,ft).set(et.id,et);const{annotationElementId:yt}=et;yt&&tt(this,it).isDeletedAnnotationElement(yt)&&tt(this,it).removeDeletedAnnotationElement(et)}detach(et){var yt;tt(this,ft).delete(et.id),(yt=tt(this,$))==null||yt.removePointerInTextLayer(et.contentDiv),!tt(this,_)&&et.annotationElementId&&tt(this,it).addDeletedAnnotationElement(et)}remove(et){this.detach(et),tt(this,it).removeEditor(et),et.div.contains(document.activeElement)&&setTimeout(()=>{tt(this,it).focusMainContainer()},0),et.div.remove(),et.isAttachedToDOM=!1,tt(this,b)||this.addInkEditorIfNeeded(!1)}changeParent(et){var yt;et.parent!==this&&(et.annotationElementId&&(tt(this,it).addDeletedAnnotationElement(et.annotationElementId),o.AnnotationEditor.deleteAnnotationElement(et),et.annotationElementId=null),this.attach(et),(yt=et.parent)==null||yt.detach(et),et.setParent(this),et.div&&et.isAttachedToDOM&&(et.div.remove(),this.div.append(et.div)))}add(et){if(this.changeParent(et),tt(this,it).addEditor(et),this.attach(et),!et.isAttachedToDOM){const yt=et.render();this.div.append(yt),et.isAttachedToDOM=!0}et.fixAndSetPosition(),et.onceAdded(),tt(this,it).addToAnnotationStorage(et)}moveEditorInDOM(et){var St;if(!et.isAttachedToDOM)return;const{activeElement:yt}=document;et.div.contains(yt)&&(et._focusEventsAllowed=!1,setTimeout(()=>{et.div.contains(document.activeElement)?et._focusEventsAllowed=!0:(et.div.addEventListener("focusin",()=>{et._focusEventsAllowed=!0},{once:!0}),yt.focus())},0)),et._structTreeParentId=(St=tt(this,$))==null?void 0:St.moveElementInDOM(this.div,et.div,et.contentDiv,!0)}addOrRebuild(et){et.needsToBeRebuilt()?et.rebuild():this.add(et)}addUndoableEditor(et){const yt=()=>et._uiManager.rebuild(et),St=()=>{et.remove()};this.addCommands({cmd:yt,undo:St,mustExec:!1})}getNextId(){return tt(this,it).getId()}pasteEditor(et,yt){tt(this,it).updateToolbar(et),tt(this,it).updateMode(et);const{offsetX:St,offsetY:It}=Wt(this,nt,Or).call(this),Lt=this.getNextId(),Ut=Wt(this,nt,Ir).call(this,{parent:this,id:Lt,x:St,y:It,uiManager:tt(this,it),isCentered:!0,...yt});Ut&&this.add(Ut)}deserialize(et){switch(et.annotationType??et.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(et,this,tt(this,it));case a.AnnotationEditorType.INK:return d.InkEditor.deserialize(et,this,tt(this,it));case a.AnnotationEditorType.STAMP:return h.StampEditor.deserialize(et,this,tt(this,it))}return null}addNewEditor(){Wt(this,nt,dr).call(this,Wt(this,nt,Or).call(this),!0)}setSelected(et){tt(this,it).setSelected(et)}toggleSelected(et){tt(this,it).toggleSelected(et)}isSelected(et){return tt(this,it).isSelected(et)}unselect(et){tt(this,it).unselect(et)}pointerup(et){const{isMac:yt}=a.FeatureTest.platform;if(!(et.button!==0||et.ctrlKey&&yt)&&et.target===this.div&&tt(this,at)){if(Zt(this,at,!1),!tt(this,ct)){Zt(this,ct,!0);return}if(tt(this,it).getMode()===a.AnnotationEditorType.STAMP){tt(this,it).unselectAll();return}Wt(this,nt,dr).call(this,et,!1)}}pointerdown(et){if(tt(this,at)){Zt(this,at,!1);return}const{isMac:yt}=a.FeatureTest.platform;if(et.button!==0||et.ctrlKey&&yt||et.target!==this.div)return;Zt(this,at,!0);const St=tt(this,it).getActive();Zt(this,ct,!St||St.isEmpty())}findNewParent(et,yt,St){const It=tt(this,it).findParent(yt,St);return It===null||It===this?!1:(It.changeParent(et),!0)}destroy(){var et,yt;((et=tt(this,it).getActive())==null?void 0:et.parent)===this&&(tt(this,it).commitOrRemove(),tt(this,it).setActiveEditor(null));for(const St of tt(this,ft).values())(yt=tt(this,$))==null||yt.removePointerInTextLayer(St.contentDiv),St.setParent(null),St.isAttachedToDOM=!1,St.div.remove();this.div=null,tt(this,ft).clear(),tt(this,it).removeLayer(this)}render({viewport:et}){this.viewport=et,(0,j.setLayerDimensions)(this.div,et);for(const yt of tt(this,it).getEditors(this.pageIndex))this.add(yt);this.updateMode()}update({viewport:et}){tt(this,it).commitOrRemove(),this.viewport=et,(0,j.setLayerDimensions)(this.div,{rotation:et.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:et,pageHeight:yt}=this.viewport.rawDims;return[et,yt]}};$=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap,ft=new WeakMap,at=new WeakMap,b=new WeakMap,_=new WeakMap,it=new WeakMap,nt=new WeakSet,Ir=function(et){switch(tt(this,it).getMode()){case a.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(et);case a.AnnotationEditorType.INK:return new d.InkEditor(et);case a.AnnotationEditorType.STAMP:return new h.StampEditor(et)}return null},dr=function(et,yt){const St=this.getNextId(),It=Wt(this,nt,Ir).call(this,{parent:this,id:St,x:et.offsetX,y:et.offsetY,uiManager:tt(this,it),isCentered:yt});return It&&this.add(It),It},Or=function(){const{x:et,y:yt,width:St,height:It}=this.div.getBoundingClientRect(),Lt=Math.max(0,et),Ut=Math.max(0,yt),Ft=Math.min(window.innerWidth,et+St),_t=Math.min(window.innerHeight,yt+It),vt=(Lt+Ft)/2-et,At=(Ut+_t)/2-yt,[Nt,wt]=this.viewport.rotation%180===0?[vt,At]:[At,vt];return{offsetX:Nt,offsetY:wt}},$r=function(){Zt(this,b,!0);for(const et of tt(this,ft).values())et.isEmpty()&&et.remove();Zt(this,b,!1)},In(ot,"_initialized",!1);let g=ot;s.AnnotationEditorLayer=g},(e,s,i)=>{var h,g,$,ct,ut,lt,dt,ft,at,b,ps,fs,ms,nr,Ur,gs,Br;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var a=i(1),o=i(5),c=i(4),d=i(29);const ot=class ot extends c.AnnotationEditor{constructor(yt){super({...yt,name:"freeTextEditor"});Yt(this,b);Yt(this,h,this.editorDivBlur.bind(this));Yt(this,g,this.editorDivFocus.bind(this));Yt(this,$,this.editorDivInput.bind(this));Yt(this,ct,this.editorDivKeydown.bind(this));Yt(this,ut);Yt(this,lt,"");Yt(this,dt,`${this.id}-editor`);Yt(this,ft);Yt(this,at,null);Zt(this,ut,yt.color||ot._defaultColor||c.AnnotationEditor._defaultLineColor),Zt(this,ft,yt.fontSize||ot._defaultFontSize)}static get _keyboardManager(){const yt=ot.prototype,St=Ut=>Ut.isEmpty(),It=o.AnnotationEditorUIManager.TRANSLATE_SMALL,Lt=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new o.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],yt.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],yt.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],yt._translateEmpty,{args:[-It,0],checker:St}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],yt._translateEmpty,{args:[-Lt,0],checker:St}],[["ArrowRight","mac+ArrowRight"],yt._translateEmpty,{args:[It,0],checker:St}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],yt._translateEmpty,{args:[Lt,0],checker:St}],[["ArrowUp","mac+ArrowUp"],yt._translateEmpty,{args:[0,-It],checker:St}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],yt._translateEmpty,{args:[0,-Lt],checker:St}],[["ArrowDown","mac+ArrowDown"],yt._translateEmpty,{args:[0,It],checker:St}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],yt._translateEmpty,{args:[0,Lt],checker:St}]]))}static initialize(yt){c.AnnotationEditor.initialize(yt,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const St=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(St.getPropertyValue("--freetext-padding"))}static updateDefaultParams(yt,St){switch(yt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:ot._defaultFontSize=St;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:ot._defaultColor=St;break}}updateParams(yt,St){switch(yt){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Wt(this,b,ps).call(this,St);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Wt(this,b,fs).call(this,St);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,ot._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,ot._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,tt(this,ft)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,tt(this,ut)]]}_translateEmpty(yt,St){this._uiManager.translateSelectedEditors(yt,St,!0)}getInitialTranslation(){const yt=this.parentScale;return[-ot._internalPadding*yt,-(ot._internalPadding+tt(this,ft))*yt]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",tt(this,ct)),this.editorDiv.addEventListener("focus",tt(this,g)),this.editorDiv.addEventListener("blur",tt(this,h)),this.editorDiv.addEventListener("input",tt(this,$)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",tt(this,dt)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",tt(this,ct)),this.editorDiv.removeEventListener("focus",tt(this,g)),this.editorDiv.removeEventListener("blur",tt(this,h)),this.editorDiv.removeEventListener("input",tt(this,$)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(yt){this._focusEventsAllowed&&(super.focusin(yt),yt.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var yt;if(this.width){Wt(this,b,Br).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(yt=this._initialOptions)!=null&&yt.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const yt=tt(this,lt),St=Zt(this,lt,Wt(this,b,ms).call(this).trimEnd());if(yt===St)return;const It=Lt=>{if(Zt(this,lt,Lt),!Lt){this.remove();return}Wt(this,b,Ur).call(this),this._uiManager.rebuild(this),Wt(this,b,nr).call(this)};this.addCommands({cmd:()=>{It(St)},undo:()=>{It(yt)},mustExec:!1}),Wt(this,b,nr).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(yt){this.enterInEditMode()}keydown(yt){yt.target===this.div&&yt.key==="Enter"&&(this.enterInEditMode(),yt.preventDefault())}editorDivKeydown(yt){ot._keyboardManager.exec(this,yt)}editorDivFocus(yt){this.isEditing=!0}editorDivBlur(yt){this.isEditing=!1}editorDivInput(yt){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let yt,St;this.width&&(yt=this.x,St=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",tt(this,dt)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Lt=>{var Ut;return(Ut=this.editorDiv)==null?void 0:Ut.setAttribute("aria-label",Lt)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Lt=>{var Ut;return(Ut=this.editorDiv)==null?void 0:Ut.setAttribute("default-content",Lt)}),this.editorDiv.contentEditable=!0;const{style:It}=this.editorDiv;if(It.fontSize=`calc(${tt(this,ft)}px * var(--scale-factor))`,It.color=tt(this,ut),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Lt,Ut]=this.parentDimensions;if(this.annotationElementId){const{position:Ft}=tt(this,at);let[_t,vt]=this.getInitialTranslation();[_t,vt]=this.pageTranslationToScreen(_t,vt);const[At,Nt]=this.pageDimensions,[wt,pt]=this.pageTranslation;let mt,Et;switch(this.rotation){case 0:mt=yt+(Ft[0]-wt)/At,Et=St+this.height-(Ft[1]-pt)/Nt;break;case 90:mt=yt+(Ft[0]-wt)/At,Et=St-(Ft[1]-pt)/Nt,[_t,vt]=[vt,-_t];break;case 180:mt=yt-this.width+(Ft[0]-wt)/At,Et=St-(Ft[1]-pt)/Nt,[_t,vt]=[-_t,-vt];break;case 270:mt=yt+(Ft[0]-wt-this.height*Nt)/At,Et=St+(Ft[1]-pt-this.width*At)/Nt,[_t,vt]=[-vt,_t];break}this.setAt(mt*Lt,Et*Ut,_t,vt)}else this.setAt(yt*Lt,St*Ut,this.width*Lt,this.height*Ut);Wt(this,b,Ur).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(yt,St,It){let Lt=null;if(yt instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ft,fontColor:_t},rect:vt,rotation:At,id:Nt},textContent:wt,textPosition:pt,parent:{page:{pageNumber:mt}}}=yt;if(!wt||wt.length===0)return null;Lt=yt={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(_t),fontSize:Ft,value:wt.join(`
`),position:pt,pageIndex:mt-1,rect:vt,rotation:At,id:Nt,deleted:!1}}const Ut=super.deserialize(yt,St,It);return Zt(Ut,ft,yt.fontSize),Zt(Ut,ut,a.Util.makeHexColor(...yt.color)),Zt(Ut,lt,yt.value),Ut.annotationElementId=yt.id||null,Zt(Ut,at,Lt),Ut}serialize(yt=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const St=ot._internalPadding*this.parentScale,It=this.getRect(St,St),Lt=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:tt(this,ut)),Ut={annotationType:a.AnnotationEditorType.FREETEXT,color:Lt,fontSize:tt(this,ft),value:tt(this,lt),pageIndex:this.pageIndex,rect:It,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return yt?Ut:this.annotationElementId&&!Wt(this,b,gs).call(this,Ut)?null:(Ut.id=this.annotationElementId,Ut)}};h=new WeakMap,g=new WeakMap,$=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap,ft=new WeakMap,at=new WeakMap,b=new WeakSet,ps=function(yt){const St=Lt=>{this.editorDiv.style.fontSize=`calc(${Lt}px * var(--scale-factor))`,this.translate(0,-(Lt-tt(this,ft))*this.parentScale),Zt(this,ft,Lt),Wt(this,b,nr).call(this)},It=tt(this,ft);this.addCommands({cmd:()=>{St(yt)},undo:()=>{St(It)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},fs=function(yt){const St=tt(this,ut);this.addCommands({cmd:()=>{Zt(this,ut,this.editorDiv.style.color=yt)},undo:()=>{Zt(this,ut,this.editorDiv.style.color=St)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ms=function(){const yt=this.editorDiv.getElementsByTagName("div");if(yt.length===0)return this.editorDiv.innerText;const St=[];for(const It of yt)St.push(It.innerText.replace(/\r\n?|\n/,""));return St.join(`
`)},nr=function(){const[yt,St]=this.parentDimensions;let It;if(this.isAttachedToDOM)It=this.div.getBoundingClientRect();else{const{currentLayer:Lt,div:Ut}=this,Ft=Ut.style.display;Ut.style.display="hidden",Lt.div.append(this.div),It=Ut.getBoundingClientRect(),Ut.remove(),Ut.style.display=Ft}this.rotation%180===this.parentRotation%180?(this.width=It.width/yt,this.height=It.height/St):(this.width=It.height/yt,this.height=It.width/St),this.fixAndSetPosition()},Ur=function(){if(this.editorDiv.replaceChildren(),!!tt(this,lt))for(const yt of tt(this,lt).split(`
`)){const St=document.createElement("div");St.append(yt?document.createTextNode(yt):document.createElement("br")),this.editorDiv.append(St)}},gs=function(yt){const{value:St,fontSize:It,color:Lt,rect:Ut,pageIndex:Ft}=tt(this,at);return yt.value!==St||yt.fontSize!==It||yt.rect.some((_t,vt)=>Math.abs(_t-Ut[vt])>=1)||yt.color.some((_t,vt)=>_t!==Lt[vt])||yt.pageIndex!==Ft},Br=function(yt=!1){if(!this.annotationElementId)return;if(Wt(this,b,nr).call(this),!yt&&(this.width===0||this.height===0)){setTimeout(()=>Wt(this,b,Br).call(this,!0),0);return}const St=ot._internalPadding*this.parentScale;tt(this,at).rect=this.getRect(St,St)},In(ot,"_freeTextDefaultContent",""),In(ot,"_internalPadding",0),In(ot,"_defaultColor",null),In(ot,"_defaultFontSize",10),In(ot,"_type","freetext");let j=ot;s.FreeTextEditor=j},(e,s,i)=>{var Et,jt,Vn,xs,Xt,Tt,$t,Kt,qt,rn,Ht,Vt,gt,bt,Dt,Ot,Qt,sn,on,Gt,hn,dn,ys,hr,zr,Hr,wn,Cn,Mn,cn,Jt,en,gn,Wr,Tn,Mt,an,pn,vs,Vr;Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var a=i(1),o=i(6),c=i(3),d=i(30),j=i(31),h=i(32);const g=1e3,$=9,ct=new WeakSet;function ut(mn){return{width:mn[2]-mn[0],height:mn[3]-mn[1]}}class lt{static create(Pt){switch(Pt.data.annotationType){case a.AnnotationType.LINK:return new ft(Pt);case a.AnnotationType.TEXT:return new at(Pt);case a.AnnotationType.WIDGET:switch(Pt.data.fieldType){case"Tx":return new _(Pt);case"Btn":return Pt.data.radioButton?new st(Pt):Pt.data.checkBox?new nt(Pt):new ht(Pt);case"Ch":return new rt(Pt);case"Sig":return new it(Pt)}return new b(Pt);case a.AnnotationType.POPUP:return new _e(Pt);case a.AnnotationType.FREETEXT:return new xt(Pt);case a.AnnotationType.LINE:return new et(Pt);case a.AnnotationType.SQUARE:return new yt(Pt);case a.AnnotationType.CIRCLE:return new St(Pt);case a.AnnotationType.POLYLINE:return new It(Pt);case a.AnnotationType.CARET:return new Ut(Pt);case a.AnnotationType.INK:return new Ft(Pt);case a.AnnotationType.POLYGON:return new Lt(Pt);case a.AnnotationType.HIGHLIGHT:return new _t(Pt);case a.AnnotationType.UNDERLINE:return new vt(Pt);case a.AnnotationType.SQUIGGLY:return new At(Pt);case a.AnnotationType.STRIKEOUT:return new Nt(Pt);case a.AnnotationType.STAMP:return new wt(Pt);case a.AnnotationType.FILEATTACHMENT:return new pt(Pt);default:return new dt(Pt)}}}const kt=class kt{constructor(Pt,{isRenderable:Rt=!1,ignoreBorder:Bt=!1,createQuadrilaterals:tn=!1}={}){Yt(this,Et,!1);this.isRenderable=Rt,this.data=Pt.data,this.layer=Pt.layer,this.linkService=Pt.linkService,this.downloadManager=Pt.downloadManager,this.imageResourcesPath=Pt.imageResourcesPath,this.renderForms=Pt.renderForms,this.svgFactory=Pt.svgFactory,this.annotationStorage=Pt.annotationStorage,this.enableScripting=Pt.enableScripting,this.hasJSActions=Pt.hasJSActions,this._fieldObjects=Pt.fieldObjects,this.parent=Pt.parent,Rt&&(this.container=this._createContainer(Bt)),tn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Pt,contentsObj:Rt,richText:Bt}){return!!(Pt!=null&&Pt.str||Rt!=null&&Rt.str||Bt!=null&&Bt.str)}get hasPopupData(){return kt._hasPopupData(this.data)}_createContainer(Pt){const{data:Rt,parent:{page:Bt,viewport:tn}}=this,nn=document.createElement("section");nn.setAttribute("data-annotation-id",Rt.id),this instanceof b||(nn.tabIndex=g),nn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&nn.setAttribute("aria-haspopup","dialog"),Rt.noRotate&&nn.classList.add("norotate");const{pageWidth:ln,pageHeight:un,pageX:bn,pageY:yn}=tn.rawDims;if(!Rt.rect||this instanceof _e){const{rotation:kn}=Rt;return!Rt.hasOwnCanvas&&kn!==0&&this.setRotation(kn,nn),nn}const{width:fn,height:jn}=ut(Rt.rect),vn=a.Util.normalizeRect([Rt.rect[0],Bt.view[3]-Rt.rect[1]+Bt.view[1],Rt.rect[2],Bt.view[3]-Rt.rect[3]+Bt.view[1]]);if(!Pt&&Rt.borderStyle.width>0){nn.style.borderWidth=`${Rt.borderStyle.width}px`;const kn=Rt.borderStyle.horizontalCornerRadius,Pn=Rt.borderStyle.verticalCornerRadius;if(kn>0||Pn>0){const Dn=`calc(${kn}px * var(--scale-factor)) / calc(${Pn}px * var(--scale-factor))`;nn.style.borderRadius=Dn}else if(this instanceof st){const Dn=`calc(${fn}px * var(--scale-factor)) / calc(${jn}px * var(--scale-factor))`;nn.style.borderRadius=Dn}switch(Rt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:nn.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:nn.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:nn.style.borderBottomStyle="solid";break}const Fn=Rt.borderColor||null;Fn?(Zt(this,Et,!0),nn.style.borderColor=a.Util.makeHexColor(Fn[0]|0,Fn[1]|0,Fn[2]|0)):nn.style.borderWidth=0}nn.style.left=`${100*(vn[0]-bn)/ln}%`,nn.style.top=`${100*(vn[1]-yn)/un}%`;const{rotation:Sn}=Rt;return Rt.hasOwnCanvas||Sn===0?(nn.style.width=`${100*fn/ln}%`,nn.style.height=`${100*jn/un}%`):this.setRotation(Sn,nn),nn}setRotation(Pt,Rt=this.container){if(!this.data.rect)return;const{pageWidth:Bt,pageHeight:tn}=this.parent.viewport.rawDims,{width:nn,height:ln}=ut(this.data.rect);let un,bn;Pt%180===0?(un=100*nn/Bt,bn=100*ln/tn):(un=100*ln/Bt,bn=100*nn/tn),Rt.style.width=`${un}%`,Rt.style.height=`${bn}%`,Rt.setAttribute("data-main-rotation",(360-Pt)%360)}get _commonActions(){const Pt=(Rt,Bt,tn)=>{const nn=tn.detail[Rt],ln=nn[0],un=nn.slice(1);tn.target.style[Bt]=d.ColorConverters[`${ln}_HTML`](un),this.annotationStorage.setValue(this.data.id,{[Bt]:d.ColorConverters[`${ln}_rgb`](un)})};return(0,a.shadow)(this,"_commonActions",{display:Rt=>{const{display:Bt}=Rt.detail,tn=Bt%2===1;this.container.style.visibility=tn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:tn,noPrint:Bt===1||Bt===2})},print:Rt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Rt.detail.print})},hidden:Rt=>{const{hidden:Bt}=Rt.detail;this.container.style.visibility=Bt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Bt,noView:Bt})},focus:Rt=>{setTimeout(()=>Rt.target.focus({preventScroll:!1}),0)},userName:Rt=>{Rt.target.title=Rt.detail.userName},readonly:Rt=>{Rt.target.disabled=Rt.detail.readonly},required:Rt=>{this._setRequired(Rt.target,Rt.detail.required)},bgColor:Rt=>{Pt("bgColor","backgroundColor",Rt)},fillColor:Rt=>{Pt("fillColor","backgroundColor",Rt)},fgColor:Rt=>{Pt("fgColor","color",Rt)},textColor:Rt=>{Pt("textColor","color",Rt)},borderColor:Rt=>{Pt("borderColor","borderColor",Rt)},strokeColor:Rt=>{Pt("strokeColor","borderColor",Rt)},rotation:Rt=>{const Bt=Rt.detail.rotation;this.setRotation(Bt),this.annotationStorage.setValue(this.data.id,{rotation:Bt})}})}_dispatchEventFromSandbox(Pt,Rt){const Bt=this._commonActions;for(const tn of Object.keys(Rt.detail)){const nn=Pt[tn]||Bt[tn];nn==null||nn(Rt)}}_setDefaultPropertiesFromJS(Pt){if(!this.enableScripting)return;const Rt=this.annotationStorage.getRawValue(this.data.id);if(!Rt)return;const Bt=this._commonActions;for(const[tn,nn]of Object.entries(Rt)){const ln=Bt[tn];if(ln){const un={detail:{[tn]:nn},target:Pt};ln(un),delete Rt[tn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Pt}=this.data;if(!Pt)return;const[Rt,Bt,tn,nn]=this.data.rect;if(Pt.length===1){const[,{x:Pn,y:Fn},{x:Dn,y:$n}]=Pt[0];if(tn===Pn&&nn===Fn&&Rt===Dn&&Bt===$n)return}const{style:ln}=this.container;let un;if(tt(this,Et)){const{borderColor:Pn,borderWidth:Fn}=ln;ln.borderWidth=0,un=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Pn}" stroke-width="${Fn}">`],this.container.classList.add("hasBorder")}const bn=tn-Rt,yn=nn-Bt,{svgFactory:fn}=this,jn=fn.createElement("svg");jn.classList.add("quadrilateralsContainer"),jn.setAttribute("width",0),jn.setAttribute("height",0);const vn=fn.createElement("defs");jn.append(vn);const Sn=fn.createElement("clipPath"),kn=`clippath_${this.data.id}`;Sn.setAttribute("id",kn),Sn.setAttribute("clipPathUnits","objectBoundingBox"),vn.append(Sn);for(const[,{x:Pn,y:Fn},{x:Dn,y:$n}]of Pt){const On=fn.createElement("rect"),Bn=(Dn-Rt)/bn,Hn=(nn-Fn)/yn,Wn=(Pn-Dn)/bn,es=(Fn-$n)/yn;On.setAttribute("x",Bn),On.setAttribute("y",Hn),On.setAttribute("width",Wn),On.setAttribute("height",es),Sn.append(On),un==null||un.push(`<rect vector-effect="non-scaling-stroke" x="${Bn}" y="${Hn}" width="${Wn}" height="${es}"/>`)}tt(this,Et)&&(un.push("</g></svg>')"),ln.backgroundImage=un.join("")),this.container.append(jn),this.container.style.clipPath=`url(#${kn})`}_createPopup(){const{container:Pt,data:Rt}=this;Pt.setAttribute("aria-haspopup","dialog");const Bt=new _e({data:{color:Rt.color,titleObj:Rt.titleObj,modificationDate:Rt.modificationDate,contentsObj:Rt.contentsObj,richText:Rt.richText,parentRect:Rt.rect,borderStyle:0,id:`popup_${Rt.id}`,rotation:Rt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Bt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Pt,Rt=null){const Bt=[];if(this._fieldObjects){const tn=this._fieldObjects[Pt];if(tn)for(const{page:nn,id:ln,exportValues:un}of tn){if(nn===-1||ln===Rt)continue;const bn=typeof un=="string"?un:null,yn=document.querySelector(`[data-element-id="${ln}"]`);if(yn&&!ct.has(yn)){(0,a.warn)(`_getElementsByName - element not allowed: ${ln}`);continue}Bt.push({id:ln,exportValue:bn,domElement:yn})}return Bt}for(const tn of document.getElementsByName(Pt)){const{exportValue:nn}=tn,ln=tn.getAttribute("data-element-id");ln!==Rt&&ct.has(tn)&&Bt.push({id:ln,exportValue:nn,domElement:tn})}return Bt}show(){var Pt;this.container&&(this.container.hidden=!1),(Pt=this.popup)==null||Pt.maybeShow()}hide(){var Pt;this.container&&(this.container.hidden=!0),(Pt=this.popup)==null||Pt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Pt=this.getElementsToTriggerPopup();if(Array.isArray(Pt))for(const Rt of Pt)Rt.classList.add("highlightArea");else Pt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Pt,data:{id:Rt}}=this;this.container.addEventListener("dblclick",()=>{var Bt;(Bt=this.linkService.eventBus)==null||Bt.dispatch("switchannotationeditormode",{source:this,mode:Pt,editId:Rt})})}};Et=new WeakMap;let dt=kt;class ft extends dt{constructor(Rt,Bt=null){super(Rt,{isRenderable:!0,ignoreBorder:!!(Bt!=null&&Bt.ignoreBorder),createQuadrilaterals:!0});Yt(this,jt);this.isTooltipOnly=Rt.data.isTooltipOnly}render(){const{data:Rt,linkService:Bt}=this,tn=document.createElement("a");tn.setAttribute("data-element-id",Rt.id);let nn=!1;return Rt.url?(Bt.addLinkAttributes(tn,Rt.url,Rt.newWindow),nn=!0):Rt.action?(this._bindNamedAction(tn,Rt.action),nn=!0):Rt.attachment?(this._bindAttachment(tn,Rt.attachment),nn=!0):Rt.setOCGState?(Wt(this,jt,xs).call(this,tn,Rt.setOCGState),nn=!0):Rt.dest?(this._bindLink(tn,Rt.dest),nn=!0):(Rt.actions&&(Rt.actions.Action||Rt.actions["Mouse Up"]||Rt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(tn,Rt),nn=!0),Rt.resetForm?(this._bindResetFormAction(tn,Rt.resetForm),nn=!0):this.isTooltipOnly&&!nn&&(this._bindLink(tn,""),nn=!0)),this.container.classList.add("linkAnnotation"),nn&&this.container.append(tn),this.container}_bindLink(Rt,Bt){Rt.href=this.linkService.getDestinationHash(Bt),Rt.onclick=()=>(Bt&&this.linkService.goToDestination(Bt),!1),(Bt||Bt==="")&&Wt(this,jt,Vn).call(this)}_bindNamedAction(Rt,Bt){Rt.href=this.linkService.getAnchorUrl(""),Rt.onclick=()=>(this.linkService.executeNamedAction(Bt),!1),Wt(this,jt,Vn).call(this)}_bindAttachment(Rt,Bt){Rt.href=this.linkService.getAnchorUrl(""),Rt.onclick=()=>{var tn;return(tn=this.downloadManager)==null||tn.openOrDownloadData(this.container,Bt.content,Bt.filename),!1},Wt(this,jt,Vn).call(this)}_bindJSAction(Rt,Bt){Rt.href=this.linkService.getAnchorUrl("");const tn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const nn of Object.keys(Bt.actions)){const ln=tn.get(nn);ln&&(Rt[ln]=()=>{var un;return(un=this.linkService.eventBus)==null||un.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bt.id,name:nn}}),!1})}Rt.onclick||(Rt.onclick=()=>!1),Wt(this,jt,Vn).call(this)}_bindResetFormAction(Rt,Bt){const tn=Rt.onclick;if(tn||(Rt.href=this.linkService.getAnchorUrl("")),Wt(this,jt,Vn).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),tn||(Rt.onclick=()=>!1);return}Rt.onclick=()=>{var jn;tn==null||tn();const{fields:nn,refs:ln,include:un}=Bt,bn=[];if(nn.length!==0||ln.length!==0){const vn=new Set(ln);for(const Sn of nn){const kn=this._fieldObjects[Sn]||[];for(const{id:Pn}of kn)vn.add(Pn)}for(const Sn of Object.values(this._fieldObjects))for(const kn of Sn)vn.has(kn.id)===un&&bn.push(kn)}else for(const vn of Object.values(this._fieldObjects))bn.push(...vn);const yn=this.annotationStorage,fn=[];for(const vn of bn){const{id:Sn}=vn;switch(fn.push(Sn),vn.type){case"text":{const Pn=vn.defaultValue||"";yn.setValue(Sn,{value:Pn});break}case"checkbox":case"radiobutton":{const Pn=vn.defaultValue===vn.exportValues;yn.setValue(Sn,{value:Pn});break}case"combobox":case"listbox":{const Pn=vn.defaultValue||"";yn.setValue(Sn,{value:Pn});break}default:continue}const kn=document.querySelector(`[data-element-id="${Sn}"]`);if(kn){if(!ct.has(kn)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Sn}`);continue}}else continue;kn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:fn,name:"ResetForm"}})),!1}}}jt=new WeakSet,Vn=function(){this.container.setAttribute("data-internal-link","")},xs=function(Rt,Bt){Rt.href=this.linkService.getAnchorUrl(""),Rt.onclick=()=>(this.linkService.executeSetOCGState(Bt),!1),Wt(this,jt,Vn).call(this)};class at extends dt{constructor(Pt){super(Pt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Pt=document.createElement("img");return Pt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Pt.alt="[{{type}} Annotation]",Pt.dataset.l10nId="text_annotation_type",Pt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Pt),this.container}}class b extends dt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Pt){var Rt;this.data.hasOwnCanvas&&(((Rt=Pt.previousSibling)==null?void 0:Rt.nodeName)==="CANVAS"&&(Pt.previousSibling.hidden=!0),Pt.hidden=!1)}_getKeyModifier(Pt){const{isWin:Rt,isMac:Bt}=a.FeatureTest.platform;return Rt&&Pt.ctrlKey||Bt&&Pt.metaKey}_setEventListener(Pt,Rt,Bt,tn,nn){Bt.includes("mouse")?Pt.addEventListener(Bt,ln=>{var un;(un=this.linkService.eventBus)==null||un.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:tn,value:nn(ln),shift:ln.shiftKey,modifier:this._getKeyModifier(ln)}})}):Pt.addEventListener(Bt,ln=>{var un;if(Bt==="blur"){if(!Rt.focused||!ln.relatedTarget)return;Rt.focused=!1}else if(Bt==="focus"){if(Rt.focused)return;Rt.focused=!0}nn&&((un=this.linkService.eventBus)==null||un.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:tn,value:nn(ln)}}))})}_setEventListeners(Pt,Rt,Bt,tn){var nn,ln,un;for(const[bn,yn]of Bt)(yn==="Action"||(nn=this.data.actions)!=null&&nn[yn])&&((yn==="Focus"||yn==="Blur")&&(Rt||(Rt={focused:!1})),this._setEventListener(Pt,Rt,bn,yn,tn),yn==="Focus"&&!((ln=this.data.actions)!=null&&ln.Blur)?this._setEventListener(Pt,Rt,"blur","Blur",null):yn==="Blur"&&!((un=this.data.actions)!=null&&un.Focus)&&this._setEventListener(Pt,Rt,"focus","Focus",null))}_setBackgroundColor(Pt){const Rt=this.data.backgroundColor||null;Pt.style.backgroundColor=Rt===null?"transparent":a.Util.makeHexColor(Rt[0],Rt[1],Rt[2])}_setTextStyle(Pt){const Rt=["left","center","right"],{fontColor:Bt}=this.data.defaultAppearanceData,tn=this.data.defaultAppearanceData.fontSize||$,nn=Pt.style;let ln;const un=2,bn=yn=>Math.round(10*yn)/10;if(this.data.multiLine){const yn=Math.abs(this.data.rect[3]-this.data.rect[1]-un),fn=Math.round(yn/(a.LINE_FACTOR*tn))||1,jn=yn/fn;ln=Math.min(tn,bn(jn/a.LINE_FACTOR))}else{const yn=Math.abs(this.data.rect[3]-this.data.rect[1]-un);ln=Math.min(tn,bn(yn/a.LINE_FACTOR))}nn.fontSize=`calc(${ln}px * var(--scale-factor))`,nn.color=a.Util.makeHexColor(Bt[0],Bt[1],Bt[2]),this.data.textAlignment!==null&&(nn.textAlign=Rt[this.data.textAlignment])}_setRequired(Pt,Rt){Rt?Pt.setAttribute("required",!0):Pt.removeAttribute("required"),Pt.setAttribute("aria-required",Rt)}}class _ extends b{constructor(Pt){const Rt=Pt.renderForms||!Pt.data.hasAppearance&&!!Pt.data.fieldValue;super(Pt,{isRenderable:Rt})}setPropertyOnSiblings(Pt,Rt,Bt,tn){const nn=this.annotationStorage;for(const ln of this._getElementsByName(Pt.name,Pt.id))ln.domElement&&(ln.domElement[Rt]=Bt),nn.setValue(ln.id,{[tn]:Bt})}render(){var tn,nn;const Pt=this.annotationStorage,Rt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Bt=null;if(this.renderForms){const ln=Pt.getValue(Rt,{value:this.data.fieldValue});let un=ln.value||"";const bn=Pt.getValue(Rt,{charLimit:this.data.maxLen}).charLimit;bn&&un.length>bn&&(un=un.slice(0,bn));let yn=ln.formattedValue||((tn=this.data.textContent)==null?void 0:tn.join(`
`))||null;yn&&this.data.comb&&(yn=yn.replaceAll(/\s+/g,""));const fn={userValue:un,formattedValue:yn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Bt=document.createElement("textarea"),Bt.textContent=yn??un,this.data.doNotScroll&&(Bt.style.overflowY="hidden")):(Bt=document.createElement("input"),Bt.type="text",Bt.setAttribute("value",yn??un),this.data.doNotScroll&&(Bt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Bt.hidden=!0),ct.add(Bt),Bt.setAttribute("data-element-id",Rt),Bt.disabled=this.data.readOnly,Bt.name=this.data.fieldName,Bt.tabIndex=g,this._setRequired(Bt,this.data.required),bn&&(Bt.maxLength=bn),Bt.addEventListener("input",vn=>{Pt.setValue(Rt,{value:vn.target.value}),this.setPropertyOnSiblings(Bt,"value",vn.target.value,"value"),fn.formattedValue=null}),Bt.addEventListener("resetform",vn=>{const Sn=this.data.defaultFieldValue??"";Bt.value=fn.userValue=Sn,fn.formattedValue=null});let jn=vn=>{const{formattedValue:Sn}=fn;Sn!=null&&(vn.target.value=Sn),vn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Bt.addEventListener("focus",Sn=>{if(fn.focused)return;const{target:kn}=Sn;fn.userValue&&(kn.value=fn.userValue),fn.lastCommittedValue=kn.value,fn.commitKey=1,fn.focused=!0}),Bt.addEventListener("updatefromsandbox",Sn=>{this.showElementAndHideCanvas(Sn.target);const kn={value(Pn){fn.userValue=Pn.detail.value??"",Pt.setValue(Rt,{value:fn.userValue.toString()}),Pn.target.value=fn.userValue},formattedValue(Pn){const{formattedValue:Fn}=Pn.detail;fn.formattedValue=Fn,Fn!=null&&Pn.target!==document.activeElement&&(Pn.target.value=Fn),Pt.setValue(Rt,{formattedValue:Fn})},selRange(Pn){Pn.target.setSelectionRange(...Pn.detail.selRange)},charLimit:Pn=>{var On;const{charLimit:Fn}=Pn.detail,{target:Dn}=Pn;if(Fn===0){Dn.removeAttribute("maxLength");return}Dn.setAttribute("maxLength",Fn);let $n=fn.userValue;!$n||$n.length<=Fn||($n=$n.slice(0,Fn),Dn.value=fn.userValue=$n,Pt.setValue(Rt,{value:$n}),(On=this.linkService.eventBus)==null||On.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Rt,name:"Keystroke",value:$n,willCommit:!0,commitKey:1,selStart:Dn.selectionStart,selEnd:Dn.selectionEnd}}))}};this._dispatchEventFromSandbox(kn,Sn)}),Bt.addEventListener("keydown",Sn=>{var Fn;fn.commitKey=1;let kn=-1;if(Sn.key==="Escape"?kn=0:Sn.key==="Enter"&&!this.data.multiLine?kn=2:Sn.key==="Tab"&&(fn.commitKey=3),kn===-1)return;const{value:Pn}=Sn.target;fn.lastCommittedValue!==Pn&&(fn.lastCommittedValue=Pn,fn.userValue=Pn,(Fn=this.linkService.eventBus)==null||Fn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Rt,name:"Keystroke",value:Pn,willCommit:!0,commitKey:kn,selStart:Sn.target.selectionStart,selEnd:Sn.target.selectionEnd}}))});const vn=jn;jn=null,Bt.addEventListener("blur",Sn=>{var Pn;if(!fn.focused||!Sn.relatedTarget)return;fn.focused=!1;const{value:kn}=Sn.target;fn.userValue=kn,fn.lastCommittedValue!==kn&&((Pn=this.linkService.eventBus)==null||Pn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Rt,name:"Keystroke",value:kn,willCommit:!0,commitKey:fn.commitKey,selStart:Sn.target.selectionStart,selEnd:Sn.target.selectionEnd}})),vn(Sn)}),(nn=this.data.actions)!=null&&nn.Keystroke&&Bt.addEventListener("beforeinput",Sn=>{var Hn;fn.lastCommittedValue=null;const{data:kn,target:Pn}=Sn,{value:Fn,selectionStart:Dn,selectionEnd:$n}=Pn;let On=Dn,Bn=$n;switch(Sn.inputType){case"deleteWordBackward":{const Wn=Fn.substring(0,Dn).match(/\w*[^\w]*$/);Wn&&(On-=Wn[0].length);break}case"deleteWordForward":{const Wn=Fn.substring(Dn).match(/^[^\w]*\w*/);Wn&&(Bn+=Wn[0].length);break}case"deleteContentBackward":Dn===$n&&(On-=1);break;case"deleteContentForward":Dn===$n&&(Bn+=1);break}Sn.preventDefault(),(Hn=this.linkService.eventBus)==null||Hn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Rt,name:"Keystroke",value:Fn,change:kn||"",willCommit:!1,selStart:On,selEnd:Bn}})}),this._setEventListeners(Bt,fn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Sn=>Sn.target.value)}if(jn&&Bt.addEventListener("blur",jn),this.data.comb){const Sn=(this.data.rect[2]-this.data.rect[0])/bn;Bt.classList.add("comb"),Bt.style.letterSpacing=`calc(${Sn}px * var(--scale-factor) - 1ch)`}}else Bt=document.createElement("div"),Bt.textContent=this.data.fieldValue,Bt.style.verticalAlign="middle",Bt.style.display="table-cell";return this._setTextStyle(Bt),this._setBackgroundColor(Bt),this._setDefaultPropertiesFromJS(Bt),this.container.append(Bt),this.container}}class it extends b{constructor(Pt){super(Pt,{isRenderable:!!Pt.data.hasOwnCanvas})}}class nt extends b{constructor(Pt){super(Pt,{isRenderable:Pt.renderForms})}render(){const Pt=this.annotationStorage,Rt=this.data,Bt=Rt.id;let tn=Pt.getValue(Bt,{value:Rt.exportValue===Rt.fieldValue}).value;typeof tn=="string"&&(tn=tn!=="Off",Pt.setValue(Bt,{value:tn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const nn=document.createElement("input");return ct.add(nn),nn.setAttribute("data-element-id",Bt),nn.disabled=Rt.readOnly,this._setRequired(nn,this.data.required),nn.type="checkbox",nn.name=Rt.fieldName,tn&&nn.setAttribute("checked",!0),nn.setAttribute("exportValue",Rt.exportValue),nn.tabIndex=g,nn.addEventListener("change",ln=>{const{name:un,checked:bn}=ln.target;for(const yn of this._getElementsByName(un,Bt)){const fn=bn&&yn.exportValue===Rt.exportValue;yn.domElement&&(yn.domElement.checked=fn),Pt.setValue(yn.id,{value:fn})}Pt.setValue(Bt,{value:bn})}),nn.addEventListener("resetform",ln=>{const un=Rt.defaultFieldValue||"Off";ln.target.checked=un===Rt.exportValue}),this.enableScripting&&this.hasJSActions&&(nn.addEventListener("updatefromsandbox",ln=>{const un={value(bn){bn.target.checked=bn.detail.value!=="Off",Pt.setValue(Bt,{value:bn.target.checked})}};this._dispatchEventFromSandbox(un,ln)}),this._setEventListeners(nn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ln=>ln.target.checked)),this._setBackgroundColor(nn),this._setDefaultPropertiesFromJS(nn),this.container.append(nn),this.container}}class st extends b{constructor(Pt){super(Pt,{isRenderable:Pt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Pt=this.annotationStorage,Rt=this.data,Bt=Rt.id;let tn=Pt.getValue(Bt,{value:Rt.fieldValue===Rt.buttonValue}).value;typeof tn=="string"&&(tn=tn!==Rt.buttonValue,Pt.setValue(Bt,{value:tn}));const nn=document.createElement("input");if(ct.add(nn),nn.setAttribute("data-element-id",Bt),nn.disabled=Rt.readOnly,this._setRequired(nn,this.data.required),nn.type="radio",nn.name=Rt.fieldName,tn&&nn.setAttribute("checked",!0),nn.tabIndex=g,nn.addEventListener("change",ln=>{const{name:un,checked:bn}=ln.target;for(const yn of this._getElementsByName(un,Bt))Pt.setValue(yn.id,{value:!1});Pt.setValue(Bt,{value:bn})}),nn.addEventListener("resetform",ln=>{const un=Rt.defaultFieldValue;ln.target.checked=un!=null&&un===Rt.buttonValue}),this.enableScripting&&this.hasJSActions){const ln=Rt.buttonValue;nn.addEventListener("updatefromsandbox",un=>{const bn={value:yn=>{const fn=ln===yn.detail.value;for(const jn of this._getElementsByName(yn.target.name)){const vn=fn&&jn.id===Bt;jn.domElement&&(jn.domElement.checked=vn),Pt.setValue(jn.id,{value:vn})}}};this._dispatchEventFromSandbox(bn,un)}),this._setEventListeners(nn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],un=>un.target.checked)}return this._setBackgroundColor(nn),this._setDefaultPropertiesFromJS(nn),this.container.append(nn),this.container}}class ht extends ft{constructor(Pt){super(Pt,{ignoreBorder:Pt.data.hasAppearance})}render(){const Pt=super.render();Pt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Pt.title=this.data.alternativeText);const Rt=Pt.lastChild;return this.enableScripting&&this.hasJSActions&&Rt&&(this._setDefaultPropertiesFromJS(Rt),Rt.addEventListener("updatefromsandbox",Bt=>{this._dispatchEventFromSandbox({},Bt)})),Pt}}class rt extends b{constructor(Pt){super(Pt,{isRenderable:Pt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Pt=this.annotationStorage,Rt=this.data.id,Bt=Pt.getValue(Rt,{value:this.data.fieldValue}),tn=document.createElement("select");ct.add(tn),tn.setAttribute("data-element-id",Rt),tn.disabled=this.data.readOnly,this._setRequired(tn,this.data.required),tn.name=this.data.fieldName,tn.tabIndex=g;let nn=this.data.combo&&this.data.options.length>0;this.data.combo||(tn.size=this.data.options.length,this.data.multiSelect&&(tn.multiple=!0)),tn.addEventListener("resetform",fn=>{const jn=this.data.defaultFieldValue;for(const vn of tn.options)vn.selected=vn.value===jn});for(const fn of this.data.options){const jn=document.createElement("option");jn.textContent=fn.displayValue,jn.value=fn.exportValue,Bt.value.includes(fn.exportValue)&&(jn.setAttribute("selected",!0),nn=!1),tn.append(jn)}let ln=null;if(nn){const fn=document.createElement("option");fn.value=" ",fn.setAttribute("hidden",!0),fn.setAttribute("selected",!0),tn.prepend(fn),ln=()=>{fn.remove(),tn.removeEventListener("input",ln),ln=null},tn.addEventListener("input",ln)}const un=fn=>{const jn=fn?"value":"textContent",{options:vn,multiple:Sn}=tn;return Sn?Array.prototype.filter.call(vn,kn=>kn.selected).map(kn=>kn[jn]):vn.selectedIndex===-1?null:vn[vn.selectedIndex][jn]};let bn=un(!1);const yn=fn=>{const jn=fn.target.options;return Array.prototype.map.call(jn,vn=>({displayValue:vn.textContent,exportValue:vn.value}))};return this.enableScripting&&this.hasJSActions?(tn.addEventListener("updatefromsandbox",fn=>{const jn={value(vn){ln==null||ln();const Sn=vn.detail.value,kn=new Set(Array.isArray(Sn)?Sn:[Sn]);for(const Pn of tn.options)Pn.selected=kn.has(Pn.value);Pt.setValue(Rt,{value:un(!0)}),bn=un(!1)},multipleSelection(vn){tn.multiple=!0},remove(vn){const Sn=tn.options,kn=vn.detail.remove;Sn[kn].selected=!1,tn.remove(kn),Sn.length>0&&Array.prototype.findIndex.call(Sn,Fn=>Fn.selected)===-1&&(Sn[0].selected=!0),Pt.setValue(Rt,{value:un(!0),items:yn(vn)}),bn=un(!1)},clear(vn){for(;tn.length!==0;)tn.remove(0);Pt.setValue(Rt,{value:null,items:[]}),bn=un(!1)},insert(vn){const{index:Sn,displayValue:kn,exportValue:Pn}=vn.detail.insert,Fn=tn.children[Sn],Dn=document.createElement("option");Dn.textContent=kn,Dn.value=Pn,Fn?Fn.before(Dn):tn.append(Dn),Pt.setValue(Rt,{value:un(!0),items:yn(vn)}),bn=un(!1)},items(vn){const{items:Sn}=vn.detail;for(;tn.length!==0;)tn.remove(0);for(const kn of Sn){const{displayValue:Pn,exportValue:Fn}=kn,Dn=document.createElement("option");Dn.textContent=Pn,Dn.value=Fn,tn.append(Dn)}tn.options.length>0&&(tn.options[0].selected=!0),Pt.setValue(Rt,{value:un(!0),items:yn(vn)}),bn=un(!1)},indices(vn){const Sn=new Set(vn.detail.indices);for(const kn of vn.target.options)kn.selected=Sn.has(kn.index);Pt.setValue(Rt,{value:un(!0)}),bn=un(!1)},editable(vn){vn.target.disabled=!vn.detail.editable}};this._dispatchEventFromSandbox(jn,fn)}),tn.addEventListener("input",fn=>{var vn;const jn=un(!0);Pt.setValue(Rt,{value:jn}),fn.preventDefault(),(vn=this.linkService.eventBus)==null||vn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Rt,name:"Keystroke",value:bn,changeEx:jn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(tn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],fn=>fn.target.value)):tn.addEventListener("input",function(fn){Pt.setValue(Rt,{value:un(!0)})}),this.data.combo&&this._setTextStyle(tn),this._setBackgroundColor(tn),this._setDefaultPropertiesFromJS(tn),this.container.append(tn),this.container}}class _e extends dt{constructor(Pt){const{data:Rt,elements:Bt}=Pt;super(Pt,{isRenderable:dt._hasPopupData(Rt)}),this.elements=Bt}render(){this.container.classList.add("popupAnnotation");const Pt=new ot({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Rt=[];for(const Bt of this.elements)Bt.popup=Pt,Rt.push(Bt.data.id),Bt.addHighlightArea();return this.container.setAttribute("aria-controls",Rt.map(Bt=>`${a.AnnotationPrefix}${Bt}`).join(",")),this.container}}class ot{constructor({container:Pt,color:Rt,elements:Bt,titleObj:tn,modificationDate:nn,contentsObj:ln,richText:un,parent:bn,rect:yn,parentRect:fn,open:jn}){Yt(this,dn);Yt(this,Xt,null);Yt(this,Tt,Wt(this,dn,ys).bind(this));Yt(this,$t,Wt(this,dn,Hr).bind(this));Yt(this,Kt,Wt(this,dn,zr).bind(this));Yt(this,qt,Wt(this,dn,hr).bind(this));Yt(this,rn,null);Yt(this,Ht,null);Yt(this,Vt,null);Yt(this,gt,null);Yt(this,bt,null);Yt(this,Dt,null);Yt(this,Ot,!1);Yt(this,Qt,null);Yt(this,sn,null);Yt(this,on,null);Yt(this,Gt,null);Yt(this,hn,!1);var Sn;Zt(this,Ht,Pt),Zt(this,Gt,tn),Zt(this,Vt,ln),Zt(this,on,un),Zt(this,bt,bn),Zt(this,rn,Rt),Zt(this,sn,yn),Zt(this,Dt,fn),Zt(this,gt,Bt);const vn=o.PDFDateString.toDateObject(nn);vn&&Zt(this,Xt,bn.l10n.get("annotation_date_string",{date:vn.toLocaleDateString(),time:vn.toLocaleTimeString()})),this.trigger=Bt.flatMap(kn=>kn.getElementsToTriggerPopup());for(const kn of this.trigger)kn.addEventListener("click",tt(this,qt)),kn.addEventListener("mouseenter",tt(this,Kt)),kn.addEventListener("mouseleave",tt(this,$t)),kn.classList.add("popupTriggerArea");for(const kn of Bt)(Sn=kn.container)==null||Sn.addEventListener("keydown",tt(this,Tt));tt(this,Ht).hidden=!0,jn&&Wt(this,dn,hr).call(this)}render(){if(tt(this,Qt))return;const{page:{view:Pt},viewport:{rawDims:{pageWidth:Rt,pageHeight:Bt,pageX:tn,pageY:nn}}}=tt(this,bt),ln=Zt(this,Qt,document.createElement("div"));if(ln.className="popup",tt(this,rn)){const On=ln.style.outlineColor=a.Util.makeHexColor(...tt(this,rn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ln.style.backgroundColor=`color-mix(in srgb, ${On} 30%, white)`:ln.style.backgroundColor=a.Util.makeHexColor(...tt(this,rn).map(Hn=>Math.floor(.7*(255-Hn)+Hn)))}const un=document.createElement("span");un.className="header";const bn=document.createElement("h1");if(un.append(bn),{dir:bn.dir,str:bn.textContent}=tt(this,Gt),ln.append(un),tt(this,Xt)){const On=document.createElement("span");On.classList.add("popupDate"),tt(this,Xt).then(Bn=>{On.textContent=Bn}),un.append(On)}const yn=tt(this,Vt),fn=tt(this,on);if(fn!=null&&fn.str&&(!(yn!=null&&yn.str)||yn.str===fn.str))h.XfaLayer.render({xfaHtml:fn.html,intent:"richText",div:ln}),ln.lastChild.classList.add("richText","popupContent");else{const On=this._formatContents(yn);ln.append(On)}let jn=!!tt(this,Dt),vn=jn?tt(this,Dt):tt(this,sn);for(const On of tt(this,gt))if(!vn||a.Util.intersect(On.data.rect,vn)!==null){vn=On.data.rect,jn=!0;break}const Sn=a.Util.normalizeRect([vn[0],Pt[3]-vn[1]+Pt[1],vn[2],Pt[3]-vn[3]+Pt[1]]),Pn=jn?vn[2]-vn[0]+5:0,Fn=Sn[0]+Pn,Dn=Sn[1],{style:$n}=tt(this,Ht);$n.left=`${100*(Fn-tn)/Rt}%`,$n.top=`${100*(Dn-nn)/Bt}%`,tt(this,Ht).append(ln)}_formatContents({str:Pt,dir:Rt}){const Bt=document.createElement("p");Bt.classList.add("popupContent"),Bt.dir=Rt;const tn=Pt.split(/(?:\r\n?|\n)/);for(let nn=0,ln=tn.length;nn<ln;++nn){const un=tn[nn];Bt.append(document.createTextNode(un)),nn<ln-1&&Bt.append(document.createElement("br"))}return Bt}forceHide(){Zt(this,hn,this.isVisible),tt(this,hn)&&(tt(this,Ht).hidden=!0)}maybeShow(){tt(this,hn)&&(Zt(this,hn,!1),tt(this,Ht).hidden=!1)}get isVisible(){return tt(this,Ht).hidden===!1}}Xt=new WeakMap,Tt=new WeakMap,$t=new WeakMap,Kt=new WeakMap,qt=new WeakMap,rn=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,gt=new WeakMap,bt=new WeakMap,Dt=new WeakMap,Ot=new WeakMap,Qt=new WeakMap,sn=new WeakMap,on=new WeakMap,Gt=new WeakMap,hn=new WeakMap,dn=new WeakSet,ys=function(Pt){Pt.altKey||Pt.shiftKey||Pt.ctrlKey||Pt.metaKey||(Pt.key==="Enter"||Pt.key==="Escape"&&tt(this,Ot))&&Wt(this,dn,hr).call(this)},hr=function(){Zt(this,Ot,!tt(this,Ot)),tt(this,Ot)?(Wt(this,dn,zr).call(this),tt(this,Ht).addEventListener("click",tt(this,qt)),tt(this,Ht).addEventListener("keydown",tt(this,Tt))):(Wt(this,dn,Hr).call(this),tt(this,Ht).removeEventListener("click",tt(this,qt)),tt(this,Ht).removeEventListener("keydown",tt(this,Tt)))},zr=function(){tt(this,Qt)||this.render(),this.isVisible?tt(this,Ot)&&tt(this,Ht).classList.add("focused"):(tt(this,Ht).hidden=!1,tt(this,Ht).style.zIndex=parseInt(tt(this,Ht).style.zIndex)+1e3)},Hr=function(){tt(this,Ht).classList.remove("focused"),!(tt(this,Ot)||!this.isVisible)&&(tt(this,Ht).hidden=!0,tt(this,Ht).style.zIndex=parseInt(tt(this,Ht).style.zIndex)-1e3)};class xt extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Pt.data.textContent,this.textPosition=Pt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Pt=document.createElement("div");Pt.classList.add("annotationTextContent"),Pt.setAttribute("role","comment");for(const Rt of this.textContent){const Bt=document.createElement("span");Bt.textContent=Rt,Pt.append(Bt)}this.container.append(Pt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=xt;class et extends dt{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0});Yt(this,wn,null)}render(){this.container.classList.add("lineAnnotation");const Rt=this.data,{width:Bt,height:tn}=ut(Rt.rect),nn=this.svgFactory.create(Bt,tn,!0),ln=Zt(this,wn,this.svgFactory.createElement("svg:line"));return ln.setAttribute("x1",Rt.rect[2]-Rt.lineCoordinates[0]),ln.setAttribute("y1",Rt.rect[3]-Rt.lineCoordinates[1]),ln.setAttribute("x2",Rt.rect[2]-Rt.lineCoordinates[2]),ln.setAttribute("y2",Rt.rect[3]-Rt.lineCoordinates[3]),ln.setAttribute("stroke-width",Rt.borderStyle.width||1),ln.setAttribute("stroke","transparent"),ln.setAttribute("fill","transparent"),nn.append(ln),this.container.append(nn),!Rt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,wn)}addHighlightArea(){this.container.classList.add("highlightArea")}}wn=new WeakMap;class yt extends dt{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0});Yt(this,Cn,null)}render(){this.container.classList.add("squareAnnotation");const Rt=this.data,{width:Bt,height:tn}=ut(Rt.rect),nn=this.svgFactory.create(Bt,tn,!0),ln=Rt.borderStyle.width,un=Zt(this,Cn,this.svgFactory.createElement("svg:rect"));return un.setAttribute("x",ln/2),un.setAttribute("y",ln/2),un.setAttribute("width",Bt-ln),un.setAttribute("height",tn-ln),un.setAttribute("stroke-width",ln||1),un.setAttribute("stroke","transparent"),un.setAttribute("fill","transparent"),nn.append(un),this.container.append(nn),!Rt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,Cn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cn=new WeakMap;class St extends dt{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0});Yt(this,Mn,null)}render(){this.container.classList.add("circleAnnotation");const Rt=this.data,{width:Bt,height:tn}=ut(Rt.rect),nn=this.svgFactory.create(Bt,tn,!0),ln=Rt.borderStyle.width,un=Zt(this,Mn,this.svgFactory.createElement("svg:ellipse"));return un.setAttribute("cx",Bt/2),un.setAttribute("cy",tn/2),un.setAttribute("rx",Bt/2-ln/2),un.setAttribute("ry",tn/2-ln/2),un.setAttribute("stroke-width",ln||1),un.setAttribute("stroke","transparent"),un.setAttribute("fill","transparent"),nn.append(un),this.container.append(nn),!Rt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,Mn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mn=new WeakMap;class It extends dt{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0});Yt(this,cn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Rt=this.data,{width:Bt,height:tn}=ut(Rt.rect),nn=this.svgFactory.create(Bt,tn,!0);let ln=[];for(const bn of Rt.vertices){const yn=bn.x-Rt.rect[0],fn=Rt.rect[3]-bn.y;ln.push(yn+","+fn)}ln=ln.join(" ");const un=Zt(this,cn,this.svgFactory.createElement(this.svgElementName));return un.setAttribute("points",ln),un.setAttribute("stroke-width",Rt.borderStyle.width||1),un.setAttribute("stroke","transparent"),un.setAttribute("fill","transparent"),nn.append(un),this.container.append(nn),!Rt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tt(this,cn)}addHighlightArea(){this.container.classList.add("highlightArea")}}cn=new WeakMap;class Lt extends It{constructor(Pt){super(Pt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ut extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ft extends dt{constructor(Rt){super(Rt,{isRenderable:!0,ignoreBorder:!0});Yt(this,Jt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Rt=this.data,{width:Bt,height:tn}=ut(Rt.rect),nn=this.svgFactory.create(Bt,tn,!0);for(const ln of Rt.inkLists){let un=[];for(const yn of ln){const fn=yn.x-Rt.rect[0],jn=Rt.rect[3]-yn.y;un.push(`${fn},${jn}`)}un=un.join(" ");const bn=this.svgFactory.createElement(this.svgElementName);tt(this,Jt).push(bn),bn.setAttribute("points",un),bn.setAttribute("stroke-width",Rt.borderStyle.width||1),bn.setAttribute("stroke","transparent"),bn.setAttribute("fill","transparent"),!Rt.popupRef&&this.hasPopupData&&this._createPopup(),nn.append(bn)}return this.container.append(nn),this.container}getElementsToTriggerPopup(){return tt(this,Jt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jt=new WeakMap,s.InkAnnotationElement=Ft;class _t extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class vt extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class At extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Nt extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class wt extends dt{constructor(Pt){super(Pt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=wt;class pt extends dt{constructor(Rt){var nn;super(Rt,{isRenderable:!0});Yt(this,gn);Yt(this,en,null);const{filename:Bt,content:tn}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(Bt,!0),this.content=tn,(nn=this.linkService.eventBus)==null||nn.dispatch("fileattachmentannotation",{source:this,filename:Bt,content:tn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Rt,data:Bt}=this;let tn;Bt.hasAppearance||Bt.fillAlpha===0?tn=document.createElement("div"):(tn=document.createElement("img"),tn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Bt.name)?"paperclip":"pushpin"}.svg`,Bt.fillAlpha&&Bt.fillAlpha<1&&(tn.style=`filter: opacity(${Math.round(Bt.fillAlpha*100)}%);`)),tn.addEventListener("dblclick",Wt(this,gn,Wr).bind(this)),Zt(this,en,tn);const{isMac:nn}=a.FeatureTest.platform;return Rt.addEventListener("keydown",ln=>{ln.key==="Enter"&&(nn?ln.metaKey:ln.ctrlKey)&&Wt(this,gn,Wr).call(this)}),!Bt.popupRef&&this.hasPopupData?this._createPopup():tn.classList.add("popupTriggerArea"),Rt.append(tn),Rt}getElementsToTriggerPopup(){return tt(this,en)}addHighlightArea(){this.container.classList.add("highlightArea")}}en=new WeakMap,gn=new WeakSet,Wr=function(){var Rt;(Rt=this.downloadManager)==null||Rt.openOrDownloadData(this.container,this.content,this.filename)};class mt{constructor({div:Pt,accessibilityManager:Rt,annotationCanvasMap:Bt,l10n:tn,page:nn,viewport:ln}){Yt(this,pn);Yt(this,Tn,null);Yt(this,Mt,null);Yt(this,an,new Map);this.div=Pt,Zt(this,Tn,Rt),Zt(this,Mt,Bt),this.l10n=tn,this.page=nn,this.viewport=ln,this.zIndex=0,this.l10n||(this.l10n=j.NullL10n)}async render(Pt){const{annotations:Rt}=Pt,Bt=this.div;(0,o.setLayerDimensions)(Bt,this.viewport);const tn=new Map,nn={data:null,layer:Bt,linkService:Pt.linkService,downloadManager:Pt.downloadManager,imageResourcesPath:Pt.imageResourcesPath||"",renderForms:Pt.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:Pt.annotationStorage||new c.AnnotationStorage,enableScripting:Pt.enableScripting===!0,hasJSActions:Pt.hasJSActions,fieldObjects:Pt.fieldObjects,parent:this,elements:null};for(const ln of Rt){if(ln.noHTML)continue;const un=ln.annotationType===a.AnnotationType.POPUP;if(un){const fn=tn.get(ln.id);if(!fn)continue;nn.elements=fn}else{const{width:fn,height:jn}=ut(ln.rect);if(fn<=0||jn<=0)continue}nn.data=ln;const bn=lt.create(nn);if(!bn.isRenderable)continue;if(!un&&ln.popupRef){const fn=tn.get(ln.popupRef);fn?fn.push(bn):tn.set(ln.popupRef,[bn])}bn.annotationEditorType>0&&tt(this,an).set(bn.data.id,bn);const yn=bn.render();ln.hidden&&(yn.style.visibility="hidden"),Wt(this,pn,vs).call(this,yn,ln.id)}Wt(this,pn,Vr).call(this),await this.l10n.translate(Bt)}update({viewport:Pt}){const Rt=this.div;this.viewport=Pt,(0,o.setLayerDimensions)(Rt,{rotation:Pt.rotation}),Wt(this,pn,Vr).call(this),Rt.hidden=!1}getEditableAnnotations(){return Array.from(tt(this,an).values())}getEditableAnnotation(Pt){return tt(this,an).get(Pt)}}Tn=new WeakMap,Mt=new WeakMap,an=new WeakMap,pn=new WeakSet,vs=function(Pt,Rt){var tn;const Bt=Pt.firstChild||Pt;Bt.id=`${a.AnnotationPrefix}${Rt}`,this.div.append(Pt),(tn=tt(this,Tn))==null||tn.moveElementInDOM(this.div,Pt,Bt,!1)},Vr=function(){if(!tt(this,Mt))return;const Pt=this.div;for(const[Rt,Bt]of tt(this,Mt)){const tn=Pt.querySelector(`[data-annotation-id="${Rt}"]`);if(!tn)continue;const{firstChild:nn}=tn;nn?nn.nodeName==="CANVAS"?nn.replaceWith(Bt):nn.before(Bt):tn.append(Bt)}tt(this,Mt).clear()},s.AnnotationLayer=mt},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function i(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function a(c){return Math.max(0,Math.min(255,255*c))}class o{static CMYK_G([d,j,h,g]){return["G",1-Math.min(1,.3*d+.59*h+.11*j+g)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=a(d),[d,d,d]}static G_HTML([d]){const j=i(d);return`#${j}${j}${j}`}static RGB_G([d,j,h]){return["G",.3*d+.59*j+.11*h]}static RGB_rgb(d){return d.map(a)}static RGB_HTML(d){return`#${d.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,j,h,g]){return["RGB",1-Math.min(1,d+g),1-Math.min(1,h+g),1-Math.min(1,j+g)]}static CMYK_rgb([d,j,h,g]){return[a(1-Math.min(1,d+g)),a(1-Math.min(1,h+g)),a(1-Math.min(1,j+g))]}static CMYK_HTML(d){const j=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(j)}static RGB_CMYK([d,j,h]){const g=1-d,$=1-j,ct=1-h,ut=Math.min(g,$,ct);return["CMYK",g,$,ct,ut]}}s.ColorConverters=o},(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=a;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function a(d,j){switch(d){case"find_match_count":d=`find_match_count[${j.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${j.limit===1?"one":"other"}]`;break}return i[d]||""}function o(d,j){return j?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(h,g)=>g in j?j[g]:"{{"+g+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,j=null,h=a(d,j)){return o(h,j)},async translate(d){}};s.NullL10n=c},(e,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var a=i(25);class o{static setupStorage(d,j,h,g,$){const ct=g.getValue(j,{value:null});switch(h.name){case"textarea":if(ct.value!==null&&(d.textContent=ct.value),$==="print")break;d.addEventListener("input",ut=>{g.setValue(j,{value:ut.target.value})});break;case"input":if(h.attributes.type==="radio"||h.attributes.type==="checkbox"){if(ct.value===h.attributes.xfaOn?d.setAttribute("checked",!0):ct.value===h.attributes.xfaOff&&d.removeAttribute("checked"),$==="print")break;d.addEventListener("change",ut=>{g.setValue(j,{value:ut.target.checked?ut.target.getAttribute("xfaOn"):ut.target.getAttribute("xfaOff")})})}else{if(ct.value!==null&&d.setAttribute("value",ct.value),$==="print")break;d.addEventListener("input",ut=>{g.setValue(j,{value:ut.target.value})})}break;case"select":if(ct.value!==null){d.setAttribute("value",ct.value);for(const ut of h.children)ut.attributes.value===ct.value?ut.attributes.selected=!0:ut.attributes.hasOwnProperty("selected")&&delete ut.attributes.selected}d.addEventListener("input",ut=>{const lt=ut.target.options,dt=lt.selectedIndex===-1?"":lt[lt.selectedIndex].value;g.setValue(j,{value:dt})});break}}static setAttributes({html:d,element:j,storage:h=null,intent:g,linkService:$}){const{attributes:ct}=j,ut=d instanceof HTMLAnchorElement;ct.type==="radio"&&(ct.name=`${ct.name}-${g}`);for(const[lt,dt]of Object.entries(ct))if(dt!=null)switch(lt){case"class":dt.length&&d.setAttribute(lt,dt.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",dt);break;case"style":Object.assign(d.style,dt);break;case"textContent":d.textContent=dt;break;default:(!ut||lt!=="href"&&lt!=="newWindow")&&d.setAttribute(lt,dt)}ut&&$.addLinkAttributes(d,ct.href,ct.newWindow),h&&ct.dataId&&this.setupStorage(d,ct.dataId,j,h)}static render(d){var ft;const j=d.annotationStorage,h=d.linkService,g=d.xfaHtml,$=d.intent||"display",ct=document.createElement(g.name);g.attributes&&this.setAttributes({html:ct,element:g,intent:$,linkService:h});const ut=[[g,-1,ct]],lt=d.div;if(lt.append(ct),d.viewport){const at=`matrix(${d.viewport.transform.join(",")})`;lt.style.transform=at}$!=="richText"&&lt.setAttribute("class","xfaLayer xfaFont");const dt=[];for(;ut.length>0;){const[at,b,_]=ut.at(-1);if(b+1===at.children.length){ut.pop();continue}const it=at.children[++ut.at(-1)[1]];if(it===null)continue;const{name:nt}=it;if(nt==="#text"){const ht=document.createTextNode(it.value);dt.push(ht),_.append(ht);continue}const st=(ft=it==null?void 0:it.attributes)!=null&&ft.xmlns?document.createElementNS(it.attributes.xmlns,nt):document.createElement(nt);if(_.append(st),it.attributes&&this.setAttributes({html:st,element:it,storage:j,intent:$,linkService:h}),it.children&&it.children.length>0)ut.push([it,-1,st]);else if(it.value){const ht=document.createTextNode(it.value);a.XfaText.shouldBuildText(nt)&&dt.push(ht),st.append(ht)}}for(const at of lt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))at.setAttribute("readOnly",!0);return{textDivs:dt}}static update(d){const j=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=j,d.div.hidden=!1}}s.XfaLayer=o},(e,s,i)=>{var g,$,ct,ut,lt,dt,ft,at,b,_,it,nt,st,ht,rt,Es,bs,ws,Ss,Gr,_s,Xr,As,Rs,ks,js,Cs,zn,Kr,pr,fr,qn,qr,mr,jt,Ps,Yr,Ts,Ns,Jr,gr,Yn;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var a=i(1),o=i(4),c=i(29),d=i(6),j=i(5);const rn=class rn extends o.AnnotationEditor{constructor(gt){super({...gt,name:"inkEditor"});Yt(this,rt);Yt(this,g,0);Yt(this,$,0);Yt(this,ct,this.canvasPointermove.bind(this));Yt(this,ut,this.canvasPointerleave.bind(this));Yt(this,lt,this.canvasPointerup.bind(this));Yt(this,dt,this.canvasPointerdown.bind(this));Yt(this,ft,new Path2D);Yt(this,at,!1);Yt(this,b,!1);Yt(this,_,!1);Yt(this,it,null);Yt(this,nt,0);Yt(this,st,0);Yt(this,ht,null);this.color=gt.color||null,this.thickness=gt.thickness||null,this.opacity=gt.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(gt){o.AnnotationEditor.initialize(gt,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(gt,bt){switch(gt){case a.AnnotationEditorParamsType.INK_THICKNESS:rn._defaultThickness=bt;break;case a.AnnotationEditorParamsType.INK_COLOR:rn._defaultColor=bt;break;case a.AnnotationEditorParamsType.INK_OPACITY:rn._defaultOpacity=bt/100;break}}updateParams(gt,bt){switch(gt){case a.AnnotationEditorParamsType.INK_THICKNESS:Wt(this,rt,Es).call(this,bt);break;case a.AnnotationEditorParamsType.INK_COLOR:Wt(this,rt,bs).call(this,bt);break;case a.AnnotationEditorParamsType.INK_OPACITY:Wt(this,rt,ws).call(this,bt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,rn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,rn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(rn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||rn._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||rn._defaultColor||o.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??rn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Wt(this,rt,pr).call(this),Wt(this,rt,fr).call(this)),this.isAttachedToDOM||(this.parent.add(this),Wt(this,rt,qn).call(this)),Wt(this,rt,Yn).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,tt(this,it).disconnect(),Zt(this,it,null),super.remove())}setParent(gt){!this.parent&&gt?this._uiManager.removeShouldRescale(this):this.parent&&gt===null&&this._uiManager.addShouldRescale(this),super.setParent(gt)}onScaleChanging(){const[gt,bt]=this.parentDimensions,Dt=this.width*gt,Ot=this.height*bt;this.setDimensions(Dt,Ot)}enableEditMode(){tt(this,at)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",tt(this,dt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",tt(this,dt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){tt(this,at)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Zt(this,at,!0),this.div.classList.add("disabled"),Wt(this,rt,Yn).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(gt){this._focusEventsAllowed&&(super.focusin(gt),this.enableEditMode())}canvasPointerdown(gt){gt.button!==0||!this.isInEditMode()||tt(this,at)||(this.setInForeground(),gt.preventDefault(),gt.type!=="mouse"&&this.div.focus(),Wt(this,rt,_s).call(this,gt.offsetX,gt.offsetY))}canvasPointermove(gt){gt.preventDefault(),Wt(this,rt,Xr).call(this,gt.offsetX,gt.offsetY)}canvasPointerup(gt){gt.preventDefault(),Wt(this,rt,Kr).call(this,gt)}canvasPointerleave(gt){Wt(this,rt,Kr).call(this,gt)}get isResizable(){return!this.isEmpty()&&tt(this,at)}render(){if(this.div)return this.div;let gt,bt;this.width&&(gt=this.x,bt=this.y),super.render(),o.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(on=>{var Gt;return(Gt=this.div)==null?void 0:Gt.setAttribute("aria-label",on)});const[Dt,Ot,Qt,sn]=Wt(this,rt,Ss).call(this);if(this.setAt(Dt,Ot,0,0),this.setDims(Qt,sn),Wt(this,rt,pr).call(this),this.width){const[on,Gt]=this.parentDimensions;this.setAspectRatio(this.width*on,this.height*Gt),this.setAt(gt*on,bt*Gt,this.width*on,this.height*Gt),Zt(this,_,!0),Wt(this,rt,qn).call(this),this.setDims(this.width*on,this.height*Gt),Wt(this,rt,zn).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Wt(this,rt,fr).call(this),this.div}setDimensions(gt,bt){const Dt=Math.round(gt),Ot=Math.round(bt);if(tt(this,nt)===Dt&&tt(this,st)===Ot)return;Zt(this,nt,Dt),Zt(this,st,Ot),this.canvas.style.visibility="hidden";const[Qt,sn]=this.parentDimensions;this.width=gt/Qt,this.height=bt/sn,this.fixAndSetPosition(),tt(this,at)&&Wt(this,rt,qr).call(this,gt,bt),Wt(this,rt,qn).call(this),Wt(this,rt,zn).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(gt,bt,Dt){var wn,Cn,Mn;if(gt instanceof c.InkAnnotationElement)return null;const Ot=super.deserialize(gt,bt,Dt);Ot.thickness=gt.thickness,Ot.color=a.Util.makeHexColor(...gt.color),Ot.opacity=gt.opacity;const[Qt,sn]=Ot.pageDimensions,on=Ot.width*Qt,Gt=Ot.height*sn,hn=Ot.parentScale,dn=gt.thickness/2;Zt(Ot,at,!0),Zt(Ot,nt,Math.round(on)),Zt(Ot,st,Math.round(Gt));const{paths:Rn,rect:An,rotation:Nn}=gt;for(let{bezier:cn}of Rn){cn=Wt(wn=rn,jt,Ts).call(wn,cn,An,Nn);const Jt=[];Ot.paths.push(Jt);let en=hn*(cn[0]-dn),gn=hn*(cn[1]-dn);for(let Tn=2,Mt=cn.length;Tn<Mt;Tn+=6){const an=hn*(cn[Tn]-dn),pn=hn*(cn[Tn+1]-dn),En=hn*(cn[Tn+2]-dn),_n=hn*(cn[Tn+3]-dn),mn=hn*(cn[Tn+4]-dn),Pt=hn*(cn[Tn+5]-dn);Jt.push([[en,gn],[an,pn],[En,_n],[mn,Pt]]),en=mn,gn=Pt}const Ln=Wt(this,jt,Ps).call(this,Jt);Ot.bezierPath2D.push(Ln)}const xn=Wt(Cn=Ot,rt,Jr).call(Cn);return Zt(Ot,$,Math.max(o.AnnotationEditor.MIN_SIZE,xn[2]-xn[0])),Zt(Ot,g,Math.max(o.AnnotationEditor.MIN_SIZE,xn[3]-xn[1])),Wt(Mn=Ot,rt,qr).call(Mn,on,Gt),Ot}serialize(){if(this.isEmpty())return null;const gt=this.getRect(0,0),bt=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:bt,thickness:this.thickness,opacity:this.opacity,paths:Wt(this,rt,Ns).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,gt),pageIndex:this.pageIndex,rect:gt,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};g=new WeakMap,$=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap,ft=new WeakMap,at=new WeakMap,b=new WeakMap,_=new WeakMap,it=new WeakMap,nt=new WeakMap,st=new WeakMap,ht=new WeakMap,rt=new WeakSet,Es=function(gt){const bt=this.thickness;this.addCommands({cmd:()=>{this.thickness=gt,Wt(this,rt,Yn).call(this)},undo:()=>{this.thickness=bt,Wt(this,rt,Yn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},bs=function(gt){const bt=this.color;this.addCommands({cmd:()=>{this.color=gt,Wt(this,rt,zn).call(this)},undo:()=>{this.color=bt,Wt(this,rt,zn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ws=function(gt){gt/=100;const bt=this.opacity;this.addCommands({cmd:()=>{this.opacity=gt,Wt(this,rt,zn).call(this)},undo:()=>{this.opacity=bt,Wt(this,rt,zn).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Ss=function(){const{parentRotation:gt,parentDimensions:[bt,Dt]}=this;switch(gt){case 90:return[0,Dt,Dt,bt];case 180:return[bt,Dt,bt,Dt];case 270:return[bt,0,Dt,bt];default:return[0,0,bt,Dt]}},Gr=function(){const{ctx:gt,color:bt,opacity:Dt,thickness:Ot,parentScale:Qt,scaleFactor:sn}=this;gt.lineWidth=Ot*Qt/sn,gt.lineCap="round",gt.lineJoin="round",gt.miterLimit=10,gt.strokeStyle=`${bt}${(0,j.opacityToHex)(Dt)}`},_s=function(gt,bt){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",tt(this,ut)),this.canvas.addEventListener("pointermove",tt(this,ct)),this.canvas.addEventListener("pointerup",tt(this,lt)),this.canvas.removeEventListener("pointerdown",tt(this,dt)),this.isEditing=!0,tt(this,_)||(Zt(this,_,!0),Wt(this,rt,qn).call(this),this.thickness||(this.thickness=rn._defaultThickness),this.color||(this.color=rn._defaultColor||o.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=rn._defaultOpacity)),this.currentPath.push([gt,bt]),Zt(this,b,!1),Wt(this,rt,Gr).call(this),Zt(this,ht,()=>{Wt(this,rt,ks).call(this),tt(this,ht)&&window.requestAnimationFrame(tt(this,ht))}),window.requestAnimationFrame(tt(this,ht))},Xr=function(gt,bt){const[Dt,Ot]=this.currentPath.at(-1);if(this.currentPath.length>1&&gt===Dt&&bt===Ot)return;const Qt=this.currentPath;let sn=tt(this,ft);if(Qt.push([gt,bt]),Zt(this,b,!0),Qt.length<=2){sn.moveTo(...Qt[0]),sn.lineTo(gt,bt);return}Qt.length===3&&(Zt(this,ft,sn=new Path2D),sn.moveTo(...Qt[0])),Wt(this,rt,js).call(this,sn,...Qt.at(-3),...Qt.at(-2),gt,bt)},As=function(){if(this.currentPath.length===0)return;const gt=this.currentPath.at(-1);tt(this,ft).lineTo(...gt)},Rs=function(gt,bt){Zt(this,ht,null),gt=Math.min(Math.max(gt,0),this.canvas.width),bt=Math.min(Math.max(bt,0),this.canvas.height),Wt(this,rt,Xr).call(this,gt,bt),Wt(this,rt,As).call(this);let Dt;if(this.currentPath.length!==1)Dt=Wt(this,rt,Cs).call(this);else{const Gt=[gt,bt];Dt=[[Gt,Gt.slice(),Gt.slice(),Gt]]}const Ot=tt(this,ft),Qt=this.currentPath;this.currentPath=[],Zt(this,ft,new Path2D);const sn=()=>{this.allRawPaths.push(Qt),this.paths.push(Dt),this.bezierPath2D.push(Ot),this.rebuild()},on=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Wt(this,rt,pr).call(this),Wt(this,rt,fr).call(this)),Wt(this,rt,Yn).call(this))};this.addCommands({cmd:sn,undo:on,mustExec:!0})},ks=function(){if(!tt(this,b))return;Zt(this,b,!1);const gt=Math.ceil(this.thickness*this.parentScale),bt=this.currentPath.slice(-3),Dt=bt.map(sn=>sn[0]),Ot=bt.map(sn=>sn[1]);Math.min(...Dt)-gt,Math.max(...Dt)+gt,Math.min(...Ot)-gt,Math.max(...Ot)+gt;const{ctx:Qt}=this;Qt.save(),Qt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const sn of this.bezierPath2D)Qt.stroke(sn);Qt.stroke(tt(this,ft)),Qt.restore()},js=function(gt,bt,Dt,Ot,Qt,sn,on){const Gt=(bt+Ot)/2,hn=(Dt+Qt)/2,dn=(Ot+sn)/2,Rn=(Qt+on)/2;gt.bezierCurveTo(Gt+2*(Ot-Gt)/3,hn+2*(Qt-hn)/3,dn+2*(Ot-dn)/3,Rn+2*(Qt-Rn)/3,dn,Rn)},Cs=function(){const gt=this.currentPath;if(gt.length<=2)return[[gt[0],gt[0],gt.at(-1),gt.at(-1)]];const bt=[];let Dt,[Ot,Qt]=gt[0];for(Dt=1;Dt<gt.length-2;Dt++){const[An,Nn]=gt[Dt],[xn,wn]=gt[Dt+1],Cn=(An+xn)/2,Mn=(Nn+wn)/2,cn=[Ot+2*(An-Ot)/3,Qt+2*(Nn-Qt)/3],Jt=[Cn+2*(An-Cn)/3,Mn+2*(Nn-Mn)/3];bt.push([[Ot,Qt],cn,Jt,[Cn,Mn]]),[Ot,Qt]=[Cn,Mn]}const[sn,on]=gt[Dt],[Gt,hn]=gt[Dt+1],dn=[Ot+2*(sn-Ot)/3,Qt+2*(on-Qt)/3],Rn=[Gt+2*(sn-Gt)/3,hn+2*(on-hn)/3];return bt.push([[Ot,Qt],dn,Rn,[Gt,hn]]),bt},zn=function(){if(this.isEmpty()){Wt(this,rt,mr).call(this);return}Wt(this,rt,Gr).call(this);const{canvas:gt,ctx:bt}=this;bt.setTransform(1,0,0,1,0,0),bt.clearRect(0,0,gt.width,gt.height),Wt(this,rt,mr).call(this);for(const Dt of this.bezierPath2D)bt.stroke(Dt)},Kr=function(gt){this.canvas.removeEventListener("pointerleave",tt(this,ut)),this.canvas.removeEventListener("pointermove",tt(this,ct)),this.canvas.removeEventListener("pointerup",tt(this,lt)),this.canvas.addEventListener("pointerdown",tt(this,dt)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),Wt(this,rt,Rs).call(this,gt.offsetX,gt.offsetY),this.addToAnnotationStorage(),this.setInBackground()},pr=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",o.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(gt=>{var bt;return(bt=this.canvas)==null?void 0:bt.setAttribute("aria-label",gt)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},fr=function(){Zt(this,it,new ResizeObserver(gt=>{const bt=gt[0].contentRect;bt.width&&bt.height&&this.setDimensions(bt.width,bt.height)})),tt(this,it).observe(this.div)},qn=function(){if(!tt(this,_))return;const[gt,bt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*gt),this.canvas.height=Math.ceil(this.height*bt),Wt(this,rt,mr).call(this)},qr=function(gt,bt){const Dt=Wt(this,rt,gr).call(this),Ot=(gt-Dt)/tt(this,$),Qt=(bt-Dt)/tt(this,g);this.scaleFactor=Math.min(Ot,Qt)},mr=function(){const gt=Wt(this,rt,gr).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+gt,this.translationY*this.scaleFactor+gt)},jt=new WeakSet,Ps=function(gt){const bt=new Path2D;for(let Dt=0,Ot=gt.length;Dt<Ot;Dt++){const[Qt,sn,on,Gt]=gt[Dt];Dt===0&&bt.moveTo(...Qt),bt.bezierCurveTo(sn[0],sn[1],on[0],on[1],Gt[0],Gt[1])}return bt},Yr=function(gt,bt,Dt){const[Ot,Qt,sn,on]=bt;switch(Dt){case 0:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2)gt[Gt]+=Ot,gt[Gt+1]=on-gt[Gt+1];break;case 90:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2){const dn=gt[Gt];gt[Gt]=gt[Gt+1]+Ot,gt[Gt+1]=dn+Qt}break;case 180:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2)gt[Gt]=sn-gt[Gt],gt[Gt+1]+=Qt;break;case 270:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2){const dn=gt[Gt];gt[Gt]=sn-gt[Gt+1],gt[Gt+1]=on-dn}break;default:throw new Error("Invalid rotation")}return gt},Ts=function(gt,bt,Dt){const[Ot,Qt,sn,on]=bt;switch(Dt){case 0:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2)gt[Gt]-=Ot,gt[Gt+1]=on-gt[Gt+1];break;case 90:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2){const dn=gt[Gt];gt[Gt]=gt[Gt+1]-Qt,gt[Gt+1]=dn-Ot}break;case 180:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2)gt[Gt]=sn-gt[Gt],gt[Gt+1]-=Qt;break;case 270:for(let Gt=0,hn=gt.length;Gt<hn;Gt+=2){const dn=gt[Gt];gt[Gt]=on-gt[Gt+1],gt[Gt+1]=sn-dn}break;default:throw new Error("Invalid rotation")}return gt},Ns=function(gt,bt,Dt,Ot){var hn,dn;const Qt=[],sn=this.thickness/2,on=gt*bt+sn,Gt=gt*Dt+sn;for(const Rn of this.paths){const An=[],Nn=[];for(let xn=0,wn=Rn.length;xn<wn;xn++){const[Cn,Mn,cn,Jt]=Rn[xn],en=gt*Cn[0]+on,gn=gt*Cn[1]+Gt,Ln=gt*Mn[0]+on,Tn=gt*Mn[1]+Gt,Mt=gt*cn[0]+on,an=gt*cn[1]+Gt,pn=gt*Jt[0]+on,En=gt*Jt[1]+Gt;xn===0&&(An.push(en,gn),Nn.push(en,gn)),An.push(Ln,Tn,Mt,an,pn,En),Nn.push(Ln,Tn),xn===wn-1&&Nn.push(pn,En)}Qt.push({bezier:Wt(hn=rn,jt,Yr).call(hn,An,Ot,this.rotation),points:Wt(dn=rn,jt,Yr).call(dn,Nn,Ot,this.rotation)})}return Qt},Jr=function(){let gt=1/0,bt=-1/0,Dt=1/0,Ot=-1/0;for(const Qt of this.paths)for(const[sn,on,Gt,hn]of Qt){const dn=a.Util.bezierBoundingBox(...sn,...on,...Gt,...hn);gt=Math.min(gt,dn[0]),Dt=Math.min(Dt,dn[1]),bt=Math.max(bt,dn[2]),Ot=Math.max(Ot,dn[3])}return[gt,Dt,bt,Ot]},gr=function(){return tt(this,at)?Math.ceil(this.thickness*this.parentScale):0},Yn=function(gt=!1){if(this.isEmpty())return;if(!tt(this,at)){Wt(this,rt,zn).call(this);return}const bt=Wt(this,rt,Jr).call(this),Dt=Wt(this,rt,gr).call(this);Zt(this,$,Math.max(o.AnnotationEditor.MIN_SIZE,bt[2]-bt[0])),Zt(this,g,Math.max(o.AnnotationEditor.MIN_SIZE,bt[3]-bt[1]));const Ot=Math.ceil(Dt+tt(this,$)*this.scaleFactor),Qt=Math.ceil(Dt+tt(this,g)*this.scaleFactor),[sn,on]=this.parentDimensions;this.width=Ot/sn,this.height=Qt/on,this.setAspectRatio(Ot,Qt);const Gt=this.translationX,hn=this.translationY;this.translationX=-bt[0],this.translationY=-bt[1],Wt(this,rt,qn).call(this),Wt(this,rt,zn).call(this),Zt(this,nt,Ot),Zt(this,st,Qt),this.setDims(Ot,Qt);const dn=gt?Dt/this.scaleFactor/2:0;this.translate(Gt-this.translationX-dn,hn-this.translationY-dn)},Yt(rn,jt),In(rn,"_defaultColor",null),In(rn,"_defaultOpacity",1),In(rn,"_defaultThickness",1),In(rn,"_type","ink");let h=rn;s.InkEditor=h},(e,s,i)=>{var h,g,$,ct,ut,lt,dt,ft,at,b,_,rr,sr,xr,Qr,Ls,Ms,Zr,yr,Fs;Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var a=i(1),o=i(4),c=i(6),d=i(29);const yt=class yt extends o.AnnotationEditor{constructor(Lt){super({...Lt,name:"stampEditor"});Yt(this,_);Yt(this,h,null);Yt(this,g,null);Yt(this,$,null);Yt(this,ct,null);Yt(this,ut,null);Yt(this,lt,null);Yt(this,dt,null);Yt(this,ft,null);Yt(this,at,!1);Yt(this,b,!1);Zt(this,ct,Lt.bitmapUrl),Zt(this,ut,Lt.bitmapFile)}static initialize(Lt){o.AnnotationEditor.initialize(Lt)}static get supportedTypes(){const Lt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Lt.map(Ut=>`image/${Ut}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Lt){return this.supportedTypes.includes(Lt)}static paste(Lt,Ut){Ut.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Lt.getAsFile()})}remove(){var Lt,Ut;tt(this,g)&&(Zt(this,h,null),this._uiManager.imageManager.deleteId(tt(this,g)),(Lt=tt(this,lt))==null||Lt.remove(),Zt(this,lt,null),(Ut=tt(this,dt))==null||Ut.disconnect(),Zt(this,dt,null)),super.remove()}rebuild(){if(!this.parent){tt(this,g)&&Wt(this,_,xr).call(this);return}super.rebuild(),this.div!==null&&(tt(this,g)&&Wt(this,_,xr).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(tt(this,$)||tt(this,h)||tt(this,ct)||tt(this,ut))}get isResizable(){return!0}render(){if(this.div)return this.div;let Lt,Ut;if(this.width&&(Lt=this.x,Ut=this.y),super.render(),this.div.hidden=!0,tt(this,h)?Wt(this,_,Qr).call(this):Wt(this,_,xr).call(this),this.width){const[Ft,_t]=this.parentDimensions;this.setAt(Lt*Ft,Ut*_t,this.width*Ft,this.height*_t)}return this.div}static deserialize(Lt,Ut,Ft){if(Lt instanceof d.StampAnnotationElement)return null;const _t=super.deserialize(Lt,Ut,Ft),{rect:vt,bitmapUrl:At,bitmapId:Nt,isSvg:wt,accessibilityData:pt}=Lt;Nt&&Ft.imageManager.isValidId(Nt)?Zt(_t,g,Nt):Zt(_t,ct,At),Zt(_t,at,wt);const[mt,Et]=_t.pageDimensions;return _t.width=(vt[2]-vt[0])/mt,_t.height=(vt[3]-vt[1])/Et,pt&&(_t.altTextData=pt),_t}serialize(Lt=!1,Ut=null){if(this.isEmpty())return null;const Ft={annotationType:a.AnnotationEditorType.STAMP,bitmapId:tt(this,g),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:tt(this,at),structTreeParentId:this._structTreeParentId};if(Lt)return Ft.bitmapUrl=Wt(this,_,yr).call(this,!0),Ft.accessibilityData=this.altTextData,Ft;const{decorative:_t,altText:vt}=this.altTextData;if(!_t&&vt&&(Ft.accessibilityData={type:"Figure",alt:vt}),Ut===null)return Ft;Ut.stamps||(Ut.stamps=new Map);const At=tt(this,at)?(Ft.rect[2]-Ft.rect[0])*(Ft.rect[3]-Ft.rect[1]):null;if(!Ut.stamps.has(tt(this,g)))Ut.stamps.set(tt(this,g),{area:At,serialized:Ft}),Ft.bitmap=Wt(this,_,yr).call(this,!1);else if(tt(this,at)){const Nt=Ut.stamps.get(tt(this,g));At>Nt.area&&(Nt.area=At,Nt.serialized.bitmap.close(),Nt.serialized.bitmap=Wt(this,_,yr).call(this,!1))}return Ft}};h=new WeakMap,g=new WeakMap,$=new WeakMap,ct=new WeakMap,ut=new WeakMap,lt=new WeakMap,dt=new WeakMap,ft=new WeakMap,at=new WeakMap,b=new WeakMap,_=new WeakSet,rr=function(Lt,Ut=!1){if(!Lt){this.remove();return}Zt(this,h,Lt.bitmap),Ut||(Zt(this,g,Lt.id),Zt(this,at,Lt.isSvg)),Wt(this,_,Qr).call(this)},sr=function(){Zt(this,$,null),this._uiManager.enableWaiting(!1),tt(this,lt)&&this.div.focus()},xr=function(){if(tt(this,g)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(tt(this,g)).then(Ut=>Wt(this,_,rr).call(this,Ut,!0)).finally(()=>Wt(this,_,sr).call(this));return}if(tt(this,ct)){const Ut=tt(this,ct);Zt(this,ct,null),this._uiManager.enableWaiting(!0),Zt(this,$,this._uiManager.imageManager.getFromUrl(Ut).then(Ft=>Wt(this,_,rr).call(this,Ft)).finally(()=>Wt(this,_,sr).call(this)));return}if(tt(this,ut)){const Ut=tt(this,ut);Zt(this,ut,null),this._uiManager.enableWaiting(!0),Zt(this,$,this._uiManager.imageManager.getFromFile(Ut).then(Ft=>Wt(this,_,rr).call(this,Ft)).finally(()=>Wt(this,_,sr).call(this)));return}const Lt=document.createElement("input");Lt.type="file",Lt.accept=yt.supportedTypesStr,Zt(this,$,new Promise(Ut=>{Lt.addEventListener("change",async()=>{if(!Lt.files||Lt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Ft=await this._uiManager.imageManager.getFromFile(Lt.files[0]);Wt(this,_,rr).call(this,Ft)}Ut()}),Lt.addEventListener("cancel",()=>{this.remove(),Ut()})}).finally(()=>Wt(this,_,sr).call(this))),Lt.click()},Qr=function(){const{div:Lt}=this;let{width:Ut,height:Ft}=tt(this,h);const[_t,vt]=this.pageDimensions,At=.75;if(this.width)Ut=this.width*_t,Ft=this.height*vt;else if(Ut>At*_t||Ft>At*vt){const mt=Math.min(At*_t/Ut,At*vt/Ft);Ut*=mt,Ft*=mt}const[Nt,wt]=this.parentDimensions;this.setDims(Ut*Nt/_t,Ft*wt/vt),this._uiManager.enableWaiting(!1);const pt=Zt(this,lt,document.createElement("canvas"));Lt.append(pt),Lt.hidden=!1,Wt(this,_,Zr).call(this,Ut,Ft),Wt(this,_,Fs).call(this),tt(this,b)||(this.parent.addUndoableEditor(this),Zt(this,b,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Ls=function(Lt,Ut){var At;const[Ft,_t]=this.parentDimensions;this.width=Lt/Ft,this.height=Ut/_t,this.setDims(Lt,Ut),(At=this._initialOptions)!=null&&At.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,tt(this,ft)!==null&&clearTimeout(tt(this,ft)),Zt(this,ft,setTimeout(()=>{Zt(this,ft,null),Wt(this,_,Zr).call(this,Lt,Ut)},200))},Ms=function(Lt,Ut){const{width:Ft,height:_t}=tt(this,h);let vt=Ft,At=_t,Nt=tt(this,h);for(;vt>2*Lt||At>2*Ut;){const wt=vt,pt=At;vt>2*Lt&&(vt=vt>=16384?Math.floor(vt/2)-1:Math.ceil(vt/2)),At>2*Ut&&(At=At>=16384?Math.floor(At/2)-1:Math.ceil(At/2));const mt=new OffscreenCanvas(vt,At);mt.getContext("2d").drawImage(Nt,0,0,wt,pt,0,0,vt,At),Nt=mt.transferToImageBitmap()}return Nt},Zr=function(Lt,Ut){Lt=Math.ceil(Lt),Ut=Math.ceil(Ut);const Ft=tt(this,lt);if(!Ft||Ft.width===Lt&&Ft.height===Ut)return;Ft.width=Lt,Ft.height=Ut;const _t=tt(this,at)?tt(this,h):Wt(this,_,Ms).call(this,Lt,Ut),vt=Ft.getContext("2d");vt.filter=this._uiManager.hcmFilter,vt.drawImage(_t,0,0,_t.width,_t.height,0,0,Lt,Ut)},yr=function(Lt){if(Lt){if(tt(this,at)){const _t=this._uiManager.imageManager.getSvgUrl(tt(this,g));if(_t)return _t}const Ut=document.createElement("canvas");return{width:Ut.width,height:Ut.height}=tt(this,h),Ut.getContext("2d").drawImage(tt(this,h),0,0),Ut.toDataURL()}if(tt(this,at)){const[Ut,Ft]=this.pageDimensions,_t=Math.round(this.width*Ut*c.PixelsPerInch.PDF_TO_CSS_UNITS),vt=Math.round(this.height*Ft*c.PixelsPerInch.PDF_TO_CSS_UNITS),At=new OffscreenCanvas(_t,vt);return At.getContext("2d").drawImage(tt(this,h),0,0,tt(this,h).width,tt(this,h).height,0,0,_t,vt),At.transferToImageBitmap()}return structuredClone(tt(this,h))},Fs=function(){Zt(this,dt,new ResizeObserver(Lt=>{const Ut=Lt[0].contentRect;Ut.width&&Ut.height&&Wt(this,_,Ls).call(this,Ut.width,Ut.height)})),tt(this,dt).observe(this.div)},In(yt,"_type","stamp");let j=yt;s.StampEditor=j}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var s=__webpack_module_cache__[e];if(s!==void 0)return s.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return j.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return o.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var s=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),o=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),j=__w_pdfjs_require__(29),h=__w_pdfjs_require__(14),g=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjs=pdf;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function e(a,o,c,d,j,h){if(h!==ReactPropTypesSecret){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}e.isRequired=e;function s(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:s,element:e,elementType:e,instanceOf:s,node:e,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return i.PropTypes=i,i};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(e,s,i){if(i||arguments.length===2)for(var a=0,o=s.length,c;a<o;a++)(c||!(a in s))&&(c||(c=Array.prototype.slice.call(s,0,a)),c[a]=s[a]);return e.concat(c||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(e,s){var i={};return allEvents.forEach(function(a){var o=e[a];o&&(s?i[a]=function(c){return o(c,s(a))}:i[a]=o)}),i}function makeCancellablePromise(e){var s=!1,i=new Promise(function(a,o){e.then(function(c){return!s&&a(c)}).catch(function(c){return!s&&o(c)})});return{promise:i,cancel:function(){s=!0}}}function r(e){var s,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(s=0;s<o;s++)e[s]&&(i=r(e[s]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function clsx(){for(var e,s,i=0,a="",o=arguments.length;i<o;i++)(e=arguments[i])&&(s=r(e))&&(a&&(a+=" "),a+=s);return a}var prefix="Invariant failed";function invariant(e,s){if(!e)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(e,s,i){for(i of e.keys())if(dequal(i,s))return i}function dequal(e,s){var i,a,o;if(e===s)return!0;if(e&&s&&(i=e.constructor)===s.constructor){if(i===Date)return e.getTime()===s.getTime();if(i===RegExp)return e.toString()===s.toString();if(i===Array){if((a=e.length)===s.length)for(;a--&&dequal(e[a],s[a]););return a===-1}if(i===Set){if(e.size!==s.size)return!1;for(a of e)if(o=a,o&&typeof o=="object"&&(o=find(s,o),!o)||!s.has(o))return!1;return!0}if(i===Map){if(e.size!==s.size)return!1;for(a of e)if(o=a[0],o&&typeof o=="object"&&(o=find(s,o),!o)||!dequal(a[1],s.get(o)))return!1;return!0}if(i===ArrayBuffer)e=new Uint8Array(e),s=new Uint8Array(s);else if(i===DataView){if((a=e.byteLength)===s.byteLength)for(;a--&&e.getInt8(a)===s.getInt8(a););return a===-1}if(ArrayBuffer.isView(e)){if((a=e.byteLength)===s.byteLength)for(;a--&&e[a]===s[a];);return a===-1}if(!i||typeof e=="object"){a=0;for(i in e)if(has.call(e,i)&&++a&&!has.call(s,i)||!(i in s)||!dequal(e[i],s[i]))return!1;return Object.keys(s).length===a}}return e!==e&&s!==s}const DocumentContext=reactExports.createContext(null);function Message({children:e,type:s}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${s}`},e)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(s){this.pdfDocument=s}setViewer(s){this.pdfViewer=s}setExternalLinkRel(s){this.externalLinkRel=s}setExternalLinkTarget(s){this.externalLinkTarget=s}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(s){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=s}get rotation(){return 0}set rotation(s){}goToDestination(s){return new Promise(i=>{invariant(this.pdfDocument),invariant(s),typeof s=="string"?this.pdfDocument.getDestination(s).then(i):Array.isArray(s)?i(s):s.then(i)}).then(i=>{invariant(Array.isArray(i));const a=i[0];new Promise(o=>{invariant(this.pdfDocument),a instanceof Object?this.pdfDocument.getPageIndex(a).then(c=>{o(c)}).catch(()=>{invariant(!1)}):typeof a=="number"?o(a):invariant(!1)}).then(o=>{const c=o+1;invariant(this.pdfViewer),invariant(c>=1&&c<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:i,pageIndex:o,pageNumber:c})})})}navigateTo(s){this.goToDestination(s)}goToPage(s){const i=s-1;invariant(this.pdfViewer),invariant(s>=1&&s<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:i,pageNumber:s})}addLinkAttributes(s,i,a){s.href=i,s.rel=this.externalLinkRel||DEFAULT_LINK_REL,s.target=a?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(e){return typeof e<"u"}function isProvided(e){return isDefined(e)&&e!==null}function isString(e){return typeof e=="string"}function isArrayBuffer(e){return e instanceof ArrayBuffer}function isBlob(e){return invariant(isBrowser),e instanceof Blob}function isDataURI(e){return isString(e)&&/^data:/.test(e)}function dataURItoByteString(e){invariant(isDataURI(e));const[s="",i=""]=e.split(",");return s.split(";").indexOf("base64")!==-1?atob(i):unescape(i)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(e){e&&e.cancel&&e.cancel()}function makePageCallback(e,s){return Object.defineProperty(e,"width",{get(){return this.view[2]*s},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*s},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function isCancelException(e){return e.name==="RenderingCancelledException"}function loadFromFile(e){return new Promise((s,i)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return i(new Error("Error while reading a file."));s(a.result)},a.onerror=o=>{if(!o.target)return i(new Error("Error while reading a file."));const{error:c}=o.target;if(!c)return i(new Error("Error while reading a file."));switch(c.code){case c.NOT_FOUND_ERR:return i(new Error("Error while reading a file: File not found."));case c.SECURITY_ERR:return i(new Error("Error while reading a file: Security error."));case c.ABORT_ERR:return i(new Error("Error while reading a file: Aborted."));default:return i(new Error("Error while reading a file."))}},a.readAsArrayBuffer(e)})}function reducer(e,s){switch(s.type){case"RESOLVE":return{value:s.value,error:void 0};case"REJECT":return{value:!1,error:s.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const e={};return allEvents.forEach(s=>{e[s]=PropTypes.func}),e})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function e(s,i,a){const{[i]:o,pageNumber:c,pdf:d}=s;if(!isDefined(d))return null;if(isDefined(o)){if(typeof o!="number")return new Error(`\`${i}\` of type \`${typeof o}\` supplied to \`${a}\`, expected \`number\`.`);if(o<0)return new Error(`Expected \`${i}\` to be greater or equal to 0.`);const{numPages:j}=d;if(o+1>j)return new Error(`Expected \`${i}\` to be less or equal to ${j-1}.`)}else if(!isDefined(c))return new Error(`\`${i}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${a}\`.`);return null},isPageNumber=function e(s,i,a){const{[i]:o,pageIndex:c,pdf:d}=s;if(!isDefined(d))return null;if(isDefined(o)){if(typeof o!="number")return new Error(`\`${i}\` of type \`${typeof o}\` supplied to \`${a}\`, expected \`number\`.`);if(o<1)return new Error(`Expected \`${i}\` to be greater or equal to 1.`);const{numPages:j}=d;if(o>j)return new Error(`Expected \`${i}\` to be less or equal to ${j}.`)}else if(!isDefined(c))return new Error(`\`${i}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${a}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(e,s,i,a){function o(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function j($){try{g(a.next($))}catch(ct){d(ct)}}function h($){try{g(a.throw($))}catch(ct){d(ct)}}function g($){$.done?c($.value):o($.value).then(j,h)}g((a=a.apply(e,s||[])).next())})},__rest$1=function(e,s){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)s.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(e,s)=>{switch(s){case PasswordResponses.NEED_PASSWORD:{const i=prompt("Enter the password to open this PDF file.");e(i);break}case PasswordResponses.INCORRECT_PASSWORD:{const i=prompt("Invalid password. Please try again.");e(i);break}}};function isParameterObject(e){return typeof e=="object"&&e!==null&&("data"in e||"range"in e||"url"in e)}const Document=reactExports.forwardRef(function e(s,i){var{children:a,className:o,error:c="Failed to load PDF file.",externalLinkRel:d,externalLinkTarget:j,file:h,inputRef:g,imageResourcesPath:$,loading:ct="Loading PDF…",noData:ut="No PDF file specified.",onItemClick:lt,onLoadError:dt,onLoadProgress:ft,onLoadSuccess:at,onPassword:b=defaultOnPassword,onSourceError:_,onSourceSuccess:it,options:nt,renderMode:st,rotate:ht}=s,rt=__rest$1(s,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[_e,ot]=useResolver(),{value:xt,error:et}=_e,[yt,St]=useResolver(),{value:It,error:Lt}=yt,Ut=reactExports.useRef(new LinkService),Ft=reactExports.useRef([]),_t=reactExports.useRef(),vt=reactExports.useRef();reactExports.useEffect(()=>{h&&h!==_t.current&&isParameterObject(h)&&(warning$1(!dequal(h,_t.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),_t.current=h)},[h]),reactExports.useEffect(()=>{nt&&nt!==vt.current&&(warning$1(!dequal(nt,vt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),vt.current=nt)},[nt]);const At=reactExports.useRef({scrollPageIntoView:Ht=>{const{dest:Vt,pageNumber:gt,pageIndex:bt=gt-1}=Ht;if(lt){lt({dest:Vt,pageIndex:bt,pageNumber:gt});return}const Dt=Ft.current[bt];if(Dt){Dt.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${gt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(i,()=>({linkService:Ut,pages:Ft,viewer:At}),[]);function Nt(){it&&it()}function wt(){et&&(warning$1(!1,et.toString()),_&&_(et))}function pt(){ot({type:"RESET"})}reactExports.useEffect(pt,[h,ot]);const mt=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!h)return null;if(typeof h=="string")return isDataURI(h)?{data:dataURItoByteString(h)}:(displayCORSWarning(),{url:h});if(h instanceof PDFDataRangeTransport)return{range:h};if(isArrayBuffer(h))return{data:h};if(isBrowser&&isBlob(h))return{data:yield loadFromFile(h)};if(invariant(typeof h=="object"),invariant(isParameterObject(h)),"url"in h&&typeof h.url=="string"){if(isDataURI(h.url)){const{url:Ht}=h,Vt=__rest$1(h,["url"]),gt=dataURItoByteString(Ht);return Object.assign({data:gt},Vt)}displayCORSWarning()}return h}),[h]);reactExports.useEffect(()=>{const Ht=makeCancellablePromise(mt());return Ht.promise.then(Vt=>{ot({type:"RESOLVE",value:Vt})}).catch(Vt=>{ot({type:"REJECT",error:Vt})}),()=>{cancelRunningTask(Ht)}},[mt,ot]),reactExports.useEffect(()=>{if(!(typeof xt>"u")){if(xt===!1){wt();return}Nt()}},[xt]);function Et(){It&&(at&&at(It),Ft.current=new Array(It.numPages),Ut.current.setDocument(It))}function kt(){Lt&&(warning$1(!1,Lt.toString()),dt&&dt(Lt))}function jt(){St({type:"RESET"})}reactExports.useEffect(jt,[St,xt]);function Ct(){if(!xt)return;const Ht=Object.assign(Object.assign({},nt),{isEvalSupported:!1}),Vt=Object.assign(Object.assign({},xt),Ht),gt=pdfjs.getDocument(Vt);ft&&(gt.onProgress=ft),b&&(gt.onPassword=b);const bt=gt;return bt.promise.then(Dt=>{St({type:"RESOLVE",value:Dt})}).catch(Dt=>{bt.destroyed||St({type:"REJECT",error:Dt})}),()=>{bt.destroy()}}reactExports.useEffect(Ct,[nt,St,xt]),reactExports.useEffect(()=>{if(!(typeof It>"u")){if(It===!1){kt();return}Et()}},[It]);function zt(){Ut.current.setViewer(At.current),Ut.current.setExternalLinkRel(d),Ut.current.setExternalLinkTarget(j)}reactExports.useEffect(zt,[d,j]);function Xt(Ht,Vt){Ft.current[Ht]=Vt}function Tt(Ht){delete Ft.current[Ht]}const $t=reactExports.useMemo(()=>({imageResourcesPath:$,linkService:Ut.current,onItemClick:lt,pdf:It,registerPage:Xt,renderMode:st,rotate:ht,unregisterPage:Tt}),[$,lt,It,st,ht]),Kt=reactExports.useMemo(()=>makeEventProps(rt,()=>It),[rt,It]);function qt(){return React.createElement(DocumentContext.Provider,{value:$t},a)}function rn(){return h?It==null?React.createElement(Message,{type:"loading"},typeof ct=="function"?ct():ct):It===!1?React.createElement(Message,{type:"error"},typeof c=="function"?c():c):qt():React.createElement(Message,{type:"no-data"},typeof ut=="function"?ut():ut)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",o),ref:g,style:{"--scale-factor":"1"}},Kt),rn())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];var i=e.filter(Boolean);if(i.length<=1){var a=i[0];return a||null}return function(c){i.forEach(function(d){typeof d=="function"?d(c):d&&(d.current=c)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(e){return e in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(e){return"children"in e}function isStructTreeNodeWithOnlyContentChild(e){return isStructTreeNode(e)?e.children.length===1&&0 in e.children&&"id"in e.children[0]:!1}function getRoleAttributes(e){const s={};if(isStructTreeNode(e)){const{role:i}=e,a=i.match(HEADING_PATTERN);if(a)s.role="heading",s["aria-level"]=Number(a[1]);else if(isPdfRole(i)){const o=PDF_ROLE_TO_HTML_ROLE[i];o&&(s.role=o)}}return s}function getBaseAttributes(e){const s={};if(isStructTreeNode(e)){if(e.alt!==void 0&&(s["aria-label"]=e.alt),e.lang!==void 0&&(s.lang=e.lang),isStructTreeNodeWithOnlyContentChild(e)){const[i]=e.children;if(i){const a=getBaseAttributes(i);return Object.assign(Object.assign({},s),a)}}}else"id"in e&&(s["aria-owns"]=e.id);return s}function getAttributes(e){return e?Object.assign(Object.assign({},getRoleAttributes(e)),getBaseAttributes(e)):null}function StructTreeItem({className:e,node:s}){const i=reactExports.useMemo(()=>getAttributes(s),[s]),a=reactExports.useMemo(()=>!isStructTreeNode(s)||isStructTreeNodeWithOnlyContentChild(s)?null:s.children.map((o,c)=>React.createElement(StructTreeItem,{key:c,node:o})),[s]);return React.createElement("span",Object.assign({className:e},i),a)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const e=usePageContext();invariant(e);const{onGetStructTreeError:s,onGetStructTreeSuccess:i}=e,[a,o]=useResolver(),{value:c,error:d}=a,{customTextRenderer:j,page:h}=e;function g(){c&&i&&i(c)}function $(){d&&(warning$1(!1,d.toString()),s&&s(d))}function ct(){o({type:"RESET"})}reactExports.useEffect(ct,[o,h]);function ut(){if(j||!h)return;const lt=makeCancellablePromise(h.getStructTree()),dt=lt;return lt.promise.then(ft=>{o({type:"RESOLVE",value:ft})}).catch(ft=>{o({type:"REJECT",error:ft})}),()=>cancelRunningTask(dt)}return reactExports.useEffect(ut,[j,h,o]),reactExports.useEffect(()=>{if(c!==void 0){if(c===!1){$();return}g()}},[c]),c?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:c}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(e){const s=usePageContext();invariant(s);const i=Object.assign(Object.assign({},s),e),{_className:a,canvasBackground:o,devicePixelRatio:c=getDevicePixelRatio(),onRenderError:d,onRenderSuccess:j,page:h,renderForms:g,renderTextLayer:$,rotate:ct,scale:ut}=i,{canvasRef:lt}=e;invariant(h);const dt=reactExports.useRef(null);function ft(){h&&j&&j(makePageCallback(h,ut))}function at(st){isCancelException(st)||(warning$1(!1,st.toString()),d&&d(st))}const b=reactExports.useMemo(()=>h.getViewport({scale:ut*c,rotation:ct}),[c,h,ct,ut]),_=reactExports.useMemo(()=>h.getViewport({scale:ut,rotation:ct}),[h,ct,ut]);function it(){if(!h)return;h.cleanup();const{current:st}=dt;if(!st)return;st.width=b.width,st.height=b.height,st.style.width=`${Math.floor(_.width)}px`,st.style.height=`${Math.floor(_.height)}px`,st.style.visibility="hidden";const ht={annotationMode:g?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:st.getContext("2d",{alpha:!1}),viewport:b};o&&(ht.background=o);const rt=h.render(ht),_e=rt;return rt.promise.then(()=>{st.style.visibility="",ft()}).catch(at),()=>cancelRunningTask(_e)}reactExports.useEffect(it,[o,dt,c,h,g,b,_]);const nt=reactExports.useCallback(()=>{const{current:st}=dt;st&&(st.width=0,st.height=0)},[dt]);return reactExports.useEffect(()=>nt,[nt]),React.createElement("canvas",{className:`${a}__canvas`,dir:"ltr",ref:mergeRefs(lt,dt),style:{display:"block",userSelect:"none"}},$?React.createElement(StructTree,null):null)}function PageSVG(){const e=usePageContext();invariant(e);const{_className:s,onRenderSuccess:i,onRenderError:a,page:o,rotate:c,scale:d}=e;invariant(o);const[j,h]=useResolver(),{value:g,error:$}=j;function ct(){o&&i&&i(makePageCallback(o,d))}function ut(){$&&(isCancelException($)||(warning$1(!1,$.toString()),a&&a($)))}const lt=reactExports.useMemo(()=>o.getViewport({scale:d,rotation:c}),[o,c,d]);function dt(){h({type:"RESET"})}reactExports.useEffect(dt,[o,h,lt]);function ft(){if(!o)return;const it=makeCancellablePromise(o.getOperatorList());return it.promise.then(nt=>{new pdfjs.SVGGraphics(o.commonObjs,o.objs).getSVG(nt,lt).then(ht=>{if(!(ht instanceof SVGElement))throw new Error("getSVG returned unexpected result.");h({type:"RESOLVE",value:ht})}).catch(ht=>{h({type:"REJECT",error:ht})})}).catch(nt=>{h({type:"REJECT",error:nt})}),()=>cancelRunningTask(it)}reactExports.useEffect(ft,[o,h,lt]),reactExports.useEffect(()=>{if(g!==void 0){if(g===!1){ut();return}ct()}},[g]);function at(it){if(!it||!g)return;it.firstElementChild||it.appendChild(g);const{width:nt,height:st}=lt;g.setAttribute("width",`${nt}`),g.setAttribute("height",`${st}`)}const{width:b,height:_}=lt;return React.createElement("div",{className:`${s}__svg`,ref:it=>at(it),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:b,height:_,userSelect:"none"}})}function isTextItem(e){return"str"in e}function TextLayer(){const e=usePageContext();invariant(e);const{customTextRenderer:s,onGetTextError:i,onGetTextSuccess:a,onRenderTextLayerError:o,onRenderTextLayerSuccess:c,page:d,pageIndex:j,pageNumber:h,rotate:g,scale:$}=e;invariant(d);const[ct,ut]=useResolver(),{value:lt,error:dt}=ct,ft=reactExports.useRef(null),at=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){lt&&a&&a(lt)}function _(){dt&&(warning$1(!1,dt.toString()),i&&i(dt))}function it(){ut({type:"RESET"})}reactExports.useEffect(it,[d,ut]);function nt(){if(!d)return;const et=makeCancellablePromise(d.getTextContent()),yt=et;return et.promise.then(St=>{ut({type:"RESOLVE",value:St})}).catch(St=>{ut({type:"REJECT",error:St})}),()=>cancelRunningTask(yt)}reactExports.useEffect(nt,[d,ut]),reactExports.useEffect(()=>{if(lt!==void 0){if(lt===!1){_();return}b()}},[lt]);const st=reactExports.useCallback(()=>{c&&c()},[c]),ht=reactExports.useCallback(et=>{warning$1(!1,et.toString()),o&&o(et)},[o]);function rt(){const et=at.current;et&&et.classList.add("active")}function _e(){const et=at.current;et&&et.classList.remove("active")}const ot=reactExports.useMemo(()=>d.getViewport({scale:$,rotation:g}),[d,g,$]);function xt(){if(!d||!lt)return;const{current:et}=ft;if(!et)return;et.innerHTML="";const yt=d.streamTextContent({includeMarkedContent:!0}),St={container:et,textContentSource:yt,viewport:ot},It=pdfjs.renderTextLayer(St),Lt=It;return It.promise.then(()=>{const Ut=document.createElement("div");Ut.className="endOfContent",et.append(Ut),at.current=Ut;const Ft=et.querySelectorAll('[role="presentation"]');if(s){let _t=0;lt.items.forEach((vt,At)=>{if(!isTextItem(vt))return;const Nt=Ft[_t];if(!Nt)return;const wt=s(Object.assign({pageIndex:j,pageNumber:h,itemIndex:At},vt));Nt.innerHTML=wt,_t+=vt.str&&vt.hasEOL?2:1})}st()}).catch(ht),()=>cancelRunningTask(Lt)}return reactExports.useLayoutEffect(xt,[s,ht,st,d,j,h,lt,ot]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:_e,onMouseDown:rt,ref:ft})}function AnnotationLayer(){const e=useDocumentContext(),s=usePageContext();invariant(s);const i=Object.assign(Object.assign({},e),s),{imageResourcesPath:a,linkService:o,onGetAnnotationsError:c,onGetAnnotationsSuccess:d,onRenderAnnotationLayerError:j,onRenderAnnotationLayerSuccess:h,page:g,pdf:$,renderForms:ct,rotate:ut,scale:lt=1}=i;invariant($),invariant(g),invariant(o);const[dt,ft]=useResolver(),{value:at,error:b}=dt,_=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function it(){at&&d&&d(at)}function nt(){b&&(warning$1(!1,b.toString()),c&&c(b))}function st(){ft({type:"RESET"})}reactExports.useEffect(st,[ft,g]);function ht(){if(!g)return;const et=makeCancellablePromise(g.getAnnotations()),yt=et;return et.promise.then(St=>{ft({type:"RESOLVE",value:St})}).catch(St=>{ft({type:"REJECT",error:St})}),()=>{cancelRunningTask(yt)}}reactExports.useEffect(ht,[ft,g,ct]),reactExports.useEffect(()=>{if(at!==void 0){if(at===!1){nt();return}it()}},[at]);function rt(){h&&h()}function _e(et){warning$1(!1,`${et}`),j&&j(et)}const ot=reactExports.useMemo(()=>g.getViewport({scale:lt,rotation:ut}),[g,ut,lt]);function xt(){if(!$||!g||!o||!at)return;const{current:et}=_;if(!et)return;const yt=ot.clone({dontFlip:!0}),St={accessibilityManager:null,annotationCanvasMap:null,div:et,l10n:null,page:g,viewport:yt},It={annotations:at,annotationStorage:$.annotationStorage,div:et,downloadManager:null,imageResourcesPath:a,linkService:o,page:g,renderForms:ct,viewport:yt};et.innerHTML="";try{new pdfjs.AnnotationLayer(St).render(It),rt()}catch(Lt){_e(Lt)}return()=>{}}return reactExports.useEffect(xt,[at,a,o,g,ct,ot]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:_})}var __rest=function(e,s){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)s.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i};const defaultScale=1,Page=function e(s){const i=useDocumentContext(),a=Object.assign(Object.assign({},i),s),{_className:o="react-pdf__Page",_enableRegisterUnregisterPage:c=!0,canvasBackground:d,canvasRef:j,children:h,className:g,customRenderer:$,customTextRenderer:ct,devicePixelRatio:ut,error:lt="Failed to load the page.",height:dt,inputRef:ft,loading:at="Loading page…",noData:b="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:it,onGetStructTreeError:nt,onGetStructTreeSuccess:st,onGetTextError:ht,onGetTextSuccess:rt,onLoadError:_e,onLoadSuccess:ot,onRenderAnnotationLayerError:xt,onRenderAnnotationLayerSuccess:et,onRenderError:yt,onRenderSuccess:St,onRenderTextLayerError:It,onRenderTextLayerSuccess:Lt,pageIndex:Ut,pageNumber:Ft,pdf:_t,registerPage:vt,renderAnnotationLayer:At=!0,renderForms:Nt=!1,renderMode:wt="canvas",renderTextLayer:pt=!0,rotate:mt,scale:Et=defaultScale,unregisterPage:kt,width:jt}=a,Ct=__rest(a,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[zt,Xt]=useResolver(),{value:Tt,error:$t}=zt,Kt=reactExports.useRef(null);invariant(_t);const qt=isProvided(Ft)?Ft-1:Ut??null,rn=Ft??(isProvided(Ut)?Ut+1:null),Ht=mt??(Tt?Tt.rotate:null),Vt=reactExports.useMemo(()=>{if(!Tt)return null;let wn=1;const Cn=Et??defaultScale;if(jt||dt){const Mn=Tt.getViewport({scale:1,rotation:Ht});jt?wn=jt/Mn.width:dt&&(wn=dt/Mn.height)}return Cn*wn},[dt,Tt,Ht,Et,jt]);function gt(){return()=>{isProvided(qt)&&c&&kt&&kt(qt)}}reactExports.useEffect(gt,[c,_t,qt,kt]);function bt(){if(ot){if(!Tt||!Vt)return;ot(makePageCallback(Tt,Vt))}if(c&&vt){if(!isProvided(qt)||!Kt.current)return;vt(qt,Kt.current)}}function Dt(){$t&&(warning$1(!1,$t.toString()),_e&&_e($t))}function Ot(){Xt({type:"RESET"})}reactExports.useEffect(Ot,[Xt,_t,qt]);function Qt(){if(!_t||!rn)return;const wn=makeCancellablePromise(_t.getPage(rn)),Cn=wn;return wn.promise.then(Mn=>{Xt({type:"RESOLVE",value:Mn})}).catch(Mn=>{Xt({type:"REJECT",error:Mn})}),()=>cancelRunningTask(Cn)}reactExports.useEffect(Qt,[Xt,_t,qt,rn,vt]),reactExports.useEffect(()=>{if(Tt!==void 0){if(Tt===!1){Dt();return}bt()}},[Tt,Vt]);const sn=reactExports.useMemo(()=>Tt&&isProvided(qt)&&rn&&isProvided(Ht)&&isProvided(Vt)?{_className:o,canvasBackground:d,customTextRenderer:ct,devicePixelRatio:ut,onGetAnnotationsError:_,onGetAnnotationsSuccess:it,onGetStructTreeError:nt,onGetStructTreeSuccess:st,onGetTextError:ht,onGetTextSuccess:rt,onRenderAnnotationLayerError:xt,onRenderAnnotationLayerSuccess:et,onRenderError:yt,onRenderSuccess:St,onRenderTextLayerError:It,onRenderTextLayerSuccess:Lt,page:Tt,pageIndex:qt,pageNumber:rn,renderForms:Nt,renderTextLayer:pt,rotate:Ht,scale:Vt}:null,[o,d,ct,ut,_,it,nt,st,ht,rt,xt,et,yt,St,It,Lt,Tt,qt,rn,Nt,pt,Ht,Vt]),on=reactExports.useMemo(()=>makeEventProps(Ct,()=>Tt&&(Vt?makePageCallback(Tt,Vt):void 0)),[Ct,Tt,Vt]),Gt=`${qt}@${Vt}/${Ht}`,hn=`${qt}/${Ht}`;function dn(){switch(wt){case"custom":return invariant($),React.createElement($,{key:`${Gt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${hn}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Gt}_canvas`,canvasRef:j})}}function Rn(){return pt?React.createElement(TextLayer,{key:`${Gt}_text`}):null}function An(){return At?React.createElement(AnnotationLayer,{key:`${Gt}_annotations`}):null}function Nn(){return React.createElement(PageContext.Provider,{value:sn},dn(),Rn(),An(),h)}function xn(){return rn?_t===null||Tt===void 0||Tt===null?React.createElement(Message,{type:"loading"},typeof at=="function"?at():at):_t===!1||Tt===!1?React.createElement(Message,{type:"error"},typeof lt=="function"?lt():lt):Nn():React.createElement(Message,{type:"no-data"},typeof b=="function"?b():b)}return React.createElement("div",Object.assign({className:clsx(o,g),"data-page-number":rn,ref:mergeRefs(ft,Kt),style:{"--scale-factor":`${Vt}`,backgroundColor:d||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},on),xn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`;function PDFViewer(){var zt,Xt;const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(null),[d,j]=reactExports.useState(1),[h,g]=reactExports.useState(1),[$,ct]=reactExports.useState(1),[ut,lt]=reactExports.useState({}),[dt,ft]=reactExports.useState(!1),[at,b]=reactExports.useState(null),_=reactExports.useRef(null),[it,nt]=reactExports.useState(null),[st,ht]=reactExports.useState(!1),[rt]=reactExports.useState(()=>localStorage.getItem("userEmail")||"");useSubmissionStream(rt);const _e=reactExports.useRef([]),ot=Tt=>{if(!Tt)return null;const $t=String(Tt).trim().toLowerCase(),Kt=e.find(Ht=>String(Ht.id).toLowerCase()===$t);if(Kt)return Kt.id;const qt=e.find(Ht=>String(Ht.name||Ht.title||"").toLowerCase()===$t);if(qt)return qt.id;const rn=e.find(Ht=>String(Ht.slug||"").toLowerCase()===$t);return rn?rn.id:null},xt=(Tt,$t)=>{try{const Kt=`pdf:${Tt}:${rt}`,qt=JSON.parse(localStorage.getItem("access")||"{}");qt[Kt]={expiry:$t},localStorage.setItem("access",JSON.stringify(qt))}catch{}},et=Tt=>{try{const $t=`pdf:${Tt}:${rt}`,Kt=JSON.parse(localStorage.getItem("access")||"{}");Kt[$t]&&(delete Kt[$t],localStorage.setItem("access",JSON.stringify(Kt)))}catch{}},yt=async Tt=>{const $t=[];$t.push(await loadAccess("pdf",Tt.id,rt)),Tt.name&&$t.push(await loadAccess("pdf",Tt.name,rt)),Tt.slug&&$t.push(await loadAccess("pdf",Tt.slug,rt));const Kt=$t.filter(qt=>(qt==null?void 0:qt.expiry)&&qt.expiry>Date.now());return Kt.length===0?null:Kt.reduce((qt,rn)=>qt.expiry>rn.expiry?qt:rn)},St=async({featureId:Tt,expiry:$t,message:Kt})=>{const qt=ot(Tt);if(!qt){_e.current.push({type:"grant",featureId:Tt,expiry:$t,message:Kt});return}xt(qt,$t),lt(bt=>({...bt,[qt]:{expiry:$t,source:"event"}})),nt(null),ht(!1);const rn=localStorage.getItem("userName"),Ht=rt?rt.split("@")[0]:"User";b(Kt||`🎉 Congratulations ${rn||Ht||"User"}! Your access has been unlocked.`),setTimeout(()=>b(null),4500);const gt=await loadAccess("pdf",qt,rt);lt(bt=>({...bt,[qt]:gt}))},It=({featureId:Tt})=>{const $t=ot(Tt);if(!$t){_e.current.push({type:"revoke",featureId:Tt});return}et($t),lt(qt=>({...qt,[$t]:null}));const Kt=e.find(qt=>String(qt.id)===String($t));Kt&&nt(Kt),ht(!0)},Lt=async()=>{ft(!0);const $t=(await fetchJSON(`${API_BASE}/api/pdfs`)).subjects||[];s($t),!i&&$t[0]&&a($t[0].id);const Kt={};for(const qt of $t)Kt[qt.id]=await yt(qt);lt(Kt),ft(!1)};reactExports.useEffect(()=>{Lt()},[]),reactExports.useEffect(()=>{if(!e.length||_e.current.length===0)return;const Tt=_e.current.splice(0,_e.current.length);for(const $t of Tt)$t.type==="grant"&&St($t),$t.type==="revoke"&&It($t)},[e.length]),reactExports.useEffect(()=>{var $t;if(!i)return;const Tt=e.find(Kt=>Kt.id===i);Tt&&(($t=Tt.chapters)!=null&&$t[0])?(c(Tt.chapters[0]),g(1),ct(1),nt(null)):c(null)},[i,e]),reactExports.useEffect(()=>{const Tt=ut[i];Tt!=null&&Tt.expiry&&Tt.expiry>Date.now()&&ht(!1)},[ut,i]);const Ut=usePreviewLock({type:"notebook",id:(o==null?void 0:o.id)||"none",previewSeconds:2});reactExports.useEffect(()=>{if(!o)return;const Tt=ut[i];if(Tt!=null&&Tt.expiry&&Tt.expiry>Date.now()||Ut.unlocked)return;const $t=setTimeout(()=>{const Kt=e.find(qt=>qt.id===i);Kt&&nt(Kt)},2e3);return()=>clearTimeout($t)},[o==null?void 0:o.id,i,e,Ut.unlocked,ut]);const Ft=({numPages:Tt})=>{j(Tt||1),g(1)},_t=async()=>{if(e.length===0)return;ft(!0);const Tt={};for(const $t of e)Tt[$t.id]=await yt($t);lt(Tt),ft(!1)};useAccessSync(async Tt=>{if(!Tt||Tt.email!==rt||Tt.feature!=="pdf")return;if(Tt.expiry&&Tt.expiry>Date.now())return St({featureId:Tt.featureId,expiry:Tt.expiry,message:Tt.message});if(Tt.revoked===!0)return It({featureId:Tt.featureId});const $t=ot(Tt.featureId)||Tt.featureId,Kt=await loadAccess("pdf",$t,rt);if(lt(qt=>({...qt,[$t]:Kt})),Kt)nt(null),ht(!1);else{const qt=e.find(rn=>String(rn.id)===String($t));qt&&nt(qt),ht(!0)}}),reactExports.useEffect(()=>{const Tt=()=>_t();return window.addEventListener("focus",Tt),()=>window.removeEventListener("focus",Tt)},[e,rt]),reactExports.useEffect(()=>{const Tt=()=>_t();return window.addEventListener("softRefresh",Tt),()=>window.removeEventListener("softRefresh",Tt)},[]),reactExports.useEffect(()=>{const Tt=Date.now();let $t=1/0;for(const rn of Object.values(ut))rn!=null&&rn.expiry&&rn.expiry>Tt&&($t=Math.min($t,rn.expiry));if(!isFinite($t))return;const Kt=Math.max(0,$t-Tt+500),qt=setTimeout(()=>_t(),Kt);return()=>clearTimeout(qt)},[ut]);const[vt,At]=reactExports.useState(""),[Nt,wt]=reactExports.useState({title:"",file:null,locked:!0}),pt=async Tt=>{Tt.preventDefault(),await fetch(`${API_BASE}/api/pdfs/subjects`,{method:"POST",headers:{...authHeaders(),"Content-Type":"application/json"},body:JSON.stringify({name:vt||"New Subject"})}),At(""),await Lt()},mt=async Tt=>{if(Tt.preventDefault(),!i||!Nt.file)return;const $t=new FormData;$t.append("title",Nt.title||"Untitled"),$t.append("locked",String(Nt.locked)),$t.append("pdf",Nt.file),await fetch(`${API_BASE}/api/pdfs/subjects/${i}/chapters`,{method:"POST",headers:authHeaders(),body:$t}),wt({title:"",file:null,locked:!0}),await Lt()},Et=async Tt=>{await fetch(`${API_BASE}/api/pdfs/subjects/${i}/chapters/${Tt}`,{method:"DELETE",headers:authHeaders()}),await Lt()},kt=async(Tt,$t)=>{await fetch(`${API_BASE}/api/pdfs/subjects/${i}/chapters/${Tt}/lock`,{method:"PATCH",headers:{...authHeaders(),"Content-Type":"application/json"},body:JSON.stringify({locked:$t})}),await Lt()};reactExports.useEffect(()=>{const Tt=$t=>{$t.key==="ArrowRight"&&g(Kt=>Math.min(d,Kt+1)),$t.key==="ArrowLeft"&&g(Kt=>Math.max(1,Kt-1)),($t.key==="+"||$t.key==="=")&&ct(Kt=>Math.min(2,+(Kt+.1).toFixed(2))),$t.key==="-"&&ct(Kt=>Math.max(.6,+(Kt-.1).toFixed(2)))};return window.addEventListener("keydown",Tt),()=>window.removeEventListener("keydown",Tt)},[d]);const jt=e.find(Tt=>Tt.id===i);reactExports.useMemo(()=>h>1,[h]),reactExports.useMemo(()=>h<d,[h,d]);const Ct=((zt=ut[i])==null?void 0:zt.expiry)&&ut[i].expiry>Date.now();return jsxRuntimeExports.jsxs("section",{id:"pdf",className:"max-w-6xl mx-auto px-4 py-10 grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("aside",{className:"md:col-span-1 border rounded-2xl bg-white",children:[jsxRuntimeExports.jsx("div",{className:"p-3 border-b font-semibold",children:"PDF Notebook"}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-3 max-h-[60vh] overflow-auto",children:[e.map(Tt=>{const $t=ut[Tt.id];return jsxRuntimeExports.jsxs("div",{className:`border rounded-xl ${i===Tt.id?"ring-2 ring-blue-500":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>a(Tt.id),className:"text-left font-medium flex-1",children:Tt.name}),$t!=null&&$t.expiry&&$t.expiry>Date.now()?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full animate-pulse",children:[jsxRuntimeExports.jsx("span",{children:"✅ Unlocked"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:$t.expiry-Date.now()}),dt&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full"})]}):jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-1 text-xs bg-red-500 text-white px-2 py-1 rounded",onClick:()=>{nt(Tt),ht(!1)},children:[jsxRuntimeExports.jsx("span",{children:"Unlock"}),dt&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-white/80 border-t-transparent rounded-full"})]})]}),i===Tt.id&&jsxRuntimeExports.jsxs("div",{className:"px-2 pb-2 space-y-1",children:[(Tt.chapters||[]).map(Kt=>{const qt=$t!=null&&$t.expiry&&$t.expiry>Date.now()?$t:null;return jsxRuntimeExports.jsxs("div",{className:`px-2 py-2 rounded cursor-pointer hover:bg-gray-50 flex items-center justify-between ${(o==null?void 0:o.id)===Kt.id?"bg-gray-50":""}`,onClick:()=>{c(Kt),ct(1),g(1)},children:[jsxRuntimeExports.jsx("div",{className:"truncate",children:jsxRuntimeExports.jsx("div",{className:"text-sm font-medium truncate",children:Kt.title})}),qt?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full animate-pulse",children:[jsxRuntimeExports.jsx("span",{children:"✅ Unlocked"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:qt.expiry-Date.now()}),dt&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-green-700 border-t-transparent rounded-full"})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:[jsxRuntimeExports.jsx("span",{children:"Locked"}),dt&&jsxRuntimeExports.jsx("span",{className:"animate-spin inline-block w-3 h-3 border-2 border-red-700 border-t-transparent rounded-full"})]})]},Kt.id)}),(Tt.chapters||[]).length===0&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 px-2 pb-2",children:"No chapters"})]})]},Tt.id)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-sm",children:"No subjects yet"})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{className:"p-3 border-t",children:jsxRuntimeExports.jsxs("form",{onSubmit:pt,className:"grid grid-cols-[1fr_auto] gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"New subject name",value:vt,onChange:Tt=>At(Tt.target.value)}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-3 rounded",children:"Add"})]})})]}),jsxRuntimeExports.jsxs("div",{ref:_,className:`md:col-span-2 border rounded-2xl bg-white p-5 relative ${it||st&&!Ct?"blur-sm opacity-80 pointer-events-none":""}`,children:[at&&jsxRuntimeExports.jsx("div",{className:"absolute top-3 right-3 z-20 bg-green-600 text-white text-sm px-3 py-2 rounded-lg shadow",children:at}),o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:o.title}),(()=>{const Tt=ut[i];return jsxRuntimeExports.jsxs("div",{className:`text-xs px-2 py-1 rounded-full ${Tt!=null&&Tt.expiry&&Tt.expiry>Date.now()?"bg-green-100 text-green-700 animate-pulse":"bg-red-100 text-red-700"}`,children:[Tt!=null&&Tt.expiry&&Tt.expiry>Date.now()?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["✅ Unlocked"," ",jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:Tt.expiry-Date.now()})]}):`Locked (${Ut.countLeft}s preview)`,dt&&jsxRuntimeExports.jsx("span",{className:"ml-1 align-middle animate-spin inline-block w-3 h-3 border-2 border-current border-t-transparent rounded-full"})]})})()]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-3 mb-3 text-sm",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ct(Tt=>Math.max(.6,+(Tt-.1).toFixed(2))),className:"px-3 py-1 rounded border",children:"-"}),jsxRuntimeExports.jsxs("span",{children:[Math.round($*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:()=>ct(Tt=>Math.min(2,+(Tt+.1).toFixed(2))),className:"px-3 py-1 rounded border",children:"+"}),jsxRuntimeExports.jsx("button",{onClick:()=>ct(1),className:"px-3 py-1 rounded border",children:"Reset"}),jsxRuntimeExports.jsx("button",{disabled:h<=1,onClick:()=>g(Tt=>Math.max(1,Tt-1)),className:`px-3 py-1 rounded border ${h<=1?"opacity-50 cursor-not-allowed":""}`,children:"Prev"}),jsxRuntimeExports.jsxs("span",{children:["Page ",h," / ",d]}),jsxRuntimeExports.jsx("button",{disabled:h>=d,onClick:()=>g(Tt=>Math.min(d,Tt+1)),className:`px-3 py-1 rounded border ${h>=d?"opacity-50 cursor-not-allowed":""}`,children:"Next"})]}),jsxRuntimeExports.jsx("div",{className:`bg-white shadow-lg p-3 max-h-[70vh] overflow-auto rounded-xl ${(Xt=ut[i])!=null&&Xt.expiry?"":"select-none"}`,onContextMenu:Tt=>Tt.preventDefault(),children:jsxRuntimeExports.jsx(Document,{file:`${API_BASE}${o.url}`,onLoadSuccess:Ft,renderMode:"canvas",loading:jsxRuntimeExports.jsx("div",{className:"p-6 text-gray-500",children:"Loading PDF…"}),children:jsxRuntimeExports.jsx(Page,{pageNumber:h,scale:$,renderAnnotationLayer:!1,renderTextLayer:!1})})}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("div",{className:"mt-3 flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:"text-xs px-3 py-1 rounded border",onClick:()=>kt(o.id,!o.locked),children:o.locked?"Unlock":"Lock"}),jsxRuntimeExports.jsx("button",{className:"text-xs px-3 py-1 rounded border text-red-600",onClick:()=>Et(o.id),children:"Delete"})]})})]}):jsxRuntimeExports.jsx("div",{className:"text-gray-500",children:"Select a chapter"})]}),it&&jsxRuntimeExports.jsx(QROverlay,{open:!!it,onClose:()=>{nt(null),ht(!0)},title:it.name,subjectLabel:"PDF Notebook",inline:!0,focusRef:_,feature:"pdf",featureId:it.id}),o&&jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("form",{onSubmit:mt,className:"md:col-span-3 mt-6 border-t pt-4 grid gap-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:"Upload chapter (PDF) to subject"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"Chapter title",value:Nt.title,onChange:Tt=>wt({...Nt,title:Tt.target.value})}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Nt.locked,onChange:Tt=>wt({...Nt,locked:Tt.target.checked})}),"Locked by default"]})]}),jsxRuntimeExports.jsx("input",{type:"file",accept:"application/pdf",onChange:Tt=>{var $t;return wt({...Nt,file:(($t=Tt.target.files)==null?void 0:$t[0])||null})}}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Subject: ",(jt==null?void 0:jt.name)||"—"]}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-4 py-2 rounded w-fit",disabled:!i||!Nt.file,children:"Upload"})]})})]})}function NotebookPage(){return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#f8fafc]",children:jsxRuntimeExports.jsx(PDFViewer,{})})}function AdminBannerEditor(){var at;const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(""),[d,j]=reactExports.useState(""),[h,g]=reactExports.useState(""),[$,ct]=reactExports.useState("");async function ut(){const b=await getJSON("/api/banners");s(Array.isArray(b)?b:b.banners||b.items||b.data||[])}reactExports.useEffect(()=>{ut()},[]);function lt(b){var it;const _=((it=b.target.files)==null?void 0:it[0])||null;a(_),ct(_?URL.createObjectURL(_):"")}async function dt(){if(!i&&!h)return alert("Choose a file or paste a URL");if(i){const b=new FormData;b.append("file",i),b.append("title",o||"Untitled"),b.append("link",d||""),await upload("/api/banners",b)}else{const b=new FormData;b.append("title",o||"Untitled"),b.append("link",d||""),b.append("url",h),b.append("type",h.toLowerCase().endsWith(".mp4")?"video":"image"),await upload("/api/banners",b)}c(""),j(""),g(""),a(null),ct(""),await ut(),alert("✅ Uploaded")}async function ft(b){await delJSON(`/api/banners/${b}`),await ut()}return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"Title",value:o,onChange:b=>c(b.target.value)}),jsxRuntimeExports.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"Optional link",value:d,onChange:b=>j(b.target.value)}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*,video/*",onChange:lt}),jsxRuntimeExports.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"Or paste image/video URL",value:h,onChange:b=>g(b.target.value)}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black text-white px-3 rounded",children:"Upload"})]}),$&&((at=i==null?void 0:i.type)!=null&&at.startsWith("video")?jsxRuntimeExports.jsx("video",{src:$,controls:!0,className:"w-48 rounded"}):jsxRuntimeExports.jsx("img",{src:$,className:"w-48 rounded",alt:""})),jsxRuntimeExports.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.map(b=>jsxRuntimeExports.jsxs("li",{className:"p-3 border rounded space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:b.title}),b.type==="video"?jsxRuntimeExports.jsx("video",{src:absUrl(b.url),controls:!0,className:"w-full rounded"}):jsxRuntimeExports.jsx("img",{src:absUrl(b.url),className:"w-full rounded",alt:""}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[b.link&&jsxRuntimeExports.jsx("a",{href:b.link,className:"text-blue-600 underline",target:"_blank",rel:"noreferrer",children:"open"}),jsxRuntimeExports.jsx("button",{onClick:()=>ft(b._id||b.id),className:"text-red-600 text-sm",children:"Delete"})]})]},b._id||b.id))})]})}function AdminArticleEditor(){const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,j]=reactExports.useState(!1),[h,g]=reactExports.useState(null);async function $(){const lt=await getJSON("/api/articles");s(lt.articles||lt.data||[])}reactExports.useEffect(()=>{$()},[]);async function ct(lt){if(lt.preventDefault(),h){const dt=new FormData;dt.append("title",i),dt.append("content",o),dt.append("allowHtml",String(d)),dt.append("image",h),await upload("/api/articles",dt)}else await postJSON("/api/articles",{title:i,content:o,allowHtml:d});a(""),c(""),j(!1),g(null),await $()}async function ut(lt){await delJSON(`/api/articles/${lt}`),await $()}return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"grid gap-2 border rounded p-3 max-w-sm",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded",placeholder:"Title",value:i,onChange:lt=>a(lt.target.value)}),jsxRuntimeExports.jsx("textarea",{className:"border p-2 rounded h-32",placeholder:"Content",value:o,onChange:lt=>c(lt.target.value)}),jsxRuntimeExports.jsxs("label",{className:"text-sm flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:d,onChange:lt=>j(lt.target.checked)}),"Allow HTML rendering"]}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:lt=>{var dt;return g(((dt=lt.target.files)==null?void 0:dt[0])||null)}}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-3 py-1 rounded",children:"Publish"})]}),jsxRuntimeExports.jsx("ul",{className:"space-y-2",children:e.map(lt=>jsxRuntimeExports.jsxs("li",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:lt.title}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(lt._id||lt.id),className:"text-red-600 text-sm",children:"Delete"})]},lt._id||lt.id))})]})}function AdminPodcastEditor(){var ot;const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,j]=reactExports.useState(""),[h,g]=reactExports.useState(""),[$,ct]=reactExports.useState(null),[ut,lt]=reactExports.useState(""),[dt,ft]=reactExports.useState(""),[at,b]=reactExports.useState(!1),_=xt=>Array.isArray(xt)?xt:Array.isArray(xt==null?void 0:xt.playlists)?xt.playlists:Array.isArray(xt==null?void 0:xt.items)?xt.items:Array.isArray(xt==null?void 0:xt.data)?xt.data:[];async function it(){try{ft("");const xt=await getJSON("/api/podcasts"),et=_(xt);if(s(et),et.length){const yt=et.find(St=>(St._id||St.id||St.name)===i);a(yt?yt._id||yt.id||yt.name:et[0]._id||et[0].id||et[0].name)}else a("")}catch(xt){console.error(xt),ft("Failed to load podcasts"),s([]),a("")}}reactExports.useEffect(()=>{it()},[]);const nt=reactExports.useMemo(()=>e.find(xt=>(xt._id||xt.id||xt.name)===i),[e,i]);async function st(){const xt=o.trim();if(xt)try{b(!0),ft(""),await postJSON("/api/podcasts/playlists",{name:xt}),c(""),await it()}catch(et){console.error(et),alert("Create playlist failed: "+((et==null?void 0:et.message)||et))}finally{b(!1)}}async function ht(xt){if(xt&&confirm("Delete this playlist and all its items?"))try{b(!0),ft(""),await delJSON(`/api/podcasts/${encodeURIComponent(xt)}`),i===xt&&a(""),await it()}catch{try{await delJSON(`/api/podcasts/playlists/${encodeURIComponent(xt)}`),i===xt&&a(""),await it()}catch(yt){console.error(yt),alert("Delete playlist failed: "+((yt==null?void 0:yt.message)||yt))}}finally{b(!1)}}async function rt(xt){var St;(St=xt==null?void 0:xt.preventDefault)==null||St.call(xt);const et=(nt==null?void 0:nt._id)||(nt==null?void 0:nt.id)||(nt==null?void 0:nt.name)||i;if(!et)return alert("Select a playlist first");if(!$&&!ut)return alert("Choose a .mp3 file or paste a direct audio URL");const yt=new FormData;yt.append("playlist",et),yt.append("title",d||"Untitled"),yt.append("author",h||""),$?yt.append("file",$):yt.append("url",ut);try{b(!0),ft(""),await upload("/api/podcasts/items",yt),j(""),g(""),ct(null),lt(""),await it()}catch(It){alert(`Upload failed:
`+((It==null?void 0:It.message)||String(It)))}finally{b(!1)}}async function _e(xt){if(xt)try{b(!0),ft(""),await delJSON(`/api/podcasts/items/${encodeURIComponent(xt)}`),await it()}catch(et){console.error(et),alert("Delete failed: "+((et==null?void 0:et.message)||et))}finally{b(!1)}}return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"New playlist name",value:o,onChange:xt=>c(xt.target.value),disabled:at}),jsxRuntimeExports.jsx("button",{onClick:st,className:"bg-black text-white px-3 rounded disabled:opacity-60",disabled:at||!o.trim(),children:"Add Playlist"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[e.map(xt=>{var St;const et=xt._id||xt.id||xt.name,yt=et===i;return jsxRuntimeExports.jsxs("div",{className:`border rounded p-2 flex items-center justify-between cursor-pointer ${yt?"ring-2 ring-blue-500":""}`,onClick:()=>a(et),children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:xt.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[((St=xt.items)==null?void 0:St.length)??0," items"]})]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:It=>{It.stopPropagation(),ht(et)},disabled:at,children:"Delete"})]},et)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-400",children:"No playlists yet"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:rt,className:"space-y-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Title",value:d,onChange:xt=>j(xt.target.value),disabled:at}),jsxRuntimeExports.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Author / Speaker",value:h,onChange:xt=>g(xt.target.value),disabled:at}),jsxRuntimeExports.jsx("input",{type:"file",accept:"audio/*",onChange:xt=>{var et;return ct(((et=xt.target.files)==null?void 0:et[0])||null)},disabled:at}),jsxRuntimeExports.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Audio URL (optional, direct .mp3)",value:ut,onChange:xt=>lt(xt.target.value),disabled:at}),nt&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Selected key: ",jsxRuntimeExports.jsx("code",{children:nt._id||nt.id||nt.name})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-black text-white px-3 rounded disabled:opacity-60",disabled:at||!i,children:"Upload"})]})]}),dt&&jsxRuntimeExports.jsx("div",{className:"text-sm whitespace-pre-wrap text-red-600",children:dt}),nt&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold",children:["Items in “",nt.name,"”"]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:()=>ht(nt._id||nt.id||nt.name),disabled:at,children:"Delete Playlist"})]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[(nt.items||[]).map(xt=>jsxRuntimeExports.jsxs("li",{className:"border rounded p-2 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:xt.title}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:xt.author||xt.artist})]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:()=>_e(xt._id||xt.id),disabled:at,children:"Delete"})]},xt._id||xt.id)),(((ot=nt.items)==null?void 0:ot.length)??0)===0&&jsxRuntimeExports.jsx("li",{className:"text-gray-400",children:"No audios yet"})]})]})]})}function AdminVideoEditor(){var ht;const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,j]=reactExports.useState(""),[h,g]=reactExports.useState(null),[$,ct]=reactExports.useState(""),[ut,lt]=reactExports.useState(!1),[dt,ft]=reactExports.useState(""),at=rt=>Array.isArray(rt)?rt:Array.isArray(rt==null?void 0:rt.playlists)?rt.playlists:Array.isArray(rt==null?void 0:rt.items)?rt.items:Array.isArray(rt==null?void 0:rt.data)?rt.data:[];async function b(){try{ft("");const rt=await getJSON("/api/videos"),_e=at(rt);if(s(_e),_e.length){const ot=_e.find(xt=>(xt._id||xt.id||xt.name)===i);a(ot?ot._id||ot.id||ot.name:_e[0]._id||_e[0].id||_e[0].name)}else a("")}catch(rt){console.error(rt),ft("Failed to load video playlists"),s([]),a("")}}reactExports.useEffect(()=>{b()},[]);const _=reactExports.useMemo(()=>e.find(rt=>(rt._id||rt.id||rt.name)===i),[e,i]);async function it(){const rt=o.trim();if(rt)try{lt(!0),await postJSON("/api/videos/playlists",{name:rt}),c(""),await b()}catch(_e){alert("Create playlist failed: "+((_e==null?void 0:_e.message)||_e))}finally{lt(!1)}}async function nt(rt){if(rt&&confirm("Delete this playlist and all its videos?")){lt(!0);try{await delJSON(`/api/videos/${encodeURIComponent(rt)}`)}catch{await delJSON(`/api/videos/playlists/${encodeURIComponent(rt)}`)}finally{lt(!1)}i===rt&&a(""),await b()}}async function st(rt){var xt;(xt=rt==null?void 0:rt.preventDefault)==null||xt.call(rt);const _e=(_==null?void 0:_._id)||(_==null?void 0:_.id)||(_==null?void 0:_.name)||i;if(!_e)return alert("Select a playlist first");if(!h&&!$)return alert("Choose a file or paste a direct video URL");const ot=new FormData;ot.append("playlist",_e),ot.append("title",d||"Untitled"),h?ot.append("file",h):ot.append("url",$);try{lt(!0),await upload("/api/videos/items",ot),j(""),g(null),ct(""),await b()}catch(et){alert("Upload failed: "+((et==null?void 0:et.message)||et))}finally{lt(!1)}}return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"New playlist name",value:o,onChange:rt=>c(rt.target.value),disabled:ut}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-3 rounded disabled:opacity-60",onClick:it,disabled:ut||!o.trim(),children:"Add Playlist"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[e.map(rt=>{var xt;const _e=rt._id||rt.id||rt.name,ot=_e===i;return jsxRuntimeExports.jsxs("div",{className:`border rounded p-2 flex items-center justify-between cursor-pointer ${ot?"ring-2 ring-blue-500":""}`,onClick:()=>a(_e),children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:rt.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[((xt=rt.items)==null?void 0:xt.length)??0," items"]})]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:et=>{et.stopPropagation(),nt(_e)},disabled:ut,children:"Delete"})]},_e)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-400",children:"No playlists yet"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:st,className:"space-y-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Title",value:d,onChange:rt=>j(rt.target.value),disabled:ut}),jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",onChange:rt=>{var _e;return g(((_e=rt.target.files)==null?void 0:_e[0])||null)},disabled:ut}),jsxRuntimeExports.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Video URL (optional, direct .mp4)",value:$,onChange:rt=>ct(rt.target.value),disabled:ut}),_&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Selected key: ",jsxRuntimeExports.jsx("code",{children:_._id||_.id||_.name})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-black text-white px-3 rounded disabled:opacity-60",disabled:ut||!i,children:"Upload"})]})]}),_&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold",children:["Items in “",_.name,"”"]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:()=>nt(_._id||_.id||_.name),disabled:ut,children:"Delete Playlist"})]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[(_.items||[]).map(rt=>jsxRuntimeExports.jsxs("li",{className:"border rounded p-2",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:rt.title}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 break-all",children:absUrl(rt.url)})]},rt._id||rt.id)),(((ht=_.items)==null?void 0:ht.length)??0)===0&&jsxRuntimeExports.jsx("li",{className:"text-gray-400",children:"No videos yet"})]})]}),dt&&jsxRuntimeExports.jsx("div",{className:"text-sm whitespace-pre-wrap text-red-600",children:dt})]})}function AdminPDFEditor(){var it;const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(""),[o,c]=reactExports.useState(""),[d,j]=reactExports.useState(""),[h,g]=reactExports.useState(null),[$,ct]=reactExports.useState(!1),ut=reactExports.useRef(null);async function lt(){var st;const nt=await getJSON("/api/pdfs");s(nt.subjects||[]),!i&&((st=nt.subjects)!=null&&st[0])&&a(nt.subjects[0].id)}reactExports.useEffect(()=>{lt()},[]);async function dt(){if(o.trim()){ct(!0);try{await postJSON("/api/pdfs/subjects",{name:o}),c(""),await lt()}finally{ct(!1)}}}async function ft(nt){if(confirm("Delete subject and all chapters?")){ct(!0);try{await delJSON(`/api/pdfs/subjects/${nt}`),i===nt&&a(""),await lt()}finally{ct(!1)}}}async function at(nt){if(nt.preventDefault(),!i||!h)return;const st=new FormData;st.append("title",d||"Untitled"),st.append("locked","true"),st.append("pdf",h),await upload(`/api/pdfs/subjects/${i}/chapters`,st),j(""),g(null),ut.current&&(ut.current.value=""),await lt()}async function b(nt){confirm("Delete this chapter?")&&(await delJSON(`/api/pdfs/subjects/${i}/chapters/${nt}`),await lt())}const _=e.find(nt=>nt.id===i);return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded flex-1",placeholder:"New subject name",value:o,onChange:nt=>c(nt.target.value),disabled:$}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"bg-black text-white px-3 rounded",disabled:$,children:"Add"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[e.map(nt=>{var st;return jsxRuntimeExports.jsxs("div",{className:`border rounded p-2 flex items-center justify-between cursor-pointer ${i===nt.id?"ring-2 ring-blue-500":""}`,onClick:()=>a(nt.id),children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:nt.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[((st=nt.chapters)==null?void 0:st.length)||0," chapters"]})]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:ht=>{ht.stopPropagation(),ft(nt.id)},children:"Delete"})]},nt.id)}),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-400",children:"No subjects yet"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:at,className:"space-y-2",children:[jsxRuntimeExports.jsx("input",{className:"border p-2 rounded w-full",placeholder:"Chapter title",value:d,onChange:nt=>j(nt.target.value)}),jsxRuntimeExports.jsx("input",{ref:ut,type:"file",accept:"application/pdf",onChange:nt=>{var st;return g(((st=nt.target.files)==null?void 0:st[0])||null)}}),_&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["Subject: ",_.name]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"bg-black text-white px-3 rounded",disabled:!i||!h,children:"Upload"})]})]}),_&&jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold",children:["Chapters in “",_.name,"”"]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[(_.chapters||[]).map(nt=>jsxRuntimeExports.jsxs("li",{className:"border rounded p-2 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"truncate",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:nt.title}),jsxRuntimeExports.jsx("a",{href:nt.url,target:"_blank",rel:"noreferrer",className:"text-xs underline text-blue-600",children:"Open"})]}),jsxRuntimeExports.jsx("button",{className:"text-red-600 text-sm",onClick:()=>b(nt.id),children:"Delete"})]},nt.id)),(((it=_.chapters)==null?void 0:it.length)??0)===0&&jsxRuntimeExports.jsx("li",{className:"text-gray-400",children:"No chapters yet"})]})]})]})}function QREditor(){var ut,lt,dt,ft,at,b;const[e,s]=reactExports.useState(null),[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState({}),[d,j]=reactExports.useState(Date.now()),h=localStorage.getItem("ownerKey");async function g(){const _=await getJSON("/api/qr");_!=null&&_.success&&(s(_.qr),c({currency:_.qr.currency||"₹",weeklyLabel:_.qr.plans.weekly.label,weeklyPrice:_.qr.plans.weekly.price,monthlyLabel:_.qr.plans.monthly.label,monthlyPrice:_.qr.plans.monthly.price,yearlyLabel:_.qr.plans.yearly.label,yearlyPrice:_.qr.plans.yearly.price,image:null}))}reactExports.useEffect(()=>{g()},[]);async function $(_){if(_.preventDefault(),!h){alert(`⚠️ No ownerKey found in localStorage.
Run in console:
localStorage.setItem('ownerKey', 'LAWNOWNER2025')`);return}a(!0);try{const it=new FormData;o.image&&it.append("image",o.image),it.append("currency",o.currency),it.append("weeklyLabel",o.weeklyLabel),it.append("weeklyPrice",o.weeklyPrice),it.append("monthlyLabel",o.monthlyLabel),it.append("monthlyPrice",o.monthlyPrice),it.append("yearlyLabel",o.yearlyLabel),it.append("yearlyPrice",o.yearlyPrice),await upload("/api/qr",it,{headers:authHeaders()}),c({...o,image:null}),await g(),j(Date.now()),alert("✅ Saved successfully")}catch(it){alert("Save failed: "+((it==null?void 0:it.message)||it))}finally{a(!1)}}async function ct(){if(e!=null&&e.url&&confirm("Delete the current QR image?")){a(!0);try{await delJSON("/api/qr/image",{headers:authHeaders()}),await g(),j(Date.now())}finally{a(!1)}}}return e?jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 bg-white rounded-2xl border mt-8",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg mb-4",children:"QR & Plans"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"w-64 h-64 border rounded-xl overflow-hidden bg-gray-50",children:e.url?jsxRuntimeExports.jsx("img",{src:`${API_BASE}${e.url}?t=${d}`,alt:"QR",className:"w-full h-full object-contain"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full grid place-items-center text-gray-400 text-sm",children:"No QR uploaded"})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"border rounded px-3 py-1 text-sm",children:"Refresh"}),jsxRuntimeExports.jsx("button",{onClick:ct,disabled:!e.url||i,className:"border rounded px-3 py-1 text-sm text-red-600",children:"Delete Image"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 text-sm text-gray-700",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",children:"Current Plans:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc pl-4",children:[jsxRuntimeExports.jsxs("li",{children:[(ut=e.plans.weekly)==null?void 0:ut.label," – ",e.currency,(lt=e.plans.weekly)==null?void 0:lt.price]}),jsxRuntimeExports.jsxs("li",{children:[(dt=e.plans.monthly)==null?void 0:dt.label," – ",e.currency,(ft=e.plans.monthly)==null?void 0:ft.price]}),jsxRuntimeExports.jsxs("li",{children:[(at=e.plans.yearly)==null?void 0:at.label," – ",e.currency,(b=e.plans.yearly)==null?void 0:b.price]})]})]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:$,className:"grid gap-2 items-start",children:[jsxRuntimeExports.jsx("label",{children:"Currency"}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2 w-24",value:o.currency,onChange:_=>c(it=>({...it,currency:_.target.value}))}),jsxRuntimeExports.jsx("label",{children:"Weekly Plan"}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",value:o.weeklyLabel,placeholder:"Weekly Label",onChange:_=>c(it=>({...it,weeklyLabel:_.target.value}))}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",type:"number",value:o.weeklyPrice,placeholder:"Weekly Price",onChange:_=>c(it=>({...it,weeklyPrice:_.target.value}))}),jsxRuntimeExports.jsx("label",{children:"Monthly Plan"}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",value:o.monthlyLabel,placeholder:"Monthly Label",onChange:_=>c(it=>({...it,monthlyLabel:_.target.value}))}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",type:"number",value:o.monthlyPrice,placeholder:"Monthly Price",onChange:_=>c(it=>({...it,monthlyPrice:_.target.value}))}),jsxRuntimeExports.jsx("label",{children:"Yearly Plan"}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",value:o.yearlyLabel,placeholder:"Yearly Label",onChange:_=>c(it=>({...it,yearlyLabel:_.target.value}))}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",type:"number",value:o.yearlyPrice,placeholder:"Yearly Price",onChange:_=>c(it=>({...it,yearlyPrice:_.target.value}))}),jsxRuntimeExports.jsx("label",{children:"QR Image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:_=>c(it=>{var nt;return{...it,image:((nt=_.target.files)==null?void 0:nt[0])||null}})}),jsxRuntimeExports.jsx("button",{disabled:i,className:"bg-blue-600 text-white px-4 py-2 rounded w-fit mt-2",children:i?"Saving…":"Save"})]})]})]})}):null}function AdminSubmissions(){const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(new Set),[o,c]=reactExports.useState(!1),[d,j]=reactExports.useState("all"),[h,g]=reactExports.useState(""),[$,ct]=reactExports.useState(localStorage.getItem("autoApproveSubmissions")==="true");reactExports.useEffect(()=>{localStorage.setItem("autoApproveSubmissions",$)},[$]);const ut=_e=>Array.isArray(_e)?_e:(_e==null?void 0:_e.items)||(_e==null?void 0:_e.data)||(_e==null?void 0:_e.submissions)||[];async function lt(){var xt;const _e=await getJSON("/api/submissions"),ot=ut(_e);if(s(ot),a(et=>new Set([...et].filter(yt=>ot.some(St=>(St._id||St.id)===yt)))),$){const et=ot.filter(yt=>!yt.approved&&!yt.revoked);for(const yt of et){const St=(((xt=yt.plan)==null?void 0:xt.label)||"").toLowerCase();let It=60*60*24;St.includes("week")&&(It=60*60*24*7),St.includes("month")&&(It=60*60*24*30),St.includes("year")&&(It=60*60*24*365),St.includes("day")&&(It=60*60*24),await dt(yt,It,!0)}}}reactExports.useEffect(()=>{(async()=>{try{const _e=await getJSON("/api/submissions/auto-mode");_e!=null&&_e.success&&ct(!!_e.auto)}catch{}await lt()})()},[]),reactExports.useEffect(()=>{(async()=>{try{await postJSON("/api/submissions/auto-mode",{auto:!!$})}catch{}})()},[$]),reactExports.useEffect(()=>{const _e=setInterval(()=>{lt()},7e3);return()=>clearInterval(_e)},[$]),useAccessSync(_e=>{_e&&_e.storageSync&&lt()});async function dt(_e,ot,xt=!1){const et=_e._id||_e.id;try{await postJSON(`/api/submissions/${et}/approve`,{seconds:ot});const yt=_e.context||{},St=yt.id||yt.playlist||yt.subject,It=yt.type,Lt=_e.email||_e.gmail,Ut=Date.now()+ot*1e3;if(Lt&&It&&St){const Ft={feature:It,featureId:St,email:Lt,expiry:Ut,fastUnlock:2e4,message:`🎉 Congratulations ${_e.name||"User"}! Your plan is now active.`};window.dispatchEvent(new CustomEvent("accessUpdated",{detail:Ft})),window.dispatchEvent(new CustomEvent("accessGranted",{detail:Ft}))}s(Ft=>Ft.map(_t=>(_t._id||_t.id)===et?{..._t,approved:!0,revoked:!1,expiry:Ut}:_t))}catch(yt){console.warn("Approve failed, fallback",yt),await delJSON(`/api/submissions/${et}`)}}async function ft(_e){const ot=_e._id||_e.id;try{await postJSON(`/api/submissions/${ot}/revoke`,{})}catch{await delJSON(`/api/submissions/${ot}`)}const xt=_e.context||{},et=xt.id||xt.playlist||xt.subject,yt=xt.type,St=_e.email||_e.gmail;if(St&&yt&&et){const It={feature:yt,featureId:et,email:St};window.dispatchEvent(new CustomEvent("accessUpdated",{detail:It})),window.dispatchEvent(new CustomEvent("accessRevoked",{detail:It}))}s(It=>It.map(Lt=>(Lt._id||Lt.id)===ot?{...Lt,revoked:!0,approved:!1}:Lt))}async function at(_e){const ot=_e._id||_e.id;try{await delJSON(`/api/submissions/${ot}`)}catch(xt){console.warn("Delete failed",xt)}s(xt=>xt.filter(et=>(et._id||et.id)!==ot)),a(xt=>{const et=new Set(xt);return et.delete(ot),et})}async function b(){if(i.size!==0){c(!0);try{const _e=new Set(i),ot=new Map(e.map(xt=>[xt._id||xt.id,xt]));await Promise.all([..._e].map(async xt=>{if(ot.get(xt))try{await delJSON(`/api/submissions/${xt}`)}catch(yt){console.warn("Batch delete failed for",xt,yt)}})),s(xt=>xt.filter(et=>!_e.has(et._id||et.id))),a(new Set)}finally{c(!1)}}}const _=reactExports.useMemo(()=>e.map(_e=>_e._id||_e.id),[e]),it=i.size>0&&i.size===_.length;function nt(_e){a(ot=>{const xt=new Set(ot);return xt.has(_e)?xt.delete(_e):xt.add(_e),xt})}function st(){a(_e=>_e.size===_.length?new Set:new Set(_))}const ht=_e=>{const ot=_e.context||{},xt=(ot.type||_e.type||_e.subjectLabel||"").toLowerCase();let et="—",yt="•";xt.includes("playlist")||xt.includes("video")?(et="Video",yt="🎬"):xt.includes("podcast")?(et="Podcast",yt="🎧"):xt.includes("pdf")||xt.includes("notebook")?(et="Notebook",yt="📓"):xt.includes("article")?(et="Article",yt="📰"):xt&&(et=xt,yt="•");const St=ot.id||ot.playlist||ot.subject||_e.subjectLabel||"";return{label:et,icon:yt,subject:St}},rt=reactExports.useMemo(()=>{let _e=e;if(d==="pending"&&(_e=_e.filter(ot=>!ot.approved&&!ot.revoked)),d==="approved"&&(_e=_e.filter(ot=>ot.approved&&!ot.revoked)),h.trim()){const ot=h.trim().toLowerCase();_e=_e.filter(xt=>{var et;return[xt.name,xt.email,xt.gmail,xt.phone,xt.number,(et=xt.plan)==null?void 0:et.label,xt.planKey].filter(Boolean).some(yt=>String(yt).toLowerCase().includes(ot))})}return _e},[e,d,h]);return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"User Submissions"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["(",e.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-600",children:[i.size," selected"]}),jsxRuntimeExports.jsx("button",{className:"px-3 py-1 rounded border text-red-600 disabled:opacity-50",onClick:b,disabled:o||i.size===0,children:"Delete selected"})]}),jsxRuntimeExports.jsxs("div",{className:"ml-auto flex gap-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{children:"Mode:"}),jsxRuntimeExports.jsxs("select",{value:$?"auto":"manual",onChange:_e=>ct(_e.target.value==="auto"),className:"border rounded p-1 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"manual",children:"Manual"}),jsxRuntimeExports.jsx("option",{value:"auto",children:"Auto Approval"})]})]}),jsxRuntimeExports.jsx("input",{value:h,onChange:_e=>g(_e.target.value),placeholder:"Search…",className:"border rounded p-2 text-sm"}),jsxRuntimeExports.jsxs("select",{value:d,onChange:_e=>j(_e.target.value),className:"border rounded p-2 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"All"}),jsxRuntimeExports.jsx("option",{value:"pending",children:"Pending"}),jsxRuntimeExports.jsx("option",{value:"approved",children:"Approved"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"min-w-full bg-white border border-gray-200 divide-y divide-gray-200 rounded-lg",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-100",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-3 py-2",children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:it,onChange:st})}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2",children:"#"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Content"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Screenshot"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Gmail"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Expiry"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),jsxRuntimeExports.jsxs("tbody",{className:"divide-y divide-gray-200",children:[rt.map((_e,ot)=>{var It;const xt=_e._id||_e.id,{label:et,icon:yt,subject:St}=ht(_e);return jsxRuntimeExports.jsxs("tr",{className:_e.revoked?"bg-red-50":"",children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:i.has(xt),onChange:()=>nt(xt)})}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:ot+1}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-sm",children:_e.name||"-"}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-sm",children:((It=_e.plan)==null?void 0:It.label)||"-"}),jsxRuntimeExports.jsxs("td",{className:"px-3 py-2 text-sm text-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:yt}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 rounded-full bg-gray-100",children:et})]}),St?jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:St}):null]}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:_e.proofUrl?jsxRuntimeExports.jsx("a",{href:absUrl(_e.proofUrl),target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx("img",{src:absUrl(_e.proofUrl),alt:"submission proof",className:"w-20 h-14 object-cover rounded shadow-sm"})}):"—"}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-sm",children:_e.email||_e.gmail||"-"}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-sm",children:new Date(_e.createdAt).toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-sm",children:_e.revoked?"🔒 Revoked":_e.expiry?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-green-600 font-bold",children:"✓"}),jsxRuntimeExports.jsx(AccessTimer,{timeLeftMs:_e.expiry-Date.now()})]}):"—"}),jsxRuntimeExports.jsxs("td",{className:"px-3 py-2 text-sm flex gap-2",children:[$?jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Auto mode active"}):jsxRuntimeExports.jsx(ManualGrantButton,{sub:_e,onApprove:dt}),jsxRuntimeExports.jsx("button",{className:"px-2 py-1 rounded border text-red-600",onClick:()=>ft(_e),children:"Revoke Access"}),jsxRuntimeExports.jsx("button",{className:"px-2 py-1 rounded border text-gray-700",onClick:()=>at(_e),children:"Delete"})]})]},xt)}),rt.length===0&&jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:10,className:"px-3 py-6 text-center text-gray-400",children:"No submissions"})})]})]})})]})}function ManualGrantButton({sub:e,onApprove:s}){const[i,a]=reactExports.useState(0),[o,c]=reactExports.useState(0),[d,j]=reactExports.useState(0),h=()=>i*86400+o*3600+d*60;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:i,onChange:g=>a(+g.target.value),className:"w-12 px-1 py-0.5 border rounded text-xs",placeholder:"D"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:o,onChange:g=>c(+g.target.value),className:"w-12 px-1 py-0.5 border rounded text-xs",placeholder:"H"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:d,onChange:g=>j(+g.target.value),className:"w-12 px-1 py-0.5 border rounded text-xs",placeholder:"M"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const g=h();g>0&&s(e,g,!1)},className:"px-2 py-1 rounded border bg-green-50 text-xs",children:"Grant"})]})}function AdminDashboard(){return jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 space-y-12",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Dashboard"}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Manage Banners"}),jsxRuntimeExports.jsx(AdminBannerEditor,{})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Manage Articles"}),jsxRuntimeExports.jsx(AdminArticleEditor,{})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Manage Podcasts"}),jsxRuntimeExports.jsx(AdminPodcastEditor,{})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Manage Videos"}),jsxRuntimeExports.jsx(AdminVideoEditor,{})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"PDF Notebook"}),jsxRuntimeExports.jsx(AdminPDFEditor,{})]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"QR & Plans"}),jsxRuntimeExports.jsx(QREditor,{}),"                                           "]}),jsxRuntimeExports.jsxs("section",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-2",children:"User Submissions"}),jsxRuntimeExports.jsx(AdminSubmissions,{})]})]})}const OWNER_KEY$1="LAWOWNER2025";function AdminLogin(){const[e,s]=reactExports.useState(""),[i,a]=reactExports.useState(""),o=useNavigate(),c=d=>{d.preventDefault(),e===OWNER_KEY$1?(localStorage.setItem("ownerKey",OWNER_KEY$1),typeof window<"u"&&console.log("%cAdmin mode enabled","color: green; font-weight: bold;"),o("/admin/dashboard",{replace:!0})):a("Wrong password")};return jsxRuntimeExports.jsxs("main",{className:"max-w-md mx-auto px-4 py-16",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"Admin Login"}),jsxRuntimeExports.jsxs("form",{onSubmit:c,className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"password",className:"w-full border rounded p-2",placeholder:"Enter admin password",value:e,onChange:d=>s(d.target.value)}),i&&jsxRuntimeExports.jsx("div",{className:"text-red-600 text-sm",children:i}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-4 py-2 rounded",children:"Login"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Tip: you can also enter ",jsxRuntimeExports.jsxs("code",{children:["enterAdmin('",OWNER_KEY$1,"')"]})," in the browser console."]})]})}function safeAuthHeaders(){const e=(typeof authHeaders=="function"?authHeaders():{})||{},s={};return e.Authorization&&(s.Authorization=e.Authorization),e.authorization&&(s.authorization=e.authorization),e["X-Owner-Key"]&&(s["X-Owner-Key"]=e["X-Owner-Key"]),e["x-owner-key"]&&(s["x-owner-key"]=e["x-owner-key"]),s}async function uploadSlide({title:e,intro:s,file:i}){const a=new FormData;a.append("title",e||"Untitled"),s!=null&&a.append("intro",s),i&&a.append("image",i);const o=await fetch(`${API_BASE}/api/consultancy`,{method:"POST",headers:safeAuthHeaders(),body:a});if(!o.ok){const c=await o.text().catch(()=>"");throw new Error(`POST /api/consultancy ${o.status}: ${c}`)}return o.json()}async function patchSlide(e,{title:s,intro:i,file:a}){const o=new FormData;s!=null&&o.append("title",s),i!=null&&o.append("intro",i),a&&o.append("image",a);const c=await fetch(`${API_BASE}/api/consultancy/${e}`,{method:"PATCH",headers:safeAuthHeaders(),body:o});if(!c.ok){const d=await c.text().catch(()=>"");throw new Error(`PATCH /api/consultancy/${e} ${c.status}: ${d}`)}return c.json()}function AdminConsultancyEditor(){const[e,s]=reactExports.useState([]),[i,a]=reactExports.useState(!1),[o,c]=reactExports.useState(""),[d,j]=reactExports.useState(""),[h,g]=reactExports.useState(null);async function $(){const at=await getJSON("/api/consultancy");s((at==null?void 0:at.slides)||(at==null?void 0:at.items)||[])}reactExports.useEffect(()=>{$()},[]);async function ct(at){if(at.preventDefault(),!o.trim())return alert("Title is required.");if(!h)return alert("Choose an image first.");a(!0);try{await uploadSlide({title:o.trim(),intro:d.trim(),file:h}),c(""),j(""),g(null),await $()}catch(b){console.error(b),alert("Failed to create slide")}finally{a(!1)}}async function ut(at,b){a(!0);try{await patchSlide(at.id||at._id,{title:b}),await $()}catch(_){console.error(_),alert("Failed to update title")}finally{a(!1)}}async function lt(at,b){a(!0);try{await patchSlide(at.id||at._id,{intro:b}),await $()}catch(_){console.error(_),alert("Failed to update intro")}finally{a(!1)}}async function dt(at,b){if(b){a(!0);try{await patchSlide(at.id||at._id,{file:b}),await $()}catch(_){console.error(_),alert("Failed to replace image")}finally{a(!1)}}}async function ft(at){if(confirm("Delete this slide?")){a(!0);try{await delJSON(`/api/consultancy/${at}`),await $()}catch(b){console.error(b),alert("Failed to delete")}finally{a(!1)}}}return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("header",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Consultancy Slides"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[e.length," total"]})]}),jsxRuntimeExports.jsxs("form",{onSubmit:ct,className:"grid gap-3 border rounded-2xl p-4 bg-white max-w-xl",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Add new slide"}),jsxRuntimeExports.jsx("input",{className:"border rounded p-2",placeholder:"Title (required)",value:o,onChange:at=>c(at.target.value)}),jsxRuntimeExports.jsx("textarea",{value:d,onChange:at=>j(at.target.value),placeholder:"Short intro to show over the image",className:"border rounded p-2 min-h-[80px]"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:at=>{var b;return g(((b=at.target.files)==null?void 0:b[0])||null)}}),jsxRuntimeExports.jsx("button",{className:"bg-black text-white px-4 py-2 rounded w-fit disabled:opacity-50",disabled:i||!h||!o.trim(),children:i?"Saving…":"Create Slide"})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[e.map((at,b)=>jsxRuntimeExports.jsxs("div",{className:"border rounded-2xl p-4 bg-white grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["#",b+1]}),jsxRuntimeExports.jsx("img",{src:at.image?`${API_BASE}${at.image}`:`${API_BASE}${at.imageUrl||""}`,alt:"",className:"w-full max-h-56 object-contain rounded-lg bg-gray-50",loading:"lazy"}),jsxRuntimeExports.jsxs("label",{className:"text-sm inline-flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-1 border rounded",children:"Replace image"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:_=>{var it;return dt(at,((it=_.target.files)==null?void 0:it[0])||null)}})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid content-start gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-600",children:"Title"}),jsxRuntimeExports.jsx(AutoGrowInput,{defaultValue:at.title||"",onSave:_=>ut(at,_)}),jsxRuntimeExports.jsx("label",{className:"text-sm text-gray-600 mt-2",children:"Intro text"}),jsxRuntimeExports.jsx(AutoGrowTextarea,{defaultValue:at.intro||"",onSave:_=>lt(at,_)}),jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx("button",{className:"px-3 py-1.5 rounded border text-red-600",onClick:()=>ft(at.id||at._id),disabled:i,children:"Delete"})}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Created: ",at.createdAt?new Date(at.createdAt).toLocaleString():"—"]})]})]},at.id||at._id)),e.length===0&&jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-sm",children:"No slides yet"})]})]})}function AutoGrowTextarea({defaultValue:e,onSave:s}){const[i,a]=reactExports.useState(e||""),[o,c]=reactExports.useState(!1);reactExports.useEffect(()=>a(e||""),[e]);async function d(){if(!o){c(!0);try{await s(i)}finally{c(!1)}}}return jsxRuntimeExports.jsxs("div",{className:"grid gap-2",children:[jsxRuntimeExports.jsx("textarea",{value:i,onChange:j=>a(j.target.value),className:"border rounded p-2 min-h-[120px]",placeholder:"Write a short, friendly intro…"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:d,className:"px-3 py-1.5 rounded border bg-green-50 text-green-700 disabled:opacity-50",disabled:o,children:o?"Saving…":"Save Intro"}),jsxRuntimeExports.jsx("button",{onClick:()=>a(e||""),className:"px-3 py-1.5 rounded border",type:"button",children:"Reset"})]})]})}function AutoGrowInput({defaultValue:e,onSave:s}){const[i,a]=reactExports.useState(e||""),[o,c]=reactExports.useState(!1);reactExports.useEffect(()=>a(e||""),[e]);async function d(){if(!o){if(!i.trim())return alert("Title cannot be empty.");c(!0);try{await s(i.trim())}finally{c(!1)}}}return jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{value:i,onChange:j=>a(j.target.value),className:"border rounded p-2 flex-1",placeholder:"Title"}),jsxRuntimeExports.jsx("button",{onClick:d,className:"px-3 py-1.5 rounded border bg-green-50 text-green-700 disabled:opacity-50",disabled:o,children:o?"Saving…":"Save"})]})}function highlightGrammarHTML(e,s){if(!(s!=null&&s.length))return e;let i=e;return s.forEach(a=>{const{error:o,suggestion:c}=a,d=new RegExp(o,"gi");i=i.replace(d,`<mark class="bg-indigo-100 text-indigo-800 rounded px-1" title="Suggestion: ${c}">${o}</mark>`)}),i}function highlightAIHTML(e,s){var a;return(a=s==null?void 0:s.sentences)!=null&&a.length?e.split(new RegExp("(?<=[.!?])\\s+")).map((o,c)=>{const d=s.sentences.find(j=>j.i===c);return d!=null&&d.isAI?`<mark class="bg-purple-100 text-purple-800 px-1 rounded" title="AI score: ${d.score}">${o}</mark>`:o}).join(" "):e}function Plagiarism(){const[e,s]=reactExports.useState(""),[i,a]=reactExports.useState(null),[o,c]=reactExports.useState(!1),d=reactExports.useRef(),j=async()=>{if(e.trim()){c(!0);try{const $=await getJSON("/api/plagiarism/check",{text:e});a($)}catch($){console.error("Error:",$)}finally{c(!1)}}},h=i!=null&&i.grammar?highlightGrammarHTML(e,i.grammar):null,g=i!=null&&i.ai?highlightAIHTML(e,i.ai):null;return jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"Plagiarism / AI / Grammar Check"}),jsxRuntimeExports.jsx("textarea",{ref:d,rows:10,className:"w-full border border-gray-300 rounded-md p-3 shadow-sm",placeholder:"Paste or write text here...",value:e,onChange:$=>s($.target.value)}),jsxRuntimeExports.jsx("button",{onClick:j,disabled:o,className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition",children:o?"Analyzing...":"Check Text"}),i&&jsxRuntimeExports.jsxs("div",{className:"space-y-8",children:[h&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Grammar Mistakes"}),jsxRuntimeExports.jsx("div",{className:"prose prose-sm bg-red-50 p-3 border border-red-300 rounded",dangerouslySetInnerHTML:{__html:h}})]}),g&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-blue-600 mb-2",children:"AI-Generated Detection"}),jsxRuntimeExports.jsx("div",{className:"prose prose-sm bg-blue-50 p-3 border border-blue-300 rounded",dangerouslySetInnerHTML:{__html:g}})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Gauge,{title:"Plagiarism Score",value:i.score,color:"red"}),jsxRuntimeExports.jsx(Gauge,{title:"AI Score",value:i.aiScore,color:"blue"})]})]})]})}function Gauge({title:e,value:s,color:i}){const a=Math.max(0,Math.min(100,+s||0)),o={red:{text:"text-red-600",bar:"bg-red-500"},blue:{text:"text-blue-600",bar:"bg-blue-500"},green:{text:"text-green-600",bar:"bg-green-500"}},c=o[i]||o.red;return jsxRuntimeExports.jsxs("div",{className:"rounded-xl border p-4 shadow text-center",children:[jsxRuntimeExports.jsxs("div",{className:`${c.text} font-bold text-2xl`,children:[a,"%"]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 mt-1",children:e}),jsxRuntimeExports.jsx("div",{className:"relative w-full h-2 bg-gray-200 rounded-full mt-2",children:jsxRuntimeExports.jsx("div",{className:`absolute top-0 left-0 h-2 rounded-full ${c.bar}`,style:{width:`${a}%`}})})]})}function loadIdentity(){try{return JSON.parse(localStorage.getItem("ln_identity")||"null")}catch{return null}}function saveIdentity(e){localStorage.setItem("ln_identity",JSON.stringify(e))}function ScholarSpace(){var xt;const[e,s]=reactExports.useState(loadIdentity()),[i,a]=reactExports.useState([]),[o,c]=reactExports.useState(null),[d,j]=reactExports.useState(null),[h,g]=reactExports.useState([]),[$,ct]=reactExports.useState(null),[ut,lt]=reactExports.useState(!1),[dt,ft]=reactExports.useState(!1),[at,b]=reactExports.useState(""),[_,it]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{const et=await fetchJSON(`${API_BASE}/api/scholar/groups`);et.success&&a(et.groups)})()},[]),reactExports.useEffect(()=>{!o||!e||(async()=>{const et=await fetchJSON(`${API_BASE}/api/scholar/groups/${o._id}?email=${encodeURIComponent(e.email)}`);et.success&&j(et.membership||null);const yt=`${API_BASE}/api/scholar/groups/${o._id}/messages${$?`?since=${encodeURIComponent($)}`:""}`,St=await fetchJSON(yt);St.success&&(g(It=>$?[...It,...St.messages]:St.messages),St.messages.length&&ct(St.messages[St.messages.length-1].createdAt))})()},[o,e]),reactExports.useEffect(()=>{if(!o||!e)return;const et=setInterval(async()=>{const yt=`${API_BASE}/api/scholar/groups/${o._id}/messages${$?`?since=${encodeURIComponent($)}`:""}`,St=await fetchJSON(yt);St.success&&St.messages.length&&(g(It=>[...It,...St.messages]),ct(St.messages[St.messages.length-1].createdAt))},3e3);return()=>clearInterval(et)},[o,e,$]);const nt=!!d,st=((xt=e==null?void 0:e.email)==null?void 0:xt.toLowerCase())||"";async function ht(et){et.preventDefault();const yt=new FormData(et.currentTarget),St=Object.fromEntries(yt.entries());lt(!0);try{const It=await fetchJSON(`${API_BASE}/api/scholar/groups`,{method:"POST",headers:{"Content-Type":"application/json",...authHeaders()},body:JSON.stringify(St)});It.success?(a(Lt=>[It.group,...Lt]),c(It.group)):alert(It.message||"Create failed")}finally{lt(!1)}}async function rt(){if(!e)return alert("Please set your name & email first.");if(!at)return alert("Enter invite code");lt(!0);try{const et=await postJSON(`${API_BASE}/api/scholar/groups/${o._id}/join`,{name:e.name,email:e.email,inviteCode:at.toUpperCase()});et.success?(j(et.membership),ft(!1)):alert(et.message||"Join failed")}finally{lt(!1)}}async function _e(et){if(et.preventDefault(),!e||!nt)return alert("Join the group first.");const yt=new FormData;yt.append("authorEmail",e.email),yt.append("authorName",e.name),yt.append("text",et.currentTarget.text.value||""),[..._].forEach(St=>yt.append("files",St)),lt(!0);try{const It=await(await fetch(`${API_BASE}/api/scholar/groups/${o._id}/messages`,{method:"POST",body:yt})).json();It.success?(g(Lt=>[...Lt,It.message]),ct(It.message.createdAt),et.currentTarget.reset(),it([])):alert(It.message||"Send failed")}finally{lt(!1)}}function ot(){const et=prompt("Your name?");if(!et)return;const yt=prompt("Your email?");if(!yt)return;const St={name:et,email:yt.toLowerCase()};saveIdentity(St),s(St)}return jsxRuntimeExports.jsx("main",{className:"min-h-screen bg-[#f8fafc]",children:jsxRuntimeExports.jsxs("section",{className:"max-w-6xl mx-auto px-4 py-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsxs("aside",{className:"md:col-span-1 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"Scholar Space"}),e?jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600",children:["Hi, ",jsxRuntimeExports.jsx("b",{children:e.name})]}):jsxRuntimeExports.jsx("button",{onClick:ot,className:"px-3 py-1 text-sm rounded bg-black text-white",children:"Set Profile"})]}),jsxRuntimeExports.jsx(IfOwnerOnly,{children:jsxRuntimeExports.jsxs("form",{onSubmit:ht,className:"p-3 border rounded-lg bg-white space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:"Create Group (Admin)"}),jsxRuntimeExports.jsx("input",{name:"name",required:!0,placeholder:"Group name",className:"w-full rounded border px-3 py-2"}),jsxRuntimeExports.jsx("textarea",{name:"description",placeholder:"Description (optional)",className:"w-full rounded border px-3 py-2"}),jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-600",children:"Deadline (optional)"}),jsxRuntimeExports.jsx("input",{name:"deadlineAt",type:"datetime-local",className:"w-full rounded border px-3 py-2"}),jsxRuntimeExports.jsx("button",{disabled:ut,className:"px-3 py-2 rounded bg-blue-600 text-white w-full",children:ut?"Creating...":"Create"})]})}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg bg-white",children:[jsxRuntimeExports.jsx("div",{className:"px-3 py-2 text-sm font-medium border-b",children:"Groups"}),jsxRuntimeExports.jsxs("ul",{className:"max-h-[50vh] overflow-auto divide-y",children:[i.map(et=>jsxRuntimeExports.jsx("li",{className:`px-3 py-2 cursor-pointer hover:bg-gray-50 ${(o==null?void 0:o._id)===et._id?"bg-gray-100":""}`,onClick:()=>{c(et),g([]),j(null),ct(null)},children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:et.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:et.description||"—"})]}),et.deadlineAt&&jsxRuntimeExports.jsx(DeadlineBadge,{deadline:et.deadlineAt})]})},et._id)),!i.length&&jsxRuntimeExports.jsx("li",{className:"px-3 py-4 text-sm text-gray-500",children:"No groups yet."})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"md:col-span-2",children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-lg bg-white h-[70vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-semibold",children:o?o.name:"Pick a group"}),(o==null?void 0:o.description)&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:o.description})]}),(o==null?void 0:o.deadlineAt)&&jsxRuntimeExports.jsx(DeadlineBadge,{big:!0,deadline:o.deadlineAt})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto px-4 py-3 space-y-3",id:"chat-scroll",children:[!o&&jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Select a group to start."}),o&&!nt&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700",children:["You’re not a member of ",jsxRuntimeExports.jsx("b",{children:o.name}),". Ask for the invite code and join.",jsxRuntimeExports.jsxs("div",{className:"mt-3 flex gap-2",children:[jsxRuntimeExports.jsx("input",{value:at,onChange:et=>b(et.target.value),placeholder:"Invite code",className:"rounded border px-3 py-2"}),jsxRuntimeExports.jsx("button",{onClick:rt,disabled:ut,className:"px-3 py-2 rounded bg-emerald-600 text-white",children:ut?"Joining...":"Join"})]})]}),o&&nt&&h.map(et=>jsxRuntimeExports.jsx(MessageBubble,{me:et.authorEmail.toLowerCase()===st,msg:et},et._id))]}),jsxRuntimeExports.jsxs("form",{onSubmit:_e,className:"px-3 py-2 border-t flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{name:"text",placeholder:nt?"Write a message…":"Join to message",disabled:!nt||ut,className:"flex-1 rounded border px-3 py-2"}),jsxRuntimeExports.jsxs("label",{className:"text-sm px-2 py-2 rounded border cursor-pointer",children:["Attach",jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",multiple:!0,onChange:et=>it(et.target.files)})]}),jsxRuntimeExports.jsx("button",{className:"px-4 py-2 rounded bg-black text-white",disabled:!nt||ut,children:"Send"})]})]}),!!_.length&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Attachments: ",[..._].map(et=>et.name).join(", ")]})]})]})})}function MessageBubble({me:e,msg:s}){const i=reactExports.useMemo(()=>new Date(s.createdAt).toLocaleTimeString(),[s.createdAt]);return jsxRuntimeExports.jsx("div",{className:`flex ${e?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{className:`max-w-[75%] rounded-2xl px-3 py-2 shadow
        ${e?"bg-black text-white rounded-br-sm":"bg-gray-100 text-gray-900 rounded-bl-sm"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-[11px] opacity-70",children:e?"You":s.authorName}),!!s.text&&jsxRuntimeExports.jsx("div",{className:"whitespace-pre-wrap text-sm",children:s.text}),!!(s.attachments||[]).length&&jsxRuntimeExports.jsx("div",{className:"mt-1 flex flex-col gap-1",children:s.attachments.map((a,o)=>jsxRuntimeExports.jsxs("a",{href:a.url,target:"_blank",rel:"noreferrer",className:"underline text-xs break-all",children:[a.filename," (",Math.round(a.size/1024)," KB)"]},o))}),jsxRuntimeExports.jsx("div",{className:`text-[10px] mt-1 ${e?"text-gray-300":"text-gray-500"}`,children:i})]})})}function DeadlineBadge({deadline:e,big:s=!1}){const[i,a]=reactExports.useState(Date.now());reactExports.useEffect(()=>{const $=setInterval(()=>a(Date.now()),1e3);return()=>clearInterval($)},[]);const o=new Date(e).getTime(),c=Math.max(0,o-i),d=Math.floor(c/864e5),j=Math.floor(c%864e5/36e5),h=Math.floor(c%36e5/6e4),g=c<=0?"Deadline passed":`${d}d ${j}h ${h}m left`;return jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded ${s?"text-sm":"text-xs"} 
      ${c<=0?"bg-red-100 text-red-700":"bg-amber-100 text-amber-800"}`,children:["⏳ ",g]})}function ScholarPage(){return jsxRuntimeExports.jsx(ScholarSpace,{})}function NotFound(){return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-6xl font-extrabold text-[#1e293b] mb-4",children:"404"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Oops! The page you’re looking for doesn’t exist."}),jsxRuntimeExports.jsx("a",{href:"/",className:"px-6 py-3 rounded-lg bg-[#0b1220] text-white shadow-lg hover:bg-[#1e293b] transition",children:"Go Back Home"})]})}function App(){return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-[#f8fafc] to-[#e6edf5] text-[#0b1220] min-h-screen font-inter antialiased",children:[jsxRuntimeExports.jsx("nav",{className:"bg-white/70 backdrop-blur-md shadow-md sticky top-0 z-50",children:jsxRuntimeExports.jsx(Navbar,{})}),jsxRuntimeExports.jsx("div",{className:"animate-fadeIn",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(HomePage,{})}),jsxRuntimeExports.jsx(Route,{path:"/articles",element:jsxRuntimeExports.jsx(ArticlesPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/news",element:jsxRuntimeExports.jsx(NewsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/videos",element:jsxRuntimeExports.jsx(VideosPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/podcasts",element:jsxRuntimeExports.jsx(PodcastsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/notebook",element:jsxRuntimeExports.jsx(NotebookPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/scholar",element:jsxRuntimeExports.jsx(ScholarPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/plagiarism",element:jsxRuntimeExports.jsx(Plagiarism,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/login",element:jsxRuntimeExports.jsx(AdminLogin,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/dashboard",element:jsxRuntimeExports.jsx(AdminRoute,{children:jsxRuntimeExports.jsx(AdminDashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/admin/consultancy",element:jsxRuntimeExports.jsx(AdminRoute,{children:jsxRuntimeExports.jsx(AdminConsultancyEditor,{})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})]})})}const OWNER_KEY="LAWOWNER2025";window.enterAdmin=e=>{e===OWNER_KEY?(localStorage.setItem("ownerKey",OWNER_KEY),console.log("%cAdmin mode enabled","color: green; font-weight: bold;"),location.reload()):console.log("%cWrong password","color: red;")};window.exitAdmin=()=>{localStorage.removeItem("ownerKey"),console.log("%cAdmin mode disabled","color: orange;"),location.reload()};localStorage.getItem("ownerKey")||console.log("%cTip:","color:#0ea5e9;font-weight:bold;",`Run enterAdmin('${OWNER_KEY}') in the console to enable Admin UI.`);createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
